!function(n){function e(e){for(var r,a,s=e[0],l=e[1],u=e[2],f=0,d=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(n[r]=l[r]);for(c&&c(e);d.length;)d.shift()();return o.push.apply(o,u||[]),t()}function t(){for(var n,e=0;e<o.length;e++){for(var t=o[e],r=!0,s=1;s<t.length;s++){var l=t[s];0!==i[l]&&(r=!1)}r&&(o.splice(e--,1),n=a(a.s=t[0]))}return n}var r={},i={141:0},o=[];function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=r,a.d=function(n,e,t){a.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,e){if(1&e&&(n=a(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)a.d(t,r,function(e){return n[e]}.bind(null,r));return t},a.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(e,"a",e),e},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a.p="/dist/";var s=window.coreJsonp=window.coreJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var c=l;o.push([1756,1,2]),t()}([,,function(n,e,t){"use strict";t.d(e,"e",(function(){return a})),t.d(e,"c",(function(){return s}));var r=t(98),i=t.n(r),o=t(95);t.d(e,"d",(function(){return o.Singular})),t.d(e,"b",(function(){return o.Plural})),t.d(e,"a",(function(){return o.Param}));const{Translate:a,PluralTranslate:s}=(n=>{const e=new i.a({locale_data:window.REACT_TRANSLATIONS,domain:n});return Object(o.makeComponents)(e)})("indico")},function(n,e){n.exports=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}},function(n,e,t){"use strict";function r(){return(r=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}t.d(e,"a",(function(){return r}))},,function(n,e){function t(){return n.exports=t=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},t.apply(this,arguments)}n.exports=t},function(n,e,t){var r=t(339);n.exports=function(n,e){if(null==n)return{};var t,i,o=r(n,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)t=a[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}},function(n,e,t){"use strict";t.d(e,"l",(function(){return m})),t.d(e,"b",(function(){return tn})),t.d(e,"c",(function(){return on})),t.d(e,"d",(function(){return Z})),t.d(e,"e",(function(){return nn})),t.d(e,"f",(function(){return rn})),t.d(e,"g",(function(){return an})),t.d(e,"h",(function(){return en})),t.d(e,"o",(function(){return Y})),t.d(e,"p",(function(){return V})),t.d(e,"n",(function(){return N})),t.d(e,"j",(function(){return M})),t.d(e,"k",(function(){return ln})),t.d(e,"a",(function(){return cn})),t.d(e,"m",(function(){return un})),t.d(e,"i",(function(){return hn}));var r=t(52),i=t.n(r),o=t(31),a=t.n(o),s=t(286),l=t.n(s),u=t(132),c=t.n(u),f=t(59),d=t.n(f),h=t(29);function p(n){return d()(n)&&(n=Object.values(n)),c()(l()(n.map(n=>d()(n)?Object.values(n):n)))}function m(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=a()(n,"response.data.webargs_errors");return r&&422===n.response.status?Array.isArray(r)?{[h.b]:r.join(" / ")}:i()(Object.entries(r).map(n=>{let[e,r]=n;return[t[e]||e,p(r).join(" / ")]})):{[h.b]:e||n.message}}var v=t(6),g=t.n(v),b=t(7),y=t.n(b),w=t(24),x=t.n(w),k=t(1),T=t.n(k),S=t(0),_=t.n(S),D=t(21),I=t(481),E=t(970),O=t(1029),C=t(1568),A=t(1426),L=t(312),j=t(2159),P=t(2161),$=t(185),B=t(287),F=t.n(B);var M={trim:function(n){return"string"==typeof n?n.trim():n},slugify:function(n){return"string"==typeof n?F()(n,{lower:!0}):n}};var N={number:function(n){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"==typeof n)return n;if("string"==typeof n){if(""===n)return null;if(!isNaN(+n)&&(e||"."!==n.slice(-1)))return+n}return n},nullIfEmpty:function(n){return""===n?null:n}},R=t(2);const H=Symbol("STOP_VALIDATION");function U(){return n=>{if("number"!=typeof n&&("string"!=typeof n||Number.isNaN(+n)))return R.e.string("Value must be a number")}}function W(n){return q(U(),e=>{const t=parseInt(e,10);if(""!==e&&t<n)return R.e.string("Value must be at least {minValue}",{minValue:n})})}function z(n){return q(U(),e=>{const t=parseInt(e,10);if(""!==e&&t>n)return R.e.string("Value must be at most {maxValue}",{maxValue:n})})}function q(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return n=>{for(const t of e){const e=t(n);if(e===H)break;if(e)return e}}}var V={number:U,min:W,max:z,range:function(n,e){return q(W(n),z(e))},minLength:function(n){return e=>{if(e.length<n)return R.e.string("Value must be at least {length} chars",{length:n})}},url:function(n){if(!n.match(/https?:\/\/.+/))return R.e.string("Please provide a valid URL")},required:function(n){const e=R.e.string("This field is required.");return Array.isArray(n)?0!==n.length?void 0:e:n||0===n?void 0:e},optional:function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?q(n(),e):n=>{if(null==n)return H}},chain:q,dates:function(){return n=>{if(!n||!Object.values(n).every(n=>n))return R.e.string("Please choose a valid period.")}}};t(485);const G=n=>n,Y=(n,e)=>x()((n||[]).sort(),(e||[]).sort());function X(n){let{input:{value:e},label:t,placeholder:r,required:i,children:o,disabled:a,componentLabel:s,defaultValue:l,fieldProps:u,hideValidationError:c,hideErrorWhileActive:f,loaderWhileValidating:d,undefinedValue:h,meta:{touched:p,error:m,submitError:v,submitting:b,dirty:w,dirtySinceLastSubmit:x,active:k,validating:T},as:S,getValue:D}=n,I=y()(n.input,["value"]),C=y()(n,["input","label","placeholder","required","children","disabled","componentLabel","defaultValue","fieldProps","hideValidationError","hideErrorWhileActive","loaderWhileValidating","undefinedValue","meta","as","getValue"]),A=null;p&&m&&(w||i)?c||(A=m):!v||x||b||(A=v);const L=!(!A||f&&k);void 0===I.checked&&delete I.checked,d&&(I.loading=T);const j=_.a.createElement(E.a.Field,g()({required:i,disabled:a||b,error:!!A,defaultValue:l},u),t&&_.a.createElement("label",null,t),_.a.createElement(S,g()({},I,{value:void 0===e?h:e},C,{onChange:function(){D?I.onChange(D(...arguments)):I.onChange(...arguments)},label:s,placeholder:r,required:i,disabled:a||b})),o);return _.a.createElement(O.a,{trigger:j,position:"left center",open:L&&void 0,on:["hover","focus"]},_.a.createElement("div",{className:"_-web-client-js-react-forms-___fields-module__field-error___gD7yj"},A))}function J(n){const{input:e,type:t}=n,r=y()(n,["input","type"]);return _.a.createElement(X,g()({input:e},r,{as:C.a,getValue:(n,e)=>{let{value:t}=e;return t}}))}function K(n){const{input:{value:e},type:t}=n,r=y()(n.input,["value"]),i=y()(n,["input","type"]);return _.a.createElement(X,g()({input:r},i,{as:A.a,getValue:(n,t)=>{let{checked:r}=t;return{target:{type:"checkbox",value:e,checked:r}}}}))}function Q(n){const{input:e,required:t,clearable:r,isMultiple:i,width:o}=n,a=y()(n,["input","required","clearable","isMultiple","width"]),s=null!==o?{width:o}:{};return _.a.createElement(X,g()({input:e},a,{required:t,as:L.a,clearable:void 0===r?!t&&!i:r,multiple:i,undefinedValue:i?[]:null,selectOnBlur:!1,fieldProps:s,getValue:(n,e)=>{let{value:t}=e;return t}}))}function Z(n){let{name:e,adapter:t,component:r,description:i,required:o,onChange:a}=n,s=y()(n,["name","adapter","component","description","required","onChange"]);const l={};return i&&(l.children=_.a.createElement("p",{className:"_-web-client-js-react-forms-___fields-module__field-description___2FFlB"},i)),o&&(l.validate=V.required,l.required=!0),l.validate&&s.validate&&(l.validate=V.chain(l.validate,s.validate),delete s.validate),_.a.createElement(_.a.Fragment,null,_.a.createElement(D.a,g()({name:e,component:t,as:r},l,s)),a&&_.a.createElement(I.a,{name:e},(n,e)=>{x()(n,e)||a(n,e)}))}function nn(n){let{name:e,label:t,type:r,nullIfEmpty:i,noAutoComplete:o}=n,a=y()(n,["name","label","type","nullIfEmpty","noAutoComplete"]);const s={};return"number"===r?s.parse=N.number:"text"!==r&&"email"!==r||(s.format=M.trim,s.formatOnBlur=!0,s.parse=i?N.nullIfEmpty:G),o&&(s.autoComplete="off"),_.a.createElement(Z,g()({name:e,label:t,component:j.a,loaderWhileValidating:!0,type:r},s,a))}function en(n){let{name:e,label:t,nullIfEmpty:r}=n,i=y()(n,["name","label","nullIfEmpty"]);return _.a.createElement(Z,g()({name:e,label:t,component:P.a,format:M.trim,formatOnBlur:!0,parse:r?N.nullIfEmpty:G},i))}function tn(n){let{name:e,label:t,value:r}=n,i=y()(n,["name","label","value"]);const o={};return void 0!==r&&(o.isEqual=Y),_.a.createElement(Z,g()({name:e,adapter:K,format:n=>n,type:"checkbox",componentLabel:t,value:r},o,i))}function rn(n){let{name:e,label:t}=n,r=y()(n,["name","label"]);return _.a.createElement(Z,g()({name:e,adapter:J,type:"radio",componentLabel:t},r))}function on(n){let{name:e,label:t,multiple:r}=n,i=y()(n,["name","label","multiple"]);const o={};return r&&(o.isEqual=Y),_.a.createElement(Z,g()({name:e,adapter:Q,label:t,format:G,parse:G,isMultiple:r},o,i))}function an(n){let{label:e,form:t,disabledUntilChange:r,activeSubmitButton:i,color:o,onClick:a,circular:s,size:l,icon:u,children:c}=n;const{validating:f,hasValidationErrors:d,pristine:h,submitting:p}=Object(D.f)({subscription:{validating:!0,hasValidationErrors:!0,pristine:!0,submitting:!0}}),m=f||d||r&&h||p;return _.a.createElement(E.a.Field,{disabled:m},_.a.createElement($.a,{type:"submit",form:t,disabled:m,loading:p&&i,primary:null===o,content:e,color:o,onClick:a,circular:s,size:l,icon:u}),c&&c(m))}X.propTypes={disabled:T.a.bool,input:T.a.object.isRequired,required:T.a.bool,hideValidationError:T.a.bool,hideErrorWhileActive:T.a.bool,undefinedValue:T.a.any,label:T.a.string,componentLabel:T.a.oneOfType([T.a.string,T.a.exact({children:T.a.node})]),placeholder:T.a.string,meta:T.a.object.isRequired,as:T.a.elementType.isRequired,children:T.a.node,defaultValue:T.a.any,loaderWhileValidating:T.a.bool,fieldProps:T.a.object,getValue:T.a.func},X.defaultProps={disabled:!1,required:!1,hideValidationError:!1,hideErrorWhileActive:!1,undefinedValue:"",placeholder:void 0,label:null,componentLabel:null,children:null,defaultValue:null,loaderWhileValidating:!1,fieldProps:{},getValue:null},J.propTypes={input:T.a.object.isRequired},K.propTypes={input:T.a.object.isRequired},Q.propTypes={input:T.a.object.isRequired,required:T.a.bool,clearable:T.a.bool,isMultiple:T.a.bool,width:T.a.number},Q.defaultProps={required:!1,clearable:void 0,isMultiple:!1,width:null},Z.propTypes={name:T.a.string.isRequired,adapter:T.a.elementType,component:T.a.elementType,description:T.a.node,required:T.a.bool,onChange:T.a.func},Z.defaultProps={adapter:X,component:void 0,description:null,required:!1,onChange:null},nn.propTypes={name:T.a.string.isRequired,label:T.a.string,type:T.a.oneOf(["text","email","number"]),nullIfEmpty:T.a.bool,noAutoComplete:T.a.bool},nn.defaultProps={label:null,type:"text",nullIfEmpty:!1,noAutoComplete:!1},en.propTypes={name:T.a.string.isRequired,label:T.a.string,nullIfEmpty:T.a.bool},en.defaultProps={label:null,nullIfEmpty:!1},tn.propTypes={name:T.a.string.isRequired,label:T.a.string.isRequired,value:T.a.string},tn.defaultProps={value:void 0},rn.propTypes={name:T.a.string.isRequired,label:T.a.string.isRequired},on.propTypes={name:T.a.string.isRequired,label:T.a.string,multiple:T.a.bool},on.defaultProps={label:null,multiple:!1},an.propTypes={label:T.a.string,form:T.a.string,disabledUntilChange:T.a.bool,activeSubmitButton:T.a.bool,color:T.a.string,onClick:T.a.func,circular:T.a.bool,icon:T.a.string,size:T.a.string,children:T.a.func},an.defaultProps={label:null,form:null,disabledUntilChange:!0,activeSubmitButton:!0,color:null,onClick:null,circular:!1,icon:null,size:null,children:null};var sn=t(9);function ln(n,e){const t=e.getRegisteredFields().filter(n=>!n.includes("["));return i()(t.filter(n=>e.getFieldState(n).dirty).map(e=>[e,n[e]]))}function un(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(422===a()(n,"response.status"))return m(n,null,e);if(418===a()(n,"response.status"))return{[h.b]:n.response.data.message};{const e=Object(sn.a)(n,!0);return{[h.b]:e}}}const cn=n=>{let{when:e,is:t,children:r}=n;return _.a.createElement(D.a,{name:e,subscription:{value:!0},render:n=>{let{input:{value:e}}=n;return e===t?r:null}})};cn.propTypes={when:T.a.string.isRequired,is:T.a.any,children:T.a.node.isRequired},cn.defaultProps={is:!0};var fn=t(204);const dn=n=>{let{active:e,router:t,message:r}=n;return r||(r=R.e.string("Are you sure you want to leave this page without saving?")),Object(S.useEffect)(()=>{if(!e)return;const n=n=>{n.preventDefault(),n.returnValue=r};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}},[e,r]),t?_.a.createElement(fn.a,{when:e,message:r}):null};dn.propTypes={active:T.a.bool.isRequired,router:T.a.bool,message:T.a.string},dn.defaultProps={message:null,router:!0};const hn=n=>{let{router:e,message:t}=n;return _.a.createElement(D.c,{subscription:{dirty:!0}},n=>{let{dirty:r}=n;return _.a.createElement(dn,{active:r,router:e,message:t})})};hn.propTypes={router:T.a.bool,message:T.a.string},hn.defaultProps={message:null,router:!0}},function(n,e,t){"use strict";t.d(e,"b",(function(){return f})),t.d(e,"a",(function(){return d}));var r=t(99),i=t.n(r),o=t(190),a=t.n(o),s=t(124),l=t.n(s),u=t(212),c=t(58);const f=i.a.create({paramsSerializer:n=>l.a.stringify(n,{arrayFormat:"repeat"}),xsrfCookieName:null,xsrfHeaderName:null});function d(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i.a.isCancel(n)){if(n.response&&n.response.data&&n.response.data.error)n=n.response.data.error;else{if(e)throw n;n={title:c.a.gettext("Something went wrong"),message:n.message}}return Object(u.a)(n),n.message}}f.isCancel=i.a.isCancel,f.CancelToken=i.a.CancelToken,f.interceptors.request.use(n=>(a()(n.url)&&(n.headers.common["X-Requested-With"]="XMLHttpRequest",n.headers.common["X-CSRF-Token"]=document.getElementById("csrf-token").getAttribute("content")),n))},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mockFlaskURL=e.default=void 0;var r=c(t(124)),i=c(t(210)),o=c(t(11)),a=c(t(92)),s=c(t(27)),l=c(t(285)),u=c(t(355));function c(n){return n&&n.__esModule?n:{default:n}}function f(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function d(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?f(Object(t),!0).forEach((function(e){h(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function h(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const p=(n,e)=>new Error("Could not build URL for endpoint '".concat(n,"' (").concat(JSON.stringify(e),")")),m={PathConverter:n=>n.split("/").map(encodeURIComponent).join("/")},v=n=>{const[e,t]=(0,a.default)(n)?[[],[]]:(0,u.default)(Object.entries(n));return{names:e,values:t,original:n}},g=(n,e)=>{const t=v(n.defaults||{}),r=(0,i.default)(n.args,t.names);for(let n=0;n<r.length;n++)if(-1===e.names.indexOf(r[n]))return!1;if(0===(0,i.default)(n.args,e.names).length){if(!n.defaults)return!0;for(let n=0;n<t.names.length;n++){const r=t.names[n];if(t.values[n]!==e.original[r])return!1}}return!0},b=(n,e,t)=>{let r=[];const o=n.args.slice();for(const i of n.trace)if(i.isDynamic){const a=(t[n.converters[i.data]]||encodeURIComponent)(e.original[i.data]);if(null===a)return null;r.push(a),o.push(i.name)}else r.push(i.data);r=r.join("");const a=r.indexOf("|");return{url:r.substring(a+1),unprocessed:(0,i.default)(e.names,o)}},y=(n,e)=>{const t=Object.create(null);return Object.entries(e).forEach(r=>{let[i,a]=r;if(""!==a){if(null==a&&(a=""+a),(0,s.default)(a)&&!(0,o.default)(a))throw p(n,e);t[i]=a}}),t};var w=function(n){let e,t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};u=d({},m,{},u),o=y(n.endpoint,o);const c=v(o);for(const r of n.rules)if(g(r,c)){const n=b(r,c,u);if(null===n)continue;t=n.url,e=(0,l.default)(o,n.unprocessed);break}if(!t)throw p(n.endpoint,o);return t=i.replace(/\/$/,"")+t,(0,a.default)(e)||(t+="?"+r.default.stringify(e,{arrayFormat:"repeat"})),s&&(t+="#"+s.replace(/^#/,"")),t};e.default=w;e.mockFlaskURL=function(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=Object.entries(e).map(n=>{let[e,t]=n;return"".concat(e,"=").concat(t)}).sort().join("/"),i=["flask://",n];return r&&(i.push("/"),i.push(r)),t&&i.push("#"+t),i.join("")}},function(n,e){var t=Array.isArray;n.exports=t},,,,,,,function(n,e,t){"use strict";function r(n){var e,t,i="";if("string"==typeof n||"number"==typeof n)i+=n;else if("object"==typeof n)if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=r(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}e.a=function(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=r(n))&&(i&&(i+=" "),i+=e);return i}},,function(n,e,t){"use strict";function r(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}t.d(e,"a",(function(){return r}))},,function(n,e,t){var r=t(97),i=t(554),o=t(337),a=t(305),s=t(471),l=function(n,e,t){var u,c,f,d,h=n&l.F,p=n&l.G,m=n&l.S,v=n&l.P,g=n&l.B,b=p?r:m?r[e]||(r[e]={}):(r[e]||{}).prototype,y=p?i:i[e]||(i[e]={}),w=y.prototype||(y.prototype={});for(u in p&&(t=e),t)f=((c=!h&&b&&void 0!==b[u])?b:t)[u],d=g&&c?s(f,r):v&&"function"==typeof f?s(Function.call,f):f,b&&a(b,u,f,n&l.U),y[u]!=f&&o(y,u,d),v&&w[u]!=f&&(w[u]=f)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,n.exports=l},,function(n,e,t){var r=t(165);n.exports=function(n,e){return r(n,e)}},function(n,e,t){var r=t(216),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();n.exports=o},,function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){"use strict";t.d(e,"c",(function(){return b})),t.d(e,"a",(function(){return y})),t.d(e,"d",(function(){return w})),t.d(e,"e",(function(){return x})),t.d(e,"b",(function(){return k}));var r=t(3),i=t.n(r),o=t(69),a=t.n(o),s=t(31),l=t.n(s),u=t(33),c=t(482),f=t(483),d=t(29),h=t(8),p=t(9);function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function v(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach((function(e){i()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function g(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];const r=e.map(n=>"function"==typeof n?n:Object(u.combineReducers)(n));return(n,e)=>r.reduce((n,t)=>t(n,e),n)}function b(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n=>n;const a=[c.a,...r],s=Object(f.composeWithDevTools)({name:"Indico:"+n});return Object(u.createStore)(o(g(v({staticData:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n},_overrides:function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n}},e),...i)),t,s(Object(u.applyMiddleware)(...a)))}const y={NOT_STARTED:"not_started",STARTED:"started",SUCCESS:"success",ERROR:"error"};function w(n,e,t){const r={state:y.NOT_STARTED,error:null,reloading:!1};return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case n:return v(v({},i),{},{state:y.STARTED,error:null,reloading:i.state===y.SUCCESS});case e:return v(v({},i),{},{state:y.SUCCESS,error:null,reloading:!1});case t:return v(v({},i),{},{state:y.ERROR,error:o.error,reloading:!1});default:return i}}}function x(n,e,t,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return async o=>{let a;T(o,e);try{a=await n()}catch(n){if(422===l()(n,"response.status")){const e=Object(h.l)(n,null,i);return T(o,r,{error:e}),{data:null,error:e}}if(418===l()(n,"response.status"))return T(o,r,{error:{[d.b]:n.response.data.message}}),{data:null,error:{[d.b]:n.response.data.message}};{const e=Object(p.a)(n,!0);return T(o,r,{error:{[d.b]:e}}),{data:null,error:{[d.b]:e}}}}const{data:s}=a;return T(o,t,{data:s}),{data:s,error:null}}}function k(n,e,t,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n=>n;return async o=>{let a;e&&T(o,e);try{a=await n()}catch(n){if(418===l()(n,"response.status"))return r&&T(o,r,{error:n.response.data}),{data:null,error:n.response.data};{const e=Object(p.a)(n,!0);return r&&T(o,r,{error:e}),{data:null,error:e}}}const s=i(a.data);return T(o,t,{data:s}),{data:s,error:null}}}function T(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(e)?e.forEach(e=>{n(a()(e)?e(t):v({type:e},t))}):e&&n(a()(e)?e(t):v({type:e},t))}},function(n,e,t){"use strict";t.d(e,"a",(function(){return d})),t.d(e,"b",(function(){return f})),t.d(e,"c",(function(){return O})),t.d(e,"d",(function(){return p})),t.d(e,"e",(function(){return y})),t.d(e,"f",(function(){return l})),t.d(e,"g",(function(){return S}));var r=t(4),i=t(67),o={},a=/[.[\]]+/,s=function(n){if(null==n||!n.length)return[];if("string"!=typeof n)throw new Error("toPath() expects a string");return null==o[n]&&(o[n]=n.split(a).filter(Boolean)),o[n]},l=function(n,e){for(var t=s(e),r=n,i=0;i<t.length;i++){var o=t[i];if(null==r||"object"!=typeof r||Array.isArray(r)&&isNaN(o))return;r=r[o]}return r};function u(n){var e=function(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var r=t.call(n,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:String(e)}var c=function(n,e,t,o){if(void 0===o&&(o=!1),null==n)throw new Error("Cannot call setIn() with "+String(n)+" state");if(null==e)throw new Error("Cannot call setIn() with "+String(e)+" key");return function n(e,t,o,a,s){if(t>=o.length)return a;var l=o[t];if(isNaN(l)){var c;if(null==e){var f,d=n(void 0,t+1,o,a,s);return void 0===d?void 0:((f={})[l]=d,f)}if(Array.isArray(e))throw new Error("Cannot set a non-numeric property on an array");var h=n(e[l],t+1,o,a,s);if(void 0===h){var p=Object.keys(e).length;if(void 0===e[l]&&0===p)return;return void 0!==e[l]&&p<=1?isNaN(o[t-1])||s?void 0:{}:(e[l],Object(i.a)(e,[l].map(u)))}return Object(r.a)({},e,((c={})[l]=h,c))}var m=Number(l);if(null==e){var v=n(void 0,t+1,o,a,s);if(void 0===v)return;var g=[];return g[m]=v,g}if(!Array.isArray(e))throw new Error("Cannot set a numeric property on an object");var b=n(e[m],t+1,o,a,s),y=[].concat(e);if(s&&void 0===b){if(y.splice(m,1),0===y.length)return}else y[m]=b;return y}(n,0,s(e),t,o)},f="FINAL_FORM/form-error",d="FINAL_FORM/array-error";function h(n,e){var t=n.errors,r=n.initialValues,i=n.lastSubmittedValues,o=n.submitErrors,a=n.submitFailed,s=n.submitSucceeded,u=n.submitting,c=n.values,f=e.active,h=e.blur,p=e.change,m=e.data,v=e.focus,g=e.modified,b=e.modifiedSinceLastSubmit,y=e.name,w=e.touched,x=e.validating,k=e.visited,T=l(c,y),S=l(t,y);S&&S[d]&&(S=S[d]);var _=o&&l(o,y),D=r&&l(r,y),I=e.isEqual(D,T),E=!S&&!_;return{active:f,blur:h,change:p,data:m,dirty:!I,dirtySinceLastSubmit:!(!i||e.isEqual(l(i,y),T)),error:S,focus:v,initial:D,invalid:!E,length:Array.isArray(T)?T.length:void 0,modified:g,modifiedSinceLastSubmit:b,name:y,pristine:I,submitError:_,submitFailed:a,submitSucceeded:s,submitting:u,touched:w,valid:E,value:T,visited:k,validating:x}}var p=["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","value","visited","validating"],m=function(n,e){if(n===e)return!0;if("object"!=typeof n||!n||"object"!=typeof e||!e)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(e),o=0;o<t.length;o++){var a=t[o];if(!i(a)||n[a]!==e[a])return!1}return!0};function v(n,e,t,r,i,o){var a=!1;return i.forEach((function(i){r[i]&&(n[i]=e[i],t&&(~o.indexOf(i)?m(e[i],t[i]):e[i]===t[i])||(a=!0))})),a}var g=["data"],b=function(n,e,t,r){var i={blur:n.blur,change:n.change,focus:n.focus,name:n.name};return v(i,n,e,t,p,g)||!e||r?i:void 0},y=["active","dirty","dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitting","submitError","submitErrors","submitFailed","submitSucceeded","touched","valid","validating","values","visited"],w=["touched","visited"];function x(n,e,t,r){var i={};return v(i,n,e,t,y,w)||!e||r?i:void 0}var k=function(n){var e,t;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.length===e.length&&!i.some((function(n,t){return!m(e[t],n)}))||(e=i,t=n.apply(void 0,i)),t}},T=function(n){return!!n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then},S="4.20.1",_=function(n,e){return n===e},D=function n(e){return Object.keys(e).some((function(t){var r=e[t];return!r||"object"!=typeof r||r instanceof Error?void 0!==r:n(r)}))};function I(n,e,t,r,i,o){var a=i(t,r,e,o);return!!a&&(n(a),!0)}function E(n,e,t,r,i){var o=n.entries;Object.keys(o).forEach((function(n){var a=o[Number(n)];if(a){var s=a.subscription,l=a.subscriber,u=a.notified;I(l,s,e,t,r,i||!u)&&(a.notified=!0)}}))}function O(n){if(!n)throw new Error("No config specified");var e=n.debug,t=n.destroyOnUnregister,i=n.keepDirtyOnReinitialize,o=n.initialValues,a=n.mutators,s=n.onSubmit,u=n.validate,p=n.validateOnBlur;if(!s)throw new Error("No onSubmit function specified");var v={subscribers:{index:0,entries:{}},fieldSubscribers:{},fields:{},formState:{dirtySinceLastSubmit:!1,modifiedSinceLastSubmit:!1,errors:{},initialValues:o&&Object(r.a)({},o),invalid:!1,pristine:!0,submitting:!1,submitFailed:!1,submitSucceeded:!1,valid:!0,validating:0,values:o?Object(r.a)({},o):{}},lastFormState:void 0},g=0,y=!1,w=!1,S=0,O={},C=function(n,e,t){var r=t(l(n.formState.values,e));n.formState.values=c(n.formState.values,e,r)||{}},A=function(n,e,t){if(n.fields[e]){var i,o;n.fields=Object(r.a)({},n.fields,((i={})[t]=Object(r.a)({},n.fields[e],{name:t,blur:function(){return U.blur(t)},change:function(n){return U.change(t,n)},focus:function(){return U.focus(t)},lastFieldState:void 0}),i)),delete n.fields[e],n.fieldSubscribers=Object(r.a)({},n.fieldSubscribers,((o={})[t]=n.fieldSubscribers[e],o)),delete n.fieldSubscribers[e];var a=l(n.formState.values,e);n.formState.values=c(n.formState.values,e,void 0)||{},n.formState.values=c(n.formState.values,t,a),delete n.lastFormState}},L=function(n){return function(){if(a){for(var e={formState:v.formState,fields:v.fields,fieldSubscribers:v.fieldSubscribers,lastFormState:v.lastFormState},t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=a[n](r,e,{changeValue:C,getIn:l,renameField:A,resetFieldState:U.resetFieldState,setIn:c,shallowEqual:m});return v.formState=e.formState,v.fields=e.fields,v.fieldSubscribers=e.fieldSubscribers,v.lastFormState=e.lastFormState,$(void 0,(function(){B(),H()})),o}}},j=a?Object.keys(a).reduce((function(n,e){return n[e]=L(e),n}),{}):{},P=function(n){return Object.keys(n.validators).reduce((function(e,t){var r=n.validators[Number(t)]();return r&&e.push(r),e}),[])},$=function(n,e){if(y)return w=!0,void e();var t=v.fields,i=v.formState,o=Object(r.a)({},t),a=Object.keys(o);if(u||a.some((function(n){return P(o[n]).length}))){var s=!1;if(n){var p=o[n];if(p){var g=p.validateFields;g&&(s=!0,a=g.length?g.concat(n):[n])}}var b,x={},k={},_=[].concat(function(n){var e=[];if(u){var t=u(Object(r.a)({},v.formState.values));T(t)?e.push(t.then(n)):n(t)}return e}((function(n){x=n||{}})),a.reduce((function(n,e){return n.concat(function(n,e){var t,r=[],i=P(n);return i.length&&(i.forEach((function(i){var o=i(l(v.formState.values,n.name),v.formState.values,0===i.length||3===i.length?h(v.formState,v.fields[n.name]):void 0);if(o&&T(o)){n.validating=!0;var a=o.then((function(t){n.validating=!1,e(t)}));r.push(a)}else t||(t=o)})),e(t)),r}(t[e],(function(n){k[e]=n})))}),[])),D=_.length>0,I=++S,E=Promise.all(_).then((b=I,function(n){return delete O[b],n}));D&&(O[I]=E);var C=function(){var n=Object(r.a)({},s?i.errors:{},x),e=function(e){a.forEach((function(r){if(t[r]){var i=l(x,r),a=l(n,r),c=P(o[r]).length,f=k[r];e(r,c&&f||u&&i||(i||s?void 0:a))}}))};e((function(e,t){n=c(n,e,t)||{}})),e((function(e,t){if(t&&t[d]){var r=l(n,e),i=[].concat(r);i[d]=t[d],n=c(n,e,i)}})),m(i.errors,n)||(i.errors=n),i.error=x[f]};if(C(),e(),D){v.formState.validating++,e();var A=function(){v.formState.validating--,e()};E.then((function(){S>I||C()})).then(A,A)}}else e()},B=function(n){if(!g){var e=v.fields,t=v.fieldSubscribers,i=v.formState,o=Object(r.a)({},e),a=function(n){var e=o[n],r=h(i,e),a=e.lastFieldState;e.lastFieldState=r;var s=t[n];s&&E(s,r,a,b,void 0===a)};n?a(n):Object.keys(o).forEach(a)}},F=function(){Object.keys(v.fields).forEach((function(n){v.fields[n].touched=!0}))},M=function(){var n=v.fields,e=v.formState,t=v.lastFormState,i=Object(r.a)({},n),o=Object.keys(i),a=!1,s=o.reduce((function(n,t){return!i[t].isEqual(l(e.values,t),l(e.initialValues||{},t))&&(a=!0,n[t]=!0),n}),{}),u=o.reduce((function(n,t){var r=e.lastSubmittedValues||{};return i[t].isEqual(l(e.values,t),l(r,t))||(n[t]=!0),n}),{});e.pristine=!a,e.dirtySinceLastSubmit=!(!e.lastSubmittedValues||!Object.values(u).some((function(n){return n}))),e.modifiedSinceLastSubmit=!(!e.lastSubmittedValues||!Object.keys(i).some((function(n){return i[n].modifiedSinceLastSubmit}))),e.valid=!(e.error||e.submitError||D(e.errors)||e.submitErrors&&D(e.submitErrors));var c=function(n){var e=n.active,t=n.dirtySinceLastSubmit,r=n.modifiedSinceLastSubmit,i=n.error,o=n.errors,a=n.initialValues,s=n.pristine,l=n.submitting,u=n.submitFailed,c=n.submitSucceeded,f=n.submitError,d=n.submitErrors,h=n.valid,p=n.validating,m=n.values;return{active:e,dirty:!s,dirtySinceLastSubmit:t,modifiedSinceLastSubmit:r,error:i,errors:o,hasSubmitErrors:!!(f||d&&D(d)),hasValidationErrors:!(!i&&!D(o)),invalid:!h,initialValues:a,pristine:s,submitting:l,submitFailed:u,submitSucceeded:c,submitError:f,submitErrors:d,valid:h,validating:p>0,values:m}}(e),f=o.reduce((function(n,e){return n.modified[e]=i[e].modified,n.touched[e]=i[e].touched,n.visited[e]=i[e].visited,n}),{modified:{},touched:{},visited:{}}),d=f.modified,h=f.touched,p=f.visited;return c.dirtyFields=t&&m(t.dirtyFields,s)?t.dirtyFields:s,c.dirtyFieldsSinceLastSubmit=t&&m(t.dirtyFieldsSinceLastSubmit,u)?t.dirtyFieldsSinceLastSubmit:u,c.modified=t&&m(t.modified,d)?t.modified:d,c.touched=t&&m(t.touched,h)?t.touched:h,c.visited=t&&m(t.visited,p)?t.visited:p,t&&m(t,c)?t:c},N=!1,R=!1,H=function n(){if(N)R=!0;else{if(N=!0,e&&e(M(),Object.keys(v.fields).reduce((function(n,e){return n[e]=v.fields[e],n}),{})),!g&&!y){var t=v.lastFormState,r=M();r!==t&&(v.lastFormState=r,E(v.subscribers,r,t,x))}N=!1,R&&(R=!1,n())}};$(void 0,(function(){H()}));var U={batch:function(n){g++,n(),g--,B(),H()},blur:function(n){var e=v.fields,t=v.formState,i=e[n];i&&(delete t.active,e[n]=Object(r.a)({},i,{active:!1,touched:!0}),p?$(n,(function(){B(),H()})):(B(),H()))},change:function(n,e){var t=v.fields,i=v.formState;if(l(i.values,n)!==e){C(v,n,(function(){return e}));var o=t[n];o&&(t[n]=Object(r.a)({},o,{modified:!0,modifiedSinceLastSubmit:!!i.lastSubmittedValues})),p?(B(),H()):$(n,(function(){B(),H()}))}},get destroyOnUnregister(){return!!t},set destroyOnUnregister(n){t=n},focus:function(n){var e=v.fields[n];e&&!e.active&&(v.formState.active=n,e.active=!0,e.visited=!0,B(),H())},mutators:j,getFieldState:function(n){var e=v.fields[n];return e&&e.lastFieldState},getRegisteredFields:function(){return Object.keys(v.fields)},getState:function(){return M()},initialize:function(n){var e=v.fields,t=v.formState,o=Object(r.a)({},e),a="function"==typeof n?n(t.values):n;i||(t.values=a);var s=i?Object.keys(o).reduce((function(n,e){return o[e].isEqual(l(t.values,e),l(t.initialValues||{},e))||(n[e]=l(t.values,e)),n}),{}):{};t.initialValues=a,t.values=a,Object.keys(s).forEach((function(n){t.values=c(t.values,n,s[n])})),$(void 0,(function(){B(),H()}))},isValidationPaused:function(){return y},pauseValidation:function(){y=!0},registerField:function(n,e,r,i){void 0===r&&(r={}),v.fieldSubscribers[n]||(v.fieldSubscribers[n]={index:0,entries:{}});var o=v.fieldSubscribers[n].index++;v.fieldSubscribers[n].entries[o]={subscriber:k(e),subscription:r,notified:!1},v.fields[n]||(v.fields[n]={active:!1,afterSubmit:i&&i.afterSubmit,beforeSubmit:i&&i.beforeSubmit,blur:function(){return U.blur(n)},change:function(e){return U.change(n,e)},data:i&&i.data||{},focus:function(){return U.focus(n)},isEqual:i&&i.isEqual||_,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,name:n,touched:!1,valid:!0,validateFields:i&&i.validateFields,validators:{},validating:!1,visited:!1});var a=!1,s=i&&i.silent,u=function(){s?B(n):(H(),B())};return i&&(a=!(!i.getValidator||!i.getValidator()),i.getValidator&&(v.fields[n].validators[o]=i.getValidator),void 0!==i.initialValue&&void 0===l(v.formState.values,n)&&(v.formState.initialValues=c(v.formState.initialValues||{},n,i.initialValue),v.formState.values=c(v.formState.values,n,i.initialValue),$(void 0,u)),void 0!==i.defaultValue&&void 0===i.initialValue&&void 0===l(v.formState.initialValues,n)&&(v.formState.values=c(v.formState.values,n,i.defaultValue))),a?$(void 0,u):u(),function(){var e=!1;v.fields[n]&&(e=!(!v.fields[n].validators[o]||!v.fields[n].validators[o]()),delete v.fields[n].validators[o]),delete v.fieldSubscribers[n].entries[o];var r=!Object.keys(v.fieldSubscribers[n].entries).length;r&&(delete v.fieldSubscribers[n],delete v.fields[n],e&&(v.formState.errors=c(v.formState.errors,n,void 0)||{}),t&&(v.formState.values=c(v.formState.values,n,void 0,!0)||{})),s||(e?$(void 0,(function(){H(),B()})):r&&H())}},reset:function(n){if(void 0===n&&(n=v.formState.initialValues),v.formState.submitting)throw Error("Cannot reset() in onSubmit(), use setTimeout(form.reset)");v.formState.submitFailed=!1,v.formState.submitSucceeded=!1,delete v.formState.submitError,delete v.formState.submitErrors,delete v.formState.lastSubmittedValues,U.initialize(n||{})},resetFieldState:function(n){v.fields[n]=Object(r.a)({},v.fields[n],{active:!1,lastFieldState:void 0,modified:!1,touched:!1,valid:!0,validating:!1,visited:!1}),$(void 0,(function(){B(),H()}))},restart:function(n){void 0===n&&(n=v.formState.initialValues),U.batch((function(){for(var e in v.fields)U.resetFieldState(e),v.fields[e]=Object(r.a)({},v.fields[e],{active:!1,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,touched:!1,valid:!0,validating:!1,visited:!1});U.reset(n)}))},resumeValidation:function(){y=!1,w&&$(void 0,(function(){B(),H()})),w=!1},setConfig:function(n,r){switch(n){case"debug":e=r;break;case"destroyOnUnregister":t=r;break;case"initialValues":U.initialize(r);break;case"keepDirtyOnReinitialize":i=r;break;case"mutators":a=r,r?(Object.keys(j).forEach((function(n){n in r||delete j[n]})),Object.keys(r).forEach((function(n){j[n]=L(n)}))):Object.keys(j).forEach((function(n){delete j[n]}));break;case"onSubmit":s=r;break;case"validate":u=r,$(void 0,(function(){B(),H()}));break;case"validateOnBlur":p=r;break;default:throw new Error("Unrecognised option "+n)}},submit:function(){var n=v.formState;if(!n.submitting){if(delete n.submitErrors,delete n.submitError,n.lastSubmittedValues=Object(r.a)({},n.values),v.formState.error||D(v.formState.errors))return F(),v.formState.submitFailed=!0,H(),void B();var e=Object.keys(O);if(e.length)Promise.all(e.map((function(n){return O[Number(n)]}))).then(U.submit,console.error);else if(!Object.keys(v.fields).some((function(n){return v.fields[n].beforeSubmit&&!1===v.fields[n].beforeSubmit()}))){var t,i=!1,o=function(e){return n.submitting=!1,e&&D(e)?(n.submitFailed=!0,n.submitSucceeded=!1,n.submitErrors=e,n.submitError=e[f],F()):(n.submitFailed=!1,n.submitSucceeded=!0,Object.keys(v.fields).forEach((function(n){return v.fields[n].afterSubmit&&v.fields[n].afterSubmit()}))),H(),B(),i=!0,t&&t(e),e};n.submitting=!0,n.submitFailed=!1,n.submitSucceeded=!1,n.lastSubmittedValues=Object(r.a)({},n.values),Object.keys(v.fields).forEach((function(n){return v.fields[n].modifiedSinceLastSubmit=!1}));var a=s(n.values,U,o);if(!i){if(a&&T(a))return H(),B(),a.then(o,(function(n){throw o(),n}));if(s.length>=3)return H(),B(),new Promise((function(n){t=n}));o(a)}}}},subscribe:function(n,e){if(!n)throw new Error("No callback given.");if(!e)throw new Error("No subscription provided. What values do you want to listen to?");var t=k(n),r=v.subscribers,i=r.index++;r.entries[i]={subscriber:t,subscription:e,notified:!1};var o=M();return I(t,e,o,o,x,!0),function(){delete r.entries[i]}}};return U}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){var r=t(96);n.exports=function(n,e,t){var i=null==n?void 0:r(n,e);return void 0===i?t:i}},function(n,e,t){"use strict";var r=t(275),i=Object.prototype.toString;function o(n){return"[object Array]"===i.call(n)}function a(n){return void 0===n}function s(n){return null!==n&&"object"==typeof n}function l(n){if("[object Object]"!==i.call(n))return!1;var e=Object.getPrototypeOf(n);return null===e||e===Object.prototype}function u(n){return"[object Function]"===i.call(n)}function c(n,e){if(null!=n)if("object"!=typeof n&&(n=[n]),o(n))for(var t=0,r=n.length;t<r;t++)e.call(null,n[t],t,n);else for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.call(null,n[i],i,n)}n.exports={isArray:o,isArrayBuffer:function(n){return"[object ArrayBuffer]"===i.call(n)},isBuffer:function(n){return null!==n&&!a(n)&&null!==n.constructor&&!a(n.constructor)&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)},isFormData:function(n){return"undefined"!=typeof FormData&&n instanceof FormData},isArrayBufferView:function(n){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&n.buffer instanceof ArrayBuffer},isString:function(n){return"string"==typeof n},isNumber:function(n){return"number"==typeof n},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(n){return"[object Date]"===i.call(n)},isFile:function(n){return"[object File]"===i.call(n)},isBlob:function(n){return"[object Blob]"===i.call(n)},isFunction:u,isStream:function(n){return s(n)&&u(n.pipe)},isURLSearchParams:function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function n(){var e={};function t(t,r){l(e[r])&&l(t)?e[r]=n(e[r],t):l(t)?e[r]=n({},t):o(t)?e[r]=t.slice():e[r]=t}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],t);return e},extend:function(n,e,t){return c(e,(function(e,i){n[i]=t&&"function"==typeof e?r(e,t):e})),n},trim:function(n){return n.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(n){return 65279===n.charCodeAt(0)&&(n=n.slice(1)),n}}},,,,function(n,e,t){var r=t(430),i=t(49)(r);n.exports=i},function(n,e){n.exports=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}},function(n,e,t){"use strict";var r=t(147),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=s&&function(){var n={};try{for(var e in s(n,"x",{enumerable:!1,value:n}),n)return!1;return n.x===n}catch(n){return!1}}(),u=function(n,e,t,r){var i;(!(e in n)||"function"==typeof(i=r)&&"[object Function]"===o.call(i)&&r())&&(l?s(n,e,{configurable:!0,enumerable:!1,value:t,writable:!0}):n[e]=t)},c=function(n,e){var t=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)u(n,o[s],e[o[s]],t[o[s]])};c.supportsDescriptors=!!l,n.exports=c},function(n,e,t){"use strict";var r,i=TypeError,o=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new i},a=t(180)(),s=Object.getPrototypeOf||function(n){return n.__proto__},l=r,u=r,c=r,f=r,d="undefined"==typeof Uint8Array?r:s(Uint8Array),h={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":a?s([][Symbol.iterator]()):r,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":r,"$ %AsyncFunction%":u,"$ %AsyncFunctionPrototype%":r,"$ %AsyncGenerator%":r,"$ %AsyncGeneratorFunction%":c,"$ %AsyncGeneratorPrototype%":r,"$ %AsyncIteratorPrototype%":f&&a&&Symbol.asyncIterator?f[Symbol.asyncIterator]():r,"$ %Atomics%":"undefined"==typeof Atomics?r:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?r:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?r:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?r:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?r:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":r,"$ %GeneratorFunction%":l,"$ %GeneratorPrototype%":r,"$ %Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?r:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?r:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?r:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":a?s(s([][Symbol.iterator]())):r,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?r:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&a?s((new Map)[Symbol.iterator]()):r,"$ %MapPrototype%":"undefined"==typeof Map?r:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?r:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?r:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?r:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?r:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?r:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?r:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?r:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?r:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?r:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&a?s((new Set)[Symbol.iterator]()):r,"$ %SetPrototype%":"undefined"==typeof Set?r:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":a?s(""[Symbol.iterator]()):r,"$ %StringPrototype%":String.prototype,"$ %Symbol%":a?Symbol:r,"$ %SymbolPrototype%":a?Symbol.prototype:r,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":o,"$ %TypedArray%":d,"$ %TypedArrayPrototype%":d?d.prototype:r,"$ %TypeError%":i,"$ %TypeErrorPrototype%":i.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?r:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?r:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?r:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?r:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?r:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?r:WeakSet.prototype},p=t(56).call(Function.call,String.prototype.replace),m=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,v=/\\(\\)?/g,g=function(n){var e=[];return p(n,m,(function(n,t,r,i){e[e.length]=r?p(i,v,"$1"):t||n})),e},b=function(n,e){var t="$ "+n;if(!(t in h))throw new SyntaxError("intrinsic "+n+" does not exist!");if(void 0===h[t]&&!e)throw new i("intrinsic "+n+" exists, but is not available. Please file an issue!");return h[t]};n.exports=function(n,e){if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var t=g(n);if(0===t.length)return b(n,e);for(var r=b("%"+t[0]+"%",e),i=1;i<t.length;i+=1)null!=r&&(r=r[t[i]]);return r}},function(n,e,t){var r=t(69),i=t(167);n.exports=function(n){return null!=n&&i(n.length)&&!r(n)}},,,function(n,e,t){"use strict";t.d(e,"a",(function(){return r})),t.d(e,"b",(function(){return i}));var r=function(n,e){"function"!=typeof n?null!==n&&"object"==typeof n&&(n.current=e):n(e)},i=function(n){return null!==n&&"object"==typeof n&&n.hasOwnProperty("current")}},,function(n,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"==typeof window&&(t=window)}n.exports=t},function(n,e,t){var r=t(75),i=t(368),o=t(369),a=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":a&&a in Object(n)?i(n):o(n)}},function(n,e,t){var r=t(432),i=t(435),o=t(65),a=t(11),s=t(437);n.exports=function(n){return"function"==typeof n?n:null==n?o:"object"==typeof n?a(n)?i(n[0],n[1]):r(n):s(n)}},,function(n,e,t){var r=t(65),i=t(218),o=t(162);n.exports=function(n,e){return o(i(n,e,r),n+"")}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}},,function(n,e){n.exports=function(n){for(var e=-1,t=null==n?0:n.length,r={};++e<t;){var i=n[e];r[i[0]]=i[1]}return r}},,,,function(n,e,t){"use strict";var r=t(423);n.exports=Function.prototype.bind||r},function(n,e,t){var r=t(244);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){"use strict";(function(n){t.d(e,"b",(function(){return u})),t.d(e,"a",(function(){return c}));var r=t(173),i=t.n(r),o=t(191),a=t.n(o),s=t(98),l=t.n(s);const u=new l.a({locale_data:n.TRANSLATIONS,domain:"indico"}),c=a()(u.gettext,u);["gettext","ngettext","pgettext","npgettext","translate"].forEach((function(n){c[n]=a()(u[n],u)})),c.domain=i()((function(e){return new l.a({locale_data:n.TRANSLATIONS,domain:e})}))}).call(this,t(45))},function(n,e,t){var r=t(46),i=t(188),o=t(30),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);n.exports=function(n){if(!o(n)||"[object Object]"!=r(n))return!1;var e=i(n);if(null===e)return!0;var t=u.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&l.call(t)==c}},,function(n,e,t){var r=t(239),i=t(168),o=t(40);n.exports=function(n){return o(n)?r(n):i(n)}},function(n,e,t){var r=t(367),i=t(372);n.exports=function(n,e){var t=i(n,e);return r(t)?t:void 0}},,,function(n,e){n.exports=function(n){return n}},function(n,e,t){var r=t(93);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-Infinity?"-0":e}},function(n,e,t){"use strict";function r(n,e){if(null==n)return{};var t,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||(i[t]=n[t]);return i}t.d(e,"a",(function(){return r}))},,function(n,e,t){var r=t(46),i=t(27);n.exports=function(n){if(!i(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},,function(n,e,t){var r=t(195);n.exports=function(n){var e=r(n),t=e%1;return e==e?t?e-t:e:0}},function(n,e,t){var r=t(11),i=t(169),o=t(426),a=t(57);n.exports=function(n,e){return r(n)?n:i(n,e)?[n]:o(a(n))}},function(n,e,t){var r=t(207),i=t(441)(r);n.exports=i},function(n,e,t){var r=t(40),i=t(30);n.exports=function(n){return i(n)&&r(n)}},function(n,e,t){var r=t(25).Symbol;n.exports=r},,,function(n,e,t){var r=t(246),i=t(49),o=t(74),a=i((function(n,e){return o(n)?r(n,e):[]}));n.exports=a},,function(n,e,t){"use strict";var r=t(56);n.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(n,e){n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e,t){var r=t(90);n.exports=function(n){if(!r(n))throw TypeError(n+" is not an object!");return n}},function(n,e,t){var r=t(100);n.exports=function(n){return(null==n?0:n.length)?r(n,1):[]}},,,function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(416),i=t(30),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(n){return i(n)&&a.call(n,"callee")&&!s.call(n,"callee")};n.exports=l},function(n,e,t){var r=t(420),i=t(161),o=t(421),a=t(241),s=t(224),l=t(46),u=t(217),c="[object Map]",f="[object Promise]",d="[object Set]",h="[object WeakMap]",p="[object DataView]",m=u(r),v=u(i),g=u(o),b=u(a),y=u(s),w=l;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=c||o&&w(o.resolve())!=f||a&&w(new a)!=d||s&&w(new s)!=h)&&(w=function(n){var e=l(n),t="[object Object]"==e?n.constructor:void 0,r=t?u(t):"";if(r)switch(r){case m:return p;case v:return c;case g:return f;case b:return d;case y:return h}return e}),n.exports=w},function(n,e){n.exports=function(n){return"object"==typeof n?null!==n:"function"==typeof n}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){var r=t(168),i=t(89),o=t(88),a=t(11),s=t(40),l=t(94),u=t(123),c=t(122),f=Object.prototype.hasOwnProperty;n.exports=function(n){if(null==n)return!0;if(s(n)&&(a(n)||"string"==typeof n||"function"==typeof n.splice||l(n)||c(n)||o(n)))return!n.length;var e=i(n);if("[object Map]"==e||"[object Set]"==e)return!n.size;if(u(n))return!r(n).length;for(var t in n)if(f.call(n,t))return!1;return!0}},function(n,e,t){var r=t(46),i=t(30);n.exports=function(n){return"symbol"==typeof n||i(n)&&"[object Symbol]"==r(n)}},function(n,e,t){(function(n){var r=t(25),i=t(417),o=e&&!e.nodeType&&e,a=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;n.exports=l}).call(this,t(126)(n))},,function(n,e,t){var r=t(72),i=t(66);n.exports=function(n,e){for(var t=0,o=(e=r(e,n)).length;null!=n&&t<o;)n=n[i(e[t++])];return t&&t==o?n:void 0}},function(n,e){var t=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},function(n,e,t){
/**
 * @preserve jed.js https://github.com/SlexAxton/Jed
 */
!function(t,r){var i=Array.prototype,o=Object.prototype,a=i.slice,s=o.hasOwnProperty,l=i.forEach,u={},c={forEach:function(n,e,t){var r,i,o;if(null!==n)if(l&&n.forEach===l)n.forEach(e,t);else if(n.length===+n.length){for(r=0,i=n.length;r<i;r++)if(r in n&&e.call(t,n[r],r,n)===u)return}else for(o in n)if(s.call(n,o)&&e.call(t,n[o],o,n)===u)return},extend:function(n){return this.forEach(a.call(arguments,1),(function(e){for(var t in e)n[t]=e[t]})),n}},f=function(n){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages",debug:!1},this.options=c.extend({},this.defaults,n),this.textdomain(this.options.domain),n.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+n.domain+"`")};function d(n){return f.PF.compile(n||"nplurals=2; plural=(n != 1);")}function h(n,e){this._key=n,this._i18n=e}f.context_delimiter=String.fromCharCode(4),c.extend(h.prototype,{onDomain:function(n){return this._domain=n,this},withContext:function(n){return this._context=n,this},ifPlural:function(n,e){return this._val=n,this._pkey=e,this},fetch:function(n){return"[object Array]"!={}.toString.call(n)&&(n=[].slice.call(arguments,0)),(n&&n.length?f.sprintf:function(n){return n})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),n)}}),c.extend(f.prototype,{translate:function(n){return new h(n,this)},textdomain:function(n){if(!n)return this._textdomain;this._textdomain=n},gettext:function(n){return this.dcnpgettext.call(this,r,r,n)},dgettext:function(n,e){return this.dcnpgettext.call(this,n,r,e)},dcgettext:function(n,e){return this.dcnpgettext.call(this,n,r,e)},ngettext:function(n,e,t){return this.dcnpgettext.call(this,r,r,n,e,t)},dngettext:function(n,e,t,i){return this.dcnpgettext.call(this,n,r,e,t,i)},dcngettext:function(n,e,t,i){return this.dcnpgettext.call(this,n,r,e,t,i)},pgettext:function(n,e){return this.dcnpgettext.call(this,r,n,e)},dpgettext:function(n,e,t){return this.dcnpgettext.call(this,n,e,t)},dcpgettext:function(n,e,t){return this.dcnpgettext.call(this,n,e,t)},npgettext:function(n,e,t,i){return this.dcnpgettext.call(this,r,n,e,t,i)},dnpgettext:function(n,e,t,r,i){return this.dcnpgettext.call(this,n,e,t,r,i)},dcnpgettext:function(n,e,t,r,i){var o;if(r=r||t,n=n||this._textdomain,!this.options)return(o=new f).dcnpgettext.call(o,void 0,void 0,t,r,i);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[n])throw new Error("Domain `"+n+"` was not found.");if(!this.options.locale_data[n][""])throw new Error("No locale meta information provided.");if(!t)throw new Error("No translation key found.");var a,s,l,u=e?e+f.context_delimiter+t:t,c=this.options.locale_data,h=c[n],p=(c.messages||this.defaults.locale_data.messages)[""],m=h[""].plural_forms||h[""]["Plural-Forms"]||h[""]["plural-forms"]||p.plural_forms||p["Plural-Forms"]||p["plural-forms"];if(void 0===i)l=0;else{if("number"!=typeof i&&(i=parseInt(i,10),isNaN(i)))throw new Error("The number that was passed in is not a number.");l=d(m)(i)}if(!h)throw new Error("No domain named `"+n+"` could be found.");return!(a=h[u])||l>a.length?(this.options.missing_key_callback&&this.options.missing_key_callback(u,n),s=[t,r],!0===this.options.debug&&console.log(s[d(m)(i)]),s[d()(i)]):(s=a[l])||(s=[t,r])[d()(i)]}});var p,m,v=function(){function n(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function e(n,e){for(var t=[];e>0;t[--e]=n);return t.join("")}var t=function(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)};return t.format=function(t,r){var i,o,a,s,l,u,c,f=1,d=t.length,h="",p=[];for(o=0;o<d;o++)if("string"===(h=n(t[o])))p.push(t[o]);else if("array"===h){if((s=t[o])[2])for(i=r[f],a=0;a<s[2].length;a++){if(!i.hasOwnProperty(s[2][a]))throw v('[sprintf] property "%s" does not exist',s[2][a]);i=i[s[2][a]]}else i=s[1]?r[s[1]]:r[f++];if(/[^s]/.test(s[8])&&"number"!=n(i))throw v("[sprintf] expecting number but found %s",n(i));switch(null==i&&(i=""),s[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=s[7]?i.toExponential(s[7]):i.toExponential();break;case"f":i=s[7]?parseFloat(i).toFixed(s[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=String(i))&&s[7]?i.substring(0,s[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(s[8])&&s[3]&&i>=0?"+"+i:i,u=s[4]?"0"==s[4]?"0":s[4].charAt(1):" ",c=s[6]-String(i).length,l=s[6]?e(u,c):"",p.push(s[5]?i+l:l+i)}return p.join("")},t.cache={},t.parse=function(n){for(var e=n,t=[],r=[],i=0;e;){if(null!==(t=/^[^\x25]+/.exec(e)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw"[sprintf] huh?";if(t[2]){i|=1;var o=[],a=t[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw"[sprintf] huh?";for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw"[sprintf] huh?";o.push(s[1])}t[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(t)}e=e.substring(t[0].length)}return r},t}(),g=function(n,e){return e.unshift(n),v.apply(null,e)};f.parse_plural=function(n,e){return n=n.replace(/n/g,e),f.parse_expression(n)},f.sprintf=function(n,e){return"[object Array]"=={}.toString.call(e)?g(n,[].slice.call(e)):v.apply(this,[].slice.call(arguments))},f.prototype.sprintf=function(){return f.sprintf.apply(this,arguments)},(f.PF={}).parse=function(n){var e=f.PF.extractPluralExpr(n);return f.PF.parser.parse.call(f.PF.parser,e)},f.PF.compile=function(n){var e=f.PF.parse(n);return function(n){return!0===(t=f.PF.interpreter(e)(n))?1:t||0;var t}},f.PF.interpreter=function(n){return function(e){switch(n.type){case"GROUP":return f.PF.interpreter(n.expr)(e);case"TERNARY":return f.PF.interpreter(n.expr)(e)?f.PF.interpreter(n.truthy)(e):f.PF.interpreter(n.falsey)(e);case"OR":return f.PF.interpreter(n.left)(e)||f.PF.interpreter(n.right)(e);case"AND":return f.PF.interpreter(n.left)(e)&&f.PF.interpreter(n.right)(e);case"LT":return f.PF.interpreter(n.left)(e)<f.PF.interpreter(n.right)(e);case"GT":return f.PF.interpreter(n.left)(e)>f.PF.interpreter(n.right)(e);case"LTE":return f.PF.interpreter(n.left)(e)<=f.PF.interpreter(n.right)(e);case"GTE":return f.PF.interpreter(n.left)(e)>=f.PF.interpreter(n.right)(e);case"EQ":return f.PF.interpreter(n.left)(e)==f.PF.interpreter(n.right)(e);case"NEQ":return f.PF.interpreter(n.left)(e)!=f.PF.interpreter(n.right)(e);case"MOD":return f.PF.interpreter(n.left)(e)%f.PF.interpreter(n.right)(e);case"VAR":return e;case"NUM":return n.val;default:throw new Error("Invalid Token found.")}}},f.PF.extractPluralExpr=function(n){n=n.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(n)||(n=n.concat(";"));var e,t=/nplurals\=(\d+);/,r=n.match(t);if(!(r.length>1))throw new Error("nplurals not found in plural_forms string: "+n);if(r[1],!((e=(n=n.replace(t,"")).match(/plural\=(.*);/))&&e.length>1))throw new Error("`plural` expression not found: "+n);return e[1]},f.PF.parser=(p={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(n,e,t,r,i,o,a){var s=o.length-1;switch(i){case 1:return{type:"GROUP",expr:o[s-1]};case 2:this.$={type:"TERNARY",expr:o[s-4],truthy:o[s-2],falsey:o[s]};break;case 3:this.$={type:"OR",left:o[s-2],right:o[s]};break;case 4:this.$={type:"AND",left:o[s-2],right:o[s]};break;case 5:this.$={type:"LT",left:o[s-2],right:o[s]};break;case 6:this.$={type:"LTE",left:o[s-2],right:o[s]};break;case 7:this.$={type:"GT",left:o[s-2],right:o[s]};break;case 8:this.$={type:"GTE",left:o[s-2],right:o[s]};break;case 9:this.$={type:"NEQ",left:o[s-2],right:o[s]};break;case 10:this.$={type:"EQ",left:o[s-2],right:o[s]};break;case 11:this.$={type:"MOD",left:o[s-2],right:o[s]};break;case 12:this.$={type:"GROUP",expr:o[s-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(n)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(n,e){throw new Error(n)},parse:function(n){var e=this,t=[0],r=[null],i=[],o=this.table,a="",s=0,l=0,u=0;this.lexer.setInput(n),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;function f(){var n;return"number"!=typeof(n=e.lexer.lex()||1)&&(n=e.symbols_[n]||n),n}i.push(c),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,h,p,m,v,g,b,y,w,x,k={};;){if(p=t[t.length-1],this.defaultActions[p]?m=this.defaultActions[p]:(null==d&&(d=f()),m=o[p]&&o[p][d]),void 0===m||!m.length||!m[0]){if(!u){for(g in w=[],o[p])this.terminals_[g]&&g>2&&w.push("'"+this.terminals_[g]+"'");var T="";T=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+this.terminals_[d]+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(T,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:c,expected:w})}if(3==u){if(1==d)throw new Error(T||"Parsing halted.");l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,c=this.lexer.yylloc,d=f()}for(;!(2..toString()in o[p]);){if(0==p)throw new Error(T||"Parsing halted.");x=1,t.length=t.length-2*x,r.length=r.length-x,i.length=i.length-x,p=t[t.length-1]}h=d,d=2,m=o[p=t[t.length-1]]&&o[p][2],u=3}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+d);switch(m[0]){case 1:t.push(d),r.push(this.lexer.yytext),i.push(this.lexer.yylloc),t.push(m[1]),d=null,h?(d=h,h=null):(l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],k.$=r[r.length-b],k._$={first_line:i[i.length-(b||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(b||1)].first_column,last_column:i[i.length-1].last_column},void 0!==(v=this.performAction.call(k,a,l,s,this.yy,m[1],r,i)))return v;b&&(t=t.slice(0,-1*b*2),r=r.slice(0,-1*b),i=i.slice(0,-1*b)),t.push(this.productions_[m[1]][0]),r.push(k.$),i.push(k._$),y=o[t[t.length-2]][t[t.length-1]],t.push(y);break;case 3:return!0}}return!0}},m=function(){var n={EOF:1,parseError:function(n,e){if(!this.yy.parseError)throw new Error(n);this.yy.parseError(n,e)},setInput:function(n){return this._input=n,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var n=this._input[0];return this.yytext+=n,this.yyleng++,this.match+=n,this.matched+=n,n.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),n},unput:function(n){return this._input=n+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;return n.length<20&&(n+=this._input.substr(0,20-n.length)),(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput(),e=new Array(n.length+1).join("-");return n+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var n,e;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var t=this._currentRules(),r=0;r<t.length;r++)if(n=this._input.match(this.rules[t[r]]))return(e=n[0].match(/\n.*/g))&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-1:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],this.performAction.call(this,this.yy,this,t[r],this.conditionStack[this.conditionStack.length-1])||void 0;if(""===this._input)return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var n=this.next();return void 0!==n?n:this.lex()},begin:function(n){this.conditionStack.push(n)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(n){this.begin(n)},performAction:function(n,e,t,r){switch(t){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},rules:[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}}};return n}(),p.lexer=m,p),n.exports&&(e=n.exports=f),e.Jed=f}()},function(n,e,t){n.exports=t(486)},function(n,e,t){var r=t(187),i=t(428);n.exports=function n(e,t,o,a,s){var l=-1,u=e.length;for(o||(o=i),s||(s=[]);++l<u;){var c=e[l];t>0&&o(c)?t>1?n(c,t-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},,,function(n,e,t){var r=t(176),i=t(135);n.exports=function(n,e,t,o){var a=!t;t||(t={});for(var s=-1,l=e.length;++s<l;){var u=e[s],c=o?o(t[u],n[u],u,t,n):void 0;void 0===c&&(c=n[u]),a?i(t,u,c):r(t,u,c)}return t}},,,,function(n,e,t){var r=t(86),i=t(40),o=t(87),a=t(27);n.exports=function(n,e,t){if(!a(t))return!1;var s=typeof e;return!!("number"==s?i(t)&&o(e,t.length):"string"==s&&e in t)&&r(t[e],n)}},,function(n,e,t){var r=t(239),i=t(462),o=t(40);n.exports=function(n){return o(n)?r(n,!0):i(n)}},function(n,e){n.exports=function(n){return null==n}},function(n,e){var t="__lodash_placeholder__";n.exports=function(n,e){for(var r=-1,i=n.length,o=0,a=[];++r<i;){var s=n[r];s!==e&&s!==t||(n[r]=t,a[o++]=r)}return a}},function(n,e,t){var r=t(62)(Object,"create");n.exports=r},function(n,e,t){var r=t(377),i=t(378),o=t(379),a=t(380),s=t(381);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,n.exports=l},function(n,e,t){var r=t(86);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(383);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(118),i=t(27);n.exports=function(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=r(n.prototype),o=n.apply(t,e);return i(o)?o:t}}},function(n,e,t){var r=t(27),i=Object.create,o=function(){function n(){}return function(e){if(!r(e))return{};if(i)return i(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();n.exports=o},function(n,e,t){var r=t(233);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(160),i=t(411),o=t(412);function a(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,n.exports=a},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(418),i=t(91),o=t(208),a=o&&o.isTypedArray,s=a?i(a):r;n.exports=s},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){"use strict";var r=t(501),i=t(502),o=t(283);n.exports={formats:o,parse:i,stringify:r}},function(n,e,t){var r=t(27),i=t(93),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;n.exports=function(n){if("number"==typeof n)return n;if(i(n))return NaN;if(r(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=r(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(o,"");var t=s.test(n);return t||l.test(n)?u(n.slice(2),t?2:8):a.test(n)?NaN:+n}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},,,,,,function(n,e,t){var r=t(245);n.exports=function(n){return n&&n.length?r(n):[]}},function(n,e){n.exports=function(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}},function(n,e,t){var r=t(113),i=t(406),o=t(407),a=t(408),s=t(409),l=t(410);function u(n){var e=this.__data__=new r(n);this.size=e.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,n.exports=u},function(n,e,t){var r=t(220);n.exports=function(n,e,t){"__proto__"==e&&r?r(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}},function(n,e,t){var r=t(955)("wks"),i=t(581),o=t(97).Symbol,a="function"==typeof o;(n.exports=function(n){return r[n]||(r[n]=a&&o[n]||(a?o:i)("Symbol."+n))}).store=r},,function(n,e,t){"use strict";var r=t(56),i=t(39)("%Function%"),o=i.apply,a=i.call;n.exports=function(){return r.apply(a,arguments)},n.exports.apply=function(){return r.apply(o,arguments)}},,,function(n,e,t){"use strict";var r="Invariant failed";e.a=function(n,e){if(!n)throw new Error(r)}},,,function(n,e,t){"use strict";function r(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}t.d(e,"a",(function(){return r}))},,,function(n,e,t){"use strict";var r=Array.prototype.slice,i=t(242),o=Object.keys,a=o?function(n){return o(n)}:t(422),s=Object.keys;a.shim=function(){Object.keys?function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2)||(Object.keys=function(n){return i(n)?s(r.call(n)):s(n)}):Object.keys=a;return Object.keys||a},n.exports=a},,,,,,,,,function(n,e,t){var r=t(50),i=t(47),o=t(303),a=t(11);n.exports=function(n,e){return(a(n)?r:o)(n,i(e,3))}},,function(n,e){n.exports=function(n){return n.placeholder}},,function(n,e,t){var r=t(364),i=t(382),o=t(384),a=t(385),s=t(386);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,n.exports=l},function(n,e,t){var r=t(62)(t(25),"Map");n.exports=r},function(n,e,t){var r=t(387),i=t(221)(r);n.exports=i},function(n,e,t){var r=t(118),i=t(164);function o(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}o.prototype=r(i.prototype),o.prototype.constructor=o,n.exports=o},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(405),i=t(30);n.exports=function n(e,t,o,a,s){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!=e&&t!=t:r(e,t,o,a,n,s))}},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(123),i=t(419),o=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return i(n);var e=[];for(var t in Object(n))o.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e,t){var r=t(11),i=t(93),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!i(n))||(a.test(n)||!o.test(n)||null!=e&&n in Object(e))}},function(n,e){n.exports=function(n,e,t){for(var r=-1,i=null==n?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(82),i=t(1033),o=t(555),a=Object.defineProperty;e.f=t(182)?Object.defineProperty:function(n,e,t){if(r(n),e=o(e,!0),r(t),i)try{return a(n,e,t)}catch(n){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(344),i=Math.min;n.exports=function(n){return n>0?i(r(n),9007199254740991):0}},function(n,e,t){var r=t(160);function i(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var a=n.apply(this,r);return t.cache=o.set(i,a)||o,a};return t.cache=new(i.Cache||r),t}i.Cache=r,n.exports=i},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,i=0,o=[];++t<r;){var a=n[t];e(a,t,n)&&(o[i++]=a)}return o}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(135),i=t(86),o=Object.prototype.hasOwnProperty;n.exports=function(n,e,t){var a=n[e];o.call(n,e)&&i(a,t)&&(void 0!==t||e in n)||r(n,e,t)}},,,,function(n,e,t){"use strict";(function(e){var r=e.Symbol,i=t(424);n.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}}).call(this,t(45))},function(n,e){n.exports=function(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),(t=t>i?i:t)<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+e];return o}},function(n,e,t){n.exports=!t(81)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},,,,function(n,e){var t,r,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(n){if(t===setTimeout)return setTimeout(n,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(n,0);try{return t(n,0)}catch(e){try{return t.call(null,n,0)}catch(e){return t.call(this,n,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(n){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(n){r=a}}();var l,u=[],c=!1,f=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var n=s(d);c=!0;for(var e=u.length;e;){for(l=u,u=[];++f<e;)l&&l[f].run();f=-1,e=u.length}l=null,c=!1,function(n){if(r===clearTimeout)return clearTimeout(n);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{r(n)}catch(e){try{return r.call(null,n)}catch(e){return r.call(this,n)}}}(n)}}function p(n,e){this.fun=n,this.array=e}function m(){}i.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];u.push(new p(n,e)),1!==u.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}},function(n,e,t){var r=t(240)(Object.getPrototypeOf,Object);n.exports=r},function(n,e,t){"use strict";var r=Object.prototype.hasOwnProperty,i=Array.isArray,o=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),a=function(n,e){for(var t=e&&e.plainObjects?Object.create(null):{},r=0;r<n.length;++r)void 0!==n[r]&&(t[r]=n[r]);return t};n.exports={arrayToObject:a,assign:function(n,e){return Object.keys(e).reduce((function(n,t){return n[t]=e[t],n}),n)},combine:function(n,e){return[].concat(n,e)},compact:function(n){for(var e=[{obj:{o:n},prop:"o"}],t=[],r=0;r<e.length;++r)for(var o=e[r],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],c=a[u];"object"==typeof c&&null!==c&&-1===t.indexOf(c)&&(e.push({obj:a,prop:u}),t.push(c))}return function(n){for(;n.length>1;){var e=n.pop(),t=e.obj[e.prop];if(i(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);e.obj[e.prop]=r}}}(e),n},decode:function(n,e,t){var r=n.replace(/\+/g," ");if("iso-8859-1"===t)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(n){return r}},encode:function(n,e,t){if(0===n.length)return n;var r=n;if("symbol"==typeof n?r=Symbol.prototype.toString.call(n):"string"!=typeof n&&(r=String(n)),"iso-8859-1"===t)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(n){return"%26%23"+parseInt(n.slice(2),16)+"%3B"}));for(var i="",a=0;a<r.length;++a){var s=r.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=r.charAt(a):s<128?i+=o[s]:s<2048?i+=o[192|s>>6]+o[128|63&s]:s<55296||s>=57344?i+=o[224|s>>12]+o[128|s>>6&63]+o[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(a)),i+=o[240|s>>18]+o[128|s>>12&63]+o[128|s>>6&63]+o[128|63&s])}return i},isBuffer:function(n){return!(!n||"object"!=typeof n)&&!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))},isRegExp:function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},maybeMap:function(n,e){if(i(n)){for(var t=[],r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)},merge:function n(e,t,o){if(!t)return e;if("object"!=typeof t){if(i(e))e.push(t);else{if(!e||"object"!=typeof e)return[e,t];(o&&(o.plainObjects||o.allowPrototypes)||!r.call(Object.prototype,t))&&(e[t]=!0)}return e}if(!e||"object"!=typeof e)return[e].concat(t);var s=e;return i(e)&&!i(t)&&(s=a(e,o)),i(e)&&i(t)?(t.forEach((function(t,i){if(r.call(e,i)){var a=e[i];a&&"object"==typeof a&&t&&"object"==typeof t?e[i]=n(a,t,o):e.push(t)}else e[i]=t})),e):Object.keys(t).reduce((function(e,i){var a=t[i];return r.call(e,i)?e[i]=n(e[i],a,o):e[i]=a,e}),s)}}},function(n,e,t){"use strict";var r=t(32);n.exports=r.isStandardBrowserEnv()?function(){var n,e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function i(n){var r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){var t=r.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0}},function(n,e,t){var r=t(49),i=t(359),o=t(158),a=t(111),s=r((function(n,e,t){var r=1;if(t.length){var l=a(t,o(s));r|=32}return i(n,r,e,t,l)}));s.placeholder={},n.exports=s},,,function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r&&!1!==e(n[t],t,n););return n}},function(n,e,t){var r=t(125),i=1/0;n.exports=function(n){return n?(n=r(n))===i||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}},,,,function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},,function(n,e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");n.exports=function(n){return t.test(n)}},,,,function(n,e){n.exports=function(n){function e(n){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",n)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(n):"undefined"!=typeof eval?eval.call(null,n):e("EvalError: No eval function available")}catch(n){e(n)}}},function(n,e,t){var r=t(174),i=t(290),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(n){return null==n?[]:(n=Object(n),r(a(n),(function(e){return o.call(n,e)})))}:i;n.exports=s},function(n,e,t){var r=t(251),i=t(61);n.exports=function(n,e){return n&&r(n,e,i)}},function(n,e,t){(function(n){var r=t(216),i=e&&!e.nodeType&&e,o=i&&"object"==typeof n&&n&&!n.nodeType&&n,a=o&&o.exports===i&&r.process,s=function(){try{var n=o&&o.require&&o.require("util").types;return n||a&&a.binding&&a.binding("util")}catch(n){}}();n.exports=s}).call(this,t(126)(n))},function(n,e,t){var r=t(238);n.exports=function(n){var e=new n.constructor(n.byteLength);return new r(e).set(new r(n)),e}},function(n,e,t){var r=t(246),i=t(100),o=t(49),a=t(74),s=o((function(n,e){return a(n)?r(n,i(e,1,a,!0)):[]}));n.exports=s},function(n,e,t){"use strict";for(var r=function(n){return null!==n&&!Array.isArray(n)&&"object"==typeof n},i={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},o=0;o<24;o+=1)i[112+o]="F"+(o+1);for(var a=0;a<26;a+=1){var s=a+65;i[s]=[String.fromCharCode(s+32),String.fromCharCode(s)]}var l={codes:i,getCode:function(n){return r(n)?n.keyCode||n.which||this[n.key]:this[n]},getKey:function(n){var e=r(n);if(e&&n.key)return n.key;var t=i[e?n.keyCode||n.which:n];return Array.isArray(t)&&(t=e?t[n.shiftKey?1:0]:t[0]),t},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};l.Spacebar=l[" "],l.Digit0=l[0],l.Digit1=l[1],l.Digit2=l[2],l.Digit3=l[3],l.Digit4=l[4],l.Digit5=l[5],l.Digit6=l[6],l.Digit7=l[7],l.Digit8=l[8],l.Digit9=l[9],l.Tilde=l["~"],l.GraveAccent=l["`"],l.ExclamationPoint=l["!"],l.AtSign=l["@"],l.PoundSign=l["#"],l.PercentSign=l["%"],l.Caret=l["^"],l.Ampersand=l["&"],l.PlusSign=l["+"],l.MinusSign=l["-"],l.EqualsSign=l["="],l.DivisionSign=l["/"],l.MultiplicationSign=l["*"],l.Comma=l[","],l.Decimal=l["."],l.Colon=l[":"],l.Semicolon=l[";"],l.Pipe=l["|"],l.BackSlash=l["\\"],l.QuestionMark=l["?"],l.SingleQuote=l["'"],l.DoubleQuote=l['"'],l.LeftCurlyBrace=l["{"],l.RightCurlyBrace=l["}"],l.LeftParenthesis=l["("],l.RightParenthesis=l[")"],l.LeftAngleBracket=l["<"],l.RightAngleBracket=l[">"],l.LeftSquareBracket=l["["],l.RightSquareBracket=l["]"],n.exports=l},function(n,e,t){"use strict";t.d(e,"a",(function(){return F}));var r=t(0),i=t.n(r),o=t(13),a=t.n(o),s=t(16),l=t(28);const u="ADD_ERROR",c="CLEAR_ERROR",f="SHOW_REPORT_FORM";function d(n){return{type:u,error:{title:n.title,message:n.message,errorUUID:n.error_uuid,reportable:!!n.error_uuid}}}function h(){return{type:f}}var p=t(3),m=t.n(p),v=t(10),g=t.n(v),b=t(1),y=t.n(b),w=t(21),x=t(970),k=t(1027),T=t(185),S=t(84),_=t(159),D=t(8),I=t(2),E=t(9);const O=g.a.bind(null,{endpoint:"core.report_error_api",rules:[{args:["error_id"],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/report-error/api/",isDynamic:!1},{data:"error_id",isDynamic:!0}]}]},"/");class C extends i.a.Component{constructor(){super(...arguments),m()(this,"clearError",()=>{const{clearError:n}=this.props;n()}),m()(this,"showReportForm",()=>{const{showReportForm:n}=this.props;n()}),m()(this,"submitReport",async n=>{let{email:e,comment:t}=n;const{errorData:{errorUUID:r}}=this.props;try{await E.b.post(O({error_id:r}),{comment:t,email:e||void 0})}catch(n){return Object(D.l)(n,I.e.string("Submitting your error report failed"))}})}renderReportForm(n){let{handleSubmit:e,submitFailed:t,submitSucceeded:r,hasSubmitErrors:o,submitError:a}=n;return i.a.createElement(x.a,{onSubmit:e,error:t,success:r},o&&i.a.createElement(k.a,{error:!0,content:a}),i.a.createElement(D.h,{name:"comment",label:I.e.string("Details"),autoFocus:!0,required:!0,description:i.a.createElement(I.e,null,"Please let us know what you were doing when the error showed up.")}),i.a.createElement(D.e,{name:"email",type:"email",label:I.e.string("Email address"),description:i.a.createElement(I.e,null,"If you enter your email address we can contact you to follow-up on your error report.")}))}renderReportActions(n){let{submitting:e,handleSubmit:t,hasValidationErrors:r,submitSucceeded:o}=n;const{formVisible:a}=this.props;return a?i.a.createElement(T.a,{type:"submit",primary:!0,loading:e,disabled:e||r||o,onClick:t},o&&i.a.createElement(S.a,{name:"checkmark"}),i.a.createElement(I.e,null,"Submit Report")):i.a.createElement(T.a,{primary:!0,onClick:this.showReportForm},i.a.createElement(I.e,null,"Report Error"))}render(){const{errorData:n,remainingErrors:e,dialogVisible:t,formVisible:r}=this.props;if(!t)return null;const{title:o,message:a,reportable:s}=n;return i.a.createElement(w.b,{initialValues:{email:Indico.User.email},onSubmit:this.submitReport,render:n=>i.a.createElement(_.a,{size:"tiny",closeOnDimmerClick:!1,closeOnEscape:!1,open:t},i.a.createElement(_.a.Content,null,i.a.createElement(k.a,{error:!0,icon:!0},i.a.createElement(S.a,{name:"exclamation triangle"}),i.a.createElement(k.a.Content,null,i.a.createElement(k.a.Header,null,o),a)),s&&!r&&i.a.createElement("p",null,i.a.createElement(I.e,null,"Please report this error to us if it persists after reloading the page.")),r&&!n.submitSucceeded&&this.renderReportForm(n),n.submitSucceeded&&i.a.createElement(k.a,{success:!0},i.a.createElement(I.e,null,"Thanks for your error report."))),i.a.createElement(_.a.Actions,null,s&&this.renderReportActions(n),i.a.createElement(T.a,{onClick:()=>{n.form.reset(),this.clearError()}},e?i.a.createElement(I.e,null,"Dismiss (show next error)"):i.a.createElement(I.e,null,"Dismiss"))))})}}m()(C,"propTypes",{errorData:y.a.shape({title:y.a.string.isRequired,message:y.a.string.isRequired,reportable:y.a.bool.isRequired,errorUUID:y.a.string}),remainingErrors:y.a.number.isRequired,dialogVisible:y.a.bool.isRequired,formVisible:y.a.bool.isRequired,clearError:y.a.func.isRequired,showReportForm:y.a.func.isRequired}),m()(C,"defaultProps",{errorData:void 0});var A=Object(s.connect)(n=>{let{errors:{errorList:e,formVisible:t}}=n;return{errorData:e[0],remainingErrors:e.length?e.length-1:0,formVisible:t,dialogVisible:!!e.length}},n=>({showReportForm(){n(h())},clearError(){n({type:c})}}))(C);function L(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?L(Object(t),!0).forEach((function(e){m()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}const P={errorList:[],formVisible:!1};function $(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u:return j(j({},n),{},{errorList:[...n.errorList,e.error]});case c:return j(j({},n),{},{errorList:n.errorList.slice(1),formVisible:!1});case f:return j(j({},n),{},{formVisible:!0});default:return n}}let B;function F(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!B){B=Object(l.c)("errors",{errors:$});const n=document.createElement("div");document.body.appendChild(n);const e=i.a.createElement(s.Provider,{store:B},i.a.createElement(A,{initialValues:{email:Indico.User.email}}));a.a.render(e,n)}B.dispatch(d(n)),e&&B.dispatch(h())}},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(46),i=t(11),o=t(30);n.exports=function(n){return"string"==typeof n||!i(n)&&o(n)&&"[object String]"==r(n)}},,function(n,e,t){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;n.exports=t}).call(this,t(45))},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(116),i=Math.max;n.exports=function(n,e,t){return e=i(void 0===e?n.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),l=Array(s);++a<s;)l[a]=o[e+a];a=-1;for(var u=Array(e+1);++a<e;)u[a]=o[a];return u[e]=t(l),r(n,this,u)}}},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(62),i=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=i},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(65),i=t(223),o=i?function(n,e){return i.set(n,e),n}:r;n.exports=o},function(n,e,t){var r=t(224),i=r&&new r;n.exports=i},function(n,e,t){var r=t(62)(t(25),"WeakMap");n.exports=r},function(n,e,t){var r=t(226),i=t(227),o=t(390),a=t(117),s=t(228),l=t(158),u=t(401),c=t(111),f=t(25);n.exports=function n(e,t,d,h,p,m,v,g,b,y){var w=128&t,x=1&t,k=2&t,T=24&t,S=512&t,_=k?void 0:a(e);return function D(){for(var I=arguments.length,E=Array(I),O=I;O--;)E[O]=arguments[O];if(T)var C=l(D),A=o(E,C);if(h&&(E=r(E,h,p,T)),m&&(E=i(E,m,v,T)),I-=A,T&&I<y){var L=c(E,C);return s(e,t,n,D.placeholder,d,E,L,g,b,y-I)}var j=x?d:this,P=k?j[e]:e;return I=E.length,g?E=u(E,g):S&&I>1&&E.reverse(),w&&b<I&&(E.length=b),this&&this!==f&&this instanceof D&&(P=_||a(P)),P.apply(j,E)}}},function(n,e){var t=Math.max;n.exports=function(n,e,r,i){for(var o=-1,a=n.length,s=r.length,l=-1,u=e.length,c=t(a-s,0),f=Array(u+c),d=!i;++l<u;)f[l]=e[l];for(;++o<s;)(d||o<a)&&(f[r[o]]=n[o]);for(;c--;)f[l++]=n[o++];return f}},function(n,e){var t=Math.max;n.exports=function(n,e,r,i){for(var o=-1,a=n.length,s=-1,l=r.length,u=-1,c=e.length,f=t(a-l,0),d=Array(f+c),h=!i;++o<f;)d[o]=n[o];for(var p=o;++u<c;)d[p+u]=e[u];for(;++s<l;)(h||o<a)&&(d[p+r[s]]=n[o++]);return d}},function(n,e,t){var r=t(391),i=t(231),o=t(232);n.exports=function(n,e,t,a,s,l,u,c,f,d){var h=8&e;e|=h?32:64,4&(e&=~(h?64:32))||(e&=-4);var p=[n,e,s,h?l:void 0,h?u:void 0,h?void 0:l,h?void 0:u,c,f,d],m=t.apply(void 0,p);return r(n)&&i(m,p),m.placeholder=a,o(m,n,e)}},function(n,e,t){var r=t(223),i=t(213),o=r?function(n){return r.get(n)}:i;n.exports=o},function(n,e,t){var r=t(118),i=t(164);function o(n,e){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,n.exports=o},function(n,e,t){var r=t(222),i=t(221)(r);n.exports=i},function(n,e,t){var r=t(396),i=t(397),o=t(162),a=t(398);n.exports=function(n,e,t){var s=e+"";return o(n,i(s,a(r(s),t)))}},function(n,e,t){var r=t(234),i=t(399),o=t(400);n.exports=function(n,e,t){return e==e?o(n,e,t):r(n,i,t)}},function(n,e){n.exports=function(n,e,t,r){for(var i=n.length,o=t+(r?1:-1);r?o--:++o<i;)if(e(n[o],o,n))return o;return-1}},,function(n,e,t){var r=t(120),i=t(237),o=t(121);n.exports=function(n,e,t,a,s,l){var u=1&t,c=n.length,f=e.length;if(c!=f&&!(u&&f>c))return!1;var d=l.get(n),h=l.get(e);if(d&&h)return d==e&&h==n;var p=-1,m=!0,v=2&t?new r:void 0;for(l.set(n,e),l.set(e,n);++p<c;){var g=n[p],b=e[p];if(a)var y=u?a(b,g,p,e,n,l):a(g,b,p,n,e,l);if(void 0!==y){if(y)continue;m=!1;break}if(v){if(!i(e,(function(n,e){if(!o(v,e)&&(g===n||s(g,n,t,a,l)))return v.push(e)}))){m=!1;break}}else if(g!==b&&!s(g,b,t,a,l)){m=!1;break}}return l.delete(n),l.delete(e),m}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(25).Uint8Array;n.exports=r},function(n,e,t){var r=t(199),i=t(88),o=t(11),a=t(94),s=t(87),l=t(122),u=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=o(n),c=!t&&i(n),f=!t&&!c&&a(n),d=!t&&!c&&!f&&l(n),h=t||c||f||d,p=h?r(n.length,String):[],m=p.length;for(var v in n)!e&&!u.call(n,v)||h&&("length"==v||f&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||p.push(v);return p}},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(62)(t(25),"Set");n.exports=r},function(n,e,t){"use strict";var r=Object.prototype.toString;n.exports=function(n){var e=r.call(n),t="[object Arguments]"===e;return t||(t="[object Array]"!==e&&null!==n&&"object"==typeof n&&"number"==typeof n.length&&n.length>=0&&"[object Function]"===r.call(n.callee)),t}},,function(n,e,t){var r=t(75),i=t(50),o=t(11),a=t(93),s=r?r.prototype:void 0,l=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(o(e))return i(e,n)+"";if(a(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},function(n,e,t){var r=t(120),i=t(119),o=t(170),a=t(121),s=t(429),l=t(166);n.exports=function(n,e,t){var u=-1,c=i,f=n.length,d=!0,h=[],p=h;if(t)d=!1,c=o;else if(f>=200){var m=e?null:s(n);if(m)return l(m);d=!1,c=a,p=new r}else p=e?[]:h;n:for(;++u<f;){var v=n[u],g=e?e(v):v;if(v=t||0!==v?v:0,d&&g==g){for(var b=p.length;b--;)if(p[b]===g)continue n;e&&p.push(g),h.push(v)}else c(p,g,t)||(p!==h&&p.push(g),h.push(v))}return h}},function(n,e,t){var r=t(120),i=t(119),o=t(170),a=t(50),s=t(91),l=t(121);n.exports=function(n,e,t,u){var c=-1,f=i,d=!0,h=n.length,p=[],m=e.length;if(!h)return p;t&&(e=a(e,s(t))),u?(f=o,d=!1):e.length>=200&&(f=l,d=!1,e=new r(e));n:for(;++c<h;){var v=n[c],g=null==t?v:t(v);if(v=u||0!==v?v:0,d&&g==g){for(var b=m;b--;)if(e[b]===g)continue n;p.push(v)}else f(e,g,u)||p.push(v)}return p}},function(n,e,t){var r=t(27);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(436),i=t(250);n.exports=function(n,e){return null!=n&&i(n,e,r)}},function(n,e,t){var r=t(72),i=t(88),o=t(11),a=t(87),s=t(167),l=t(66);n.exports=function(n,e,t){for(var u=-1,c=(e=r(e,n)).length,f=!1;++u<c;){var d=l(e[u]);if(!(f=null!=n&&t(n,d)))break;n=n[d]}return f||++u!=c?f:!!(c=null==n?0:n.length)&&s(c)&&a(d,c)&&(o(n)||i(n))}},function(n,e,t){var r=t(440)();n.exports=r},function(n,e,t){var r=t(176),i=t(72),o=t(87),a=t(27),s=t(66);n.exports=function(n,e,t,l){if(!a(n))return n;for(var u=-1,c=(e=i(e,n)).length,f=c-1,d=n;null!=d&&++u<c;){var h=s(e[u]),p=t;if("__proto__"===h||"constructor"===h||"prototype"===h)return n;if(u!=f){var m=d[h];void 0===(p=l?l(m,h,d):void 0)&&(p=a(m)?m:o(e[u+1])?[]:{})}r(d,h,p),d=d[h]}return n}},function(n,e,t){var r=t(135),i=t(86);n.exports=function(n,e,t){(void 0!==t&&!i(n[e],t)||void 0===t&&!(e in n))&&r(n,e,t)}},function(n,e){n.exports=function(n,e){if(("constructor"!==e||"function"!=typeof n[e])&&"__proto__"!=e)return n[e]}},function(n,e,t){"use strict";var r=Object,i=TypeError;n.exports=function(){if(null!=this&&this!==r(this))throw new i("RegExp.prototype.flags getter called on non-object");var n="";return this.global&&(n+="g"),this.ignoreCase&&(n+="i"),this.multiline&&(n+="m"),this.dotAll&&(n+="s"),this.unicode&&(n+="u"),this.sticky&&(n+="y"),n}},function(n,e,t){"use strict";var r=t(255),i=t(38).supportsDescriptors,o=Object.getOwnPropertyDescriptor,a=TypeError;n.exports=function(){if(!i)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var n=o(RegExp.prototype,"flags");if(n&&"function"==typeof n.get&&"boolean"==typeof/a/.dotAll)return n.get}return r}},,,,,,,function(n,e,t){var r=t(557);n.exports=function(n){return Object(r(n))}},,function(n,e,t){"use strict";function r(n){var e,t=n.Symbol;return"function"==typeof t?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}t.d(e,"a",(function(){return r}))},,,,,function(n,e,t){var r=t(194),i=t(73),o=t(294),a=t(11);n.exports=function(n,e){return(a(n)?r:i)(n,o(e))}},function(n,e,t){var r=t(237),i=t(47),o=t(439),a=t(11),s=t(107);n.exports=function(n,e,t){var l=a(n)?r:o;return t&&s(n,e,t)&&(e=void 0),l(n,i(e,3))}},,,function(n,e){n.exports=function(n,e,t,r){var i=-1,o=null==n?0:n.length;for(r&&o&&(t=n[++i]);++i<o;)t=e(t,n[i],i,n);return t}},function(n,e,t){"use strict";n.exports=function(n,e){return function(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];return n.apply(e,t)}}},function(n,e,t){"use strict";var r=t(32);function i(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}n.exports=function(n,e,t){if(!e)return n;var o;if(t)o=t(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,(function(n,e){null!=n&&(r.isArray(n)?e+="[]":n=[n],r.forEach(n,(function(n){r.isDate(n)?n=n.toISOString():r.isObject(n)&&(n=JSON.stringify(n)),a.push(i(e)+"="+i(n))})))})),o=a.join("&")}if(o){var s=n.indexOf("#");-1!==s&&(n=n.slice(0,s)),n+=(-1===n.indexOf("?")?"?":"&")+o}return n}},function(n,e,t){"use strict";n.exports=function(n){return!(!n||!n.__CANCEL__)}},function(n,e,t){"use strict";(function(e){var r=t(32),i=t(491),o={"Content-Type":"application/x-www-form-urlencoded"};function a(n,e){!r.isUndefined(n)&&r.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}var s,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(s=t(279)),s),transformRequest:[function(n,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(n)||r.isArrayBuffer(n)||r.isBuffer(n)||r.isStream(n)||r.isFile(n)||r.isBlob(n)?n:r.isArrayBufferView(n)?n.buffer:r.isURLSearchParams(n)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):r.isObject(n)?(a(e,"application/json;charset=utf-8"),JSON.stringify(n)):n}],transformResponse:[function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(n){}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(n){return n>=200&&n<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(n){l.headers[n]={}})),r.forEach(["post","put","patch"],(function(n){l.headers[n]=r.merge(o)})),n.exports=l}).call(this,t(186))},function(n,e,t){"use strict";var r=t(32),i=t(492),o=t(494),a=t(276),s=t(495),l=t(498),u=t(190),c=t(280);n.exports=function(n){return new Promise((function(e,t){var f=n.data,d=n.headers;r.isFormData(f)&&delete d["Content-Type"],(r.isBlob(f)||r.isFile(f))&&f.type&&delete d["Content-Type"];var h=new XMLHttpRequest;if(n.auth){var p=n.auth.username||"",m=unescape(encodeURIComponent(n.auth.password))||"";d.Authorization="Basic "+btoa(p+":"+m)}var v=s(n.baseURL,n.url);if(h.open(n.method.toUpperCase(),a(v,n.params,n.paramsSerializer),!0),h.timeout=n.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?l(h.getAllResponseHeaders()):null,o={data:n.responseType&&"text"!==n.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:n,request:h};i(e,t,o),h=null}},h.onabort=function(){h&&(t(c("Request aborted",n,"ECONNABORTED",h)),h=null)},h.onerror=function(){t(c("Network Error",n,null,h)),h=null},h.ontimeout=function(){var e="timeout of "+n.timeout+"ms exceeded";n.timeoutErrorMessage&&(e=n.timeoutErrorMessage),t(c(e,n,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var g=(n.withCredentials||u(v))&&n.xsrfCookieName?o.read(n.xsrfCookieName):void 0;g&&(d[n.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(d,(function(n,e){void 0===f&&"content-type"===e.toLowerCase()?delete d[e]:h.setRequestHeader(e,n)})),r.isUndefined(n.withCredentials)||(h.withCredentials=!!n.withCredentials),n.responseType)try{h.responseType=n.responseType}catch(e){if("json"!==n.responseType)throw e}"function"==typeof n.onDownloadProgress&&h.addEventListener("progress",n.onDownloadProgress),"function"==typeof n.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",n.onUploadProgress),n.cancelToken&&n.cancelToken.promise.then((function(n){h&&(h.abort(),t(n),h=null)})),f||(f=null),h.send(f)}))}},function(n,e,t){"use strict";var r=t(493);n.exports=function(n,e,t,i,o){var a=new Error(n);return r(a,e,t,i,o)}},function(n,e,t){"use strict";var r=t(32);n.exports=function(n,e){e=e||{};var t={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(n,e){return r.isPlainObject(n)&&r.isPlainObject(e)?r.merge(n,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function u(i){r.isUndefined(e[i])?r.isUndefined(n[i])||(t[i]=l(void 0,n[i])):t[i]=l(n[i],e[i])}r.forEach(i,(function(n){r.isUndefined(e[n])||(t[n]=l(void 0,e[n]))})),r.forEach(o,u),r.forEach(a,(function(i){r.isUndefined(e[i])?r.isUndefined(n[i])||(t[i]=l(void 0,n[i])):t[i]=l(void 0,e[i])})),r.forEach(s,(function(r){r in e?t[r]=l(n[r],e[r]):r in n&&(t[r]=l(void 0,n[r]))}));var c=i.concat(o).concat(a).concat(s),f=Object.keys(n).concat(Object.keys(e)).filter((function(n){return-1===c.indexOf(n)}));return r.forEach(f,u),t}},function(n,e,t){"use strict";function r(n){this.message=n}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,n.exports=r},function(n,e,t){"use strict";var r=String.prototype.replace,i=/%20/g,o=t(189),a={RFC1738:"RFC1738",RFC3986:"RFC3986"};n.exports=o.assign({default:a.RFC3986,formatters:{RFC1738:function(n){return r.call(n,i,"+")},RFC3986:function(n){return String(n)}}},a)},function(n,e,t){var r=t(22),i=t(81),o=t(557),a=/"/g,s=function(n,e,t,r){var i=String(o(n)),s="<"+e;return""!==t&&(s+=" "+t+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};n.exports=function(n,e){var t={};t[n]=e(s),r(r.P+r.F*i((function(){var e=""[n]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",t)}},function(n,e,t){var r=t(455),i=t(296)((function(n,e){return null==n?{}:r(n,e)}));n.exports=i},function(n,e,t){var r=t(100);n.exports=function(n){return(null==n?0:n.length)?r(n,Infinity):[]}},function(n,e,t){var r;r=function(){var n=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","‘":"\'","’":"\'","“":"\\"","”":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial"}'),e=JSON.parse('{"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue"},"vi":{"Đ":"D","đ":"d"}}');function t(t,r){if("string"!=typeof t)throw new Error("slugify: string argument expected");var i=e[(r="string"==typeof r?{replacement:r}:r||{}).locale]||{},o=void 0===r.replacement?"-":r.replacement,a=t.split("").reduce((function(e,t){return e+(i[t]||n[t]||t).replace(r.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")}),"").trim().replace(new RegExp("[\\s"+o+"]+","g"),o);return r.lower&&(a=a.toLowerCase()),r.strict&&(a=a.replace(new RegExp("[^a-zA-Z0-9"+o+"]","g"),"").replace(new RegExp("[\\s"+o+"]+","g"),o)),a}return t.extend=function(e){for(var t in e)n[t]=e[t]},t},n.exports=r(),n.exports.default=r()},,function(n,e,t){var r=t(187),i=t(11);n.exports=function(n,e,t){var o=e(n);return i(n)?o:r(o,t(n))}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(289),i=t(206),o=t(61);n.exports=function(n){return r(n,o,i)}},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){var r=t(96),i=t(181);n.exports=function(n,e){return e.length<2?n:r(n,i(e,0,-1))}},function(n,e,t){var r=t(65);n.exports=function(n){return"function"==typeof n?n:r}},function(n,e){n.exports=function(n,e,t){return n==n&&(void 0!==t&&(n=n<=t?n:t),void 0!==e&&(n=n>=e?n:e)),n}},function(n,e,t){var r=t(83),i=t(218),o=t(162);n.exports=function(n){return o(i(n,void 0,r),n+"")}},function(n,e,t){(function(n){var r=t(25),i=e&&!e.nodeType&&e,o=i&&"object"==typeof n&&n&&!n.nodeType&&n,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;n.exports=function(n,e){if(e)return n.slice();var t=n.length,r=s?s(t):new n.constructor(t);return n.copy(r),r}}).call(this,t(126)(n))},function(n,e,t){var r=t(209);n.exports=function(n,e){var t=e?r(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}},function(n,e,t){var r=t(118),i=t(188),o=t(123);n.exports=function(n){return"function"!=typeof n.constructor||o(n)?{}:r(i(n))}},function(n,e,t){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;n.exports=function(n){return"object"==typeof n&&null!==n&&(o?function(n){try{return r.call(n),!0}catch(n){return!1}}(n):"[object Date]"===i.call(n))}},function(n,e,t){"use strict";var r=t(80),i=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,a=Object.prototype.toString,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;n.exports=function(n){if(!n||"object"!=typeof n)return!1;if(!s)return"[object RegExp]"===a.call(n);var e=o(n,"lastIndex");return!(!e||!r(e,"value"))&&function(n){try{var e=n.lastIndex;return n.lastIndex=0,i.call(n),!0}catch(n){return!1}finally{n.lastIndex=e}}(n)}},function(n,e,t){"use strict";var r=function(n){return n!=n};n.exports=function(n,e){return 0===n&&0===e?1/n==1/e:n===e||!(!r(n)||!r(e))}},function(n,e,t){var r=t(73),i=t(40);n.exports=function(n,e){var t=-1,o=i(n)?Array(n.length):[];return r(n,(function(n,r,i){o[++t]=e(n,r,i)})),o}},function(n,e){var t={}.hasOwnProperty;n.exports=function(n,e){return t.call(n,e)}},function(n,e,t){var r=t(97),i=t(337),o=t(304),a=t(581)("src"),s=t(1139),l="toString",u=(""+s).split(l);t(554).inspectSource=function(n){return s.call(n)},(n.exports=function(n,e,t,s){var l="function"==typeof t;l&&(o(t,"name")||i(t,"name",e)),n[e]!==t&&(l&&(o(t,a)||i(t,a,n[e]?""+n[e]:u.join(String(e)))),n===r?n[e]=t:s?n[e]?n[e]=t:i(n,e,t):(delete n[e],i(n,e,t)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(n,e,t){var r=t(233),i=t(40),o=t(214),a=t(71),s=t(309),l=Math.max;n.exports=function(n,e,t,u){n=i(n)?n:s(n),t=t&&!u?a(t):0;var c=n.length;return t<0&&(t=l(c+t,0)),o(n)?t<=c&&n.indexOf(e,t)>-1:!!c&&r(n,e,t)>-1}},,,function(n,e,t){var r=t(442),i=t(61);n.exports=function(n){return null==n?[]:r(n,i(n))}},function(n,e,t){var r=t(450),i=t(451),o=t(47),a=t(11),s=t(107);n.exports=function(n,e,t){var l=a(n)?r:i;return t&&s(n,e,t)&&(e=void 0),l(n,o(e,3))}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){var r=t(171),i=t(580);n.exports=t(182)?function(n,e,t){return r.f(n,e,i(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){"use strict";var r=t(81);n.exports=function(n,e){return!!n&&r((function(){e?n.call(null,(function(){}),1):n.call(null)}))}},function(n,e){n.exports=function(n,e){if(null==n)return{};var t,r,i={},o=Object.keys(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||(i[t]=n[t]);return i}},function(n,e,t){var r=t(96),i=t(252),o=t(72);n.exports=function(n,e,t){for(var a=-1,s=e.length,l={};++a<s;){var u=e[a],c=r(n,u);t(c,u)&&i(l,o(u,n),c)}return l}},,,function(n,e,t){var r=t(924),i=t(557);n.exports=function(n){return r(i(n))}},function(n,e){var t=Math.ceil,r=Math.floor;n.exports=function(n){return isNaN(n=+n)?0:(n>0?r:t)(n)}},function(n,e,t){var r=t(22),i=t(554),o=t(81);n.exports=function(n,e){var t=(i.Object||{})[n]||Object[n],a={};a[n]=e(t),r(r.S+r.F*o((function(){t(1)})),"Object",a)}},function(n,e,t){var r=t(471),i=t(924),o=t(263),a=t(172),s=t(1230);n.exports=function(n,e){var t=1==n,l=2==n,u=3==n,c=4==n,f=6==n,d=5==n||f,h=e||s;return function(e,s,p){for(var m,v,g=o(e),b=i(g),y=r(s,p,3),w=a(b.length),x=0,k=t?h(e,w):l?h(e,0):void 0;w>x;x++)if((d||x in b)&&(v=y(m=b[x],x,g),n))if(t)k[x]=v;else if(v)switch(n){case 3:return!0;case 5:return m;case 6:return x;case 2:k.push(m)}else if(c)return!1;return f?-1:u||c?c:k}}},function(n,e){n.exports=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}},function(n,e,t){var r=t(234),i=t(47),o=t(71),a=Math.max;n.exports=function(n,e,t){var s=null==n?0:n.length;if(!s)return-1;var l=null==t?0:o(t);return l<0&&(l=a(s+l,0)),r(n,i(e,3),l)}},function(n,e){n.exports=function(n){return void 0===n}},,,,function(n,e){n.exports=function(n){if(!n.webpackPolyfill){var e=Object.create(n);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(n,e,t){"use strict";var r=function(){};n.exports=r},function(n,e,t){var r=t(174),i=t(50),o=t(175),a=t(199),s=t(74),l=Math.max;n.exports=function(n){if(!n||!n.length)return[];var e=0;return n=r(n,(function(n){if(s(n))return e=l(n.length,e),!0})),a(e,(function(e){return i(n,o(e))}))}},,,,function(n,e,t){var r=t(222),i=t(388),o=t(389),a=t(225),s=t(402),l=t(229),u=t(403),c=t(231),f=t(232),d=t(71),h=Math.max;n.exports=function(n,e,t,p,m,v,g,b){var y=2&e;if(!y&&"function"!=typeof n)throw new TypeError("Expected a function");var w=p?p.length:0;if(w||(e&=-97,p=m=void 0),g=void 0===g?g:h(d(g),0),b=void 0===b?b:d(b),w-=m?m.length:0,64&e){var x=p,k=m;p=m=void 0}var T=y?void 0:l(n),S=[n,e,t,p,m,x,k,v,g,b];if(T&&u(S,T),n=S[0],e=S[1],t=S[2],p=S[3],m=S[4],!(b=S[9]=void 0===S[9]?y?0:n.length:h(S[9]-w,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?o(n,e,b):32!=e&&33!=e||m.length?a.apply(void 0,S):s(n,e,t,p);else var _=i(n,e,t);return f((T?r:c)(_,S),n,e)}},function(n,e,t){var r;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(e,t,e,n))||(n.exports=r)}()},function(n,e,t){var r=t(49),i=t(107);n.exports=function(n){return r((function(e,t){var r=-1,o=t.length,a=o>1?t[o-1]:void 0,s=o>2?t[2]:void 0;for(a=n.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(t[0],t[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var l=t[r];l&&n(e,l,r,a)}return e}))}},,,function(n,e,t){var r=t(365),i=t(113),o=t(161);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(n,e,t){var r=t(366),i=t(373),o=t(374),a=t(375),s=t(376);function l(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,n.exports=l},function(n,e,t){var r=t(112);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e,t){var r=t(69),i=t(370),o=t(27),a=t(217),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,f=u.hasOwnProperty,d=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!o(n)||i(n))&&(r(n)?d:s).test(a(n))}},function(n,e,t){var r=t(75),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=o.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var i=a.call(n);return r&&(e?n[s]=t:delete n[s]),i}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r,i=t(371),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!o&&o in n}},function(n,e,t){var r=t(25)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(112),i=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return i.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(112),i=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:i.call(e,n)}},function(n,e,t){var r=t(112);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(114),i=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():i.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(114);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(114);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(114);n.exports=function(n,e){var t=this.__data__,i=r(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}},function(n,e,t){var r=t(115);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(115);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(115);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(115);n.exports=function(n,e){var t=r(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}},function(n,e,t){var r=t(219),i=t(220),o=t(65),a=i?function(n,e){return i(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;n.exports=a},function(n,e,t){var r=t(117),i=t(25);n.exports=function(n,e,t){var o=1&e,a=r(n);return function e(){var r=this&&this!==i&&this instanceof e?a:n;return r.apply(o?t:this,arguments)}}},function(n,e,t){var r=t(116),i=t(117),o=t(225),a=t(228),s=t(158),l=t(111),u=t(25);n.exports=function(n,e,t){var c=i(n);return function i(){for(var f=arguments.length,d=Array(f),h=f,p=s(i);h--;)d[h]=arguments[h];var m=f<3&&d[0]!==p&&d[f-1]!==p?[]:l(d,p);if((f-=m.length)<t)return a(n,e,o,i.placeholder,void 0,d,m,void 0,void 0,t-f);var v=this&&this!==u&&this instanceof i?c:n;return r(v,this,d)}}},function(n,e){n.exports=function(n,e){for(var t=n.length,r=0;t--;)n[t]===e&&++r;return r}},function(n,e,t){var r=t(163),i=t(229),o=t(392),a=t(394);n.exports=function(n){var e=o(n),t=a[e];if("function"!=typeof t||!(e in r.prototype))return!1;if(n===t)return!0;var s=i(t);return!!s&&n===s[0]}},function(n,e,t){var r=t(393),i=Object.prototype.hasOwnProperty;n.exports=function(n){for(var e=n.name+"",t=r[e],o=i.call(r,e)?t.length:0;o--;){var a=t[o],s=a.func;if(null==s||s==n)return a.name}return e}},function(n,e){n.exports={}},function(n,e,t){var r=t(163),i=t(230),o=t(164),a=t(11),s=t(30),l=t(395),u=Object.prototype.hasOwnProperty;function c(n){if(s(n)&&!a(n)&&!(n instanceof r)){if(n instanceof i)return n;if(u.call(n,"__wrapped__"))return l(n)}return new i(n)}c.prototype=o.prototype,c.prototype.constructor=c,n.exports=c},function(n,e,t){var r=t(163),i=t(230),o=t(133);n.exports=function(n){if(n instanceof r)return n.clone();var e=new i(n.__wrapped__,n.__chain__);return e.__actions__=o(n.__actions__),e.__index__=n.__index__,e.__values__=n.__values__,e}},function(n,e){var t=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;n.exports=function(n){var e=n.match(t);return e?e[1].split(r):[]}},function(n,e){var t=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;n.exports=function(n,e){var r=e.length;if(!r)return n;var i=r-1;return e[i]=(r>1?"& ":"")+e[i],e=e.join(r>2?", ":" "),n.replace(t,"{\n/* [wrapped with "+e+"] */\n")}},function(n,e,t){var r=t(194),i=t(119),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];n.exports=function(n,e){return r(o,(function(t){var r="_."+t[0];e&t[1]&&!i(n,r)&&n.push(r)})),n.sort()}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}},function(n,e,t){var r=t(133),i=t(87),o=Math.min;n.exports=function(n,e){for(var t=n.length,a=o(e.length,t),s=r(n);a--;){var l=e[a];n[a]=i(l,t)?s[l]:void 0}return n}},function(n,e,t){var r=t(116),i=t(117),o=t(25);n.exports=function(n,e,t,a){var s=1&e,l=i(n);return function e(){for(var i=-1,u=arguments.length,c=-1,f=a.length,d=Array(f+u),h=this&&this!==o&&this instanceof e?l:n;++c<f;)d[c]=a[c];for(;u--;)d[c++]=arguments[++i];return r(h,s?t:this,d)}}},function(n,e,t){var r=t(226),i=t(227),o=t(111),a="__lodash_placeholder__",s=128,l=Math.min;n.exports=function(n,e){var t=n[1],u=e[1],c=t|u,f=c<131,d=u==s&&8==t||u==s&&256==t&&n[7].length<=e[8]||384==u&&e[7].length<=e[8]&&8==t;if(!f&&!d)return n;1&u&&(n[2]=e[2],c|=1&t?0:4);var h=e[3];if(h){var p=n[3];n[3]=p?r(p,h,e[4]):h,n[4]=p?o(n[3],a):e[4]}return(h=e[5])&&(p=n[5],n[5]=p?i(p,h,e[6]):h,n[6]=p?o(n[5],a):e[6]),(h=e[7])&&(n[7]=h),u&s&&(n[8]=null==n[8]?e[8]:l(n[8],e[8])),null==n[9]&&(n[9]=e[9]),n[0]=e[0],n[1]=c,n}},function(n,e,t){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var n=e.unstable_now();l(!0,n),l=null}catch(n){throw setTimeout(c,0),n}},f=Date.now();e.unstable_now=function(){return Date.now()-f},r=function(n){null!==l?setTimeout(r,0,n):(l=n,setTimeout(c,0))},i=function(n,e){u=setTimeout(n,e)},o=function(){clearTimeout(u)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var d=window.performance,h=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var v=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)e.unstable_now=function(){return d.now()};else{var g=h.now();e.unstable_now=function(){return h.now()-g}}var b=!1,y=null,w=-1,x=5,k=0;a=function(){return e.unstable_now()>=k},s=function(){},e.unstable_forceFrameRate=function(n){0>n||125<n?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):x=0<n?Math.floor(1e3/n):5};var T=new MessageChannel,S=T.port2;T.port1.onmessage=function(){if(null!==y){var n=e.unstable_now();k=n+x;try{y(!0,n)?S.postMessage(null):(b=!1,y=null)}catch(n){throw S.postMessage(null),n}}else b=!1},r=function(n){y=n,b||(b=!0,S.postMessage(null))},i=function(n,t){w=p((function(){n(e.unstable_now())}),t)},o=function(){m(w),w=-1}}function _(n,e){var t=n.length;n.push(e);n:for(;;){var r=t-1>>>1,i=n[r];if(!(void 0!==i&&0<E(i,e)))break n;n[r]=e,n[t]=i,t=r}}function D(n){return void 0===(n=n[0])?null:n}function I(n){var e=n[0];if(void 0!==e){var t=n.pop();if(t!==e){n[0]=t;n:for(var r=0,i=n.length;r<i;){var o=2*(r+1)-1,a=n[o],s=o+1,l=n[s];if(void 0!==a&&0>E(a,t))void 0!==l&&0>E(l,a)?(n[r]=l,n[s]=t,r=s):(n[r]=a,n[o]=t,r=o);else{if(!(void 0!==l&&0>E(l,t)))break n;n[r]=l,n[s]=t,r=s}}}return e}return null}function E(n,e){var t=n.sortIndex-e.sortIndex;return 0!==t?t:n.id-e.id}var O=[],C=[],A=1,L=null,j=3,P=!1,$=!1,B=!1;function F(n){for(var e=D(C);null!==e;){if(null===e.callback)I(C);else{if(!(e.startTime<=n))break;I(C),e.sortIndex=e.expirationTime,_(O,e)}e=D(C)}}function M(n){if(B=!1,F(n),!$)if(null!==D(O))$=!0,r(N);else{var e=D(C);null!==e&&i(M,e.startTime-n)}}function N(n,t){$=!1,B&&(B=!1,o()),P=!0;var r=j;try{for(F(t),L=D(O);null!==L&&(!(L.expirationTime>t)||n&&!a());){var s=L.callback;if(null!==s){L.callback=null,j=L.priorityLevel;var l=s(L.expirationTime<=t);t=e.unstable_now(),"function"==typeof l?L.callback=l:L===D(O)&&I(O),F(t)}else I(O);L=D(O)}if(null!==L)var u=!0;else{var c=D(C);null!==c&&i(M,c.startTime-t),u=!1}return u}finally{L=null,j=r,P=!1}}function R(n){switch(n){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var H=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(n){n.callback=null},e.unstable_continueExecution=function(){$||P||($=!0,r(N))},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_getFirstCallbackNode=function(){return D(O)},e.unstable_next=function(n){switch(j){case 1:case 2:case 3:var e=3;break;default:e=j}var t=j;j=e;try{return n()}finally{j=t}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=H,e.unstable_runWithPriority=function(n,e){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var t=j;j=n;try{return e()}finally{j=t}},e.unstable_scheduleCallback=function(n,t,a){var s=e.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:R(n)}else a=R(n),l=s;return n={id:A++,callback:t,priorityLevel:n,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(n.sortIndex=l,_(C,n),null===D(O)&&n===D(C)&&(B?o():B=!0,i(M,l-s))):(n.sortIndex=a,_(O,n),$||P||($=!0,r(N))),n},e.unstable_shouldYield=function(){var n=e.unstable_now();F(n);var t=D(O);return t!==L&&null!==L&&null!==t&&null!==t.callback&&t.startTime<=n&&t.expirationTime<L.expirationTime||a()},e.unstable_wrapCallback=function(n){var e=j;return function(){var t=j;j=e;try{return n.apply(this,arguments)}finally{j=t}}}},function(n,e,t){var r=t(134),i=t(236),o=t(413),a=t(415),s=t(89),l=t(11),u=t(94),c=t(122),f="[object Arguments]",d="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,m,v,g){var b=l(n),y=l(e),w=b?d:s(n),x=y?d:s(e),k=(w=w==f?h:w)==h,T=(x=x==f?h:x)==h,S=w==x;if(S&&u(n)){if(!u(e))return!1;b=!0,k=!1}if(S&&!k)return g||(g=new r),b||c(n)?i(n,e,t,m,v,g):o(n,e,w,t,m,v,g);if(!(1&t)){var _=k&&p.call(n,"__wrapped__"),D=T&&p.call(e,"__wrapped__");if(_||D){var I=_?n.value():n,E=D?e.value():e;return g||(g=new r),v(I,E,t,m,g)}}return!!S&&(g||(g=new r),a(n,e,t,m,v,g))}},function(n,e,t){var r=t(113);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(113),i=t(161),o=t(160);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var a=t.__data__;if(!i||a.length<199)return a.push([n,e]),this.size=++t.size,this;t=this.__data__=new o(a)}return t.set(n,e),this.size=t.size,this}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(75),i=t(238),o=t(86),a=t(236),s=t(414),l=t(166),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;n.exports=function(n,e,t,r,u,f,d){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!f(new i(n),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var h=s;case"[object Set]":var p=1&r;if(h||(h=l),n.size!=e.size&&!p)return!1;var m=d.get(n);if(m)return m==e;r|=2,d.set(n,e);var v=a(h(n),h(e),r,u,f,d);return d.delete(n),v;case"[object Symbol]":if(c)return c.call(n)==c.call(e)}return!1}},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(291),i=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,o,a,s){var l=1&t,u=r(n),c=u.length;if(c!=r(e).length&&!l)return!1;for(var f=c;f--;){var d=u[f];if(!(l?d in e:i.call(e,d)))return!1}var h=s.get(n),p=s.get(e);if(h&&p)return h==e&&p==n;var m=!0;s.set(n,e),s.set(e,n);for(var v=l;++f<c;){var g=n[d=u[f]],b=e[d];if(o)var y=l?o(b,g,d,e,n,s):o(g,b,d,n,e,s);if(!(void 0===y?g===b||a(g,b,t,o,s):y)){m=!1;break}v||(v="constructor"==d)}if(m&&!v){var w=n.constructor,x=e.constructor;w==x||!("constructor"in n)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(n),s.delete(e),m}},function(n,e,t){var r=t(46),i=t(30);n.exports=function(n){return i(n)&&"[object Arguments]"==r(n)}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(46),i=t(167),o=t(30),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,n.exports=function(n){return o(n)&&i(n.length)&&!!a[r(n)]}},function(n,e,t){var r=t(240)(Object.keys,Object);n.exports=r},function(n,e,t){var r=t(62)(t(25),"DataView");n.exports=r},function(n,e,t){var r=t(62)(t(25),"Promise");n.exports=r},function(n,e,t){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=t(242),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(n){var e=n.constructor;return e&&e.prototype===n},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var n in window)try{if(!d["$"+n]&&i.call(window,n)&&null!==window[n]&&"object"==typeof window[n])try{f(window[n])}catch(n){return!0}}catch(n){return!0}return!1}();r=function(n){var e=null!==n&&"object"==typeof n,t="[object Function]"===o.call(n),r=a(n),s=e&&"[object String]"===o.call(n),d=[];if(!e&&!t&&!r)throw new TypeError("Object.keys called on a non-object");var p=u&&t;if(s&&n.length>0&&!i.call(n,0))for(var m=0;m<n.length;++m)d.push(String(m));if(r&&n.length>0)for(var v=0;v<n.length;++v)d.push(String(v));else for(var g in n)p&&"prototype"===g||!i.call(n,g)||d.push(String(g));if(l)for(var b=function(n){if("undefined"==typeof window||!h)return f(n);try{return f(n)}catch(n){return!1}}(n),y=0;y<c.length;++y)b&&"constructor"===c[y]||!i.call(n,c[y])||d.push(c[y]);return d}}n.exports=r},function(n,e,t){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";n.exports=function(n){var e=this;if("function"!=typeof e||o.call(e)!==a)throw new TypeError(r+e);for(var t,s=i.call(arguments,1),l=function(){if(this instanceof t){var r=e.apply(this,s.concat(i.call(arguments)));return Object(r)===r?r:this}return e.apply(n,s.concat(i.call(arguments)))},u=Math.max(0,e.length-s.length),c=[],f=0;f<u;f++)c.push("$"+f);if(t=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),e.prototype){var d=function(){};d.prototype=e.prototype,t.prototype=new d,d.prototype=null}return t}},function(n,e,t){"use strict";n.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var n={},e=Symbol("test"),t=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;for(e in n[e]=42,n)return!1;if("function"==typeof Object.keys&&0!==Object.keys(n).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(n).length)return!1;var r=Object.getOwnPropertySymbols(n);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(n,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(n,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},,function(n,e,t){var r=t(427),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(i,(function(n,t,r,i){e.push(r?i.replace(o,"$1"):t||n)})),e}));n.exports=a},function(n,e,t){var r=t(173);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(75),i=t(88),o=t(11),a=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||i(n)||!!(a&&n&&n[a])}},function(n,e,t){var r=t(241),i=t(213),o=t(166),a=r&&1/o(new r([,-0]))[1]==1/0?function(n){return new r(n)}:i;n.exports=a},function(n,e,t){var r=t(116),i=t(72),o=t(292),a=t(293),s=t(66);n.exports=function(n,e,t){e=i(e,n);var l=null==(n=a(n,e))?n:n[s(o(e))];return null==l?void 0:r(l,n,t)}},function(n,e,t){var r=t(47),i=t(40),o=t(61);n.exports=function(n){return function(e,t,a){var s=Object(e);if(!i(e)){var l=r(t,3);e=o(e),t=function(n){return l(s[n],n,s)}}var u=n(e,t,a);return u>-1?s[l?e[u]:u]:void 0}}},function(n,e,t){var r=t(433),i=t(434),o=t(248);n.exports=function(n){var e=i(n);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(134),i=t(165);n.exports=function(n,e,t,o){var a=t.length,s=a,l=!o;if(null==n)return!s;for(n=Object(n);a--;){var u=t[a];if(l&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++a<s;){var c=(u=t[a])[0],f=n[c],d=u[1];if(l&&u[2]){if(void 0===f&&!(c in n))return!1}else{var h=new r;if(o)var p=o(f,d,c,n,e,h);if(!(void 0===p?i(d,f,3,o,h):p))return!1}}return!0}},function(n,e,t){var r=t(247),i=t(61);n.exports=function(n){for(var e=i(n),t=e.length;t--;){var o=e[t],a=n[o];e[t]=[o,a,r(a)]}return e}},function(n,e,t){var r=t(165),i=t(31),o=t(249),a=t(169),s=t(247),l=t(248),u=t(66);n.exports=function(n,e){return a(n)&&s(e)?l(u(n),e):function(t){var a=i(t,n);return void 0===a&&a===e?o(t,n):r(e,a,3)}}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(175),i=t(438),o=t(169),a=t(66);n.exports=function(n){return o(n)?r(a(n)):i(n)}},function(n,e,t){var r=t(96);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(73);n.exports=function(n,e){var t;return r(n,(function(n,r,i){return!(t=e(n,r,i))})),!!t}},function(n,e){n.exports=function(n){return function(e,t,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[n?s:++i];if(!1===t(o[l],l,o))break}return e}}},function(n,e,t){var r=t(40);n.exports=function(n,e){return function(t,i){if(null==t)return t;if(!r(t))return n(t,i);for(var o=t.length,a=e?o:-1,s=Object(t);(e?a--:++a<o)&&!1!==i(s[a],a,s););return t}}},function(n,e,t){var r=t(50);n.exports=function(n,e){return r(e,(function(e){return n[e]}))}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t(360);t(1);var i=t(0);function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function s(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function l(n,e,t){return e&&s(n.prototype,e),t&&s(n,t),n}function u(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&function(n,e){(Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}(n,e)}function f(n){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function d(n,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}var h=function(){function n(e){a(this,n),u(this,"handlers",void 0),this.handlers=e.slice(0)}return l(n,[{key:"addHandlers",value:function(e){for(var t=this.handlers.slice(0),r=e.length,i=0;i<r;i+=1)t.push(e[i]);return new n(t)}},{key:"dispatchEvent",value:function(n,e){var t=this.handlers.length-1;if(e){for(var r=t;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](n));for(var i=t;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[t])(n)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var t=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===e.indexOf(o)&&t.push(o)}return new n(t)}}]),n}();function p(n){var e=new Map;return n.forEach((function(n,t){e.set(t,n)})),e}function m(n){return Array.isArray(n)?n:[n]}function v(n){return"document"===n?document:"window"===n?window:function(n){return null!==n&&"object"===o(n)&&n.hasOwnProperty("current")}(n)?n.current||document:n||document}var g=function(){function n(e,t){a(this,n),u(this,"handlerSets",void 0),u(this,"poolName",void 0),this.handlerSets=t,this.poolName=e}return l(n,[{key:"addHandlers",value:function(e,t){var r=p(this.handlerSets);if(r.has(e)){var i=r.get(e);r.set(e,i.addHandlers(t))}else r.set(e,new h(t));return new n(this.poolName,r)}},{key:"dispatchEvent",value:function(n,e){var t=this.handlerSets.get(n),r="default"===this.poolName;t&&t.dispatchEvent(e,r)}},{key:"hasHandlers",value:function(n){if(!n)return this.handlerSets.size>0;var e=this.handlerSets.get(n);return!!e&&e.hasHandlers()}},{key:"removeHandlers",value:function(e,t){var r=p(this.handlerSets);if(!r.has(e))return new n(this.poolName,r);var i=r.get(e).removeHandlers(t);return i.hasHandlers()?r.set(e,i):r.delete(e),new n(this.poolName,r)}}]),n}();u(g,"createByType",(function(n,e,t){var r=new Map;return r.set(e,new h(t)),new g(n,r)}));var b=function(){function n(e){var t=this;a(this,n),u(this,"handlers",new Map),u(this,"pools",new Map),u(this,"target",void 0),u(this,"createEmitter",(function(n){return function(e){t.pools.forEach((function(t){t.dispatchEvent(n,e)}))}})),this.target=e}return l(n,[{key:"addHandlers",value:function(n,e,t){if(this.pools.has(n)){var r=this.pools.get(n);this.pools.set(n,r.addHandlers(e,t))}else this.pools.set(n,g.createByType(n,e,t));this.handlers.has(e)||this.addTargetHandler(e)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(n,e,t){if(this.pools.has(n)){var r=this.pools.get(n).removeHandlers(e,t);r.hasHandlers()?this.pools.set(n,r):this.pools.delete(n);var i=!1;this.pools.forEach((function(n){return i=i||n.hasHandlers(e)})),i||this.removeTargetHandler(e)}}},{key:"addTargetHandler",value:function(n){var e=this.createEmitter(n);this.handlers.set(n,e),this.target.addEventListener(n,e,!0)}},{key:"removeTargetHandler",value:function(n){this.handlers.has(n)&&(this.target.removeEventListener(n,this.handlers.get(n),!0),this.handlers.delete(n))}}]),n}(),y=new(function(){function n(){var e=this;a(this,n),u(this,"targets",new Map),u(this,"getTarget",(function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=v(n);if(e.targets.has(r))return e.targets.get(r);if(!t)return null;var i=new b(r);return e.targets.set(r,i),i})),u(this,"removeTarget",(function(n){e.targets.delete(v(n))}))}return l(n,[{key:"sub",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=t.target,o=void 0===i?document:i,a=t.pool,s=void 0===a?"default":a;this.getTarget(o).addHandlers(s,n,m(e))}}},{key:"unsub",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=t.target,o=void 0===i?document:i,a=t.pool,s=void 0===a?"default":a,l=this.getTarget(o,!1);l&&(l.removeHandlers(s,n,m(e)),l.hasHandlers()||this.removeTarget(o))}}}]),n}()),w=function(n){function e(){return a(this,e),d(this,f(e).apply(this,arguments))}return c(e,i.PureComponent),l(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(n){this.unsubscribe(n),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(n){var e=n.name,t=n.on,r=n.pool,i=n.target;y.sub(e,t,{pool:r,target:i})}},{key:"unsubscribe",value:function(n){var e=n.name,t=n.on,r=n.pool,i=n.target;y.unsub(e,t,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}();u(w,"defaultProps",{pool:"default",target:"document"}),w.propTypes={},e.instance=y,e.default=w},function(n,e){var t=Math.max,r=Math.min;n.exports=function(n,e,i){return n>=r(e,i)&&n<t(e,i)}},function(n,e){n.exports=function(n){return n&&n.length?n[0]:void 0}},function(n,e,t){var r=t(73);n.exports=function(n,e){var t=[];return r(n,(function(n,r,i){e(n,r,i)&&t.push(n)})),t}},function(n,e,t){var r=t(120),i=t(119),o=t(170),a=t(50),s=t(91),l=t(121),u=Math.min;n.exports=function(n,e,t){for(var c=t?o:i,f=n[0].length,d=n.length,h=d,p=Array(d),m=1/0,v=[];h--;){var g=n[h];h&&e&&(g=a(g,s(e))),m=u(g.length,m),p[h]=!t&&(e||f>=120&&g.length>=120)?new r(h&&g):void 0}g=n[0];var b=-1,y=p[0];n:for(;++b<f&&v.length<m;){var w=g[b],x=e?e(w):w;if(w=t||0!==w?w:0,!(y?l(y,x):c(v,x,t))){for(h=d;--h;){var k=p[h];if(!(k?l(k,x):c(n[h],x,t)))continue n}y&&y.push(x),v.push(w)}}return v}},function(n,e,t){var r=t(74);n.exports=function(n){return r(n)?n:[]}},function(n,e){var t=Object.prototype.hasOwnProperty;n.exports=function(n,e){return null!=n&&t.call(n,e)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}},function(n,e,t){var r=t(73);n.exports=function(n,e){var t=!0;return r(n,(function(n,r,i){return t=!!e(n,r,i)})),t}},function(n,e,t){var r=t(453),i=t(201),o=t(454);n.exports=function(n){return i(n)?o(n):r(n)}},function(n,e,t){var r=t(175)("length");n.exports=r},function(n,e){var t="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",u="[\\ufe0e\\ufe0f]?",c=u+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+u+l+")*"),f="(?:"+[o+r+"?",r,a,s,t].join("|")+")",d=RegExp(i+"(?="+i+")|"+f+c,"g");n.exports=function(n){for(var e=d.lastIndex=0;d.test(n);)++e;return e}},function(n,e,t){var r=t(340),i=t(249);n.exports=function(n,e){return r(n,e,(function(e,t){return i(n,t)}))}},function(n,e,t){var r=t(457)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});n.exports=r},function(n,e){n.exports=function(n){return function(e){return null==n?void 0:n[e]}}},function(n,e){n.exports=function(n,e,t,r,i){return i(n,(function(n,i,o){t=r?(r=!1,n):e(t,n,i,o)})),t}},function(n,e,t){var r=t(134),i=t(253),o=t(251),a=t(460),s=t(27),l=t(109),u=t(254);n.exports=function n(e,t,c,f,d){e!==t&&o(t,(function(o,l){if(d||(d=new r),s(o))a(e,t,l,c,n,f,d);else{var h=f?f(u(e,l),o,l+"",e,t,d):void 0;void 0===h&&(h=o),i(e,l,h)}}),l)}},function(n,e,t){var r=t(253),i=t(297),o=t(298),a=t(133),s=t(299),l=t(88),u=t(11),c=t(74),f=t(94),d=t(69),h=t(27),p=t(59),m=t(122),v=t(254),g=t(461);n.exports=function(n,e,t,b,y,w,x){var k=v(n,t),T=v(e,t),S=x.get(T);if(S)r(n,t,S);else{var _=w?w(k,T,t+"",n,e,x):void 0,D=void 0===_;if(D){var I=u(T),E=!I&&f(T),O=!I&&!E&&m(T);_=T,I||E||O?u(k)?_=k:c(k)?_=a(k):E?(D=!1,_=i(T,!0)):O?(D=!1,_=o(T,!0)):_=[]:p(T)||l(T)?(_=k,l(k)?_=g(k):h(k)&&!d(k)||(_=s(T))):D=!1}D&&(x.set(T,_),y(_,T,b,w,x),x.delete(T)),r(n,t,_)}}},function(n,e,t){var r=t(103),i=t(109);n.exports=function(n){return r(n,i(n))}},function(n,e,t){var r=t(27),i=t(123),o=t(463),a=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return o(n);var e=i(n),t=[];for(var s in n)("constructor"!=s||!e&&a.call(n,s))&&t.push(s);return t}},function(n,e){n.exports=function(n){var e=[];if(null!=n)for(var t in Object(n))e.push(t);return e}},function(n,e,t){var r=t(465);n.exports=function(n,e){return function(t,i){return r(t,n,e(i),{})}}},function(n,e,t){var r=t(207);n.exports=function(n,e,t,i){return r(n,(function(n,r,o){e(i,t(n),r,o)})),i}},function(n,e,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=Object.prototype.toString,o=function(n){return!(r&&n&&"object"==typeof n&&Symbol.toStringTag in n)&&"[object Arguments]"===i.call(n)},a=function(n){return!!o(n)||null!==n&&"object"==typeof n&&"number"==typeof n.length&&n.length>=0&&"[object Array]"!==i.call(n)&&"[object Function]"===i.call(n.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,n.exports=s?o:a},function(n,e,t){"use strict";var r=t(38),i=t(138),o=t(255),a=t(256),s=t(468),l=i(o);r(l,{getPolyfill:a,implementation:o,shim:s}),n.exports=l},function(n,e,t){"use strict";var r=t(38).supportsDescriptors,i=t(256),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,u=/a/;n.exports=function(){if(!r||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var n=i(),e=l(u),t=o(e,"flags");return t&&t.get===n||a(e,"flags",{configurable:!0,enumerable:!1,get:n}),n}},function(n,e,t){"use strict";e.__esModule=!0;var r=t(0),i=(a(r),a(t(1))),o=a(t(470));a(t(354));function a(n){return n&&n.__esModule?n:{default:n}}function s(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function l(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?n:e}function u(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var c=1073741823;function f(n){var e=[];return{on:function(n){e.push(n)},off:function(n){e=e.filter((function(e){return e!==n}))},get:function(){return n},set:function(t,r){n=t,e.forEach((function(e){return e(n,r)}))}}}e.default=function(n,e){var t,a,d="__create-react-context-"+(0,o.default)()+"__",h=function(n){function t(){var e,r;s(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=r=l(this,n.call.apply(n,[this].concat(o))),r.emitter=f(r.props.value),l(r,e)}return u(t,n),t.prototype.getChildContext=function(){var n;return(n={})[d]=this.emitter,n},t.prototype.componentWillReceiveProps=function(n){if(this.props.value!==n.value){var t=this.props.value,r=n.value,i=void 0;((o=t)===(a=r)?0!==o||1/o==1/a:o!=o&&a!=a)?i=0:(i="function"==typeof e?e(t,r):c,0!==(i|=0)&&this.emitter.set(n.value,i))}var o,a},t.prototype.render=function(){return this.props.children},t}(r.Component);h.childContextTypes=((t={})[d]=i.default.object.isRequired,t);var p=function(e){function t(){var n,r;s(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,e.call.apply(e,[this].concat(o))),r.state={value:r.getValue()},r.onUpdate=function(n,e){0!=((0|r.observedBits)&e)&&r.setState({value:r.getValue()})},l(r,n)}return u(t,e),t.prototype.componentWillReceiveProps=function(n){var e=n.observedBits;this.observedBits=null==e?c:e},t.prototype.componentDidMount=function(){this.context[d]&&this.context[d].on(this.onUpdate);var n=this.props.observedBits;this.observedBits=null==n?c:n},t.prototype.componentWillUnmount=function(){this.context[d]&&this.context[d].off(this.onUpdate)},t.prototype.getValue=function(){return this.context[d]?this.context[d].get():n},t.prototype.render=function(){return(n=this.props.children,Array.isArray(n)?n[0]:n)(this.state.value);var n},t}(r.Component);return p.contextTypes=((a={})[d]=i.default.object,a),{Provider:h,Consumer:p}},n.exports=e.default},function(n,e,t){"use strict";(function(e){var t="__global_unique_id__";n.exports=function(){return e[t]=(e[t]||0)+1}}).call(this,t(45))},function(n,e,t){var r=t(472);n.exports=function(n,e,t){if(r(n),void 0===e)return n;switch(t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,r){return n.call(e,t,r)};case 3:return function(t,r,i){return n.call(e,t,r,i)}}return function(){return n.apply(e,arguments)}}},function(n,e){n.exports=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n}},function(n,e){var t={}.toString;n.exports=function(n){return t.call(n).slice(8,-1)}},function(n,e,t){var r=t(957),i=t(580),o=t(343),a=t(555),s=t(304),l=t(1033),u=Object.getOwnPropertyDescriptor;e.f=t(182)?u:function(n,e){if(n=o(n),e=a(e,!0),l)try{return u(n,e)}catch(n){}if(s(n,e))return i(!r.f.call(n,e),n[e])}},function(n,e,t){"use strict";if(t(182)){var r=t(582),i=t(97),o=t(81),a=t(22),s=t(966),l=t(1e3),u=t(471),c=t(605),f=t(580),d=t(337),h=t(606),p=t(344),m=t(172),v=t(1061),g=t(583),b=t(555),y=t(304),w=t(925),x=t(90),k=t(263),T=t(995),S=t(584),_=t(586),D=t(585).f,I=t(996),E=t(581),O=t(136),C=t(346),A=t(980),L=t(963),j=t(1053),P=t(926),$=t(959),B=t(604),F=t(997),M=t(1052),N=t(171),R=t(474),H=N.f,U=R.f,W=i.RangeError,z=i.TypeError,q=i.Uint8Array,V="ArrayBuffer",G="SharedArrayBuffer",Y="BYTES_PER_ELEMENT",X=Array.prototype,J=l.ArrayBuffer,K=l.DataView,Q=C(0),Z=C(2),nn=C(3),en=C(4),tn=C(5),rn=C(6),on=A(!0),an=A(!1),sn=j.values,ln=j.keys,un=j.entries,cn=X.lastIndexOf,fn=X.reduce,dn=X.reduceRight,hn=X.join,pn=X.sort,mn=X.slice,vn=X.toString,gn=X.toLocaleString,bn=O("iterator"),yn=O("toStringTag"),wn=E("typed_constructor"),xn=E("def_constructor"),kn=s.CONSTR,Tn=s.TYPED,Sn=s.VIEW,_n="Wrong length!",Dn=C(1,(function(n,e){return An(L(n,n[xn]),e)})),In=o((function(){return 1===new q(new Uint16Array([1]).buffer)[0]})),En=!!q&&!!q.prototype.set&&o((function(){new q(1).set({})})),On=function(n,e){var t=p(n);if(t<0||t%e)throw W("Wrong offset!");return t},Cn=function(n){if(x(n)&&Tn in n)return n;throw z(n+" is not a typed array!")},An=function(n,e){if(!x(n)||!(wn in n))throw z("It is not a typed array constructor!");return new n(e)},Ln=function(n,e){return jn(L(n,n[xn]),e)},jn=function(n,e){for(var t=0,r=e.length,i=An(n,r);r>t;)i[t]=e[t++];return i},Pn=function(n,e,t){H(n,e,{get:function(){return this._d[t]}})},$n=function(n){var e,t,r,i,o,a,s=k(n),l=arguments.length,c=l>1?arguments[1]:void 0,f=void 0!==c,d=I(s);if(null!=d&&!T(d)){for(a=d.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(f&&l>2&&(c=u(c,arguments[2],2)),e=0,t=m(s.length),i=An(this,t);t>e;e++)i[e]=f?c(s[e],e):s[e];return i},Bn=function(){for(var n=0,e=arguments.length,t=An(this,e);e>n;)t[n]=arguments[n++];return t},Fn=!!q&&o((function(){gn.call(new q(1))})),Mn=function(){return gn.apply(Fn?mn.call(Cn(this)):Cn(this),arguments)},Nn={copyWithin:function(n,e){return M.call(Cn(this),n,e,arguments.length>2?arguments[2]:void 0)},every:function(n){return en(Cn(this),n,arguments.length>1?arguments[1]:void 0)},fill:function(n){return F.apply(Cn(this),arguments)},filter:function(n){return Ln(this,Z(Cn(this),n,arguments.length>1?arguments[1]:void 0))},find:function(n){return tn(Cn(this),n,arguments.length>1?arguments[1]:void 0)},findIndex:function(n){return rn(Cn(this),n,arguments.length>1?arguments[1]:void 0)},forEach:function(n){Q(Cn(this),n,arguments.length>1?arguments[1]:void 0)},indexOf:function(n){return an(Cn(this),n,arguments.length>1?arguments[1]:void 0)},includes:function(n){return on(Cn(this),n,arguments.length>1?arguments[1]:void 0)},join:function(n){return hn.apply(Cn(this),arguments)},lastIndexOf:function(n){return cn.apply(Cn(this),arguments)},map:function(n){return Dn(Cn(this),n,arguments.length>1?arguments[1]:void 0)},reduce:function(n){return fn.apply(Cn(this),arguments)},reduceRight:function(n){return dn.apply(Cn(this),arguments)},reverse:function(){for(var n,e=this,t=Cn(e).length,r=Math.floor(t/2),i=0;i<r;)n=e[i],e[i++]=e[--t],e[t]=n;return e},some:function(n){return nn(Cn(this),n,arguments.length>1?arguments[1]:void 0)},sort:function(n){return pn.call(Cn(this),n)},subarray:function(n,e){var t=Cn(this),r=t.length,i=g(n,r);return new(L(t,t[xn]))(t.buffer,t.byteOffset+i*t.BYTES_PER_ELEMENT,m((void 0===e?r:g(e,r))-i))}},Rn=function(n,e){return Ln(this,mn.call(Cn(this),n,e))},Hn=function(n){Cn(this);var e=On(arguments[1],1),t=this.length,r=k(n),i=m(r.length),o=0;if(i+e>t)throw W(_n);for(;o<i;)this[e+o]=r[o++]},Un={entries:function(){return un.call(Cn(this))},keys:function(){return ln.call(Cn(this))},values:function(){return sn.call(Cn(this))}},Wn=function(n,e){return x(n)&&n[Tn]&&"symbol"!=typeof e&&e in n&&String(+e)==String(e)},zn=function(n,e){return Wn(n,e=b(e,!0))?f(2,n[e]):U(n,e)},qn=function(n,e,t){return!(Wn(n,e=b(e,!0))&&x(t)&&y(t,"value"))||y(t,"get")||y(t,"set")||t.configurable||y(t,"writable")&&!t.writable||y(t,"enumerable")&&!t.enumerable?H(n,e,t):(n[e]=t.value,n)};kn||(R.f=zn,N.f=qn),a(a.S+a.F*!kn,"Object",{getOwnPropertyDescriptor:zn,defineProperty:qn}),o((function(){vn.call({})}))&&(vn=gn=function(){return hn.call(this)});var Vn=h({},Nn);h(Vn,Un),d(Vn,bn,Un.values),h(Vn,{slice:Rn,set:Hn,constructor:function(){},toString:vn,toLocaleString:Mn}),Pn(Vn,"buffer","b"),Pn(Vn,"byteOffset","o"),Pn(Vn,"byteLength","l"),Pn(Vn,"length","e"),H(Vn,yn,{get:function(){return this[Tn]}}),n.exports=function(n,e,t,l){var u=n+((l=!!l)?"Clamped":"")+"Array",f="get"+n,h="set"+n,p=i[u],g=p||{},b=p&&_(p),y=!p||!s.ABV,k={},T=p&&p.prototype,I=function(n,t){H(n,t,{get:function(){return function(n,t){var r=n._d;return r.v[f](t*e+r.o,In)}(this,t)},set:function(n){return function(n,t,r){var i=n._d;l&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[h](t*e+i.o,r,In)}(this,t,n)},enumerable:!0})};y?(p=t((function(n,t,r,i){c(n,p,u,"_d");var o,a,s,l,f=0,h=0;if(x(t)){if(!(t instanceof J||(l=w(t))==V||l==G))return Tn in t?jn(p,t):$n.call(p,t);o=t,h=On(r,e);var g=t.byteLength;if(void 0===i){if(g%e)throw W(_n);if((a=g-h)<0)throw W(_n)}else if((a=m(i)*e)+h>g)throw W(_n);s=a/e}else s=v(t),o=new J(a=s*e);for(d(n,"_d",{b:o,o:h,l:a,e:s,v:new K(o)});f<s;)I(n,f++)})),T=p.prototype=S(Vn),d(T,"constructor",p)):o((function(){p(1)}))&&o((function(){new p(-1)}))&&$((function(n){new p,new p(null),new p(1.5),new p(n)}),!0)||(p=t((function(n,t,r,i){var o;return c(n,p,u),x(t)?t instanceof J||(o=w(t))==V||o==G?void 0!==i?new g(t,On(r,e),i):void 0!==r?new g(t,On(r,e)):new g(t):Tn in t?jn(p,t):$n.call(p,t):new g(v(t))})),Q(b!==Function.prototype?D(g).concat(D(b)):D(g),(function(n){n in p||d(p,n,g[n])})),p.prototype=T,r||(T.constructor=p));var E=T[bn],O=!!E&&("values"==E.name||null==E.name),C=Un.values;d(p,wn,!0),d(T,Tn,u),d(T,Sn,!0),d(T,xn,p),(l?new p(1)[yn]==u:yn in T)||H(T,yn,{get:function(){return u}}),k[u]=p,a(a.G+a.W+a.F*(p!=g),k),a(a.S,u,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){g.of.call(p,1)})),u,{from:$n,of:Bn}),Y in T||d(T,Y,e),a(a.P,u,Nn),B(u),a(a.P+a.F*En,u,{set:Hn}),a(a.P+a.F*!O,u,Un),r||T.toString==vn||(T.toString=vn),a(a.P+a.F*o((function(){new p(1).slice()})),u,{slice:Rn}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!o((function(){T.toLocaleString.call([1,2])}))),u,{toLocaleString:Mn}),P[u]=O?E:C,r||O||d(T,bn,C)}}else n.exports=function(){}},function(n,e,t){var r=t(456),i=t(57),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");n.exports=function(n){return(n=i(n))&&n.replace(o,r).replace(a,"")}},,,function(n,e,t){var r=t(100),i=t(49),o=t(245),a=t(74),s=i((function(n){return o(r(n,1,a,!0))}));n.exports=s},function(n,e,t){"use strict";var r;r=t(443),n.exports=r.default,n.exports.instance=r.instance},,,,function(n,e){var t={}.toString;n.exports=Array.isArray||function(n){return"[object Array]"==t.call(n)}},function(n,e,t){n.exports={"field-error":"_-web-client-js-react-forms-___fields-module__field-error___gD7yj","field-description":"_-web-client-js-react-forms-___fields-module__field-description___2FFlB"}},function(n,e,t){"use strict";var r=t(32),i=t(275),o=t(487),a=t(281);function s(n){var e=new o(n),t=i(o.prototype.request,e);return r.extend(t,o.prototype,e),r.extend(t,e),t}var l=s(t(278));l.Axios=o,l.create=function(n){return s(a(l.defaults,n))},l.Cancel=t(282),l.CancelToken=t(499),l.isCancel=t(277),l.all=function(n){return Promise.all(n)},l.spread=t(500),n.exports=l,n.exports.default=l},function(n,e,t){"use strict";var r=t(32),i=t(276),o=t(488),a=t(489),s=t(281);function l(n){this.defaults=n,this.interceptors={request:new o,response:new o}}l.prototype.request=function(n){"string"==typeof n?(n=arguments[1]||{}).url=arguments[0]:n=n||{},(n=s(this.defaults,n)).method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var e=[a,void 0],t=Promise.resolve(n);for(this.interceptors.request.forEach((function(n){e.unshift(n.fulfilled,n.rejected)})),this.interceptors.response.forEach((function(n){e.push(n.fulfilled,n.rejected)}));e.length;)t=t.then(e.shift(),e.shift());return t},l.prototype.getUri=function(n){return n=s(this.defaults,n),i(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(n){l.prototype[n]=function(e,t){return this.request(s(t||{},{method:n,url:e}))}})),r.forEach(["post","put","patch"],(function(n){l.prototype[n]=function(e,t,r){return this.request(s(r||{},{method:n,url:e,data:t}))}})),n.exports=l},function(n,e,t){"use strict";var r=t(32);function i(){this.handlers=[]}i.prototype.use=function(n,e){return this.handlers.push({fulfilled:n,rejected:e}),this.handlers.length-1},i.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},i.prototype.forEach=function(n){r.forEach(this.handlers,(function(e){null!==e&&n(e)}))},n.exports=i},function(n,e,t){"use strict";var r=t(32),i=t(490),o=t(277),a=t(278);function s(n){n.cancelToken&&n.cancelToken.throwIfRequested()}n.exports=function(n){return s(n),n.headers=n.headers||{},n.data=i(n.data,n.headers,n.transformRequest),n.headers=r.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete n.headers[e]})),(n.adapter||a.adapter)(n).then((function(e){return s(n),e.data=i(e.data,e.headers,n.transformResponse),e}),(function(e){return o(e)||(s(n),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,n.transformResponse))),Promise.reject(e)}))}},function(n,e,t){"use strict";var r=t(32);n.exports=function(n,e,t){return r.forEach(t,(function(t){n=t(n,e)})),n}},function(n,e,t){"use strict";var r=t(32);n.exports=function(n,e){r.forEach(n,(function(t,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(n[e]=t,delete n[r])}))}},function(n,e,t){"use strict";var r=t(280);n.exports=function(n,e,t){var i=t.config.validateStatus;t.status&&i&&!i(t.status)?e(r("Request failed with status code "+t.status,t.config,null,t.request,t)):n(t)}},function(n,e,t){"use strict";n.exports=function(n,e,t,r,i){return n.config=e,t&&(n.code=t),n.request=r,n.response=i,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n}},function(n,e,t){"use strict";var r=t(32);n.exports=r.isStandardBrowserEnv()?{write:function(n,e,t,i,o,a){var s=[];s.push(n+"="+encodeURIComponent(e)),r.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(n){var e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(n,e,t){"use strict";var r=t(496),i=t(497);n.exports=function(n,e){return n&&!r(e)?i(n,e):e}},function(n,e,t){"use strict";n.exports=function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)}},function(n,e,t){"use strict";n.exports=function(n,e){return e?n.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):n}},function(n,e,t){"use strict";var r=t(32),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];n.exports=function(n){var e,t,o,a={};return n?(r.forEach(n.split("\n"),(function(n){if(o=n.indexOf(":"),e=r.trim(n.substr(0,o)).toLowerCase(),t=r.trim(n.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([t]):a[e]?a[e]+", "+t:t}})),a):a}},function(n,e,t){"use strict";var r=t(282);function i(n){if("function"!=typeof n)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(n){e=n}));var t=this;n((function(n){t.reason||(t.reason=new r(n),e(t.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var n;return{token:new i((function(e){n=e})),cancel:n}},n.exports=i},function(n,e,t){"use strict";n.exports=function(n){return function(e){return n.apply(null,e)}}},function(n,e,t){"use strict";var r=t(189),i=t(283),o=Object.prototype.hasOwnProperty,a={brackets:function(n){return n+"[]"},comma:"comma",indices:function(n,e){return n+"["+e+"]"},repeat:function(n){return n}},s=Array.isArray,l=Array.prototype.push,u=function(n,e){l.apply(n,s(e)?e:[e])},c=Date.prototype.toISOString,f=i.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,format:f,formatter:i.formatters[f],indices:!1,serializeDate:function(n){return c.call(n)},skipNulls:!1,strictNullHandling:!1},h=function n(e,t,i,o,a,l,c,f,h,p,m,v,g){var b,y=e;if("function"==typeof c?y=c(t,y):y instanceof Date?y=p(y):"comma"===i&&s(y)&&(y=r.maybeMap(y,(function(n){return n instanceof Date?p(n):n})).join(",")),null===y){if(o)return l&&!v?l(t,d.encoder,g,"key"):t;y=""}if("string"==typeof(b=y)||"number"==typeof b||"boolean"==typeof b||"symbol"==typeof b||"bigint"==typeof b||r.isBuffer(y))return l?[m(v?t:l(t,d.encoder,g,"key"))+"="+m(l(y,d.encoder,g,"value"))]:[m(t)+"="+m(String(y))];var w,x=[];if(void 0===y)return x;if(s(c))w=c;else{var k=Object.keys(y);w=f?k.sort(f):k}for(var T=0;T<w.length;++T){var S=w[T],_=y[S];if(!a||null!==_){var D=s(y)?"function"==typeof i?i(t,S):t:t+(h?"."+S:"["+S+"]");u(x,n(_,D,i,o,a,l,c,f,h,p,m,v,g))}}return x};n.exports=function(n,e){var t,r=n,l=function(n){if(!n)return d;if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var e=n.charset||d.charset;if(void 0!==n.charset&&"utf-8"!==n.charset&&"iso-8859-1"!==n.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=i.default;if(void 0!==n.format){if(!o.call(i.formatters,n.format))throw new TypeError("Unknown format option provided.");t=n.format}var r=i.formatters[t],a=d.filter;return("function"==typeof n.filter||s(n.filter))&&(a=n.filter),{addQueryPrefix:"boolean"==typeof n.addQueryPrefix?n.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===n.allowDots?d.allowDots:!!n.allowDots,charset:e,charsetSentinel:"boolean"==typeof n.charsetSentinel?n.charsetSentinel:d.charsetSentinel,delimiter:void 0===n.delimiter?d.delimiter:n.delimiter,encode:"boolean"==typeof n.encode?n.encode:d.encode,encoder:"function"==typeof n.encoder?n.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:d.encodeValuesOnly,filter:a,formatter:r,serializeDate:"function"==typeof n.serializeDate?n.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof n.skipNulls?n.skipNulls:d.skipNulls,sort:"function"==typeof n.sort?n.sort:null,strictNullHandling:"boolean"==typeof n.strictNullHandling?n.strictNullHandling:d.strictNullHandling}}(e);"function"==typeof l.filter?r=(0,l.filter)("",r):s(l.filter)&&(t=l.filter);var c,f=[];if("object"!=typeof r||null===r)return"";c=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var p=a[c];t||(t=Object.keys(r)),l.sort&&t.sort(l.sort);for(var m=0;m<t.length;++m){var v=t[m];l.skipNulls&&null===r[v]||u(f,h(r[v],v,p,l.strictNullHandling,l.skipNulls,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.formatter,l.encodeValuesOnly,l.charset))}var g=f.join(l.delimiter),b=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),g.length>0?b+g:""}},function(n,e,t){"use strict";var r=t(189),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(n){return n.replace(/&#(\d+);/g,(function(n,e){return String.fromCharCode(parseInt(e,10))}))},l=function(n,e){return n&&"string"==typeof n&&e.comma&&n.indexOf(",")>-1?n.split(","):n},u=function(n,e,t,r){if(n){var o=t.allowDots?n.replace(/\.([^.[]+)/g,"[$1]"):n,a=/(\[[^[\]]*])/g,s=t.depth>0&&/(\[[^[\]]*])/.exec(o),u=s?o.slice(0,s.index):o,c=[];if(u){if(!t.plainObjects&&i.call(Object.prototype,u)&&!t.allowPrototypes)return;c.push(u)}for(var f=0;t.depth>0&&null!==(s=a.exec(o))&&f<t.depth;){if(f+=1,!t.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!t.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+o.slice(s.index)+"]"),function(n,e,t,r){for(var i=r?e:l(e,t),o=n.length-1;o>=0;--o){var a,s=n[o];if("[]"===s&&t.parseArrays)a=[].concat(i);else{a=t.plainObjects?Object.create(null):{};var u="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(u,10);t.parseArrays||""!==u?!isNaN(c)&&s!==u&&String(c)===u&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(a=[])[c]=i:a[u]=i:a={0:i}}i=a}return i}(c,e,t,r)}};n.exports=function(n,e){var t=function(n){if(!n)return a;if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==n.charset&&"utf-8"!==n.charset&&"iso-8859-1"!==n.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=void 0===n.charset?a.charset:n.charset;return{allowDots:void 0===n.allowDots?a.allowDots:!!n.allowDots,allowPrototypes:"boolean"==typeof n.allowPrototypes?n.allowPrototypes:a.allowPrototypes,arrayLimit:"number"==typeof n.arrayLimit?n.arrayLimit:a.arrayLimit,charset:e,charsetSentinel:"boolean"==typeof n.charsetSentinel?n.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof n.comma?n.comma:a.comma,decoder:"function"==typeof n.decoder?n.decoder:a.decoder,delimiter:"string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:a.delimiter,depth:"number"==typeof n.depth||!1===n.depth?+n.depth:a.depth,ignoreQueryPrefix:!0===n.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof n.interpretNumericEntities?n.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof n.parameterLimit?n.parameterLimit:a.parameterLimit,parseArrays:!1!==n.parseArrays,plainObjects:"boolean"==typeof n.plainObjects?n.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof n.strictNullHandling?n.strictNullHandling:a.strictNullHandling}}(e);if(""===n||null==n)return t.plainObjects?Object.create(null):{};for(var c="string"==typeof n?function(n,e){var t,u={},c=e.ignoreQueryPrefix?n.replace(/^\?/,""):n,f=e.parameterLimit===1/0?void 0:e.parameterLimit,d=c.split(e.delimiter,f),h=-1,p=e.charset;if(e.charsetSentinel)for(t=0;t<d.length;++t)0===d[t].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[t]?p="utf-8":"utf8=%26%2310003%3B"===d[t]&&(p="iso-8859-1"),h=t,t=d.length);for(t=0;t<d.length;++t)if(t!==h){var m,v,g=d[t],b=g.indexOf("]="),y=-1===b?g.indexOf("="):b+1;-1===y?(m=e.decoder(g,a.decoder,p,"key"),v=e.strictNullHandling?null:""):(m=e.decoder(g.slice(0,y),a.decoder,p,"key"),v=r.maybeMap(l(g.slice(y+1),e),(function(n){return e.decoder(n,a.decoder,p,"value")}))),v&&e.interpretNumericEntities&&"iso-8859-1"===p&&(v=s(v)),g.indexOf("[]=")>-1&&(v=o(v)?[v]:v),i.call(u,m)?u[m]=r.combine(u[m],v):u[m]=v}return u}(n,t):n,f=t.plainObjects?Object.create(null):{},d=Object.keys(c),h=0;h<d.length;++h){var p=d[h],m=u(p,c[p],t,"string"==typeof n);f=r.merge(f,m,t)}return r.compact(f)}},function(n,e,t){"use strict";t.d(e,"a",(function(){return T})),t.d(e,"b",(function(){return O})),t.d(e,"d",(function(){return A})),t.d(e,"c",(function(){return m})),t.d(e,"f",(function(){return v})),t.d(e,"e",(function(){return p}));var r=t(4);function i(n){return"/"===n.charAt(0)}function o(n,e){for(var t=e,r=t+1,i=n.length;r<i;t+=1,r+=1)n[t]=n[r];n.pop()}var a=function(n,e){void 0===e&&(e="");var t,r=n&&n.split("/")||[],a=e&&e.split("/")||[],s=n&&i(n),l=e&&i(e),u=s||l;if(n&&i(n)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var c=a[a.length-1];t="."===c||".."===c||""===c}else t=!1;for(var f=0,d=a.length;d>=0;d--){var h=a[d];"."===h?o(a,d):".."===h?(o(a,d),f++):f&&(o(a,d),f--)}if(!u)for(;f--;f)a.unshift("..");!u||""===a[0]||a[0]&&i(a[0])||a.unshift("");var p=a.join("/");return t&&"/"!==p.substr(-1)&&(p+="/"),p};function s(n){return n.valueOf?n.valueOf():Object.prototype.valueOf.call(n)}var l=function n(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((function(e,r){return n(e,t[r])}));if("object"==typeof e||"object"==typeof t){var r=s(e),i=s(t);return r!==e||i!==t?n(r,i):Object.keys(Object.assign({},e,t)).every((function(r){return n(e[r],t[r])}))}return!1},u=t(141);function c(n){return"/"===n.charAt(0)?n:"/"+n}function f(n){return"/"===n.charAt(0)?n.substr(1):n}function d(n,e){return function(n,e){return 0===n.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(n.charAt(e.length))}(n,e)?n.substr(e.length):n}function h(n){return"/"===n.charAt(n.length-1)?n.slice(0,-1):n}function p(n){var e=n.pathname,t=n.search,r=n.hash,i=e||"/";return t&&"?"!==t&&(i+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function m(n,e,t,i){var o;"string"==typeof n?(o=function(n){var e=n||"/",t="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(t=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===t?"":t,hash:"#"===r?"":r}}(n)).state=e:(void 0===(o=Object(r.a)({},n)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(n){throw n instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):n}return t&&(o.key=t),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function v(n,e){return n.pathname===e.pathname&&n.search===e.search&&n.hash===e.hash&&n.key===e.key&&l(n.state,e.state)}function g(){var n=null;var e=[];return{setPrompt:function(e){return n=e,function(){n===e&&(n=null)}},confirmTransitionTo:function(e,t,r,i){if(null!=n){var o="function"==typeof n?n(e,t):n;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(n){var t=!0;function r(){t&&n.apply(void 0,arguments)}return e.push(r),function(){t=!1,e=e.filter((function(n){return n!==r}))}},notifyListeners:function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];e.forEach((function(n){return n.apply(void 0,t)}))}}}var b=!("undefined"==typeof window||!window.document||!window.document.createElement);function y(n,e){e(window.confirm(n))}var w="popstate",x="hashchange";function k(){try{return window.history.state||{}}catch(n){return{}}}function T(n){void 0===n&&(n={}),b||Object(u.a)(!1);var e,t=window.history,i=(-1===(e=window.navigator.userAgent).indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,o=!(-1===window.navigator.userAgent.indexOf("Trident")),a=n,s=a.forceRefresh,l=void 0!==s&&s,f=a.getUserConfirmation,v=void 0===f?y:f,T=a.keyLength,S=void 0===T?6:T,_=n.basename?h(c(n.basename)):"";function D(n){var e=n||{},t=e.key,r=e.state,i=window.location,o=i.pathname+i.search+i.hash;return _&&(o=d(o,_)),m(o,r,t)}function I(){return Math.random().toString(36).substr(2,S)}var E=g();function O(n){Object(r.a)(H,n),H.length=t.length,E.notifyListeners(H.location,H.action)}function C(n){(function(n){return void 0===n.state&&-1===navigator.userAgent.indexOf("CriOS")})(n)||j(D(n.state))}function A(){j(D(k()))}var L=!1;function j(n){if(L)L=!1,O();else{E.confirmTransitionTo(n,"POP",v,(function(e){e?O({action:"POP",location:n}):function(n){var e=H.location,t=$.indexOf(e.key);-1===t&&(t=0);var r=$.indexOf(n.key);-1===r&&(r=0);var i=t-r;i&&(L=!0,F(i))}(n)}))}}var P=D(k()),$=[P.key];function B(n){return _+p(n)}function F(n){t.go(n)}var M=0;function N(n){1===(M+=n)&&1===n?(window.addEventListener(w,C),o&&window.addEventListener(x,A)):0===M&&(window.removeEventListener(w,C),o&&window.removeEventListener(x,A))}var R=!1;var H={length:t.length,action:"POP",location:P,createHref:B,push:function(n,e){var r="PUSH",o=m(n,e,I(),H.location);E.confirmTransitionTo(o,r,v,(function(n){if(n){var e=B(o),a=o.key,s=o.state;if(i)if(t.pushState({key:a,state:s},null,e),l)window.location.href=e;else{var u=$.indexOf(H.location.key),c=$.slice(0,u+1);c.push(o.key),$=c,O({action:r,location:o})}else window.location.href=e}}))},replace:function(n,e){var r="REPLACE",o=m(n,e,I(),H.location);E.confirmTransitionTo(o,r,v,(function(n){if(n){var e=B(o),a=o.key,s=o.state;if(i)if(t.replaceState({key:a,state:s},null,e),l)window.location.replace(e);else{var u=$.indexOf(H.location.key);-1!==u&&($[u]=o.key),O({action:r,location:o})}else window.location.replace(e)}}))},go:F,goBack:function(){F(-1)},goForward:function(){F(1)},block:function(n){void 0===n&&(n=!1);var e=E.setPrompt(n);return R||(N(1),R=!0),function(){return R&&(R=!1,N(-1)),e()}},listen:function(n){var e=E.appendListener(n);return N(1),function(){N(-1),e()}}};return H}var S="hashchange",_={hashbang:{encodePath:function(n){return"!"===n.charAt(0)?n:"!/"+f(n)},decodePath:function(n){return"!"===n.charAt(0)?n.substr(1):n}},noslash:{encodePath:f,decodePath:c},slash:{encodePath:c,decodePath:c}};function D(n){var e=n.indexOf("#");return-1===e?n:n.slice(0,e)}function I(){var n=window.location.href,e=n.indexOf("#");return-1===e?"":n.substring(e+1)}function E(n){window.location.replace(D(window.location.href)+"#"+n)}function O(n){void 0===n&&(n={}),b||Object(u.a)(!1);var e=window.history,t=(window.navigator.userAgent.indexOf("Firefox"),n),i=t.getUserConfirmation,o=void 0===i?y:i,a=t.hashType,s=void 0===a?"slash":a,l=n.basename?h(c(n.basename)):"",f=_[s],v=f.encodePath,w=f.decodePath;function x(){var n=w(I());return l&&(n=d(n,l)),m(n)}var k=g();function T(n){Object(r.a)(R,n),R.length=e.length,k.notifyListeners(R.location,R.action)}var O=!1,C=null;function A(){var n,e,t=I(),r=v(t);if(t!==r)E(r);else{var i=x(),a=R.location;if(!O&&(e=i,(n=a).pathname===e.pathname&&n.search===e.search&&n.hash===e.hash))return;if(C===p(i))return;C=null,function(n){if(O)O=!1,T();else{var e="POP";k.confirmTransitionTo(n,e,o,(function(t){t?T({action:e,location:n}):function(n){var e=R.location,t=$.lastIndexOf(p(e));-1===t&&(t=0);var r=$.lastIndexOf(p(n));-1===r&&(r=0);var i=t-r;i&&(O=!0,B(i))}(n)}))}}(i)}}var L=I(),j=v(L);L!==j&&E(j);var P=x(),$=[p(P)];function B(n){e.go(n)}var F=0;function M(n){1===(F+=n)&&1===n?window.addEventListener(S,A):0===F&&window.removeEventListener(S,A)}var N=!1;var R={length:e.length,action:"POP",location:P,createHref:function(n){var e=document.querySelector("base"),t="";return e&&e.getAttribute("href")&&(t=D(window.location.href)),t+"#"+v(l+p(n))},push:function(n,e){var t="PUSH",r=m(n,void 0,void 0,R.location);k.confirmTransitionTo(r,t,o,(function(n){if(n){var e=p(r),i=v(l+e);if(I()!==i){C=e,function(n){window.location.hash=n}(i);var o=$.lastIndexOf(p(R.location)),a=$.slice(0,o+1);a.push(e),$=a,T({action:t,location:r})}else T()}}))},replace:function(n,e){var t="REPLACE",r=m(n,void 0,void 0,R.location);k.confirmTransitionTo(r,t,o,(function(n){if(n){var e=p(r),i=v(l+e);I()!==i&&(C=e,E(i));var o=$.indexOf(p(R.location));-1!==o&&($[o]=e),T({action:t,location:r})}}))},go:B,goBack:function(){B(-1)},goForward:function(){B(1)},block:function(n){void 0===n&&(n=!1);var e=k.setPrompt(n);return N||(M(1),N=!0),function(){return N&&(N=!1,M(-1)),e()}},listen:function(n){var e=k.appendListener(n);return M(1),function(){M(-1),e()}}};return R}function C(n,e,t){return Math.min(Math.max(n,e),t)}function A(n){void 0===n&&(n={});var e=n,t=e.getUserConfirmation,i=e.initialEntries,o=void 0===i?["/"]:i,a=e.initialIndex,s=void 0===a?0:a,l=e.keyLength,u=void 0===l?6:l,c=g();function f(n){Object(r.a)(w,n),w.length=w.entries.length,c.notifyListeners(w.location,w.action)}function d(){return Math.random().toString(36).substr(2,u)}var h=C(s,0,o.length-1),v=o.map((function(n){return m(n,void 0,"string"==typeof n?d():n.key||d())})),b=p;function y(n){var e=C(w.index+n,0,w.entries.length-1),r=w.entries[e];c.confirmTransitionTo(r,"POP",t,(function(n){n?f({action:"POP",location:r,index:e}):f()}))}var w={length:v.length,action:"POP",location:v[h],index:h,entries:v,createHref:b,push:function(n,e){var r="PUSH",i=m(n,e,d(),w.location);c.confirmTransitionTo(i,r,t,(function(n){if(n){var e=w.index+1,t=w.entries.slice(0);t.length>e?t.splice(e,t.length-e,i):t.push(i),f({action:r,location:i,index:e,entries:t})}}))},replace:function(n,e){var r="REPLACE",i=m(n,e,d(),w.location);c.confirmTransitionTo(i,r,t,(function(n){n&&(w.entries[w.index]=i,f({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(n){var e=w.index+n;return e>=0&&e<w.entries.length},block:function(n){return void 0===n&&(n=!1),c.setPrompt(n)},listen:function(n){return c.appendListener(n)}};return w}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e){var t=n.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)},function(n,e,t){var r=t(90);n.exports=function(n,e){if(!r(n))return n;var t,i;if(e&&"function"==typeof(t=n.toString)&&!r(i=t.call(n)))return i;if("function"==typeof(t=n.valueOf)&&!r(i=t.call(n)))return i;if(!e&&"function"==typeof(t=n.toString)&&!r(i=t.call(n)))return i;throw TypeError("Can't convert object to primitive value")}},function(n,e,t){var r=t(581)("meta"),i=t(90),o=t(304),a=t(171).f,s=0,l=Object.isExtensible||function(){return!0},u=!t(81)((function(){return l(Object.preventExtensions({}))})),c=function(n){a(n,r,{value:{i:"O"+ ++s,w:{}}})},f=n.exports={KEY:r,NEED:!1,fastKey:function(n,e){if(!i(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!o(n,r)){if(!l(n))return"F";if(!e)return"E";c(n)}return n[r].i},getWeak:function(n,e){if(!o(n,r)){if(!l(n))return!0;if(!e)return!1;c(n)}return n[r].w},onFreeze:function(n){return u&&f.NEED&&l(n)&&!o(n,r)&&c(n),n}}},function(n,e){n.exports=function(n){if(null==n)throw TypeError("Can't call method on  "+n);return n}},function(n,e,t){var r=t(459),i=t(361)((function(n,e,t){r(n,e,t)}));n.exports=i},function(n,e){n.exports=function(n,e,t,r){var i=t?t.call(r,n,e):void 0;if(void 0!==i)return!!i;if(n===e)return!0;if("object"!=typeof n||!n||"object"!=typeof e||!e)return!1;var o=Object.keys(n),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(e),l=0;l<o.length;l++){var u=o[l];if(!s(u))return!1;var c=n[u],f=e[u];if(!1===(i=t?t.call(r,c,f,u):void 0)||void 0===i&&c!==f)return!1}return!0}},,,,,,function(n,e,t){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(n){if(null==n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}n.exports=function(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de","5"===Object.getOwnPropertyNames(n)[0])return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(n){return e[n]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(n){r[n]=n})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(n){return!1}}()?Object.assign:function(n,e){for(var t,s,l=a(n),u=1;u<arguments.length;u++){for(var c in t=Object(arguments[u]))i.call(t,c)&&(l[c]=t[c]);if(r){s=r(t);for(var f=0;f<s.length;f++)o.call(t,s[f])&&(l[s[f]]=t[s[f]])}}return l}},,,function(n,e,t){var r=t(449),i=t(250);n.exports=function(n,e){return null!=n&&i(n,e,r)}},,function(n,e,t){"use strict";t.d(e,"a",(function(){return f}));var r=t(67),i=t(0),o=t(177),a=t(20),s=t(13),l=t(43),u=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))||this).prevNode=null,e}Object(a.a)(e,n);var t=e.prototype;return t.componentDidMount=function(){this.prevNode=s.findDOMNode(this),Object(l.a)(this.props.innerRef,this.prevNode)},t.componentDidUpdate=function(n){var e=s.findDOMNode(this);this.prevNode!==e&&(this.prevNode=e,Object(l.a)(this.props.innerRef,e)),n.innerRef!==this.props.innerRef&&Object(l.a)(this.props.innerRef,e)},t.componentWillUnmount=function(){Object(l.a)(this.props.innerRef,null),delete this.prevNode},t.render=function(){return this.props.children},e}(i.Component),c=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))||this).currentNode=null,e.handleRefOverride=function(n){var t=e.props,r=t.children,i=t.innerRef;Object(l.a)(r.ref,n),Object(l.a)(i,n),e.currentNode=n},e}Object(a.a)(e,n);var t=e.prototype;return t.componentDidUpdate=function(n){n.innerRef!==this.props.innerRef&&Object(l.a)(this.props.innerRef,this.currentNode)},t.componentWillUnmount=function(){delete this.currentNode},t.render=function(){var n=this.props.children;return i.cloneElement(n,{ref:this.handleRefOverride})},e}(i.Component),f=function(n){var e=n.children,t=n.innerRef,a=Object(r.a)(n,["children","innerRef"]),s=i.Children.only(e),l=o.isForwardRef(s)?c:u,f=s&&a&&Object.keys(a).length>0?i.cloneElement(s,a):s;return i.createElement(l,{innerRef:t},f)}},,,,,,,,,,function(n,e){n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e){var t=0,r=Math.random();n.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++t+r).toString(36))}},function(n,e){n.exports=!1},function(n,e,t){var r=t(344),i=Math.max,o=Math.min;n.exports=function(n,e){return(n=r(n))<0?i(n+e,0):o(n,e)}},function(n,e,t){var r=t(82),i=t(1036),o=t(982),a=t(981)("IE_PROTO"),s=function(){},l=function(){var n,e=t(979)("iframe"),r=o.length;for(e.style.display="none",t(984).appendChild(e),e.src="javascript:",(n=e.contentWindow.document).open(),n.write("<script>document.F=Object<\/script>"),n.close(),l=n.F;r--;)delete l.prototype[o[r]];return l()};n.exports=Object.create||function(n,e){var t;return null!==n?(s.prototype=r(n),t=new s,s.prototype=null,t[a]=n):t=l(),void 0===e?t:i(t,e)}},function(n,e,t){var r=t(1035),i=t(982).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,i)}},function(n,e,t){var r=t(304),i=t(263),o=t(981)("IE_PROTO"),a=Object.prototype;n.exports=Object.getPrototypeOf||function(n){return n=i(n),r(n,o)?n[o]:"function"==typeof n.constructor&&n instanceof n.constructor?n.constructor.prototype:n instanceof Object?a:null}},function(n,e,t){var r=t(90);n.exports=function(n,e){if(!r(n)||n._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return n}},,,function(n,e,t){"use strict";var r=t(177),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(n){return r.isMemo(n)?a:s[n.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var u=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;n.exports=function n(e,t,r){if("string"!=typeof t){if(p){var i=h(t);i&&i!==p&&n(e,i,r)}var a=c(t);f&&(a=a.concat(f(t)));for(var s=l(e),m=l(t),v=0;v<a.length;++v){var g=a[v];if(!(o[g]||r&&r[g]||m&&m[g]||s&&s[g])){var b=d(t,g);try{u(e,g,b)}catch(n){}}}}return e}},function(n,e,t){var r=t(252);n.exports=function(n,e,t){return null==n?n:r(n,e,t)}},function(n,e,t){var r=t(174),i=t(446),o=t(47),a=t(11);n.exports=function(n,e){return(a(n)?r:i)(n,o(e,3))}},function(n,e,t){var r=t(274),i=t(73),o=t(47),a=t(458),s=t(11);n.exports=function(n,e,t){var l=s(n)?r:a,u=arguments.length<3;return l(n,o(e,4),t,u,i)}},,,,,,,,,,function(n,e,t){var r=t(171).f,i=t(304),o=t(136)("toStringTag");n.exports=function(n,e,t){n&&!i(n=t?n:n.prototype,o)&&r(n,o,{configurable:!0,value:e})}},function(n,e,t){"use strict";var r=t(97),i=t(171),o=t(182),a=t(136)("species");n.exports=function(n){var e=r[n];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(n,e){n.exports=function(n,e,t,r){if(!(n instanceof e)||void 0!==r&&r in n)throw TypeError(t+": incorrect invocation!");return n}},function(n,e,t){var r=t(305);n.exports=function(n,e,t){for(var i in e)r(n,i,e[i],t);return n}},function(n,e,t){var r=t(431)(t(348));n.exports=r},function(n,e,t){"use strict";function r(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function i(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),n}t.d(e,"a",(function(){return i}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){var r=t(444),i=t(195),o=t(125);n.exports=function(n,e,t){return e=i(e),void 0===t?(t=e,e=0):t=i(t),n=o(n),r(n,e,t)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){var r=t(1035),i=t(982);n.exports=Object.keys||function(n){return r(n,i)}},function(n,e,t){var r=t(473);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==r(n)?n.split(""):Object(n)}},function(n,e,t){var r=t(473),i=t(136)("toStringTag"),o="Arguments"==r(function(){return arguments}());n.exports=function(n){var e,t,a;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=Object(n),i))?t:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(n,e){n.exports={}},function(n,e,t){var r=t(136)("unscopables"),i=Array.prototype;null==i[r]&&t(337)(i,r,{}),n.exports=function(n){i[r][n]=!0}},function(n,e,t){n.exports=t(270)},function(n,e,t){"use strict";(function(n,r){var i,o=t(265);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:r;var a=Object(o.a)(i);e.a=a}).call(this,t(45),t(353)(n))},function(n,e,t){"use strict";(function(n){
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
var t="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,r=function(){for(var n=["Edge","Trident","Firefox"],e=0;e<n.length;e+=1)if(t&&navigator.userAgent.indexOf(n[e])>=0)return 1;return 0}();var i=t&&window.Promise?function(n){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,n()})))}}:function(n){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,n()}),r))}};function o(n){return n&&"[object Function]"==={}.toString.call(n)}function a(n,e){if(1!==n.nodeType)return[];var t=n.ownerDocument.defaultView.getComputedStyle(n,null);return e?t[e]:t}function s(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function l(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}var e=a(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(t+i+r)?n:l(s(n))}function u(n){return n&&n.referenceNode?n.referenceNode:n}var c=t&&!(!window.MSInputMethodContext||!document.documentMode),f=t&&/MSIE 10/.test(navigator.userAgent);function d(n){return 11===n?c:10===n?f:c||f}function h(n){if(!n)return document.documentElement;for(var e=d(10)?document.body:null,t=n.offsetParent||null;t===e&&n.nextElementSibling;)t=(n=n.nextElementSibling).offsetParent;var r=t&&t.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===a(t,"position")?h(t):t:n?n.ownerDocument.documentElement:document.documentElement}function p(n){return null!==n.parentNode?p(n.parentNode):n}function m(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;var t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var a,s,l=o.commonAncestorContainer;if(n!==l&&e!==l||r.contains(i))return"BODY"===(s=(a=l).nodeName)||"HTML"!==s&&h(a.firstElementChild)!==a?h(l):l;var u=p(n);return u.host?m(u.host,e):m(n,p(e).host)}function v(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){var i=n.ownerDocument.documentElement,o=n.ownerDocument.scrollingElement||i;return o[t]}return n[t]}function g(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v(e,"top"),i=v(e,"left"),o=t?-1:1;return n.top+=r*o,n.bottom+=r*o,n.left+=i*o,n.right+=i*o,n}function b(n,e){var t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n["border"+t+"Width"])+parseFloat(n["border"+r+"Width"])}function y(n,e,t,r){return Math.max(e["offset"+n],e["scroll"+n],t["client"+n],t["offset"+n],t["scroll"+n],d(10)?parseInt(t["offset"+n])+parseInt(r["margin"+("Height"===n?"Top":"Left")])+parseInt(r["margin"+("Height"===n?"Bottom":"Right")]):0)}function w(n){var e=n.body,t=n.documentElement,r=d(10)&&getComputedStyle(t);return{height:y("Height",e,t,r),width:y("Width",e,t,r)}}var x=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},k=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),T=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n},S=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function _(n){return S({},n,{right:n.left+n.width,bottom:n.top+n.height})}function D(n){var e={};try{if(d(10)){e=n.getBoundingClientRect();var t=v(n,"top"),r=v(n,"left");e.top+=t,e.left+=r,e.bottom+=t,e.right+=r}else e=n.getBoundingClientRect()}catch(n){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===n.nodeName?w(n.ownerDocument):{},s=o.width||n.clientWidth||i.width,l=o.height||n.clientHeight||i.height,u=n.offsetWidth-s,c=n.offsetHeight-l;if(u||c){var f=a(n);u-=b(f,"x"),c-=b(f,"y"),i.width-=u,i.height-=c}return _(i)}function I(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=d(10),i="HTML"===e.nodeName,o=D(n),s=D(e),u=l(n),c=a(e),f=parseFloat(c.borderTopWidth),h=parseFloat(c.borderLeftWidth);t&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=_({top:o.top-s.top-f,left:o.left-s.left-h,width:o.width,height:o.height});if(p.marginTop=0,p.marginLeft=0,!r&&i){var m=parseFloat(c.marginTop),v=parseFloat(c.marginLeft);p.top-=f-m,p.bottom-=f-m,p.left-=h-v,p.right-=h-v,p.marginTop=m,p.marginLeft=v}return(r&&!t?e.contains(u):e===u&&"BODY"!==u.nodeName)&&(p=g(p,e)),p}function E(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n.ownerDocument.documentElement,r=I(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),o=Math.max(t.clientHeight,window.innerHeight||0),a=e?0:v(t),s=e?0:v(t,"left"),l={top:a-r.top+r.marginTop,left:s-r.left+r.marginLeft,width:i,height:o};return _(l)}function O(n){var e=n.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===a(n,"position"))return!0;var t=s(n);return!!t&&O(t)}function C(n){if(!n||!n.parentElement||d())return document.documentElement;for(var e=n.parentElement;e&&"none"===a(e,"transform");)e=e.parentElement;return e||document.documentElement}function A(n,e,t,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},a=i?C(n):m(n,u(e));if("viewport"===r)o=E(a,i);else{var c=void 0;"scrollParent"===r?"BODY"===(c=l(s(e))).nodeName&&(c=n.ownerDocument.documentElement):c="window"===r?n.ownerDocument.documentElement:r;var f=I(c,a,i);if("HTML"!==c.nodeName||O(a))o=f;else{var d=w(n.ownerDocument),h=d.height,p=d.width;o.top+=f.top-f.marginTop,o.bottom=h+f.top,o.left+=f.left-f.marginLeft,o.right=p+f.left}}var v="number"==typeof(t=t||0);return o.left+=v?t:t.left||0,o.top+=v?t:t.top||0,o.right-=v?t:t.right||0,o.bottom-=v?t:t.bottom||0,o}function L(n){return n.width*n.height}function j(n,e,t,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===n.indexOf("auto"))return n;var a=A(t,r,o,i),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},l=Object.keys(s).map((function(n){return S({key:n},s[n],{area:L(s[n])})})).sort((function(n,e){return e.area-n.area})),u=l.filter((function(n){var e=n.width,r=n.height;return e>=t.clientWidth&&r>=t.clientHeight})),c=u.length>0?u[0].key:l[0].key,f=n.split("-")[1];return c+(f?"-"+f:"")}function P(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?C(e):m(e,u(t));return I(t,i,r)}function $(n){var e=n.ownerDocument.defaultView.getComputedStyle(n),t=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:n.offsetWidth+r,height:n.offsetHeight+t}}function B(n){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,(function(n){return e[n]}))}function F(n,e,t){t=t.split("-")[0];var r=$(n),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(t),a=o?"top":"left",s=o?"left":"top",l=o?"height":"width",u=o?"width":"height";return i[a]=e[a]+e[l]/2-r[l]/2,i[s]=t===s?e[s]-r[u]:e[B(s)],i}function M(n,e){return Array.prototype.find?n.find(e):n.filter(e)[0]}function N(n,e,t){return(void 0===t?n:n.slice(0,function(n,e,t){if(Array.prototype.findIndex)return n.findIndex((function(n){return n[e]===t}));var r=M(n,(function(n){return n[e]===t}));return n.indexOf(r)}(n,"name",t))).forEach((function(n){n.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var t=n.function||n.fn;n.enabled&&o(t)&&(e.offsets.popper=_(e.offsets.popper),e.offsets.reference=_(e.offsets.reference),e=t(e,n))})),e}function R(){if(!this.state.isDestroyed){var n={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};n.offsets.reference=P(this.state,this.popper,this.reference,this.options.positionFixed),n.placement=j(this.options.placement,n.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),n.originalPlacement=n.placement,n.positionFixed=this.options.positionFixed,n.offsets.popper=F(this.popper,n.offsets.reference,n.placement),n.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",n=N(this.modifiers,n),this.state.isCreated?this.options.onUpdate(n):(this.state.isCreated=!0,this.options.onCreate(n))}}function H(n,e){return n.some((function(n){var t=n.name;return n.enabled&&t===e}))}function U(n){for(var e=[!1,"ms","Webkit","Moz","O"],t=n.charAt(0).toUpperCase()+n.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+t:n;if(void 0!==document.body.style[o])return o}return null}function W(){return this.state.isDestroyed=!0,H(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[U("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function z(n){var e=n.ownerDocument;return e?e.defaultView:window}function q(n,e,t,r){t.updateBound=r,z(n).addEventListener("resize",t.updateBound,{passive:!0});var i=l(n);return function n(e,t,r,i){var o="BODY"===e.nodeName,a=o?e.ownerDocument.defaultView:e;a.addEventListener(t,r,{passive:!0}),o||n(l(a.parentNode),t,r,i),i.push(a)}(i,"scroll",t.updateBound,t.scrollParents),t.scrollElement=i,t.eventsEnabled=!0,t}function V(){this.state.eventsEnabled||(this.state=q(this.reference,this.options,this.state,this.scheduleUpdate))}function G(){var n,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(n=this.reference,e=this.state,z(n).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(n){n.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function Y(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(n)}function X(n,e){Object.keys(e).forEach((function(t){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&Y(e[t])&&(r="px"),n.style[t]=e[t]+r}))}var J=t&&/Firefox/i.test(navigator.userAgent);function K(n,e,t){var r=M(n,(function(n){return n.name===e})),i=!!r&&n.some((function(n){return n.name===t&&n.enabled&&n.order<r.order}));if(!i){var o="`"+e+"`",a="`"+t+"`";console.warn(a+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var Q=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Z=Q.slice(3);function nn(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Z.indexOf(n),r=Z.slice(t+1).concat(Z.slice(0,t));return e?r.reverse():r}var en="flip",tn="clockwise",rn="counterclockwise";function on(n,e,t,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),a=n.split(/(\+|\-)/).map((function(n){return n.trim()})),s=a.indexOf(M(a,(function(n){return-1!==n.search(/,|\s/)})));a[s]&&-1===a[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==s?[a.slice(0,s).concat([a[s].split(l)[0]]),[a[s].split(l)[1]].concat(a.slice(s+1))]:[a];return(u=u.map((function(n,r){var i=(1===r?!o:o)?"height":"width",a=!1;return n.reduce((function(n,e){return""===n[n.length-1]&&-1!==["+","-"].indexOf(e)?(n[n.length-1]=e,a=!0,n):a?(n[n.length-1]+=e,a=!1,n):n.concat(e)}),[]).map((function(n){return function(n,e,t,r){var i=n.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],a=i[2];if(!o)return n;if(0===a.indexOf("%")){var s=void 0;switch(a){case"%p":s=t;break;case"%":case"%r":default:s=r}return _(s)[e]/100*o}if("vh"===a||"vw"===a)return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;return o}(n,i,e,t)}))}))).forEach((function(n,e){n.forEach((function(t,r){Y(t)&&(i[e]+=t*("-"===n[r-1]?-1:1))}))})),i}var an={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(n){var e=n.placement,t=e.split("-")[0],r=e.split("-")[1];if(r){var i=n.offsets,o=i.reference,a=i.popper,s=-1!==["bottom","top"].indexOf(t),l=s?"left":"top",u=s?"width":"height",c={start:T({},l,o[l]),end:T({},l,o[l]+o[u]-a[u])};n.offsets.popper=S({},a,c[r])}return n}},offset:{order:200,enabled:!0,fn:function(n,e){var t=e.offset,r=n.placement,i=n.offsets,o=i.popper,a=i.reference,s=r.split("-")[0],l=void 0;return l=Y(+t)?[+t,0]:on(t,o,a,s),"left"===s?(o.top+=l[0],o.left-=l[1]):"right"===s?(o.top+=l[0],o.left+=l[1]):"top"===s?(o.left+=l[0],o.top-=l[1]):"bottom"===s&&(o.left+=l[0],o.top+=l[1]),n.popper=o,n},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(n,e){var t=e.boundariesElement||h(n.instance.popper);n.instance.reference===t&&(t=h(t));var r=U("transform"),i=n.instance.popper.style,o=i.top,a=i.left,s=i[r];i.top="",i.left="",i[r]="";var l=A(n.instance.popper,n.instance.reference,e.padding,t,n.positionFixed);i.top=o,i.left=a,i[r]=s,e.boundaries=l;var u=e.priority,c=n.offsets.popper,f={primary:function(n){var t=c[n];return c[n]<l[n]&&!e.escapeWithReference&&(t=Math.max(c[n],l[n])),T({},n,t)},secondary:function(n){var t="right"===n?"left":"top",r=c[t];return c[n]>l[n]&&!e.escapeWithReference&&(r=Math.min(c[t],l[n]-("right"===n?c.width:c.height))),T({},t,r)}};return u.forEach((function(n){var e=-1!==["left","top"].indexOf(n)?"primary":"secondary";c=S({},c,f[e](n))})),n.offsets.popper=c,n},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(n){var e=n.offsets,t=e.popper,r=e.reference,i=n.placement.split("-")[0],o=Math.floor,a=-1!==["top","bottom"].indexOf(i),s=a?"right":"bottom",l=a?"left":"top",u=a?"width":"height";return t[s]<o(r[l])&&(n.offsets.popper[l]=o(r[l])-t[u]),t[l]>o(r[s])&&(n.offsets.popper[l]=o(r[s])),n}},arrow:{order:500,enabled:!0,fn:function(n,e){var t;if(!K(n.instance.modifiers,"arrow","keepTogether"))return n;var r=e.element;if("string"==typeof r){if(!(r=n.instance.popper.querySelector(r)))return n}else if(!n.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),n;var i=n.placement.split("-")[0],o=n.offsets,s=o.popper,l=o.reference,u=-1!==["left","right"].indexOf(i),c=u?"height":"width",f=u?"Top":"Left",d=f.toLowerCase(),h=u?"left":"top",p=u?"bottom":"right",m=$(r)[c];l[p]-m<s[d]&&(n.offsets.popper[d]-=s[d]-(l[p]-m)),l[d]+m>s[p]&&(n.offsets.popper[d]+=l[d]+m-s[p]),n.offsets.popper=_(n.offsets.popper);var v=l[d]+l[c]/2-m/2,g=a(n.instance.popper),b=parseFloat(g["margin"+f]),y=parseFloat(g["border"+f+"Width"]),w=v-n.offsets.popper[d]-b-y;return w=Math.max(Math.min(s[c]-m,w),0),n.arrowElement=r,n.offsets.arrow=(T(t={},d,Math.round(w)),T(t,h,""),t),n},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(n,e){if(H(n.instance.modifiers,"inner"))return n;if(n.flipped&&n.placement===n.originalPlacement)return n;var t=A(n.instance.popper,n.instance.reference,e.padding,e.boundariesElement,n.positionFixed),r=n.placement.split("-")[0],i=B(r),o=n.placement.split("-")[1]||"",a=[];switch(e.behavior){case en:a=[r,i];break;case tn:a=nn(r);break;case rn:a=nn(r,!0);break;default:a=e.behavior}return a.forEach((function(s,l){if(r!==s||a.length===l+1)return n;r=n.placement.split("-")[0],i=B(r);var u=n.offsets.popper,c=n.offsets.reference,f=Math.floor,d="left"===r&&f(u.right)>f(c.left)||"right"===r&&f(u.left)<f(c.right)||"top"===r&&f(u.bottom)>f(c.top)||"bottom"===r&&f(u.top)<f(c.bottom),h=f(u.left)<f(t.left),p=f(u.right)>f(t.right),m=f(u.top)<f(t.top),v=f(u.bottom)>f(t.bottom),g="left"===r&&h||"right"===r&&p||"top"===r&&m||"bottom"===r&&v,b=-1!==["top","bottom"].indexOf(r),y=!!e.flipVariations&&(b&&"start"===o&&h||b&&"end"===o&&p||!b&&"start"===o&&m||!b&&"end"===o&&v),w=!!e.flipVariationsByContent&&(b&&"start"===o&&p||b&&"end"===o&&h||!b&&"start"===o&&v||!b&&"end"===o&&m),x=y||w;(d||g||x)&&(n.flipped=!0,(d||g)&&(r=a[l+1]),x&&(o=function(n){return"end"===n?"start":"start"===n?"end":n}(o)),n.placement=r+(o?"-"+o:""),n.offsets.popper=S({},n.offsets.popper,F(n.instance.popper,n.offsets.reference,n.placement)),n=N(n.instance.modifiers,n,"flip"))})),n},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(n){var e=n.placement,t=e.split("-")[0],r=n.offsets,i=r.popper,o=r.reference,a=-1!==["left","right"].indexOf(t),s=-1===["top","left"].indexOf(t);return i[a?"left":"top"]=o[t]-(s?i[a?"width":"height"]:0),n.placement=B(e),n.offsets.popper=_(i),n}},hide:{order:800,enabled:!0,fn:function(n){if(!K(n.instance.modifiers,"hide","preventOverflow"))return n;var e=n.offsets.reference,t=M(n.instance.modifiers,(function(n){return"preventOverflow"===n.name})).boundaries;if(e.bottom<t.top||e.left>t.right||e.top>t.bottom||e.right<t.left){if(!0===n.hide)return n;n.hide=!0,n.attributes["x-out-of-boundaries"]=""}else{if(!1===n.hide)return n;n.hide=!1,n.attributes["x-out-of-boundaries"]=!1}return n}},computeStyle:{order:850,enabled:!0,fn:function(n,e){var t=e.x,r=e.y,i=n.offsets.popper,o=M(n.instance.modifiers,(function(n){return"applyStyle"===n.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=void 0!==o?o:e.gpuAcceleration,s=h(n.instance.popper),l=D(s),u={position:i.position},c=function(n,e){var t=n.offsets,r=t.popper,i=t.reference,o=Math.round,a=Math.floor,s=function(n){return n},l=o(i.width),u=o(r.width),c=-1!==["left","right"].indexOf(n.placement),f=-1!==n.placement.indexOf("-"),d=e?c||f||l%2==u%2?o:a:s,h=e?o:s;return{left:d(l%2==1&&u%2==1&&!f&&e?r.left-1:r.left),top:h(r.top),bottom:h(r.bottom),right:d(r.right)}}(n,window.devicePixelRatio<2||!J),f="bottom"===t?"top":"bottom",d="right"===r?"left":"right",p=U("transform"),m=void 0,v=void 0;if(v="bottom"===f?"HTML"===s.nodeName?-s.clientHeight+c.bottom:-l.height+c.bottom:c.top,m="right"===d?"HTML"===s.nodeName?-s.clientWidth+c.right:-l.width+c.right:c.left,a&&p)u[p]="translate3d("+m+"px, "+v+"px, 0)",u[f]=0,u[d]=0,u.willChange="transform";else{var g="bottom"===f?-1:1,b="right"===d?-1:1;u[f]=v*g,u[d]=m*b,u.willChange=f+", "+d}var y={"x-placement":n.placement};return n.attributes=S({},y,n.attributes),n.styles=S({},u,n.styles),n.arrowStyles=S({},n.offsets.arrow,n.arrowStyles),n},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(n){var e,t;return X(n.instance.popper,n.styles),e=n.instance.popper,t=n.attributes,Object.keys(t).forEach((function(n){!1!==t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)})),n.arrowElement&&Object.keys(n.arrowStyles).length&&X(n.arrowElement,n.arrowStyles),n},onLoad:function(n,e,t,r,i){var o=P(i,e,n,t.positionFixed),a=j(t.placement,o,e,n,t.modifiers.flip.boundariesElement,t.modifiers.flip.padding);return e.setAttribute("x-placement",a),X(e,{position:t.positionFixed?"fixed":"absolute"}),t},gpuAcceleration:void 0}}},sn=function(){function n(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};x(this,n),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=i(this.update.bind(this)),this.options=S({},n.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=t&&t.jquery?t[0]:t,this.options.modifiers={},Object.keys(S({},n.Defaults.modifiers,a.modifiers)).forEach((function(e){r.options.modifiers[e]=S({},n.Defaults.modifiers[e]||{},a.modifiers?a.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(n){return S({name:n},r.options.modifiers[n])})).sort((function(n,e){return n.order-e.order})),this.modifiers.forEach((function(n){n.enabled&&o(n.onLoad)&&n.onLoad(r.reference,r.popper,r.options,n,r.state)})),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return k(n,[{key:"update",value:function(){return R.call(this)}},{key:"destroy",value:function(){return W.call(this)}},{key:"enableEventListeners",value:function(){return V.call(this)}},{key:"disableEventListeners",value:function(){return G.call(this)}}]),n}();sn.Utils=("undefined"!=typeof window?window:n).PopperUtils,sn.placements=Q,sn.Defaults=an,e.a=sn}).call(this,t(45))},function(n,e,t){"use strict";e.__esModule=!0;var r=o(t(0)),i=o(t(469));function o(n){return n&&n.__esModule?n:{default:n}}e.default=r.default.createContext||i.default,n.exports=e.default},,,function(n,e,t){var r=t(46),i=t(30);n.exports=function(n){return"number"==typeof n||i(n)&&"[object Number]"==r(n)}},function(n,e,t){var r=t(46),i=t(30);n.exports=function(n){return!0===n||!1===n||i(n)&&"[object Boolean]"==r(n)}},function(n,e,t){n.exports=t(445)},function(n,e){n.exports=function(n){for(var e=-1,t=null==n?0:n.length,r=0,i=[];++e<t;){var o=n[e];o&&(i[r++]=o)}return i}},function(n,e,t){var r=t(181),i=t(71);n.exports=function(n,e,t){var o=null==n?0:n.length;return o?(e=t||void 0===e?1:i(e),r(n,0,(e=o-e)<0?0:e)):[]}},function(n,e,t){var r=t(168),i=t(89),o=t(40),a=t(214),s=t(452);n.exports=function(n){if(null==n)return 0;if(o(n))return a(n)?s(n):n.length;var e=i(n);return"[object Map]"==e||"[object Set]"==e?n.size:r(n).length}},function(n,e,t){var r=t(57),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);n.exports=function(n){return(n=r(n))&&o.test(n)?n.replace(i,"\\$&"):n}},function(n,e,t){var r=t(219),i=t(464),o=t(65),a=Object.prototype.toString,s=i((function(n,e,t){null!=e&&"function"!=typeof e.toString&&(e=a.call(e)),n[e]=t}),r(o));n.exports=s},function(n,e,t){var r=t(147),i=t(466),o=t(302),a=t(301),s=t(467),l=t(300),u=Date.prototype.getTime;function c(n,e,t){var h=t||{};return!!(h.strict?o(n,e):n===e)||(!n||!e||"object"!=typeof n&&"object"!=typeof e?h.strict?o(n,e):n==e:function(n,e,t){var o,h;if(typeof n!=typeof e)return!1;if(f(n)||f(e))return!1;if(n.prototype!==e.prototype)return!1;if(i(n)!==i(e))return!1;var p=a(n),m=a(e);if(p!==m)return!1;if(p||m)return n.source===e.source&&s(n)===s(e);if(l(n)&&l(e))return u.call(n)===u.call(e);var v=d(n),g=d(e);if(v!==g)return!1;if(v||g){if(n.length!==e.length)return!1;for(o=0;o<n.length;o++)if(n[o]!==e[o])return!1;return!0}if(typeof n!=typeof e)return!1;try{var b=r(n),y=r(e)}catch(n){return!1}if(b.length!==y.length)return!1;for(b.sort(),y.sort(),o=b.length-1;o>=0;o--)if(b[o]!=y[o])return!1;for(o=b.length-1;o>=0;o--)if(!c(n[h=b[o]],e[h],t))return!1;return!0}(n,e,h))}function f(n){return null==n}function d(n){return!(!n||"object"!=typeof n||"number"!=typeof n.length)&&("function"==typeof n.copy&&"function"==typeof n.slice&&!(n.length>0&&"number"!=typeof n[0]))}n.exports=c},function(n,e,t){"use strict";(function(n){var r=t(0),i=t.n(r),o=t(20),a=t(1),s=t.n(a),l=1073741823,u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:{};function c(n){var e=[];return{on:function(n){e.push(n)},off:function(n){e=e.filter((function(e){return e!==n}))},get:function(){return n},set:function(t,r){n=t,e.forEach((function(e){return e(n,r)}))}}}var f=i.a.createContext||function(n,e){var t,i,a,f="__create-react-context-"+((u[a="__global_unique_id__"]=(u[a]||0)+1)+"__"),d=function(n){function t(){var e;return(e=n.apply(this,arguments)||this).emitter=c(e.props.value),e}Object(o.a)(t,n);var r=t.prototype;return r.getChildContext=function(){var n;return(n={})[f]=this.emitter,n},r.componentWillReceiveProps=function(n){if(this.props.value!==n.value){var t,r=this.props.value,i=n.value;((o=r)===(a=i)?0!==o||1/o==1/a:o!=o&&a!=a)?t=0:(t="function"==typeof e?e(r,i):l,0!==(t|=0)&&this.emitter.set(n.value,t))}var o,a},r.render=function(){return this.props.children},t}(r.Component);d.childContextTypes=((t={})[f]=s.a.object.isRequired,t);var h=function(e){function t(){var n;return(n=e.apply(this,arguments)||this).state={value:n.getValue()},n.onUpdate=function(e,t){0!=((0|n.observedBits)&t)&&n.setState({value:n.getValue()})},n}Object(o.a)(t,e);var r=t.prototype;return r.componentWillReceiveProps=function(n){var e=n.observedBits;this.observedBits=null==e?l:e},r.componentDidMount=function(){this.context[f]&&this.context[f].on(this.onUpdate);var n=this.props.observedBits;this.observedBits=null==n?l:n},r.componentWillUnmount=function(){this.context[f]&&this.context[f].off(this.onUpdate)},r.getValue=function(){return this.context[f]?this.context[f].get():n},r.render=function(){return(n=this.props.children,Array.isArray(n)?n[0]:n)(this.state.value);var n},t}(r.Component);return h.contextTypes=((i={})[f]=s.a.object,i),{Provider:d,Consumer:h}};e.a=f}).call(this,t(45))},function(n,e,t){var r=t(484);n.exports=h,n.exports.parse=o,n.exports.compile=function(n,e){return s(o(n,e),e)},n.exports.tokensToFunction=s,n.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(n,e){for(var t,r=[],o=0,a=0,s="",c=e&&e.delimiter||"/";null!=(t=i.exec(n));){var f=t[0],d=t[1],h=t.index;if(s+=n.slice(a,h),a=h+f.length,d)s+=d[1];else{var p=n[a],m=t[2],v=t[3],g=t[4],b=t[5],y=t[6],w=t[7];s&&(r.push(s),s="");var x=null!=m&&null!=p&&p!==m,k="+"===y||"*"===y,T="?"===y||"*"===y,S=t[2]||c,_=g||b;r.push({name:v||o++,prefix:m||"",delimiter:S,optional:T,repeat:k,partial:x,asterisk:!!w,pattern:_?u(_):w?".*":"[^"+l(S)+"]+?"})}}return a<n.length&&(s+=n.substr(a)),s&&r.push(s),r}function a(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function s(n,e){for(var t=new Array(n.length),i=0;i<n.length;i++)"object"==typeof n[i]&&(t[i]=new RegExp("^(?:"+n[i].pattern+")$",f(e)));return function(e,i){for(var o="",s=e||{},l=(i||{}).pretty?a:encodeURIComponent,u=0;u<n.length;u++){var c=n[u];if("string"!=typeof c){var f,d=s[c.name];if(null==d){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(f=l(d[h]),!t[u].test(f))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(f)+"`");o+=(0===h?c.prefix:c.delimiter)+f}}else{if(f=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):l(d),!t[u].test(f))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+f+'"');o+=c.prefix+f}}else o+=c}return o}}function l(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function c(n,e){return n.keys=e,n}function f(n){return n&&n.sensitive?"":"i"}function d(n,e,t){r(e)||(t=e||t,e=[]);for(var i=(t=t||{}).strict,o=!1!==t.end,a="",s=0;s<n.length;s++){var u=n[s];if("string"==typeof u)a+=l(u);else{var d=l(u.prefix),h="(?:"+u.pattern+")";e.push(u),u.repeat&&(h+="(?:"+d+h+")*"),a+=h=u.optional?u.partial?d+"("+h+")?":"(?:"+d+"("+h+"))?":d+"("+h+")"}}var p=l(t.delimiter||"/"),m=a.slice(-p.length)===p;return i||(a=(m?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+p+"|$)",c(new RegExp("^"+a,f(t)),e)}function h(n,e,t){return r(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(n,e)}(n,e):r(n)?function(n,e,t){for(var r=[],i=0;i<n.length;i++)r.push(h(n[i],e,t).source);return c(new RegExp("(?:"+r.join("|")+")",f(t)),e)}(n,e,t):function(n,e,t){return d(o(n,t),e,t)}(n,e,t)}},,,,function(n,e,t){"use strict";n.exports=t(404)},function(n,e,t){var r=t(295),i=t(244),o=t(71),a=t(57);n.exports=function(n,e,t){return n=a(n),t=null==t?0:r(o(t),0,n.length),e=i(e),n.slice(t,t+e.length)==e}},function(n,e,t){var r=t(50),i=t(447),o=t(49),a=t(448),s=o((function(n){var e=r(n,a);return e.length&&e[0]===n[0]?i(e):[]}));n.exports=s},,,,,function(n,e,t){var r=t(554),i=t(97),o="__core-js_shared__",a=i[o]||(i[o]={});(n.exports=function(n,e){return a[n]||(a[n]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:t(582)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(n,e){e.f=Object.getOwnPropertySymbols},function(n,e){e.f={}.propertyIsEnumerable},function(n,e,t){var r=t(22),i=t(557),o=t(81),a=t(986),s="["+a+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),c=function(n,e,t){var i={},s=o((function(){return!!a[n]()||"​"!="​"[n]()})),l=i[n]=s?e(f):a[n];t&&(i[t]=l),r(r.P+r.F*s,"String",i)},f=c.trim=function(n,e){return n=String(i(n)),1&e&&(n=n.replace(l,"")),2&e&&(n=n.replace(u,"")),n};n.exports=c},function(n,e,t){var r=t(136)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(n){}n.exports=function(n,e){if(!e&&!i)return!1;var t=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:t=!0}},o[r]=function(){return a},n(o)}catch(n){}return t}},function(n,e,t){"use strict";var r=t(82);n.exports=function(){var n=r(this),e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}},function(n,e,t){"use strict";var r=t(925),i=RegExp.prototype.exec;n.exports=function(n,e){var t=n.exec;if("function"==typeof t){var o=t.call(n,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(n))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(n,e)}},function(n,e,t){"use strict";t(1055);var r=t(305),i=t(337),o=t(81),a=t(557),s=t(136),l=t(998),u=s("species"),c=!o((function(){var n=/./;return n.exec=function(){var n=[];return n.groups={a:"7"},n},"7"!=="".replace(n,"$<a>")})),f=function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var t="ab".split(n);return 2===t.length&&"a"===t[0]&&"b"===t[1]}();n.exports=function(n,e,t){var d=s(n),h=!o((function(){var e={};return e[d]=function(){return 7},7!=""[n](e)})),p=h?!o((function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[u]=function(){return t}),t[d](""),!e})):void 0;if(!h||!p||"replace"===n&&!c||"split"===n&&!f){var m=/./[d],v=t(a,d,""[n],(function(n,e,t,r,i){return e.exec===l?h&&!i?{done:!0,value:m.call(e,t,r)}:{done:!0,value:n.call(t,e,r)}:{done:!1}})),g=v[0],b=v[1];r(String.prototype,n,g),i(RegExp.prototype,d,2==e?function(n,e){return b.call(n,this,e)}:function(n){return b.call(n,this)})}}},function(n,e,t){var r=t(82),i=t(472),o=t(136)("species");n.exports=function(n,e){var t,a=r(n).constructor;return void 0===a||null==(t=r(a)[o])?e:i(t)}},function(n,e,t){var r=t(471),i=t(1049),o=t(995),a=t(82),s=t(172),l=t(996),u={},c={};(e=n.exports=function(n,e,t,f,d){var h,p,m,v,g=d?function(){return n}:l(n),b=r(t,f,e?2:1),y=0;if("function"!=typeof g)throw TypeError(n+" is not iterable!");if(o(g)){for(h=s(n.length);h>y;y++)if((v=e?b(a(p=n[y])[0],p[1]):b(n[y]))===u||v===c)return v}else for(m=g.call(n);!(p=m.next()).done;)if((v=i(m,b,p.value,e))===u||v===c)return v}).BREAK=u,e.RETURN=c},function(n,e,t){"use strict";var r=t(97),i=t(22),o=t(305),a=t(606),s=t(556),l=t(964),u=t(605),c=t(90),f=t(81),d=t(959),h=t(603),p=t(987);n.exports=function(n,e,t,m,v,g){var b=r[n],y=b,w=v?"set":"add",x=y&&y.prototype,k={},T=function(n){var e=x[n];o(x,n,"delete"==n||"has"==n?function(n){return!(g&&!c(n))&&e.call(this,0===n?0:n)}:"get"==n?function(n){return g&&!c(n)?void 0:e.call(this,0===n?0:n)}:"add"==n?function(n){return e.call(this,0===n?0:n),this}:function(n,t){return e.call(this,0===n?0:n,t),this})};if("function"==typeof y&&(g||x.forEach&&!f((function(){(new y).entries().next()})))){var S=new y,_=S[w](g?{}:-0,1)!=S,D=f((function(){S.has(1)})),I=d((function(n){new y(n)})),E=!g&&f((function(){for(var n=new y,e=5;e--;)n[w](e,e);return!n.has(-0)}));I||((y=e((function(e,t){u(e,y,n);var r=p(new b,e,y);return null!=t&&l(t,v,r[w],r),r}))).prototype=x,x.constructor=y),(D||E)&&(T("delete"),T("has"),v&&T("get")),(E||_)&&T(w),g&&x.clear&&delete x.clear}else y=m.getConstructor(e,n,v,w),a(y.prototype,t),s.NEED=!0;return h(y,n),k[n]=y,i(i.G+i.W+i.F*(y!=b),k),g||m.setStrong(y,n,v),y}},function(n,e,t){for(var r,i=t(97),o=t(337),a=t(581),s=a("typed_array"),l=a("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[d[f++]])?(o(r.prototype,s,!0),o(r.prototype,l,!0)):c=!1;n.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},,,,,,,,,,,,,function(n,e,t){var r=t(90),i=t(97).document,o=r(i)&&r(i.createElement);n.exports=function(n){return o?i.createElement(n):{}}},function(n,e,t){var r=t(343),i=t(172),o=t(583);n.exports=function(n){return function(e,t,a){var s,l=r(e),u=i(l.length),c=o(a,u);if(n&&t!=t){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((n||c in l)&&l[c]===t)return n||c||0;return!n&&-1}}},function(n,e,t){var r=t(955)("keys"),i=t(581);n.exports=function(n){return r[n]||(r[n]=i(n))}},function(n,e){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(n,e,t){var r=t(473);n.exports=Array.isArray||function(n){return"Array"==r(n)}},function(n,e,t){var r=t(97).document;n.exports=r&&r.documentElement},function(n,e,t){var r=t(90),i=t(82),o=function(n,e){if(i(n),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(n,e,r){try{(r=t(471)(Function.call,t(474).f(Object.prototype,"__proto__").set,2))(n,[]),e=!(n instanceof Array)}catch(n){e=!0}return function(n,t){return o(n,t),e?n.__proto__=t:r(n,t),n}}({},!1):void 0),check:o}},function(n,e){n.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(n,e,t){var r=t(90),i=t(985).set;n.exports=function(n,e,t){var o,a=e.constructor;return a!==t&&"function"==typeof a&&(o=a.prototype)!==t.prototype&&r(o)&&i&&i(n,o),n}},function(n,e){n.exports=Math.sign||function(n){return 0==(n=+n)||n!=n?n:n<0?-1:1}},function(n,e){var t=Math.expm1;n.exports=!t||t(10)>22025.465794806718||t(10)<22025.465794806718||-2e-17!=t(-2e-17)?function(n){return 0==(n=+n)?n:n>-1e-6&&n<1e-6?n+n*n/2:Math.exp(n)-1}:t},function(n,e,t){var r=t(344),i=t(557);n.exports=function(n){return function(e,t){var o,a,s=String(i(e)),l=r(t),u=s.length;return l<0||l>=u?n?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?n?s.charAt(l):o:n?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(n,e,t){"use strict";var r=t(582),i=t(22),o=t(305),a=t(337),s=t(926),l=t(1048),u=t(603),c=t(586),f=t(136)("iterator"),d=!([].keys&&"next"in[].keys()),h="keys",p="values",m=function(){return this};n.exports=function(n,e,t,v,g,b,y){l(t,e,v);var w,x,k,T=function(n){if(!d&&n in I)return I[n];switch(n){case h:case p:return function(){return new t(this,n)}}return function(){return new t(this,n)}},S=e+" Iterator",_=g==p,D=!1,I=n.prototype,E=I[f]||I["@@iterator"]||g&&I[g],O=E||T(g),C=g?_?T("entries"):O:void 0,A="Array"==e&&I.entries||E;if(A&&(k=c(A.call(new n)))!==Object.prototype&&k.next&&(u(k,S,!0),r||"function"==typeof k[f]||a(k,f,m)),_&&E&&E.name!==p&&(D=!0,O=function(){return E.call(this)}),r&&!y||!d&&!D&&I[f]||a(I,f,O),s[e]=O,s[S]=m,g)if(w={values:_?O:T(p),keys:b?O:T(h),entries:C},y)for(x in w)x in I||o(I,x,w[x]);else i(i.P+i.F*(d||D),e,w);return w}},function(n,e,t){var r=t(993),i=t(557);n.exports=function(n,e,t){if(r(e))throw TypeError("String#"+t+" doesn't accept regex!");return String(i(n))}},function(n,e,t){var r=t(90),i=t(473),o=t(136)("match");n.exports=function(n){var e;return r(n)&&(void 0!==(e=n[o])?!!e:"RegExp"==i(n))}},function(n,e,t){var r=t(136)("match");n.exports=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[r]=!1,!"/./"[n](e)}catch(n){}}return!0}},function(n,e,t){var r=t(926),i=t(136)("iterator"),o=Array.prototype;n.exports=function(n){return void 0!==n&&(r.Array===n||o[i]===n)}},function(n,e,t){var r=t(925),i=t(136)("iterator"),o=t(926);n.exports=t(554).getIteratorMethod=function(n){if(null!=n)return n[i]||n["@@iterator"]||o[r(n)]}},function(n,e,t){"use strict";var r=t(263),i=t(583),o=t(172);n.exports=function(n){for(var e=r(this),t=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,t),l=a>2?arguments[2]:void 0,u=void 0===l?t:i(l,t);u>s;)e[s++]=n;return e}},function(n,e,t){"use strict";var r,i,o=t(960),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(l=function(n){var e,t,r,i,l=this;return c&&(t=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),u&&(e=l.lastIndex),r=a.call(l,n),u&&r&&(l.lastIndex=l.global?r.index+r[0].length:e),c&&r&&r.length>1&&s.call(r[0],t,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),n.exports=l},function(n,e,t){"use strict";var r=t(990)(!0);n.exports=function(n,e,t){return e+(t?r(n,e).length:1)}},function(n,e,t){"use strict";var r=t(97),i=t(182),o=t(582),a=t(966),s=t(337),l=t(606),u=t(81),c=t(605),f=t(344),d=t(172),h=t(1061),p=t(585).f,m=t(171).f,v=t(997),g=t(603),b="ArrayBuffer",y="DataView",w="Wrong index!",x=r.ArrayBuffer,k=r.DataView,T=r.Math,S=r.RangeError,_=r.Infinity,D=x,I=T.abs,E=T.pow,O=T.floor,C=T.log,A=T.LN2,L="buffer",j="byteLength",P="byteOffset",$=i?"_b":L,B=i?"_l":j,F=i?"_o":P;function M(n,e,t){var r,i,o,a=new Array(t),s=8*t-e-1,l=(1<<s)-1,u=l>>1,c=23===e?E(2,-24)-E(2,-77):0,f=0,d=n<0||0===n&&1/n<0?1:0;for((n=I(n))!=n||n===_?(i=n!=n?1:0,r=l):(r=O(C(n)/A),n*(o=E(2,-r))<1&&(r--,o*=2),(n+=r+u>=1?c/o:c*E(2,1-u))*o>=2&&(r++,o/=2),r+u>=l?(i=0,r=l):r+u>=1?(i=(n*o-1)*E(2,e),r+=u):(i=n*E(2,u-1)*E(2,e),r=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*d,a}function N(n,e,t){var r,i=8*t-e-1,o=(1<<i)-1,a=o>>1,s=i-7,l=t-1,u=n[l--],c=127&u;for(u>>=7;s>0;c=256*c+n[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=e;s>0;r=256*r+n[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:u?-_:_;r+=E(2,e),c-=a}return(u?-1:1)*r*E(2,c-e)}function R(n){return n[3]<<24|n[2]<<16|n[1]<<8|n[0]}function H(n){return[255&n]}function U(n){return[255&n,n>>8&255]}function W(n){return[255&n,n>>8&255,n>>16&255,n>>24&255]}function z(n){return M(n,52,8)}function q(n){return M(n,23,4)}function V(n,e,t){m(n.prototype,e,{get:function(){return this[t]}})}function G(n,e,t,r){var i=h(+t);if(i+e>n[B])throw S(w);var o=n[$]._b,a=i+n[F],s=o.slice(a,a+e);return r?s:s.reverse()}function Y(n,e,t,r,i,o){var a=h(+t);if(a+e>n[B])throw S(w);for(var s=n[$]._b,l=a+n[F],u=r(+i),c=0;c<e;c++)s[l+c]=u[o?c:e-c-1]}if(a.ABV){if(!u((function(){x(1)}))||!u((function(){new x(-1)}))||u((function(){return new x,new x(1.5),new x(NaN),x.name!=b}))){for(var X,J=(x=function(n){return c(this,x),new D(h(n))}).prototype=D.prototype,K=p(D),Q=0;K.length>Q;)(X=K[Q++])in x||s(x,X,D[X]);o||(J.constructor=x)}var Z=new k(new x(2)),nn=k.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||l(k.prototype,{setInt8:function(n,e){nn.call(this,n,e<<24>>24)},setUint8:function(n,e){nn.call(this,n,e<<24>>24)}},!0)}else x=function(n){c(this,x,b);var e=h(n);this._b=v.call(new Array(e),0),this[B]=e},k=function(n,e,t){c(this,k,y),c(n,x,y);var r=n[B],i=f(e);if(i<0||i>r)throw S("Wrong offset!");if(i+(t=void 0===t?r-i:d(t))>r)throw S("Wrong length!");this[$]=n,this[F]=i,this[B]=t},i&&(V(x,j,"_l"),V(k,L,"_b"),V(k,j,"_l"),V(k,P,"_o")),l(k.prototype,{getInt8:function(n){return G(this,1,n)[0]<<24>>24},getUint8:function(n){return G(this,1,n)[0]},getInt16:function(n){var e=G(this,2,n,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(n){var e=G(this,2,n,arguments[1]);return e[1]<<8|e[0]},getInt32:function(n){return R(G(this,4,n,arguments[1]))},getUint32:function(n){return R(G(this,4,n,arguments[1]))>>>0},getFloat32:function(n){return N(G(this,4,n,arguments[1]),23,4)},getFloat64:function(n){return N(G(this,8,n,arguments[1]),52,8)},setInt8:function(n,e){Y(this,1,n,H,e)},setUint8:function(n,e){Y(this,1,n,H,e)},setInt16:function(n,e){Y(this,2,n,U,e,arguments[2])},setUint16:function(n,e){Y(this,2,n,U,e,arguments[2])},setInt32:function(n,e){Y(this,4,n,W,e,arguments[2])},setUint32:function(n,e){Y(this,4,n,W,e,arguments[2])},setFloat32:function(n,e){Y(this,4,n,q,e,arguments[2])},setFloat64:function(n,e){Y(this,8,n,z,e,arguments[2])}});g(x,b),g(k,y),s(k.prototype,a.VIEW,!0),e.ArrayBuffer=x,e.DataView=k},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){n.exports=!t(182)&&!t(81)((function(){return 7!=Object.defineProperty(t(979)("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){e.f=t(136)},function(n,e,t){var r=t(304),i=t(343),o=t(980)(!1),a=t(981)("IE_PROTO");n.exports=function(n,e){var t,s=i(n),l=0,u=[];for(t in s)t!=a&&r(s,t)&&u.push(t);for(;e.length>l;)r(s,t=e[l++])&&(~o(u,t)||u.push(t));return u}},function(n,e,t){var r=t(171),i=t(82),o=t(923);n.exports=t(182)?Object.defineProperties:function(n,e){i(n);for(var t,a=o(e),s=a.length,l=0;s>l;)r.f(n,t=a[l++],e[t]);return n}},function(n,e,t){var r=t(343),i=t(585).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(n){return a&&"[object Window]"==o.call(n)?function(n){try{return i(n)}catch(n){return a.slice()}}(n):i(r(n))}},function(n,e,t){"use strict";var r=t(182),i=t(923),o=t(956),a=t(957),s=t(263),l=t(924),u=Object.assign;n.exports=!u||t(81)((function(){var n={},e={},t=Symbol(),r="abcdefghijklmnopqrst";return n[t]=7,r.split("").forEach((function(n){e[n]=n})),7!=u({},n)[t]||Object.keys(u({},e)).join("")!=r}))?function(n,e){for(var t=s(n),u=arguments.length,c=1,f=o.f,d=a.f;u>c;)for(var h,p=l(arguments[c++]),m=f?i(p).concat(f(p)):i(p),v=m.length,g=0;v>g;)h=m[g++],r&&!d.call(p,h)||(t[h]=p[h]);return t}:u},function(n,e){n.exports=Object.is||function(n,e){return n===e?0!==n||1/n==1/e:n!=n&&e!=e}},function(n,e,t){"use strict";var r=t(472),i=t(90),o=t(1041),a=[].slice,s={},l=function(n,e,t){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](n,t)};n.exports=Function.bind||function(n){var e=r(this),t=a.call(arguments,1),s=function(){var r=t.concat(a.call(arguments));return this instanceof s?l(e,r.length,r):o(e,r,n)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(n,e){n.exports=function(n,e,t){var r=void 0===t;switch(e.length){case 0:return r?n():n.call(t);case 1:return r?n(e[0]):n.call(t,e[0]);case 2:return r?n(e[0],e[1]):n.call(t,e[0],e[1]);case 3:return r?n(e[0],e[1],e[2]):n.call(t,e[0],e[1],e[2]);case 4:return r?n(e[0],e[1],e[2],e[3]):n.call(t,e[0],e[1],e[2],e[3])}return n.apply(t,e)}},function(n,e,t){var r=t(97).parseInt,i=t(958).trim,o=t(986),a=/^[-+]?0[xX]/;n.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(n,e){var t=i(String(n),3);return r(t,e>>>0||(a.test(t)?16:10))}:r},function(n,e,t){var r=t(97).parseFloat,i=t(958).trim;n.exports=1/r(t(986)+"-0")!=-1/0?function(n){var e=i(String(n),3),t=r(e);return 0===t&&"-"==e.charAt(0)?-0:t}:r},function(n,e,t){var r=t(473);n.exports=function(n,e){if("number"!=typeof n&&"Number"!=r(n))throw TypeError(e);return+n}},function(n,e,t){"use strict";var r=t(344),i=t(557);n.exports=function(n){var e=String(i(this)),t="",o=r(n);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(t+=e);return t}},function(n,e,t){var r=t(90),i=Math.floor;n.exports=function(n){return!r(n)&&isFinite(n)&&i(n)===n}},function(n,e){n.exports=Math.log1p||function(n){return(n=+n)>-1e-8&&n<1e-8?n-n*n/2:Math.log(1+n)}},function(n,e,t){"use strict";var r=t(584),i=t(580),o=t(603),a={};t(337)(a,t(136)("iterator"),(function(){return this})),n.exports=function(n,e,t){n.prototype=r(a,{next:i(1,t)}),o(n,e+" Iterator")}},function(n,e,t){var r=t(82);n.exports=function(n,e,t,i){try{return i?e(r(t)[0],t[1]):e(t)}catch(e){var o=n.return;throw void 0!==o&&r(o.call(n)),e}}},function(n,e,t){"use strict";var r=t(171),i=t(580);n.exports=function(n,e,t){e in n?r.f(n,e,i(0,t)):n[e]=t}},function(n,e,t){var r=t(472),i=t(263),o=t(924),a=t(172);n.exports=function(n,e,t,s,l){r(e);var u=i(n),c=o(u),f=a(u.length),d=l?f-1:0,h=l?-1:1;if(t<2)for(;;){if(d in c){s=c[d],d+=h;break}if(d+=h,l?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:f>d;d+=h)d in c&&(s=e(s,c[d],d,u));return s}},function(n,e,t){"use strict";var r=t(263),i=t(583),o=t(172);n.exports=[].copyWithin||function(n,e){var t=r(this),a=o(t.length),s=i(n,a),l=i(e,a),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?a:i(u,a))-l,a-s),f=1;for(l<s&&s<l+c&&(f=-1,l+=c-1,s+=c-1);c-- >0;)l in t?t[s]=t[l]:delete t[s],s+=f,l+=f;return t}},function(n,e,t){"use strict";var r=t(927),i=t(1054),o=t(926),a=t(343);n.exports=t(991)(Array,"Array",(function(n,e){this._t=a(n),this._i=0,this._k=e}),(function(){var n=this._t,e=this._k,t=this._i++;return!n||t>=n.length?(this._t=void 0,i(1)):i(0,"keys"==e?t:"values"==e?n[t]:[t,n[t]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(n,e){n.exports=function(n,e){return{value:e,done:!!n}}},function(n,e,t){"use strict";var r=t(998);t(22)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(n,e,t){t(182)&&"g"!=/./g.flags&&t(171).f(RegExp.prototype,"flags",{configurable:!0,get:t(960)})},function(n,e,t){var r,i,o,a=t(471),s=t(1041),l=t(984),u=t(979),c=t(97),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,m=c.Dispatch,v=0,g={},b="onreadystatechange",y=function(){var n=+this;if(g.hasOwnProperty(n)){var e=g[n];delete g[n],e()}},w=function(n){y.call(n.data)};d&&h||(d=function(n){for(var e=[],t=1;arguments.length>t;)e.push(arguments[t++]);return g[++v]=function(){s("function"==typeof n?n:Function(n),e)},r(v),v},h=function(n){delete g[n]},"process"==t(473)(f)?r=function(n){f.nextTick(a(y,n,1))}:m&&m.now?r=function(n){m.now(a(y,n,1))}:p?(o=(i=new p).port2,i.port1.onmessage=w,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(n){c.postMessage(n+"","*")},c.addEventListener("message",w,!1)):r=b in u("script")?function(n){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(n)}}:function(n){setTimeout(a(y,n,1),0)}),n.exports={set:d,clear:h}},function(n,e,t){"use strict";var r=t(472);function i(n){var e,t;this.promise=new n((function(n,r){if(void 0!==e||void 0!==t)throw TypeError("Bad Promise constructor");e=n,t=r})),this.resolve=r(e),this.reject=r(t)}n.exports.f=function(n){return new i(n)}},function(n,e,t){"use strict";var r=t(171).f,i=t(584),o=t(606),a=t(471),s=t(605),l=t(964),u=t(991),c=t(1054),f=t(604),d=t(182),h=t(556).fastKey,p=t(587),m=d?"_s":"size",v=function(n,e){var t,r=h(e);if("F"!==r)return n._i[r];for(t=n._f;t;t=t.n)if(t.k==e)return t};n.exports={getConstructor:function(n,e,t,u){var c=n((function(n,r){s(n,c,e,"_i"),n._t=e,n._i=i(null),n._f=void 0,n._l=void 0,n[m]=0,null!=r&&l(r,t,n[u],n)}));return o(c.prototype,{clear:function(){for(var n=p(this,e),t=n._i,r=n._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];n._f=n._l=void 0,n[m]=0},delete:function(n){var t=p(this,e),r=v(t,n);if(r){var i=r.n,o=r.p;delete t._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),t._f==r&&(t._f=i),t._l==r&&(t._l=o),t[m]--}return!!r},forEach:function(n){p(this,e);for(var t,r=a(n,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(n){return!!v(p(this,e),n)}}),d&&r(c.prototype,"size",{get:function(){return p(this,e)[m]}}),c},def:function(n,e,t){var r,i,o=v(n,e);return o?o.v=t:(n._l=o={i:i=h(e,!0),k:e,v:t,p:r=n._l,n:void 0,r:!1},n._f||(n._f=o),r&&(r.n=o),n[m]++,"F"!==i&&(n._i[i]=o)),n},getEntry:v,setStrong:function(n,e,t){u(n,e,(function(n,t){this._t=p(n,e),this._k=t,this._l=void 0}),(function(){for(var n=this,e=n._k,t=n._l;t&&t.r;)t=t.p;return n._t&&(n._l=t=t?t.n:n._t._f)?c(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(n._t=void 0,c(1))}),t?"entries":"values",!t,!0),f(e)}}},function(n,e,t){"use strict";var r=t(606),i=t(556).getWeak,o=t(82),a=t(90),s=t(605),l=t(964),u=t(346),c=t(304),f=t(587),d=u(5),h=u(6),p=0,m=function(n){return n._l||(n._l=new v)},v=function(){this.a=[]},g=function(n,e){return d(n.a,(function(n){return n[0]===e}))};v.prototype={get:function(n){var e=g(this,n);if(e)return e[1]},has:function(n){return!!g(this,n)},set:function(n,e){var t=g(this,n);t?t[1]=e:this.a.push([n,e])},delete:function(n){var e=h(this.a,(function(e){return e[0]===n}));return~e&&this.a.splice(e,1),!!~e}},n.exports={getConstructor:function(n,e,t,o){var u=n((function(n,r){s(n,u,e,"_i"),n._t=e,n._i=p++,n._l=void 0,null!=r&&l(r,t,n[o],n)}));return r(u.prototype,{delete:function(n){if(!a(n))return!1;var t=i(n);return!0===t?m(f(this,e)).delete(n):t&&c(t,this._i)&&delete t[this._i]},has:function(n){if(!a(n))return!1;var t=i(n);return!0===t?m(f(this,e)).has(n):t&&c(t,this._i)}}),u},def:function(n,e,t){var r=i(o(e),!0);return!0===r?m(n).set(e,t):r[n._i]=t,n},ufstore:m}},function(n,e,t){var r=t(344),i=t(172);n.exports=function(n){if(void 0===n)return 0;var e=r(n),t=i(e);if(e!==t)throw RangeError("Wrong length!");return t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){"use strict";var r=t(97),i=t(304),o=t(182),a=t(22),s=t(305),l=t(556).KEY,u=t(81),c=t(955),f=t(603),d=t(581),h=t(136),p=t(1034),m=t(1140),v=t(1141),g=t(983),b=t(82),y=t(90),w=t(263),x=t(343),k=t(555),T=t(580),S=t(584),_=t(1037),D=t(474),I=t(956),E=t(171),O=t(923),C=D.f,A=E.f,L=_.f,j=r.Symbol,P=r.JSON,$=P&&P.stringify,B=h("_hidden"),F=h("toPrimitive"),M={}.propertyIsEnumerable,N=c("symbol-registry"),R=c("symbols"),H=c("op-symbols"),U=Object.prototype,W="function"==typeof j&&!!I.f,z=r.QObject,q=!z||!z.prototype||!z.prototype.findChild,V=o&&u((function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(n,e,t){var r=C(U,e);r&&delete U[e],A(n,e,t),r&&n!==U&&A(U,e,r)}:A,G=function(n){var e=R[n]=S(j.prototype);return e._k=n,e},Y=W&&"symbol"==typeof j.iterator?function(n){return"symbol"==typeof n}:function(n){return n instanceof j},X=function(n,e,t){return n===U&&X(H,e,t),b(n),e=k(e,!0),b(t),i(R,e)?(t.enumerable?(i(n,B)&&n[B][e]&&(n[B][e]=!1),t=S(t,{enumerable:T(0,!1)})):(i(n,B)||A(n,B,T(1,{})),n[B][e]=!0),V(n,e,t)):A(n,e,t)},J=function(n,e){b(n);for(var t,r=v(e=x(e)),i=0,o=r.length;o>i;)X(n,t=r[i++],e[t]);return n},K=function(n){var e=M.call(this,n=k(n,!0));return!(this===U&&i(R,n)&&!i(H,n))&&(!(e||!i(this,n)||!i(R,n)||i(this,B)&&this[B][n])||e)},Q=function(n,e){if(n=x(n),e=k(e,!0),n!==U||!i(R,e)||i(H,e)){var t=C(n,e);return!t||!i(R,e)||i(n,B)&&n[B][e]||(t.enumerable=!0),t}},Z=function(n){for(var e,t=L(x(n)),r=[],o=0;t.length>o;)i(R,e=t[o++])||e==B||e==l||r.push(e);return r},nn=function(n){for(var e,t=n===U,r=L(t?H:x(n)),o=[],a=0;r.length>a;)!i(R,e=r[a++])||t&&!i(U,e)||o.push(R[e]);return o};W||(s((j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var n=d(arguments.length>0?arguments[0]:void 0),e=function(t){this===U&&e.call(H,t),i(this,B)&&i(this[B],n)&&(this[B][n]=!1),V(this,n,T(1,t))};return o&&q&&V(U,n,{configurable:!0,set:e}),G(n)}).prototype,"toString",(function(){return this._k})),D.f=Q,E.f=X,t(585).f=_.f=Z,t(957).f=K,I.f=nn,o&&!t(582)&&s(U,"propertyIsEnumerable",K,!0),p.f=function(n){return G(h(n))}),a(a.G+a.W+a.F*!W,{Symbol:j});for(var en="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tn=0;en.length>tn;)h(en[tn++]);for(var rn=O(h.store),on=0;rn.length>on;)m(rn[on++]);a(a.S+a.F*!W,"Symbol",{for:function(n){return i(N,n+="")?N[n]:N[n]=j(n)},keyFor:function(n){if(!Y(n))throw TypeError(n+" is not a symbol!");for(var e in N)if(N[e]===n)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!W,"Object",{create:function(n,e){return void 0===e?S(n):J(S(n),e)},defineProperty:X,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:nn});var an=u((function(){I.f(1)}));a(a.S+a.F*an,"Object",{getOwnPropertySymbols:function(n){return I.f(w(n))}}),P&&a(a.S+a.F*(!W||u((function(){var n=j();return"[null]"!=$([n])||"{}"!=$({a:n})||"{}"!=$(Object(n))}))),"JSON",{stringify:function(n){for(var e,t,r=[n],i=1;arguments.length>i;)r.push(arguments[i++]);if(t=e=r[1],(y(e)||void 0!==n)&&!Y(n))return g(e)||(e=function(n,e){if("function"==typeof t&&(e=t.call(this,n,e)),!Y(e))return e}),r[1]=e,$.apply(P,r)}}),j.prototype[F]||t(337)(j.prototype,F,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(n,e,t){n.exports=t(955)("native-function-to-string",Function.toString)},function(n,e,t){var r=t(97),i=t(554),o=t(582),a=t(1034),s=t(171).f;n.exports=function(n){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==n.charAt(0)||n in e||s(e,n,{value:a.f(n)})}},function(n,e,t){var r=t(923),i=t(956),o=t(957);n.exports=function(n){var e=r(n),t=i.f;if(t)for(var a,s=t(n),l=o.f,u=0;s.length>u;)l.call(n,a=s[u++])&&e.push(a);return e}},function(n,e,t){var r=t(22);r(r.S,"Object",{create:t(584)})},function(n,e,t){var r=t(22);r(r.S+r.F*!t(182),"Object",{defineProperty:t(171).f})},function(n,e,t){var r=t(22);r(r.S+r.F*!t(182),"Object",{defineProperties:t(1036)})},function(n,e,t){var r=t(343),i=t(474).f;t(345)("getOwnPropertyDescriptor",(function(){return function(n,e){return i(r(n),e)}}))},function(n,e,t){var r=t(263),i=t(586);t(345)("getPrototypeOf",(function(){return function(n){return i(r(n))}}))},function(n,e,t){var r=t(263),i=t(923);t(345)("keys",(function(){return function(n){return i(r(n))}}))},function(n,e,t){t(345)("getOwnPropertyNames",(function(){return t(1037).f}))},function(n,e,t){var r=t(90),i=t(556).onFreeze;t(345)("freeze",(function(n){return function(e){return n&&r(e)?n(i(e)):e}}))},function(n,e,t){var r=t(90),i=t(556).onFreeze;t(345)("seal",(function(n){return function(e){return n&&r(e)?n(i(e)):e}}))},function(n,e,t){var r=t(90),i=t(556).onFreeze;t(345)("preventExtensions",(function(n){return function(e){return n&&r(e)?n(i(e)):e}}))},function(n,e,t){var r=t(90);t(345)("isFrozen",(function(n){return function(e){return!r(e)||!!n&&n(e)}}))},function(n,e,t){var r=t(90);t(345)("isSealed",(function(n){return function(e){return!r(e)||!!n&&n(e)}}))},function(n,e,t){var r=t(90);t(345)("isExtensible",(function(n){return function(e){return!!r(e)&&(!n||n(e))}}))},function(n,e,t){var r=t(22);r(r.S+r.F,"Object",{assign:t(1038)})},function(n,e,t){var r=t(22);r(r.S,"Object",{is:t(1039)})},function(n,e,t){var r=t(22);r(r.S,"Object",{setPrototypeOf:t(985).set})},function(n,e,t){"use strict";var r=t(925),i={};i[t(136)("toStringTag")]="z",i+""!="[object z]"&&t(305)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(n,e,t){var r=t(22);r(r.P,"Function",{bind:t(1040)})},function(n,e,t){var r=t(171).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||t(182)&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(n){return""}}})},function(n,e,t){"use strict";var r=t(90),i=t(586),o=t(136)("hasInstance"),a=Function.prototype;o in a||t(171).f(a,o,{value:function(n){if("function"!=typeof this||!r(n))return!1;if(!r(this.prototype))return n instanceof this;for(;n=i(n);)if(this.prototype===n)return!0;return!1}})},function(n,e,t){var r=t(22),i=t(1042);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(n,e,t){var r=t(22),i=t(1043);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(n,e,t){"use strict";var r=t(97),i=t(304),o=t(473),a=t(987),s=t(555),l=t(81),u=t(585).f,c=t(474).f,f=t(171).f,d=t(958).trim,h="Number",p=r.Number,m=p,v=p.prototype,g=o(t(584)(v))==h,b="trim"in String.prototype,y=function(n){var e=s(n,!1);if("string"==typeof e&&e.length>2){var t,r,i,o=(e=b?e.trim():d(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(t=e.charCodeAt(2))||120===t)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,l=e.slice(2),u=0,c=l.length;u<c;u++)if((a=l.charCodeAt(u))<48||a>i)return NaN;return parseInt(l,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(n){var e=arguments.length<1?0:n,t=this;return t instanceof p&&(g?l((function(){v.valueOf.call(t)})):o(t)!=h)?a(new m(y(e)),t,p):y(e)};for(var w,x=t(182)?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)i(m,w=x[k])&&!i(p,w)&&f(p,w,c(m,w));p.prototype=v,v.constructor=p,t(305)(r,h,p)}},function(n,e,t){"use strict";var r=t(22),i=t(344),o=t(1044),a=t(1045),s=1..toFixed,l=Math.floor,u=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f="0",d=function(n,e){for(var t=-1,r=e;++t<6;)r+=n*u[t],u[t]=r%1e7,r=l(r/1e7)},h=function(n){for(var e=6,t=0;--e>=0;)t+=u[e],u[e]=l(t/n),t=t%n*1e7},p=function(){for(var n=6,e="";--n>=0;)if(""!==e||0===n||0!==u[n]){var t=String(u[n]);e=""===e?t:e+a.call(f,7-t.length)+t}return e},m=function(n,e,t){return 0===e?t:e%2==1?m(n,e-1,t*n):m(n*n,e/2,t)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t(81)((function(){s.call({})}))),"Number",{toFixed:function(n){var e,t,r,s,l=o(this,c),u=i(n),v="",g=f;if(u<0||u>20)throw RangeError(c);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(v="-",l=-l),l>1e-21)if(t=(e=function(n){for(var e=0,t=n;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}(l*m(2,69,1))-69)<0?l*m(2,-e,1):l/m(2,e,1),t*=4503599627370496,(e=52-e)>0){for(d(0,t),r=u;r>=7;)d(1e7,0),r-=7;for(d(m(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),d(1,1),h(2),g=p()}else d(0,t),d(1<<-e,0),g=p()+a.call(f,u);return g=u>0?v+((s=g.length)<=u?"0."+a.call(f,u-s)+g:g.slice(0,s-u)+"."+g.slice(s-u)):v+g}})},function(n,e,t){"use strict";var r=t(22),i=t(81),o=t(1044),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(n){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===n?a.call(e):a.call(e,n)}})},function(n,e,t){var r=t(22);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(n,e,t){var r=t(22),i=t(97).isFinite;r(r.S,"Number",{isFinite:function(n){return"number"==typeof n&&i(n)}})},function(n,e,t){var r=t(22);r(r.S,"Number",{isInteger:t(1046)})},function(n,e,t){var r=t(22);r(r.S,"Number",{isNaN:function(n){return n!=n}})},function(n,e,t){var r=t(22),i=t(1046),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(n){return i(n)&&o(n)<=9007199254740991}})},function(n,e,t){var r=t(22);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(n,e,t){var r=t(22);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(n,e,t){var r=t(22),i=t(1043);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(n,e,t){var r=t(22),i=t(1042);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(n,e,t){var r=t(22),i=t(1047),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(n){return(n=+n)<1?NaN:n>94906265.62425156?Math.log(n)+Math.LN2:i(n-1+o(n-1)*o(n+1))}})},function(n,e,t){var r=t(22),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(n,e,t){var r=t(22),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(n){return 0==(n=+n)?n:Math.log((1+n)/(1-n))/2}})},function(n,e,t){var r=t(22),i=t(988);r(r.S,"Math",{cbrt:function(n){return i(n=+n)*Math.pow(Math.abs(n),1/3)}})},function(n,e,t){var r=t(22);r(r.S,"Math",{clz32:function(n){return(n>>>=0)?31-Math.floor(Math.log(n+.5)*Math.LOG2E):32}})},function(n,e,t){var r=t(22),i=Math.exp;r(r.S,"Math",{cosh:function(n){return(i(n=+n)+i(-n))/2}})},function(n,e,t){var r=t(22),i=t(989);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(n,e,t){var r=t(22);r(r.S,"Math",{fround:t(1184)})},function(n,e,t){var r=t(988),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),l=i(2,-126);n.exports=Math.fround||function(n){var e,t,i=Math.abs(n),u=r(n);return i<l?u*(i/l/a+1/o-1/o)*l*a:(t=(e=(1+a/o)*i)-(e-i))>s||t!=t?u*(1/0):u*t}},function(n,e,t){var r=t(22),i=Math.abs;r(r.S,"Math",{hypot:function(n,e){for(var t,r,o=0,a=0,s=arguments.length,l=0;a<s;)l<(t=i(arguments[a++]))?(o=o*(r=l/t)*r+1,l=t):o+=t>0?(r=t/l)*r:t;return l===1/0?1/0:l*Math.sqrt(o)}})},function(n,e,t){var r=t(22),i=Math.imul;r(r.S+r.F*t(81)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(n,e){var t=65535,r=+n,i=+e,o=t&r,a=t&i;return 0|o*a+((t&r>>>16)*a+o*(t&i>>>16)<<16>>>0)}})},function(n,e,t){var r=t(22);r(r.S,"Math",{log10:function(n){return Math.log(n)*Math.LOG10E}})},function(n,e,t){var r=t(22);r(r.S,"Math",{log1p:t(1047)})},function(n,e,t){var r=t(22);r(r.S,"Math",{log2:function(n){return Math.log(n)/Math.LN2}})},function(n,e,t){var r=t(22);r(r.S,"Math",{sign:t(988)})},function(n,e,t){var r=t(22),i=t(989),o=Math.exp;r(r.S+r.F*t(81)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(n){return Math.abs(n=+n)<1?(i(n)-i(-n))/2:(o(n-1)-o(-n-1))*(Math.E/2)}})},function(n,e,t){var r=t(22),i=t(989),o=Math.exp;r(r.S,"Math",{tanh:function(n){var e=i(n=+n),t=i(-n);return e==1/0?1:t==1/0?-1:(e-t)/(o(n)+o(-n))}})},function(n,e,t){var r=t(22);r(r.S,"Math",{trunc:function(n){return(n>0?Math.floor:Math.ceil)(n)}})},function(n,e,t){var r=t(22),i=t(583),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(n){for(var e,t=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");t.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return t.join("")}})},function(n,e,t){var r=t(22),i=t(343),o=t(172);r(r.S,"String",{raw:function(n){for(var e=i(n.raw),t=o(e.length),r=arguments.length,a=[],s=0;t>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(n,e,t){"use strict";t(958)("trim",(function(n){return function(){return n(this,3)}}))},function(n,e,t){"use strict";var r=t(990)(!0);t(991)(String,"String",(function(n){this._t=String(n),this._i=0}),(function(){var n,e=this._t,t=this._i;return t>=e.length?{value:void 0,done:!0}:(n=r(e,t),this._i+=n.length,{value:n,done:!1})}))},function(n,e,t){"use strict";var r=t(22),i=t(990)(!1);r(r.P,"String",{codePointAt:function(n){return i(this,n)}})},function(n,e,t){"use strict";var r=t(22),i=t(172),o=t(992),a="endsWith",s="".endsWith;r(r.P+r.F*t(994)(a),"String",{endsWith:function(n){var e=o(this,n,a),t=arguments.length>1?arguments[1]:void 0,r=i(e.length),l=void 0===t?r:Math.min(i(t),r),u=String(n);return s?s.call(e,u,l):e.slice(l-u.length,l)===u}})},function(n,e,t){"use strict";var r=t(22),i=t(992),o="includes";r(r.P+r.F*t(994)(o),"String",{includes:function(n){return!!~i(this,n,o).indexOf(n,arguments.length>1?arguments[1]:void 0)}})},function(n,e,t){var r=t(22);r(r.P,"String",{repeat:t(1045)})},function(n,e,t){"use strict";var r=t(22),i=t(172),o=t(992),a="startsWith",s="".startsWith;r(r.P+r.F*t(994)(a),"String",{startsWith:function(n){var e=o(this,n,a),t=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(n);return s?s.call(e,r,t):e.slice(t,t+r.length)===r}})},function(n,e,t){"use strict";t(284)("anchor",(function(n){return function(e){return n(this,"a","name",e)}}))},function(n,e,t){"use strict";t(284)("big",(function(n){return function(){return n(this,"big","","")}}))},function(n,e,t){"use strict";t(284)("blink",(function(n){return function(){return n(this,"blink","","")}}))},function(n,e,t){"use strict";t(284)("bold",(function(n){return function(){return n(this,"b","","")}}))},function(n,e,t){"use strict";t(284)("fixed",(function(n){return function(){return n(this,"tt","","")}}))},function(n,e,t){"use strict";t(284)("fontcolor",(function(n){return function(e){return n(this,"font","color",e)}}))},function(n,e,t){"use strict";t(284)("fontsize",(function(n){return function(e){return n(this,"font","size",e)}}))},function(n,e,t){"use strict";t(284)("italics",(function(n){return function(){return n(this,"i","","")}}))},function(n,e,t){"use strict";t(284)("link",(function(n){return function(e){return n(this,"a","href",e)}}))},function(n,e,t){"use strict";t(284)("small",(function(n){return function(){return n(this,"small","","")}}))},function(n,e,t){"use strict";t(284)("strike",(function(n){return function(){return n(this,"strike","","")}}))},function(n,e,t){"use strict";t(284)("sub",(function(n){return function(){return n(this,"sub","","")}}))},function(n,e,t){"use strict";t(284)("sup",(function(n){return function(){return n(this,"sup","","")}}))},function(n,e,t){var r=t(22);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(n,e,t){"use strict";var r=t(22),i=t(263),o=t(555);r(r.P+r.F*t(81)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(n){var e=i(this),t=o(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}})},function(n,e,t){var r=t(22),i=t(1219);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(n,e,t){"use strict";var r=t(81),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(n){return n>9?n:"0"+n};n.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var n=this,e=n.getUTCFullYear(),t=n.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(n.getUTCMonth()+1)+"-"+a(n.getUTCDate())+"T"+a(n.getUTCHours())+":"+a(n.getUTCMinutes())+":"+a(n.getUTCSeconds())+"."+(t>99?t:"0"+a(t))+"Z"}:o},function(n,e,t){var r=Date.prototype,i="Invalid Date",o="toString",a=r.toString,s=r.getTime;new Date(NaN)+""!=i&&t(305)(r,o,(function(){var n=s.call(this);return n==n?a.call(this):i}))},function(n,e,t){var r=t(136)("toPrimitive"),i=Date.prototype;r in i||t(337)(i,r,t(1222))},function(n,e,t){"use strict";var r=t(82),i=t(555),o="number";n.exports=function(n){if("string"!==n&&n!==o&&"default"!==n)throw TypeError("Incorrect hint");return i(r(this),n!=o)}},function(n,e,t){var r=t(22);r(r.S,"Array",{isArray:t(983)})},function(n,e,t){"use strict";var r=t(471),i=t(22),o=t(263),a=t(1049),s=t(995),l=t(172),u=t(1050),c=t(996);i(i.S+i.F*!t(959)((function(n){Array.from(n)})),"Array",{from:function(n){var e,t,i,f,d=o(n),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,b=c(d);if(v&&(m=r(m,p>2?arguments[2]:void 0,2)),null==b||h==Array&&s(b))for(t=new h(e=l(d.length));e>g;g++)u(t,g,v?m(d[g],g):d[g]);else for(f=b.call(d),t=new h;!(i=f.next()).done;g++)u(t,g,v?a(f,m,[i.value,g],!0):i.value);return t.length=g,t}})},function(n,e,t){"use strict";var r=t(22),i=t(1050);r(r.S+r.F*t(81)((function(){function n(){}return!(Array.of.call(n)instanceof n)})),"Array",{of:function(){for(var n=0,e=arguments.length,t=new("function"==typeof this?this:Array)(e);e>n;)i(t,n,arguments[n++]);return t.length=e,t}})},function(n,e,t){"use strict";var r=t(22),i=t(343),o=[].join;r(r.P+r.F*(t(924)!=Object||!t(338)(o)),"Array",{join:function(n){return o.call(i(this),void 0===n?",":n)}})},function(n,e,t){"use strict";var r=t(22),i=t(984),o=t(473),a=t(583),s=t(172),l=[].slice;r(r.P+r.F*t(81)((function(){i&&l.call(i)})),"Array",{slice:function(n,e){var t=s(this.length),r=o(this);if(e=void 0===e?t:e,"Array"==r)return l.call(this,n,e);for(var i=a(n,t),u=a(e,t),c=s(u-i),f=new Array(c),d=0;d<c;d++)f[d]="String"==r?this.charAt(i+d):this[i+d];return f}})},function(n,e,t){"use strict";var r=t(22),i=t(472),o=t(263),a=t(81),s=[].sort,l=[1,2,3];r(r.P+r.F*(a((function(){l.sort(void 0)}))||!a((function(){l.sort(null)}))||!t(338)(s)),"Array",{sort:function(n){return void 0===n?s.call(o(this)):s.call(o(this),i(n))}})},function(n,e,t){"use strict";var r=t(22),i=t(346)(0),o=t(338)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(n){return i(this,n,arguments[1])}})},function(n,e,t){var r=t(1231);n.exports=function(n,e){return new(r(n))(e)}},function(n,e,t){var r=t(90),i=t(983),o=t(136)("species");n.exports=function(n){var e;return i(n)&&("function"!=typeof(e=n.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(n,e,t){"use strict";var r=t(22),i=t(346)(1);r(r.P+r.F*!t(338)([].map,!0),"Array",{map:function(n){return i(this,n,arguments[1])}})},function(n,e,t){"use strict";var r=t(22),i=t(346)(2);r(r.P+r.F*!t(338)([].filter,!0),"Array",{filter:function(n){return i(this,n,arguments[1])}})},function(n,e,t){"use strict";var r=t(22),i=t(346)(3);r(r.P+r.F*!t(338)([].some,!0),"Array",{some:function(n){return i(this,n,arguments[1])}})},function(n,e,t){"use strict";var r=t(22),i=t(346)(4);r(r.P+r.F*!t(338)([].every,!0),"Array",{every:function(n){return i(this,n,arguments[1])}})},function(n,e,t){"use strict";var r=t(22),i=t(1051);r(r.P+r.F*!t(338)([].reduce,!0),"Array",{reduce:function(n){return i(this,n,arguments.length,arguments[1],!1)}})},function(n,e,t){"use strict";var r=t(22),i=t(1051);r(r.P+r.F*!t(338)([].reduceRight,!0),"Array",{reduceRight:function(n){return i(this,n,arguments.length,arguments[1],!0)}})},function(n,e,t){"use strict";var r=t(22),i=t(980)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!t(338)(o)),"Array",{indexOf:function(n){return a?o.apply(this,arguments)||0:i(this,n,arguments[1])}})},function(n,e,t){"use strict";var r=t(22),i=t(343),o=t(344),a=t(172),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!t(338)(s)),"Array",{lastIndexOf:function(n){if(l)return s.apply(this,arguments)||0;var e=i(this),t=a(e.length),r=t-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=t+r);r>=0;r--)if(r in e&&e[r]===n)return r||0;return-1}})},function(n,e,t){var r=t(22);r(r.P,"Array",{copyWithin:t(1052)}),t(927)("copyWithin")},function(n,e,t){var r=t(22);r(r.P,"Array",{fill:t(997)}),t(927)("fill")},function(n,e,t){"use strict";var r=t(22),i=t(346)(5),o="find",a=!0;o in[]&&Array(1).find((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}}),t(927)(o)},function(n,e,t){"use strict";var r=t(22),i=t(346)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}}),t(927)(o)},function(n,e,t){t(604)("Array")},function(n,e,t){var r=t(97),i=t(987),o=t(171).f,a=t(585).f,s=t(993),l=t(960),u=r.RegExp,c=u,f=u.prototype,d=/a/g,h=/a/g,p=new u(d)!==d;if(t(182)&&(!p||t(81)((function(){return h[t(136)("match")]=!1,u(d)!=d||u(h)==h||"/a/i"!=u(d,"i")})))){u=function(n,e){var t=this instanceof u,r=s(n),o=void 0===e;return!t&&r&&n.constructor===u&&o?n:i(p?new c(r&&!o?n.source:n,e):c((r=n instanceof u)?n.source:n,r&&o?l.call(n):e),t?this:f,u)};for(var m=function(n){n in u||o(u,n,{configurable:!0,get:function(){return c[n]},set:function(e){c[n]=e}})},v=a(c),g=0;v.length>g;)m(v[g++]);f.constructor=u,u.prototype=f,t(305)(r,"RegExp",u)}t(604)("RegExp")},function(n,e,t){"use strict";t(1056);var r=t(82),i=t(960),o=t(182),a="toString",s=/./.toString,l=function(n){t(305)(RegExp.prototype,a,n,!0)};t(81)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?l((function(){var n=r(this);return"/".concat(n.source,"/","flags"in n?n.flags:!o&&n instanceof RegExp?i.call(n):void 0)})):s.name!=a&&l((function(){return s.call(this)}))},function(n,e,t){"use strict";var r=t(82),i=t(172),o=t(999),a=t(961);t(962)("match",1,(function(n,e,t,s){return[function(t){var r=n(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,r):new RegExp(t)[e](String(r))},function(n){var e=s(t,n,this);if(e.done)return e.value;var l=r(n),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var f,d=[],h=0;null!==(f=a(l,u));){var p=String(f[0]);d[h]=p,""===p&&(l.lastIndex=o(u,i(l.lastIndex),c)),h++}return 0===h?null:d}]}))},function(n,e,t){"use strict";var r=t(82),i=t(263),o=t(172),a=t(344),s=t(999),l=t(961),u=Math.max,c=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;t(962)("replace",2,(function(n,e,t,p){return[function(r,i){var o=n(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):t.call(String(o),r,i)},function(n,e){var i=p(t,n,this,e);if(i.done)return i.value;var f=r(n),d=String(this),h="function"==typeof e;h||(e=String(e));var v=f.global;if(v){var g=f.unicode;f.lastIndex=0}for(var b=[];;){var y=l(f,d);if(null===y)break;if(b.push(y),!v)break;""===String(y[0])&&(f.lastIndex=s(d,o(f.lastIndex),g))}for(var w,x="",k=0,T=0;T<b.length;T++){y=b[T];for(var S=String(y[0]),_=u(c(a(y.index),d.length),0),D=[],I=1;I<y.length;I++)D.push(void 0===(w=y[I])?w:String(w));var E=y.groups;if(h){var O=[S].concat(D,_,d);void 0!==E&&O.push(E);var C=String(e.apply(void 0,O))}else C=m(S,d,_,D,E,e);_>=k&&(x+=d.slice(k,_)+C,k=_+S.length)}return x+d.slice(k)}];function m(n,e,r,o,a,s){var l=r+n.length,u=o.length,c=h;return void 0!==a&&(a=i(a),c=d),t.call(s,c,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return n;case"`":return e.slice(0,r);case"'":return e.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return t;if(c>u){var d=f(c/10);return 0===d?t:d<=u?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):t}s=o[c-1]}return void 0===s?"":s}))}}))},function(n,e,t){"use strict";var r=t(82),i=t(1039),o=t(961);t(962)("search",1,(function(n,e,t,a){return[function(t){var r=n(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,r):new RegExp(t)[e](String(r))},function(n){var e=a(t,n,this);if(e.done)return e.value;var s=r(n),l=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var c=o(s,l);return i(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]}))},function(n,e,t){"use strict";var r=t(993),i=t(82),o=t(963),a=t(999),s=t(172),l=t(961),u=t(998),c=t(81),f=Math.min,d=[].push,h=4294967295,p=!c((function(){RegExp(h,"y")}));t(962)("split",2,(function(n,e,t,c){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(n,e){var i=String(this);if(void 0===n&&0===e)return[];if(!r(n))return t.call(i,n,e);for(var o,a,s,l=[],c=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(n.sticky?"y":""),f=0,p=void 0===e?h:e>>>0,m=new RegExp(n.source,c+"g");(o=u.call(m,i))&&!((a=m.lastIndex)>f&&(l.push(i.slice(f,o.index)),o.length>1&&o.index<i.length&&d.apply(l,o.slice(1)),s=o[0].length,f=a,l.length>=p));)m.lastIndex===o.index&&m.lastIndex++;return f===i.length?!s&&m.test("")||l.push(""):l.push(i.slice(f)),l.length>p?l.slice(0,p):l}:"0".split(void 0,0).length?function(n,e){return void 0===n&&0===e?[]:t.call(this,n,e)}:t,[function(t,r){var i=n(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,r):m.call(String(i),t,r)},function(n,e){var r=c(m,n,this,e,m!==t);if(r.done)return r.value;var u=i(n),d=String(this),v=o(u,RegExp),g=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),y=new v(p?u:"^(?:"+u.source+")",b),w=void 0===e?h:e>>>0;if(0===w)return[];if(0===d.length)return null===l(y,d)?[d]:[];for(var x=0,k=0,T=[];k<d.length;){y.lastIndex=p?k:0;var S,_=l(y,p?d:d.slice(k));if(null===_||(S=f(s(y.lastIndex+(p?0:k)),d.length))===x)k=a(d,k,g);else{if(T.push(d.slice(x,k)),T.length===w)return T;for(var D=1;D<=_.length-1;D++)if(T.push(_[D]),T.length===w)return T;k=x=S}}return T.push(d.slice(x)),T}]}))},function(n,e,t){"use strict";var r,i,o,a,s=t(582),l=t(97),u=t(471),c=t(925),f=t(22),d=t(90),h=t(472),p=t(605),m=t(964),v=t(963),g=t(1057).set,b=t(1252)(),y=t(1058),w=t(1253),x=t(1254),k=t(1255),T="Promise",S=l.TypeError,_=l.process,D=_&&_.versions,I=D&&D.v8||"",E=l.Promise,O="process"==c(_),C=function(){},A=i=y.f,L=!!function(){try{var n=E.resolve(1),e=(n.constructor={})[t(136)("species")]=function(n){n(C,C)};return(O||"function"==typeof PromiseRejectionEvent)&&n.then(C)instanceof e&&0!==I.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(n){}}(),j=function(n){var e;return!(!d(n)||"function"!=typeof(e=n.then))&&e},P=function(n,e){if(!n._n){n._n=!0;var t=n._c;b((function(){for(var r=n._v,i=1==n._s,o=0,a=function(e){var t,o,a,s=i?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(i||(2==n._h&&F(n),n._h=1),!0===s?t=r:(c&&c.enter(),t=s(r),c&&(c.exit(),a=!0)),t===e.promise?u(S("Promise-chain cycle")):(o=j(t))?o.call(t,l,u):l(t)):u(r)}catch(n){c&&!a&&c.exit(),u(n)}};t.length>o;)a(t[o++]);n._c=[],n._n=!1,e&&!n._h&&$(n)}))}},$=function(n){g.call(l,(function(){var e,t,r,i=n._v,o=B(n);if(o&&(e=w((function(){O?_.emit("unhandledRejection",i,n):(t=l.onunhandledrejection)?t({promise:n,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)})),n._h=O||B(n)?2:1),n._a=void 0,o&&e.e)throw e.v}))},B=function(n){return 1!==n._h&&0===(n._a||n._c).length},F=function(n){g.call(l,(function(){var e;O?_.emit("rejectionHandled",n):(e=l.onrejectionhandled)&&e({promise:n,reason:n._v})}))},M=function(n){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=n,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},N=function(n){var e,t=this;if(!t._d){t._d=!0,t=t._w||t;try{if(t===n)throw S("Promise can't be resolved itself");(e=j(n))?b((function(){var r={_w:t,_d:!1};try{e.call(n,u(N,r,1),u(M,r,1))}catch(n){M.call(r,n)}})):(t._v=n,t._s=1,P(t,!1))}catch(n){M.call({_w:t,_d:!1},n)}}};L||(E=function(n){p(this,E,T,"_h"),h(n),r.call(this);try{n(u(N,this,1),u(M,this,1))}catch(n){M.call(this,n)}},(r=function(n){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=t(606)(E.prototype,{then:function(n,e){var t=A(v(this,E));return t.ok="function"!=typeof n||n,t.fail="function"==typeof e&&e,t.domain=O?_.domain:void 0,this._c.push(t),this._a&&this._a.push(t),this._s&&P(this,!1),t.promise},catch:function(n){return this.then(void 0,n)}}),o=function(){var n=new r;this.promise=n,this.resolve=u(N,n,1),this.reject=u(M,n,1)},y.f=A=function(n){return n===E||n===a?new o(n):i(n)}),f(f.G+f.W+f.F*!L,{Promise:E}),t(603)(E,T),t(604)(T),a=t(554).Promise,f(f.S+f.F*!L,T,{reject:function(n){var e=A(this);return(0,e.reject)(n),e.promise}}),f(f.S+f.F*(s||!L),T,{resolve:function(n){return k(s&&this===a?E:this,n)}}),f(f.S+f.F*!(L&&t(959)((function(n){E.all(n).catch(C)}))),T,{all:function(n){var e=this,t=A(e),r=t.resolve,i=t.reject,o=w((function(){var t=[],o=0,a=1;m(n,!1,(function(n){var s=o++,l=!1;t.push(void 0),a++,e.resolve(n).then((function(n){l||(l=!0,t[s]=n,--a||r(t))}),i)})),--a||r(t)}));return o.e&&i(o.v),t.promise},race:function(n){var e=this,t=A(e),r=t.reject,i=w((function(){m(n,!1,(function(n){e.resolve(n).then(t.resolve,r)}))}));return i.e&&r(i.v),t.promise}})},function(n,e,t){var r=t(97),i=t(1057).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==t(473)(a);n.exports=function(){var n,e,t,u=function(){var r,i;for(l&&(r=a.domain)&&r.exit();n;){i=n.fn,n=n.next;try{i()}catch(r){throw n?t():e=void 0,r}}e=void 0,r&&r.enter()};if(l)t=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);t=function(){c.then(u)}}else t=function(){i.call(r,u)};else{var f=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),t=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),n||(n=i,t()),e=i}}},function(n,e){n.exports=function(n){try{return{e:!1,v:n()}}catch(n){return{e:!0,v:n}}}},function(n,e,t){var r=t(97).navigator;n.exports=r&&r.userAgent||""},function(n,e,t){var r=t(82),i=t(90),o=t(1058);n.exports=function(n,e){if(r(n),i(e)&&e.constructor===n)return e;var t=o.f(n);return(0,t.resolve)(e),t.promise}},function(n,e,t){"use strict";var r=t(1059),i=t(587),o="Map";n.exports=t(965)(o,(function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(n){var e=r.getEntry(i(this,o),n);return e&&e.v},set:function(n,e){return r.def(i(this,o),0===n?0:n,e)}},r,!0)},function(n,e,t){"use strict";var r=t(1059),i=t(587);n.exports=t(965)("Set",(function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(n){return r.def(i(this,"Set"),n=0===n?0:n,n)}},r)},function(n,e,t){"use strict";var r,i=t(97),o=t(346)(0),a=t(305),s=t(556),l=t(1038),u=t(1060),c=t(90),f=t(587),d=t(587),h=!i.ActiveXObject&&"ActiveXObject"in i,p="WeakMap",m=s.getWeak,v=Object.isExtensible,g=u.ufstore,b=function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(n){if(c(n)){var e=m(n);return!0===e?g(f(this,p)).get(n):e?e[this._i]:void 0}},set:function(n,e){return u.def(f(this,p),n,e)}},w=n.exports=t(965)(p,b,y,u,!0,!0);d&&h&&(l((r=u.getConstructor(b,p)).prototype,y),s.NEED=!0,o(["delete","has","get","set"],(function(n){var e=w.prototype,t=e[n];a(e,n,(function(e,i){if(c(e)&&!v(e)){this._f||(this._f=new r);var o=this._f[n](e,i);return"set"==n?this:o}return t.call(this,e,i)}))})))},function(n,e,t){"use strict";var r=t(1060),i=t(587),o="WeakSet";t(965)(o,(function(n){return function(){return n(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(n){return r.def(i(this,o),n,!0)}},r,!1,!0)},function(n,e,t){"use strict";var r=t(22),i=t(966),o=t(1e3),a=t(82),s=t(583),l=t(172),u=t(90),c=t(97).ArrayBuffer,f=t(963),d=o.ArrayBuffer,h=o.DataView,p=i.ABV&&c.isView,m=d.prototype.slice,v=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(c!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,g,{isView:function(n){return p&&p(n)||u(n)&&v in n}}),r(r.P+r.U+r.F*t(81)((function(){return!new d(2).slice(1,void 0).byteLength})),g,{slice:function(n,e){if(void 0!==m&&void 0===e)return m.call(a(this),n);for(var t=a(this).byteLength,r=s(n,t),i=s(void 0===e?t:e,t),o=new(f(this,d))(l(i-r)),u=new h(this),c=new h(o),p=0;r<i;)c.setUint8(p++,u.getUint8(r++));return o}}),t(604)(g)},function(n,e,t){var r=t(22);r(r.G+r.W+r.F*!t(966).ABV,{DataView:t(1e3).DataView})},function(n,e,t){t(475)("Int8",1,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){t(475)("Uint8",1,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){t(475)("Uint8",1,(function(n){return function(e,t,r){return n(this,e,t,r)}}),!0)},function(n,e,t){t(475)("Int16",2,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){t(475)("Uint16",2,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){t(475)("Int32",4,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){t(475)("Uint32",4,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){t(475)("Float32",4,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){t(475)("Float64",8,(function(n){return function(e,t,r){return n(this,e,t,r)}}))},function(n,e,t){var r=t(22),i=t(472),o=t(82),a=(t(97).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!t(81)((function(){a((function(){}))})),"Reflect",{apply:function(n,e,t){var r=i(n),l=o(t);return a?a(r,e,l):s.call(r,e,l)}})},function(n,e,t){var r=t(22),i=t(584),o=t(472),a=t(82),s=t(90),l=t(81),u=t(1040),c=(t(97).Reflect||{}).construct,f=l((function(){function n(){}return!(c((function(){}),[],n)instanceof n)})),d=!l((function(){c((function(){}))}));r(r.S+r.F*(f||d),"Reflect",{construct:function(n,e){o(n),a(e);var t=arguments.length<3?n:o(arguments[2]);if(d&&!f)return c(n,e,t);if(n==t){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(u.apply(n,r))}var l=t.prototype,h=i(s(l)?l:Object.prototype),p=Function.apply.call(n,h,e);return s(p)?p:h}})},function(n,e,t){var r=t(171),i=t(22),o=t(82),a=t(555);i(i.S+i.F*t(81)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(n,e,t){o(n),e=a(e,!0),o(t);try{return r.f(n,e,t),!0}catch(n){return!1}}})},function(n,e,t){var r=t(22),i=t(474).f,o=t(82);r(r.S,"Reflect",{deleteProperty:function(n,e){var t=i(o(n),e);return!(t&&!t.configurable)&&delete n[e]}})},function(n,e,t){"use strict";var r=t(22),i=t(82),o=function(n){this._t=i(n),this._i=0;var e,t=this._k=[];for(e in n)t.push(e)};t(1048)(o,"Object",(function(){var n,e=this,t=e._k;do{if(e._i>=t.length)return{value:void 0,done:!0}}while(!((n=t[e._i++])in e._t));return{value:n,done:!1}})),r(r.S,"Reflect",{enumerate:function(n){return new o(n)}})},function(n,e,t){var r=t(474),i=t(586),o=t(304),a=t(22),s=t(90),l=t(82);a(a.S,"Reflect",{get:function n(e,t){var a,u,c=arguments.length<3?e:arguments[2];return l(e)===c?e[t]:(a=r.f(e,t))?o(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:s(u=i(e))?n(u,t,c):void 0}})},function(n,e,t){var r=t(474),i=t(22),o=t(82);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(n,e){return r.f(o(n),e)}})},function(n,e,t){var r=t(22),i=t(586),o=t(82);r(r.S,"Reflect",{getPrototypeOf:function(n){return i(o(n))}})},function(n,e,t){var r=t(22);r(r.S,"Reflect",{has:function(n,e){return e in n}})},function(n,e,t){var r=t(22),i=t(82),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(n){return i(n),!o||o(n)}})},function(n,e,t){var r=t(22);r(r.S,"Reflect",{ownKeys:t(1282)})},function(n,e,t){var r=t(585),i=t(956),o=t(82),a=t(97).Reflect;n.exports=a&&a.ownKeys||function(n){var e=r.f(o(n)),t=i.f;return t?e.concat(t(n)):e}},function(n,e,t){var r=t(22),i=t(82),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(n){i(n);try{return o&&o(n),!0}catch(n){return!1}}})},function(n,e,t){var r=t(171),i=t(474),o=t(586),a=t(304),s=t(22),l=t(580),u=t(82),c=t(90);s(s.S,"Reflect",{set:function n(e,t,s){var f,d,h=arguments.length<4?e:arguments[3],p=i.f(u(e),t);if(!p){if(c(d=o(e)))return n(d,t,s,h);p=l(0)}if(a(p,"value")){if(!1===p.writable||!c(h))return!1;if(f=i.f(h,t)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(h,t,f)}else r.f(h,t,l(0,s));return!0}return void 0!==p.set&&(p.set.call(h,s),!0)}})},function(n,e,t){var r=t(22),i=t(985);i&&r(r.S,"Reflect",{setPrototypeOf:function(n,e){i.check(n,e);try{return i.set(n,e),!0}catch(n){return!1}}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){t(1138),t(1142),t(1143),t(1144),t(1145),t(1146),t(1147),t(1148),t(1149),t(1150),t(1151),t(1152),t(1153),t(1154),t(1155),t(1156),t(1157),t(1158),t(1159),t(1160),t(1161),t(1162),t(1163),t(1164),t(1165),t(1166),t(1167),t(1168),t(1169),t(1170),t(1171),t(1172),t(1173),t(1174),t(1175),t(1176),t(1177),t(1178),t(1179),t(1180),t(1181),t(1182),t(1183),t(1185),t(1186),t(1187),t(1188),t(1189),t(1190),t(1191),t(1192),t(1193),t(1194),t(1195),t(1196),t(1197),t(1198),t(1199),t(1200),t(1201),t(1202),t(1203),t(1204),t(1205),t(1206),t(1207),t(1208),t(1209),t(1210),t(1211),t(1212),t(1213),t(1214),t(1215),t(1216),t(1217),t(1218),t(1220),t(1221),t(1223),t(1224),t(1225),t(1226),t(1227),t(1228),t(1229),t(1232),t(1233),t(1234),t(1235),t(1236),t(1237),t(1238),t(1239),t(1240),t(1241),t(1242),t(1243),t(1244),t(1053),t(1245),t(1055),t(1246),t(1056),t(1247),t(1248),t(1249),t(1250),t(1251),t(1256),t(1257),t(1258),t(1259),t(1260),t(1261),t(1262),t(1263),t(1264),t(1265),t(1266),t(1267),t(1268),t(1269),t(1270),t(1271),t(1272),t(1273),t(1274),t(1275),t(1276),t(1277),t(1278),t(1279),t(1280),t(1281),t(1283),t(1284),t(1285),n.exports=t(554)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){n.exports=t(2150)},function(n,e,t){t(205)(t(1758))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nthis.global = this;\n\nif (typeof global.include !== 'function') {\n  var include = function(script) {\n    document.write('<script type=\"text/javascript\" src=\"' + script + '\"><\/script>');\n  };\n}\n\nfunction extract(text, start, stop) {\n  var startIndex;\n  if (!empty(start)) {\n    startIndex = text.indexOf(start);\n    if (startIndex < 0) {\n      return null;\n    }\n    startIndex += start.length;\n  }\n  var stopIndex = text.indexOf(stop, startIndex);\n  if (stopIndex < startIndex) {\n    return null;\n  }\n  return text.substring(startIndex, stopIndex);\n}\n\nfunction equals(a, b) {\n  if (!exists(a)) return !exists(b);\n  if (!exists(b)) return !exists(a);\n  if (a.Equatable) return a.equals(b);\n  if (b.Equatable) return b.equals(a);\n  return a == b;\n}\n\n/**\n * Two-way template that returns the input value.\n * @param {Object} value\n * @return {Object}\n */\nfunction pass(value) {\n  return value;\n}\npass.toTarget = pass;\npass.toSource = pass;\n\n/**\n * Two-way template that returns inverted value.\n * @param {Object} value\n * @return {Boolean}\n */\nfunction invert(value) {\n  return !value;\n}\ninvert.toTarget = invert;\ninvert.toSource = invert;\n\n/**\n * Returns true if the value is not undefined and not null.\n * @param {Object} value\n * @return {Boolean}\n */\nfunction exists(value) {\n  return value !== undefined && value !== null;\n}\n\n/**\n * Returns true if the value is an empty array or object with no properties.\n * @param {Object} value\n * @return {Boolean}\n */\nfunction empty(value) {\n  return (\n    !exists(value) ||\n    value === '' ||\n    (isArray(value) && value.length === 0) ||\n    (isObject(value) && (value.Enumerable ? value.isEmpty() : !hasProperties(value)))\n  );\n}\n\n/**\n * Returns true if the object has at least one property.\n * @param {Object} object\n * @return {Boolean}\n */\nfunction hasProperties(object) {\n  for (var key in object) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Returns the first existing value.\n * @param {Object} ... values\n * @return {Object}\n */\nfunction any() {\n  for (var i = 0, length = arguments.length; i < length; i++) {\n    var arg = arguments[i];\n    if (exists(arg)) {\n      return arg;\n    }\n  }\n}\n\n/**\n * Returns a return value of the first function that does not throw an exception.\n * @param {Function} ... functions\n * @return {Object}\n */\nfunction tryAny() {\n  for (var i = 0; i < arguments.length; i++) {\n    var method = arguments[i];\n    try {\n      return method();\n    } catch (e) {}\n  }\n}\n\nfunction get(value, builder) {\n  return exists(value) ? value : builder();\n}\n\n/**\n * Returns true if the value is an object.\n * @param {Object} value\n * @return {Boolean}\n */\nfunction isObject(value) {\n  // We do not use _.isObject here since it has another idea of what\n  // an \"object\" is.\n  return typeof value == 'object' && value !== null;\n}\n\n/**\n * Returns true if the value is a number.\n * @param {Object} value\n * @return {Boolean}\n */\nvar isNumber = _.isNumber;\n\n/**\n * Returns true if the value is a string.\n * @param {Object} value\n * @return {Boolean}\n */\nvar isString = _.isString;\n\n/**\n * Returns true if the value is a function.\n * @param {Object} value\n * @return {Boolean}\n */\nvar isFunction = _.isFunction;\n\n/**\n * Returns true if the value is an array.\n * @param {Object} value\n * @return {Boolean}\n */\nvar isArray = _.isArray;\n\n/**\n * Returns true if the value is a DOM node.\n * @param {Object} value\n * @return {Boolean}\n */\nfunction isDom(value) {\n  return exists(value) && isNumber(value.nodeType);\n}\n\n/**\n * Sets the value to the property of the object\n * if the property does not exist or contains a not existing value\n * and returns that new value.\n * Otherwise returns the current value of the property.\n * @param {Object} object\n * @param {String} property\n * @param {Object} value\n * @return {Object} result\n */\nfunction init(object, property, value) {\n  var result = object[property];\n  return exists(result) ? result : (object[property] = value);\n}\n\n/**\n * Initializes the property of the object using the initializer\n * if the property does not exist or contains a not existing value\n * and returns a value returned from the initializer.\n * Otherwise returns the current value of the property.\n * @param {Object} object\n * @param {String} property\n * @param {Function} initializer\n * @return {Object} result\n */\nfunction obtain(object, property, initializer) {\n  var result = object[property];\n  return exists(result) ? result : (object[property] = initializer());\n}\n\n/**\n * Copies properties\n * @param {Object} properties\n * @return {Object} result\n */\nfunction clone(object) {\n  var result = new object.constructor();\n  for (var key in object) {\n    result[key] = object[key];\n  }\n  return result;\n}\n\n/**\n * Copies properties of the source to the target and returns the target.\n * @param {Object} target\n * @param {Object} source\n * @return {Object} target\n */\nfunction extend(target, source) {\n  for (var key in source) {\n    target[key] = source[key];\n  }\n  return target;\n}\n\n/**\n * Function that does nothing.\n */\nfunction nothing() {}\n\n/**\n * Converts value to string. If the value is a function or does not exists it returns empty string.\n * @param {Object} value\n * @return {String}\n */\nfunction str(value) {\n  switch (typeof value) {\n    case 'boolean':\n      return value ? 'true' : 'false';\n    case 'number':\n    case 'object':\n      if (value === null) {\n        return '';\n      }\n    case 'string':\n      return String(value);\n    default:\n      return '';\n  }\n}\n\n/**\n * Returns a function that creates an instance from given type.\n * @param {Function} type\n * @return {Function}\n */\nfunction construct(type) {\n  return function() {\n    return new type();\n  };\n}\n\nfunction provide(type) {\n  return function(value) {\n    return exists(value) ? value : new type();\n  };\n}\n\nvar newObject = construct(Object);\nvar newArray = construct(Array);\nvar getObject = provide(newObject);\nvar getArray = provide(newArray);\n\nfunction objectize(key, value) {\n  var obj = {};\n  obj[key] = value;\n  return obj;\n}\n\n/**\n * Browser detection from Prototype JavaScript Framework.\n */\nvar Browser = {\n  WebKit:\n    navigator.appVersion.indexOf('AppleWebKit/') > -1\n      ? extract(navigator.appVersion, 'AppleWebKit/', ' ')\n      : false,\n};\n"},function(n,e,t){t(205)(t(1760))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Invokes the iterator for the number times and returns a result of the iterator.\n * The iterator receives one argument, the number of the iteration.\n * @param {Number} number\n * @param {Object} iterator\n * @return {Object}\n */\nfunction times(number, iterator) {\n  for (var i = 0; i < number; i++) {\n    iterator(i);\n  }\n  return iterator.result;\n}\n\n/**\n * For each item of the list invokes the iterator with two arguments:\n * the item of the list and index of the item.\n * The list is an array like object: an array,\n * or an object with numeric property length (e.g. arguments).\n * The offset is an optional argument that specifies the offset where the iteration starts.\n * Returns a result from the iterator.\n * @param {Array, Object} list\n * @param {Function} iterator\n * @param {Number} [offset]\n * @return {Object}\n */\nfunction iterate(list, iterator, offset) {\n  for (var i = any(offset, 0), length = list.length; i < length; i++) {\n    iterator(list[i], i);\n  }\n  return iterator.result;\n}\n\n/**\n * For each property of the object invokes the iterator with two arguments:\n * a value of the property and a key of the property.\n * Returns a result from the iterator.\n * @param {Object} object\n * @param {Function} iterator\n * @return {Object}\n */\nfunction enumerate(object, iterator) {\n  for (var key in object) {\n    iterator(object[key], key);\n  }\n  return iterator.result;\n}\n\n/**\n * According the type of the source invokes specific iteration routine:\n * for Enumerables calls its method each(),\n * for array like objects invokes iterate(),\n * for numbers times(), and for other objects enumerate().\n * Returns a result of the used function.\n * @param {Enumerable, Array, Number, Object} source\n * @param {Function} iterator\n * @return {Object}\n */\nfunction each(source, iterator) {\n  if (!exists(source)) {\n    return iterator.result;\n  }\n  if (source.Enumerable) {\n    return source.each(iterator);\n  }\n  if (isArray(source) || isNumber(source.length)) {\n    return iterate(source, iterator);\n  }\n  if (isNumber(source)) {\n    return times(source, iterator);\n  }\n  return enumerate(source, iterator);\n}\n\nfunction builder(construct, build) {\n  var result = construct();\n  var iterator = function(value, key) {\n    build(result, key, value);\n  };\n  iterator.result = result;\n  return iterator;\n}\n\n/**\n * Returns an iterator that stacks items to an array\n * and sets the array as the result of the iterator.\n * If a template is provided,\n * it first applies the template to these items.\n * @param {Function} [template]\n * @return {Function}\n */\nfunction stacker(template) {\n  var result = [];\n  var iterator;\n  if (exists(template)) {\n    iterator = function(value, key) {\n      result.push(template(value, key));\n    };\n  } else {\n    iterator = function(value) {\n      result.push(value);\n    };\n  }\n  iterator.result = result;\n  return iterator;\n}\n\n/**\n * Returns an iterator that adds items to an object\n * and sets the object as the result of the iterator.\n * If a template is provided,\n * it first applies the template to these items.\n * @param {Function} [template]\n * @return {Function}\n */\nfunction mapper(template) {\n  var result = {};\n  var iterator;\n  if (exists(template)) {\n    iterator = function(value, key) {\n      result[key] = template(value, key);\n    };\n  } else {\n    iterator = function(value, key) {\n      result[key] = value;\n    };\n  }\n  iterator.result = result;\n  return iterator;\n}\n\nfunction where(match, action) {\n  function iterator(item, key) {\n    if (match(item, key)) {\n      action(item);\n    }\n  }\n  iterator.result = action.result;\n  return iterator;\n}\n\n/**\n * Returns an iterator\n * that invokes the action only for existing items\n * and sets a result from the action as the result of the iterator\n * @param {Function} action\n * @return {Function}\n */\nfunction existing(action) {\n  return where(exists, action);\n}\n\nfunction keyGetter(value, key) {\n  return key;\n}\n\n/**\n * Specifies that item was found.\n */\nvar $found = {type: 'Found'};\n\n/**\n * Returns an index of the first match. If no item matches returns null.\n * @param {Object} items\n * @param {Function} match\n * @return {Number}\n */\nfunction indexOf(items, match) {\n  var index = 0;\n  try {\n    each(items, function(value, key) {\n      if (match(value, key)) {\n        throw $found;\n      }\n      index++;\n    });\n    return null;\n  } catch (e) {\n    if (e === $found) {\n      return index;\n    }\n    throw e;\n  }\n}\n\n/**\n * Returns the value and the key of the first matched item.\n * @param {Object} items\n * @param {Object} match\n * @return {Array}\n */\nfunction search(items, match) {\n  var result;\n  try {\n    each(items, function(value, key) {\n      if (match(value, key)) {\n        result = [value, key];\n        throw $found;\n      }\n    });\n    return null;\n  } catch (e) {\n    if (e === $found) {\n      return result;\n    }\n    throw e;\n  }\n}\n\n/**\n * Returns template that return true if an input object (or its property with the given key) is equal to the value.\n * @param {Object} value\n * @param {String} [key]\n * @param {Function}\n */\nfunction match(value, key) {\n  if (exists(key)) {\n    return function(object) {\n      return object[key] === value;\n    };\n  } else {\n    return function(object) {\n      return object === value;\n    };\n  }\n}\n"},function(n,e,t){t(205)(t(1762))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Returns true if the object is an array or is listable.\n * @param {Object} object\n * @return {Boolean}\n */\nfunction isArrayOrListable(object) {\n  return isArray(object) || (object.Enumerable && !object.Dictionary);\n}\n\n/**\n * Creates a new array from the list starting at given offset and applying the template to each item.\n * @param {Array, Object} items\n * @param {Number} [offset]\n * @param {Function} [template]\n * @return {Array}\n */\nfunction $A(list, offset, template) {\n  return iterate(list, stacker(template), offset);\n}\n\nfunction translate(source, template) {\n  return each(source, stacker(template));\n}\n\nfunction map(source, template) {\n  return each(source, mapper(template));\n}\n\nfunction dict(source, template) {\n  return each(\n    source,\n    builder(newObject, function(target, key, value) {\n      var pair = template(value, key);\n      target[pair[0]] = pair[1];\n    })\n  );\n}\n\n/**\n * Creates a new array that contains items from the list but not existing ones.\n * @param {Array, Object} items\n * @param {Number} [offset]\n * @param {Function} [template]\n * @return {Array}\n */\nfunction compact(list, offset, template) {\n  return iterate(list, existing(stacker(template)), offset);\n}\n\n/**\n * Returns true if the collection contains an item that matches.\n * @param {Object} collection\n * @param {Function} match\n * @return {Boolean} result\n */\nfunction includes(collection, match) {\n  return exists(indexOf(collection, match));\n}\n\n/**\n * Creates a new array that contains items from all the lists.\n * @param {Array, Object} ... lists\n * @return {Array}\n */\nfunction concat() {\n  var result = [];\n  iterate(arguments, function(arg) {\n    if (exists(arg)) {\n      iterate(arg, function(item) {\n        result.push(item);\n      });\n    }\n  });\n  return result;\n}\n\n/**\n * Creates a new object that contains merged properties of the input objects.\n * @params {Object} ... objects\n * @return {Object}\n */\nfunction merge() {\n  var result = {};\n  iterate(arguments, function(arg) {\n    if (exists(arg)) {\n      extend(result, arg);\n    }\n  });\n  return result;\n}\n\nfunction keys(source) {\n  return translate(source, keyGetter);\n}\n\n/**\n * Adds the value as a new property to the object,\n * notifies the observer, and returns a new key.\n * @param {Object} object\n * @param {Object} value\n * @param {Function} observer\n * @return {String} key\n */\nfunction addProperty(object, value, observer) {\n  var key = 1;\n  while (key in object) {\n    key++;\n  }\n  object[key] = value;\n  observer(value, key, null);\n  return key;\n}\n\n/**\n * Changes a property with the given key of the object,\n * notifies the observer if the previous value was different,\n * and the returns previous value.\n * @param {Object} object\n * @param {Object} key\n * @param {Object} value\n * @param {Function} observer\n * @return {Object} old\n */\nfunction changeProperty(object, key, value, observer) {\n  var old = object[key];\n  if (old !== value) {\n    if (exists(value)) {\n      object[key] = value;\n    } else {\n      delete object[key];\n    }\n    observer(value, key, old);\n  }\n  return old;\n}\n\n/**\n * Changes properties of the object,\n * notifies the observer with changes,\n * and returns the changes.\n * @param {Object} object\n * @param {Object} values\n * @param {Function} observer\n * @return {Object} changes\n */\nfunction changeProperties(object, values, observer) {\n  var changes = {};\n  enumerate(values, function(value, key) {\n    var old = object[key];\n    if (!equals(old, value)) {\n      changes[key] = old;\n      object[key] = value;\n    }\n  });\n  enumerate(changes, function(value, key) {\n    observer(object[key], key, value);\n  });\n  return changes;\n}\n\n/**\n * Replaces properties of the object with new values,\n * notifies the observer with changes,\n * and returns the changes.\n * @param {Object} object\n * @param {Object} values\n * @param {Function} observer\n * @return {Object} changes\n */\nfunction replaceProperties(object, values, observer) {\n  var changes = clone(values);\n  enumerate(object, function(value, key) {\n    if (!(key in changes)) {\n      changes[key] = null;\n    }\n  });\n  return changeProperties(object, changes, observer);\n}\n\n/**\n * Creates watch getter from the watch accessor.\n * @param {WatchAccessor} accessor\n * @return {WatchGetter} getter\n */\nfunction getWatchGetter(accessor) {\n  return new WatchGetter(accessor.get, accessor.observe, accessor.invokeObserver);\n}\n\n/**\n * Returns true if the source implements CanGet interface and canGet() returns false.\n * @param {Object} source\n * @return {Boolean} result\n */\nfunction cannotGet(source) {\n  return source.CanGet ? !source.canGet() : false;\n}\n\n/**\n * Returns function that sets the value to the accessor.\n * @param {Accessor} accessor\n * @param {Object} value\n * @return {Function} setter\n */\nfunction setter(accessor, value) {\n  return function() {\n    accessor.set(value);\n  };\n}\n"},function(n,e,t){t(205)(t(1764))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Returns true if the text starts with the string.\n * @param {String} text\n * @param {String} string\n * @return {Boolean} result\n */\nfunction startsWith(text, string) {\n  return string == text.slice(0, string.length);\n}\n\nvar specialCharMap = {\n  '\\b': '\\\\b',\n  '\\t': '\\\\t',\n  '\\n': '\\\\n',\n  '\\f': '\\\\f',\n  '\\r': '\\\\r',\n  '\\\\': '\\\\\\\\',\n  '\"': '\\\\\"',\n};\n\n/**\n * Returns escaped string text.\n * @param {String} text\n * @return {String}\n */\nfunction escapeString(text) {\n  return (\n    '\"' +\n    text.replace(/[\\x00-\\x1f\\\\\\\"]/g, function(value) {\n      if (value in specialCharMap) {\n        return specialCharMap[value];\n      } else {\n        return '\\\\u00' + zeroPad(value.charCodeAt(0).toString(16), 2);\n      }\n    }) +\n    '\"'\n  );\n}\n\n/**\n * Formats the text using the args.\n * @param {String} text\n * @param {Array, Object} args\n * @return {String}\n */\nfunction format(text, args) {\n  return text.replace(/(\\{\\{)|(\\}\\})|(\\{[^\\}]*\\})/g, function(string) {\n    switch (string) {\n      case '{{':\n        return '{';\n      case '}}':\n        return '}';\n    }\n    if (!exists(args)) {\n      return '';\n    }\n    return str(args[string.slice(1, -1)]);\n  });\n}\n\nfunction trim(text) {\n  return trimEnd(trimStart(text));\n}\n\nfunction trimStart(text) {\n  return text.replace(/^\\s+/, '');\n}\n\nfunction trimEnd(text) {\n  return text.replace(/\\s+$/, '');\n}\n\nfunction padLeft(text, size, character) {\n  while (text.length < size) {\n    text = character + text;\n  }\n  return text;\n}\n\nfunction zeroPad(text, size) {\n  return padLeft(text, size, '0');\n}\n"},function(n,e,t){t(205)(t(1766))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Creates a named type from the mixins, the code, and with the constructor.\n * @param {String} name\n * @param {Array} mixins\n * @param {Object} [code]\n * @param {Function} [constructor]\n * @return {Function} constructor\n */\nfunction type(name, mixins, members, constructor) {\n  constructor = any(constructor, function() {});\n  members = getObject(members);\n  members[name] = constructor;\n  members.constructor = constructor;\n  constructor.prototype = members;\n  constructor.mixins = [name];\n  mixinType(constructor, mixins);\n  this[name] = constructor;\n  return constructor;\n}\n\n/**\n * Mixes mixins into the target type.\n * @param {Function} target\n * @param {Array} mixins\n * @return {Function} target\n */\nfunction mixinType(target, mixins) {\n  var code = target.prototype;\n  var mixs = target.mixins;\n  iterate(mixins, function(mixinName) {\n    var mixinCode = eval(mixinName);\n    enumerate(mixinCode.prototype, function(value, key) {\n      if (!exists(code[key]) || code[key] === Object.prototype[key]) {\n        code[key] = value;\n      }\n    });\n    if (exists(mixinCode.mixins)) {\n      iterate(mixinCode.mixins, function(item) {\n        if (!code[item]) {\n          mixs.push(item);\n        }\n      });\n    } else {\n      // simple type\n      if (!code[mixinName]) {\n        mixs.push(mixinName);\n      }\n      init(code, mixinName, mixinCode);\n    }\n  });\n  return target;\n}\n\n/**\n * Mixes the mixin of the source into the target instance.\n * @param {Object} target\n * @param {Object} source\n * @param {Object} mixin\n * @return {Object} target;\n */\nfunction mixinInstance(target, source, mixin) {\n  enumerate(mixin.prototype, function(value, key) {\n    target[key] = source[key];\n  });\n  return target;\n}\n\n/**\n * Creates an enumeration of the given names.\n * @param {String} ... names\n * @constructor\n */\nfunction Enum() {\n  var self = this;\n  iterate(arguments, function(item, index) {\n    self[item] = index;\n  });\n}\n"},function(n,e,t){t(205)(t(1768))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Read-only source.\n */\ntype(\n  'Getter',\n  [],\n  {\n    /**\n     * Returns value from the source.\n     * @return {Object} value\n     */\n    get: function() {},\n  },\n  /**\n   *\n   * @param {Function} get\n   * @constructor\n   */\n  function(get) {\n    this.get = get;\n  }\n);\n\n/**\n * Read-write source.\n */\ntype(\n  'Accessor',\n  ['Getter'],\n  {\n    /**\n     * Sets the new value and returns the previous value.\n     * @param {Object} value\n     * @return {Object} old value\n     */\n    set: function(value) {},\n  },\n  /**\n   *\n   * @param {Function} get\n   * @param {Function} set\n   * @constructor\n   */\n  function(get, set) {\n    this.get = get;\n    this.set = set;\n  }\n);\n\n/**\n * Object with change notifications.\n */\ntype(\n  'Observable',\n  [],\n  {\n    /**\n     * Attaches the new observer and returns function that detaches the observer.\n     * @param {Function} observer\n     * @return {Function} function to detach observer\n     */\n    observe: function(observer) {},\n  },\n  /**\n   *\n   * @param {Function} observer\n   * @constructor\n   */\n  function(observer) {\n    this.observe = observer;\n  }\n);\n\n/**\n * Observable that can simulate a change.\n */\ntype(\n  'InvokableObservable',\n  ['Observable'],\n  {\n    /**\n     * Simulates a change invoking the given observer.\n     * @param {Function} observer\n     */\n    invokeObserver: function(observer) {},\n  },\n  /**\n   *\n   * @param {Function} observer\n   * @param {Function} invokeObserver\n   * @constructor\n   */\n  function(observer, invokeObserver) {\n    this.observe = observer;\n    this.invokeObserver = invokeObserver;\n  }\n);\n\n/**\n * Observable read-only source.\n */\ntype(\n  'WatchGetter',\n  ['Getter', 'InvokableObservable'],\n  {},\n  /**\n   *\n   * @param {Function} get\n   * @param {Function} observe\n   * @param {Function} invokeObserver\n   * @constructor\n   */\n  function(get, observe, invokeObserver) {\n    this.get = get;\n    this.observe = observe;\n    this.invokeObserver = invokeObserver;\n  }\n);\n\n/**\n * Observable read-write source.\n */\ntype(\n  'WatchAccessor',\n  ['WatchGetter', 'Accessor'],\n  {},\n  /**\n   *\n   * @param {Function} get\n   * @param {Function} set\n   * @param {Function} observe\n   * @param {Function} invokeObserver\n   * @constructor\n   */\n  function(get, set, observe, invokeObserver) {\n    this.get = get;\n    this.set = set;\n    this.observe = observe;\n    this.invokeObserver = invokeObserver;\n  }\n);\n\n/**\n * Sometimes unreadable source.\n */\ntype('CanGet', [], {\n  /**\n   * Returns true if the source can be read.\n   * @return {Boolean} result\n   */\n  canGet: function() {\n    throw new Error('Not implemented');\n  },\n});\n\n/**\n * Object with manual refreshing.\n */\ntype(\n  'Refreshable',\n  [],\n  {\n    /**\n     * Triggers refresh.\n     */\n    refresh: function() {},\n  },\n  /**\n   *\n   * @param {Function} refresh\n   * @constructor\n   */\n  function(refresh) {\n    this.refresh = refresh;\n  }\n);\n\n/**\n * Source state enumeration.\n */\nvar SourceState = new Enum('None', 'Loading', 'Loaded', 'Committing', 'Error');\n\n/**\n * Abstract remote source.\n */\ntype('Source', ['Refreshable'], {\n  /**\n   * State of the source.\n   * @type {WatchGetter}\n   */\n  state: null,\n\n  /**\n   * Error of the source.\n   * @type {WatchGetter}\n   */\n  error: null,\n});\n\n/**\n * Source with enumerable items.\n */\ntype(\n  'Enumerable',\n  [],\n  {\n    /**\n     * Enumerates all items.\n     * @param {Function} iterator\n     * @return {Object} result of iterator\n     */\n    each: function(iterator) {},\n\n    isEmpty: function() {},\n  },\n  /**\n   *\n   * @param {Object} each\n   * @constructor\n   */\n  function(each, isEmpty) {\n    this.each = each;\n    this.isEmpty = isEmpty;\n  }\n);\n\ntype('WatchListable', ['Enumerable'], {\n  /**\n   * Attaches the list observer and returns a function to detach the observer.\n   * @param {Object} listObserver\n   * @return {Function}\n   */\n  observe: function(listObserver) {},\n});\n\n/**\n * Collection with sequential access.\n */\ntype(\n  'List',\n  ['Enumerable'],\n  {\n    /**\n     * Number of items.\n     * @type {Getter}\n     */\n    length: null,\n\n    /**\n     * Returns item at index\n     * @param {Number} index\n     * @return {Object} item\n     */\n    item: function(index) {},\n\n    /**\n     * Returns accessor for item\n     * @param {Number} index\n     * @return {Accessor}\n     */\n    accessor: function(index) {\n      var self = this;\n      return new Accessor(\n        function() {\n          return self.item(index);\n        },\n        function(value) {\n          return self.replaceAt(index, value);\n        }\n      );\n    },\n\n    /**\n     * Returns all items in an array\n     * @return {Array} items\n     */\n    allItems: function() {},\n\n    /**\n     * Appends the new item and returns an index of the item.\n     * @param {Object} item\n     * @return {Number} index\n     */\n    append: function(item) {},\n\n    /**\n     * Inserts the new item at the index if available,\n     * otherwise inserts the item at the beginning.\n     * Returns the index of the item.\n     * @param {Object} item\n     * @param {Number} [index]\n     * @return {Number} index\n     */\n    insert: function(item, index) {},\n\n    /**\n     * Removes the item and returns an index of the item.\n     * @param {Object} item\n     * @return {Number} index\n     */\n    remove: function(item) {},\n\n    /**\n     * Removes an item at the given index and returns the item.\n     * @param {Object} index\n     * @return {Object} item\n     */\n    removeAt: function(index) {},\n\n    /**\n     * Replaces item at index and returns previous item\n     * @param {Number} index\n     * @param {Object} item\n     * @return {Object} previous item\n     */\n    replaceAt: function(index, item) {\n      var old = this.removeAt(index);\n      this.insert(item, index);\n      return old;\n    },\n\n    /**\n     * Moves an item from the source to the destination index\n     * and returns the item.\n     * @param {Number} source\n     * @param {Number} destination\n     * @return {Object} item\n     */\n    move: function(source, destination) {\n      var item = this.removeAt(source);\n      this.insert(item, destination);\n      return item;\n    },\n\n    /**\n     * Removes all items and return these items.\n     * @returns {Array} cleared elements\n     */\n    clear: function() {},\n\n    /**\n     * Returns index of item or null if not found\n     * @param {Object} item\n     * @return {Number} index\n     */\n    indexOf: function(item) {},\n  },\n  /**\n   * Builds a new list on top of the array.\n   * @param {Array} array\n   * @constructor\n   */\n  function(array) {\n    array = getArray(array);\n    var self = this;\n    this.length = new Getter(function() {\n      return array.length;\n    });\n    this.item = function(index) {\n      return array[index];\n    };\n    this.allItems = function() {\n      return array.slice(0);\n    };\n    this.append = function(item) {\n      array.push(item);\n      return array.length - 1;\n    };\n    this.insert = function(item, index) {\n      if (!exists(index)) {\n        index = 0;\n      }\n      array.splice(index, 0, item);\n      return index;\n    };\n    this.remove = function(item) {\n      var index = this.indexOf(item);\n      if (exists(index)) {\n        array.splice(index, 1);\n      }\n      return index;\n    };\n    this.removeAt = function(index) {\n      return array.splice(index, 1)[0];\n    };\n    this.clear = function() {\n      var old = array;\n      array = [];\n      return old;\n    };\n    if (isFunction(array.indexOf)) {\n      this.indexOf = function(item) {\n        var index = array.indexOf(item);\n        return index === -1 ? null : index;\n      };\n    } else {\n      this.indexOf = function(item) {\n        for (var i in array) {\n          if (array[i] === item) {\n            return i;\n          }\n        }\n        return null;\n      };\n    }\n    this.each = function(iterator) {\n      return iterate(array, iterator);\n    };\n    this.isEmpty = function() {\n      return array.length === 0;\n    };\n  }\n);\n\n/**\n * Lookup\n */\ntype(\n  'Lookup',\n  [],\n  {\n    /**\n     * Gets a value using the key.\n     * @param {String} key\n     * @return {Object} value\n     */\n    get: function(key) {\n      throw new Error('Not implemented');\n    },\n  },\n  function(values) {\n    this.get = function(key) {\n      var value = values[key];\n      if (exists(value)) {\n        if (value.Getter) {\n          return value.get();\n        } else if (isFunction(value)) {\n          return value();\n        }\n      }\n      return value;\n    };\n  }\n);\n\n/**\n * Map-like collection.\n */\ntype('Dictionary', ['Lookup', 'Enumerable'], {\n  /**\n   * Sets the value with the key and returns a previous value.\n   * @param {String} key\n   * @param {String} value\n   * @return {Object} old\n   */\n  set: function(key, value) {\n    throw new Error('Not implemented');\n  },\n\n  /**\n   * Get values of the all properties.\n   * @return {Object} values\n   */\n  getAll: function() {\n    throw new Error('Not implemented');\n  },\n\n  /**\n   * Updates multiple properties.\n   * @param {Object} values\n   * @return {Object} changes\n   */\n  update: function(values) {\n    throw new Error('Not implemented');\n  },\n\n  /**\n   * Replaces multiple properties.\n   * @param {Object} values\n   * @return {Object} changes\n   */\n  replace: function(values) {\n    throw new Error('Not implemented');\n  },\n\n  /**\n   * Deletes all properties and returns their values.\n   * @method clear\n   * @return {Object} changes\n   */\n  clear: function() {\n    throw new Error('Not implemented');\n  },\n});\n\n/**\n * Attachable source.\n */\ntype('Attachable', [], {\n  /**\n   * Attaches the new item and returns a function to detach this item.\n   * @param {Object} item\n   * @param {Function} item remover\n   */\n  attach: function(item) {\n    throw new Error('Not implemented');\n  },\n});\n\n/**\n * Attachable source that can enumerate its items.\n */\ntype('EnumerableAttachable', ['Attachable', 'Enumerable']);\n\ntype('Equatable', [], {\n  /**\n   *\n   */\n  equals: function(item) {\n    return this == item;\n  },\n});\n"},function(n,e,t){t(205)(t(1770))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Curries the method with the args.\n * @param {Function} method\n * @param {Object} ... args\n * @return {Function}\n */\nfunction curry(method) {\n  var args = $A(arguments, 1);\n  return function() {\n    return method.apply(this, concat(args, arguments));\n  };\n}\n\n/**\n * Returns a template that invokes an input value on the object with the arguments.\n * @param {Object} self\n * @param {Array} [args]\n * @return {Function} template\n */\nfunction invoker(object, args) {\n  args = any(args, []);\n  return function Invoke(func) {\n    return (arguments.callee.result = func.apply(object, args));\n  };\n}\n\n/**\n * Creates a sequential invoker from the functions.\n * @param {Function} ... functions\n * @return {Function} sequence\n */\nfunction sequence() {\n  var functions = compact(arguments);\n  return function Sequence() {\n    iterate(functions, invoker(this, $A(arguments)));\n  };\n}\n\n/**\n * Returns a multi-function with attachable methods.\n * @return {Function} commands\n */\nfunction commands() {\n  var methods = new Bag();\n  return mixinInstance(\n    function() {\n      return methods.each(invoker(this, $A(arguments)));\n    },\n    methods,\n    Attachable\n  );\n}\n\n/**\n * Creates a command from the method and the caption.\n * @param {Function} method\n * @param {String} caption\n * @return {Function} command\n */\nfunction command(method, caption) {\n  function Command() {\n    return method.apply(this, $A(arguments));\n  }\n  Command.caption = caption;\n  return Command;\n}\n\n/**\n * Invokes the method with the arguments if it exists.\n * @param {Function} command\n */\nfunction invoke(method) {\n  if (exists(method)) {\n    return method.apply(this, $A(arguments, 1));\n  }\n}\n\n/**\n * Delays execution of the method for the timeout and returns a function to cancel the delayed execution.\n * @param {Function} method\n * @param {Number} timeout\n * @return {Function} cancel\n */\nfunction delay(method, timeout) {\n  var id = setTimeout(method, timeout);\n  return function() {\n    clearTimeout(id);\n  };\n}\n\n/**\n * Defers execution of the method and returns a function to cancel the deferred execution.\n * @param {Function} method\n * @return {Function} cancel\n */\nfunction defer(method) {\n  return delay(method, 1);\n}\n\n/**\n * Schedule execution of the method and returns a function to cancel the scheduled execution.\n * @param {Function} method\n * @return {Function} cancel\n */\nfunction schedule(method) {\n  if (exists(method.scheduled)) {\n    return method.scheduled;\n  } else {\n    method.scheduled = defer(function() {\n      delete method.scheduled;\n      method();\n    });\n    return method.scheduled;\n  }\n}\n\nfunction delayedBind(target, key, builder) {\n  target[key] = function() {\n    var args = $A(arguments);\n    var method = builder.apply(this, args);\n    target[key] = method;\n    return method.apply(this, args);\n  };\n}\n"},function(n,e,t){t(205)(t(1772))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nfunction Point(x, y) {\n  if (!exists(x)) {\n    this.x = 0;\n    this.y = 0;\n  } else if (isObject(x)) {\n    this.x += x.x;\n    this.y += x.y;\n  } else if (!exists(y)) {\n    this.x = x;\n    this.y = x;\n  } else {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nPoint.prototype = {\n  move: function(x, y) {\n    if (isObject(x)) {\n      this.x += x.x;\n      this.y += x.y;\n    } else {\n      this.x += x;\n      this.y += y;\n    }\n    return this;\n  },\n  scale: function(x, y) {\n    if (isObject(x)) {\n      this.x *= x.x;\n      this.y *= x.y;\n    } else if (!exists(y)) {\n      this.x *= x;\n      this.y *= x;\n    } else {\n      this.x *= x;\n      this.y *= y;\n    }\n    return this;\n  },\n};\n"},function(n,e,t){t(205)(t(1774))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Unordered attachable collection.\n */\ntype('Bag', ['EnumerableAttachable'], {}, function() {\n  var counter = 0;\n  var items = {};\n  // IE enumeration safe\n  var pendingItems = null;\n\n  function getDetach(id) {\n    return function detach() {\n      if (id in items) {\n        delete items[id];\n        return true;\n      }\n      return false;\n    };\n  }\n  this.each = function(iterator) {\n    pendingItems = {};\n    var result = enumerate(items, iterator);\n    extend(items, pendingItems);\n    pendingItems = null;\n    return result;\n  };\n\n  // defers set if enumerating (for IE)\n  this.attach = function(item) {\n    var id = counter++;\n    if (exists(pendingItems)) {\n      pendingItems[id] = item;\n    } else {\n      items[id] = item;\n    }\n    return getDetach(id);\n  };\n});\n"},function(n,e,t){t(205)(t(1776))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Creates a watch value and binds it to the source.\n * @param {Object} source\n * @param {Function} template\n * @return {WatchValue}\n */\nfunction $V(source, template) {\n  return bind.toAccessor(new WatchValue(), source, template);\n}\n\n/**\n * Observable value.\n */\ntype(\n  'WatchValue',\n  ['WatchAccessor'],\n  {},\n  /**\n   * Initializes a new watch value with the given value.\n   * @param {Object} value\n   */\n  function(value) {\n    var valueObservers = commands();\n    this.WatchAccessor(\n      function() {\n        return value;\n      },\n      function(newValue) {\n        if (!equals(value, newValue)) {\n          var oldValue = value;\n          value = newValue;\n          valueObservers(newValue, oldValue);\n        }\n      },\n      valueObservers.attach,\n      function(observer) {\n        return observer(value, value);\n      }\n    );\n  }\n);\n\ntype(\n  'WatchPair',\n  ['WatchValue'],\n  {\n    key: null,\n  },\n  function(key, value) {\n    this.key = key;\n    this.WatchValue(value);\n  }\n);\n"},function(n,e,t){t(205)(t(1778))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Creates a watch list and binds it to the source.\n * @param {Object} source\n * @param {Function} template\n * @return {WatchCollection}\n */\nfunction $L(source, template) {\n  return bind.toList(new WatchList(), source, template);\n}\n\n/**\n * Observable list.\n */\ntype(\n  'WatchList',\n  ['WatchListable', 'List'],\n  {\n    /**\n     * Creates a new watch accessor for the key.\n     * @param {String} key\n     * @return {WatchAccessor}\n     */\n    accessor: function(index) {\n      var self = this;\n      return new WatchAccessor(\n        function() {\n          return self.item(index);\n        },\n        function(value) {\n          return self.replaceAt(index, value);\n        },\n        function(observer) {\n          return self.observe({\n            itemAdded: function(it, idx) {\n              if (idx == index) {\n                observer(it, self.item(index + 1));\n              } else if (idx < index) {\n                observer(self.item(index), self.item(index + 1));\n              }\n            },\n            itemRemoved: function(it, idx) {\n              if (idx == index) {\n                observer(self.item(index), it);\n              } else if (idx < index) {\n                observer(self.item(index), self.item(index - 1));\n              }\n            },\n            itemMoved: function(it, idx) {\n              var src = idx[0];\n              var dst = idx[1];\n              if (src == index) {\n                if (dst != index) {\n                  observer(self.item(index), it);\n                }\n              } else if (src < index) {\n                if (dst >= index) {\n                  observer(self.item(index), self.item(index - 1));\n                }\n              } else {\n                if (dst <= index) {\n                  observer(self.item(index), self.item(index + 1));\n                }\n              }\n            },\n          });\n        },\n        function(observer) {\n          var value = self.item(index);\n          return observer(value, value);\n        }\n      );\n    },\n  },\n  /**\n   * Initializes a new watch list with the items.\n   * @param {Object} ... items\n   */\n  function() {\n    var self = this;\n    var items = new List($A(arguments));\n    var length = $V(items.length);\n    var listObservers = commands();\n\n    // Enumerable\n    this.each = items.each;\n    this.isEmpty = items.isEmpty;\n\n    // List\n    this.length = getWatchGetter(length);\n    this.item = items.item;\n    this.allItems = items.allItems;\n    this.append = function(item) {\n      var index = items.append(item);\n      listObservers('itemAdded', item, index, self);\n      length.set(items.length.get());\n      return index;\n    };\n    this.insert = function(item, index) {\n      if (!exists(index) || index < items.length.get()) {\n        index = items.insert(item, index);\n        listObservers('itemAdded', item, index, self);\n        length.set(items.length.get());\n        return index;\n      }\n      while (index-- > items.length) {\n        self.append(null);\n      }\n      return self.append(item);\n    };\n    this.remove = function(item) {\n      var index = items.remove(item);\n      if (index >= 0) {\n        listObservers('itemRemoved', item, index, self);\n        length.set(items.length.get());\n      }\n      return index;\n    };\n    this.removeAt = function(index) {\n      var item = items.removeAt(index);\n      if (exists(item)) {\n        listObservers('itemRemoved', item, index, self);\n      }\n      length.set(items.length.get());\n      return item;\n    };\n    this.move = function(source, destination) {\n      var item = items.move(source, destination);\n      listObservers('itemMoved', item, [source, destination], self);\n      length.set(items.length.get());\n      return item;\n    };\n    this.clear = function() {\n      // FIXME?\n      var old = items.clear();\n      iterate(old, function(item) {\n        listObservers('itemRemoved', item, 0, self);\n      });\n      length.set(items.length.get());\n      return old;\n    };\n    this.indexOf = items.indexOf;\n\n    // WatchListable\n    this.observe = function(listObserver) {\n      var observer = isFunction(listObserver)\n        ? listObserver\n        : function(evt) {\n            var eventObserver = listObserver[evt];\n            if (exists(eventObserver)) {\n              eventObserver.apply(listObserver, $A(arguments, 1));\n            }\n          };\n      return listObservers.attach(observer);\n    };\n  }\n);\n\nfunction processListable(source, processor) {\n  each(source, processor.itemAdded);\n  if (source.WatchListable) {\n    return source.observe(processor);\n  }\n}\n"},function(n,e,t){t(205)(t(1780))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Creates a watch object and binds it to the source.\n * @param {Object} source\n * @param {Function} template\n * @return {WatchObject}\n */\nfunction $O(source, template) {\n  return bind.toDictionary(new WatchObject(), source, template);\n}\n\n/**\n * Observable object.\n */\ntype(\n  'WatchObject',\n  ['Dictionary', 'Observable'],\n  {\n    /**\n     * Adds a new property, initializes it with the value, returns a key of the new property.\n     * @param {Object} value\n     * @return {String} key\n     */\n    add: function(value) {},\n\n    /**\n     * Creates a new watch getter for the key.\n     * @param {String} key\n     * @return {WatchGetter}\n     */\n    getter: function(key) {\n      var self = this;\n      return new WatchGetter(\n        function() {\n          return self.get(key);\n        },\n        function(observer) {\n          return self.observe(function(value, key, self, old) {\n            return observer(value, old);\n          }, key);\n        },\n        function(observer) {\n          var value = self.get(key);\n          return observer(value, value);\n        }\n      );\n    },\n\n    /**\n     * Creates a new watch accessor for the key.\n     * @param {String} key\n     * @return {WatchAccessor}\n     */\n    accessor: function(key) {\n      var self = this;\n      return new WatchAccessor(\n        function() {\n          return self.get(key);\n        },\n        function(value) {\n          return self.set(key, value);\n        },\n        function(observer) {\n          return self.observe(function(value, key, self, old) {\n            return observer(value, old);\n          }, key);\n        },\n        function(observer) {\n          var value = self.get(key);\n          return observer(value, value);\n        }\n      );\n    },\n  },\n  /**\n   * Initializes a new watch object and attaches watch accessors for the keys.\n   * @param {String} ... keys\n   */\n  function() {\n    var self = this;\n    var properties = {};\n    var propertyObservers = {};\n    var objectObservers = commands();\n    var notify = function(value, key, old) {\n      var propertyObserver = propertyObservers[key];\n      if (exists(propertyObserver)) {\n        propertyObserver(value, key, self, old);\n      }\n      objectObservers(value, key, self, old);\n    };\n\n    // Enumerable\n    this.each = function(iterator) {\n      return enumerate(properties, iterator);\n    };\n    this.isEmpty = function() {\n      return !hasProperties(properties);\n    };\n\n    // Dictionary\n    this.get = function(key) {\n      return properties[key];\n    };\n    this.set = function(key, value) {\n      return changeProperty(properties, key, value, notify);\n    };\n    this.getAll = function() {\n      return clone(properties);\n    };\n    this.update = function(values) {\n      return changeProperties(properties, values, notify);\n    };\n    this.replace = function(values) {\n      return replaceProperties(properties, values, notify);\n    };\n    this.clear = function() {\n      var old = properties;\n      properties = {};\n      enumerate(old, function(value, key) {\n        notify(null, key, value);\n      });\n      return old;\n    };\n    // Observable\n    this.observe = function(observer, key) {\n      if (exists(key)) {\n        var propertyObserver = propertyObservers[key];\n        if (!exists(propertyObserver)) {\n          propertyObserver = commands();\n          propertyObservers[key] = propertyObserver;\n        }\n        return propertyObserver.attach(observer);\n      } else {\n        return objectObservers.attach(observer);\n      }\n    };\n    // WatchObject\n    this.add = function(value) {\n      return addProperty(properties, value, notify);\n    };\n    return mixWatchAccessors(this, arguments, this);\n  }\n);\n\n/**\n * Defines a named watch type with the properties based on the mixins.\n * @param {Object} name\n * @param {Array} properties\n * @param {Array} [mixins]\n * @return {Function} constructor({Object} ... values)\n */\nfunction watchType(name, properties, mixins) {\n  var create = type(name, any(mixins, []), {}, function(source) {\n    if (this instanceof arguments.callee) {\n      var object = new WatchObject();\n      var self = this;\n      iterate(create.mixins, function(mixin) {\n        mixWatchAccessors(self, self[mixin].watchProperties, object);\n      });\n      watchType.init(this, arguments);\n    } else {\n      return watchType.load(new arguments.callee(), source);\n    }\n  });\n  create.watchProperties = properties;\n  return create;\n}\n\n/**\n *\n * @param {WatchType} target\n * @param {Array} values\n */\nwatchType.init = function(target, values) {\n  var counter = 0;\n  iterate(target.constructor.mixins, function(mixin) {\n    iterate(target[mixin].watchProperties, function(property) {\n      target[property].set(values[counter++]);\n    });\n  });\n  return target;\n};\n\n/**\n *\n * @param {WatchType} target\n * @param {Object} object\n */\nwatchType.load = function(target, object) {\n  if (object instanceof target.constructor) {\n    iterate(target.constructor.mixins, function(mixin) {\n      iterate(target[mixin].watchProperties, function(property) {\n        var value = object[property];\n        if (exists(value) && value.Getter) {\n          target[property].set(value.get());\n        }\n      });\n    });\n  } else {\n    iterate(target.constructor.mixins, function(mixin) {\n      iterate(target[mixin].watchProperties, function(property) {\n        target[property].set(object[property]);\n      });\n    });\n  }\n  return target;\n};\n\n/**\n * Attaches watch getters created from the properties from the object to the target and returns the object.\n * @param {Object} target\n * @param {Array} properties\n * @param {WatchObject} [object]\n * @return {WatchObject}\n */\nfunction mixWatchGetters(target, properties, object) {\n  if (!exists(object)) {\n    object = new WatchObject();\n  }\n  iterate(properties, function(property) {\n    target[property] = object.getter(property);\n  });\n  return object;\n}\n\n/**\n * Attaches watch accessors created from the properties from the object to the target and returns the object.\n * @param {Object} target\n * @param {Array} properties\n * @param {WatchObject} [object]\n * @return {WatchObject}\n */\nfunction mixWatchAccessors(target, properties, object) {\n  if (!exists(object)) {\n    object = new WatchObject();\n  }\n  iterate(properties, function(property) {\n    target[property] = object.accessor(property);\n  });\n  return object;\n}\n"},function(n,e,t){t(205)(t(1782))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n// SUPER LEVEL\n\n/**\n * Binds the target to the source using the template. If the target is a write-only elements, it uses bind.element(), otherwise it uses bind().\n * @param {Object} target\n * @param {Object} source\n * @param {Object} template\n */\nfunction $B(target, source, template) {\n  if (exists(target) && target.XElement && cannotGet(target)) {\n    return bind.element(target, source, template);\n  } else {\n    return bind(target, source, template);\n  }\n}\n\n// HIGH LEVEL\n\n/**\n * Direct binding.\n * @param {Accessor, List, Dictionary} target\n * @param {Object} source\n * @param {Function, String} [template]\n * @return {Accessor, List, Dictionary} target\n */\nvar bind = function(target, source, template) {\n  if (!exists(source)) {\n    return bind.detach(target);\n  }\n  if (!exists(target)) {\n    return obtainTemplate(template)(source);\n  }\n  if (target.Accessor) {\n    return bind.accessor(target, source, template);\n  }\n  if (target.List) {\n    return bind.toList(target, source, template);\n  }\n  if (target.Dictionary) {\n    return bind.toDictionary(target, source, template);\n  }\n  bind.detach(target);\n  throw new Error('Not implemented.');\n};\n\n/**\n * Place source to the target element.\n * @param {XElement} target\n * @param {XElement, Object} source\n * @param {Function} [template]\n */\nbind.element = function(target, source, template) {\n  return bind.attach(target, bind.internal.element(target, source, template));\n};\n\n// MEDIUM LEVEL\n\n/**\n * Two-way binding of accessors.\n * @param {Accessor} target\n * @param {Accessor, Object} source\n * @param {Object|String} [template]\n * @return {Accessor} target\n */\nbind.accessor = function(target, source, template, listenOnly) {\n  if (cannotGet(target)) {\n    if (cannotGet(source)) {\n      return bind.detach(target);\n    } else {\n      return bind.toAccessor(target, source, template);\n    }\n  } else if (source.Accessor) {\n    if (cannotGet(source)) {\n      return bind.toAccessor(source, target, template);\n    } else {\n      var toTarget, toSource;\n      if (!exists(template)) {\n        toTarget = null;\n        toSource = null;\n      } else if (isString(template)) {\n        toTarget = template;\n        toSource = function(value) {\n          source[template] = value;\n        };\n      } else {\n        toTarget = template.toTarget;\n        toSource = template.toSource;\n      }\n      var lock = {};\n      bind.toAccessor(target, source, toTarget, listenOnly, lock);\n      bind.toAccessor(source, target, toSource, true, lock);\n      return target;\n    }\n  } else {\n    return bind.toAccessor(target, source, template);\n  }\n};\n\n/**\n * Binds the target to the source accessor.\n * @param {Accessor} target\n * @param {Object} [source]\n * @param {Function, String} [template]\n * @return {Accessor} target\n */\nbind.toAccessor = function(target, source, template, listenOnly, lock) {\n  return bind.setter(\n    target,\n    source,\n    templatedSetter(template, function(value) {\n      if (lock) {\n        if (!lock.active) {\n          lock.active = true;\n          target.set(value);\n          lock.active = null;\n        }\n      } else {\n        target.set(value);\n      }\n    }),\n    listenOnly\n  );\n};\n\n/**\n * Binds the target list to the source.\n * @param {List} target\n * @param {Object} [source]\n * @param {Function, String} [template]\n * @return {List} target\n */\nbind.toList = function(target, source, template) {\n  return bind.setter(target, source, function(value) {\n    if (!exists(value)) {\n      target.clear();\n      return null;\n    }\n    if (isArrayOrListable(value)) {\n      return bind.internal.list(target, value, template);\n    }\n    return bind.internal.objectToList(target, value, template);\n  });\n};\n\n/**\n * Binds the target dictionary to the source.\n * @param {Dictionary} target\n * @param {Object} [source]\n * @param {Function, String} [template]\n * @return {Dictionary} target\n */\nbind.toDictionary = function(target, source, template) {\n  return bind.setter(target, source, function(value) {\n    if (!exists(value)) {\n      target.clear();\n      return null;\n    }\n    if (isArrayOrListable(value)) {\n      return bind.internal.listToDictionary(target, value, template);\n    }\n    return bind.internal.objectToDictionary(target, value, template);\n  });\n};\n\n// LOW LEVEL\n\n/**\n * Binds two lists.\n * @param {List} target\n * @param {WatchList, Enumerable, Array} source\n * @param {Function, String} [template]\n * @return {List} target\n */\nbind.list = function(target, source, template) {\n  return bind.attach(target, bind.internal.list(target, source, template));\n};\n\n/**\n * Binds the target list tp the source object.\n * @param {List} target\n * @param {WatchObject, Object} source\n * @param {Function, String} [template]\n * @return {List} target\n */\nbind.objectToList = function(target, source, template) {\n  return bind.attach(target, bind.internal.objectToList(target, source, template));\n};\n\n/**\n * Binds the target dictionary to the source list.\n * @param {Dictionary} target\n * @param {WatchList, Enumerable, Array} source\n * @param {Function, String} [template]\n * @return {Dictionary} target\n */\nbind.listToDictionary = function(target, source, template) {\n  return bind.attach(target, bind.internal.listToDictionary(target, source, template));\n};\n\n/**\n * Binds the target dictionary to the source object.\n * @param {Dictionary} target\n * @param {WatchObject, Object} source\n * @param {Function, String} [template]\n * @return {Dictionary} target\n */\nbind.objectToDictionary = function(target, source, template) {\n  return bind.attach(target, bind.internal.objectToDictionary(target, source, template));\n};\n\n/**\n * Binds the list sequentially\n * @param {List} target\n * @param {WatchList, Enumerable, Array} source\n * @param {Function} template\n */\nbind.sequence = function(target, source, template) {\n  return bind.attach(target, bind.internal.sequence(target, source, template));\n};\n\n/**\n * Binds the target using the setter to the source getter.\n * @param {Object} target\n * @param {Getter, Object} source\n * @param {Function} setter\n * @return {Object} target\n */\nbind.setter = function(target, source, setter, listenOnly) {\n  function gain(value, listenOnly) {\n    if (exists(value) && value.Getter) {\n      return bind.internal.getter(gain, value, listenOnly);\n    }\n    if (!listenOnly) {\n      setter(value);\n    }\n  }\n  return bind.attach(target, gain(source, listenOnly));\n};\n\n/**\n * Attaches the binding stop function to the target.\n * @param {Object} target\n * @param {Function} stop\n * @return {Object}\n */\nbind.attach = function(target, stop) {\n  if (target.unbind) {\n    target.unbind();\n    if (stop) {\n      target.unbind = stop;\n    } else {\n      delete target.unbind;\n    }\n  } else if (stop) {\n    target.unbind = stop;\n  }\n  return target;\n};\n\n/**\n * Unbinds the target.\n * @param {Object} target\n * @return {Object} target\n */\nbind.detach = function(target) {\n  if (target.unbind) {\n    target.unbind();\n    delete target['unbind'];\n  }\n  return target;\n};\n\n// INTERNAL LEVEL\n\nbind.internal = {};\n\nbind.internal.element = function(target, source, template) {\n  if (!exists(target)) {\n    return obtainTemplate(template)(source);\n  }\n\n  function gain(value) {\n    if (!exists(value) || value.XElement || !isObject(value)) {\n      target.clear();\n      target.append(obtainTemplate(template)(value, target));\n      return null;\n    }\n    if (value.Getter) {\n      return bind.internal.getter(gain, value);\n    }\n    if (isArrayOrListable(value)) {\n      return bind.internal.list(target, value, template);\n    }\n    return bind.internal.list(target, $L(value), template);\n  }\n\n  return gain(source);\n};\n\nbind.internal.getter = function(gain, value, listenOnly) {\n  var stop = gain(value.get(), listenOnly);\n  if (value.WatchGetter) {\n    return sequence(\n      stop,\n      value.observe(\n        sequence(stop, function(value) {\n          gain(value);\n        })\n      )\n    );\n  }\n  return stop;\n};\n\nbind.internal.list = function(target, list, template) {\n  template = obtainTemplate(template);\n  function inserter(item, index) {\n    target.insert(template(item, target), index);\n  }\n  target.clear();\n  return processListable(list, {\n    itemAdded: inserter,\n    itemRemoved: function(item, index) {\n      target.removeAt(index);\n    },\n    itemMoved: function(item, source, destination) {\n      target.move(source, destination);\n    },\n  });\n};\n\nbind.internal.objectToList = function(target, object, template) {\n  template = obtainTemplate(template);\n  if (object.WatchObject) {\n    var list = new WatchList();\n    each(object, function(value, key) {\n      list.append(new WatchPair(key, value));\n    });\n    return sequence(\n      bind.internal.list(target, list, template),\n      object.observe(function(value, key, obj, old) {\n        if (exists(value)) {\n          var result = search(list, match(key, 'key'));\n          if (exists(result)) {\n            result[0].set(value);\n          } else {\n            list.append(new WatchPair(key, value));\n          }\n        } else {\n          var index = indexOf(list, match(key, 'key'));\n          if (exists(index)) {\n            list.removeAt(index);\n          }\n        }\n      })\n    );\n  } else {\n    target.clear();\n    each(object, function(value, key) {\n      target.append(template(new WatchPair(key, value), target));\n    });\n  }\n  return null;\n};\n\nbind.internal.listToDictionary = function(target, source, template) {\n  throw new Error('Not implemented.');\n};\n\nbind.internal.objectToDictionary = function(target, source, template) {\n  if (source.WatchObject) {\n    throw new Error('Not implemented.');\n  }\n  if (exists(template)) {\n    source = map(source, template);\n  }\n  target.update(source);\n  return null;\n};\n\nbind.internal.sequence = function(target, list, template) {\n  template = obtainTemplate(template);\n  function update() {\n    target.clear();\n    each(list, function(item, index) {\n      target.insert(template(item, index, target), index);\n    });\n  }\n  update();\n  if (list.WatchList) {\n    return list.observe(update);\n  }\n  return null;\n};\n\n"},function(n,e,t){t(205)(t(1784))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * If the template does not exist returns pass,\n * if the template is a function returns the template,\n * otherwise returns a function that\n * returns a property of an input value determined by the template.\n * @param {Function, String} [template]\n * @return {Function}\n */\nfunction obtainTemplate(template) {\n  if (!exists(template)) {\n    return pass;\n  }\n  if (isFunction(template)) {\n    return template;\n  }\n  return function(value) {\n    return exists(value) ? value[template] : null;\n  };\n}\n\n/**\n * If the template does not exist returns the setter,\n * if the template is a function returns a function\n * that applies the template on an input value and invokes the setter,\n * otherwise returns a function that invokes the setter\n * with a propertyof an input value determined by the template.\n * @param {Function, String} template\n * @param {Function} setter\n * @return {Function}\n */\nfunction templatedSetter(template, setter) {\n  if (!exists(template)) {\n    return setter;\n  }\n  if (isFunction(template)) {\n    return function(value) {\n      setter(template(value));\n    };\n  }\n  return function(value) {\n    setter(exists(value) ? value[template] : null);\n  };\n}\n\n/**\n * Returns a template that returns a case according an input value.\n * @param {Dictionary|Object} values\n * @return {Function}\n */\nfunction splitter(values) {\n  if (values.Lookup) {\n    return function(key) {\n      return values.get(key);\n    };\n  } else {\n    return function(key) {\n      return values[key];\n    };\n  }\n}\n\n/**\n * Selects a value from the options.\n */\ntype(\n  'Chooser',\n  ['WatchAccessor'],\n  {\n    /**\n     * Returns a setter that selects a value from the options according the key.\n     * @param {String} key\n     * @return {Function} setter\n     */\n    option: function(key) {\n      var self = this;\n      return function() {\n        self.set(key);\n      };\n    },\n  },\n  /**\n   * Initializes chooser with the options.\n   * @param {Object} options\n   */\n  function(options) {\n    var value = $V();\n    mixinInstance(this, value, WatchGetter);\n    this.set = templatedSetter(splitter(options), value.set);\n  }\n);\n\n"},function(n,e,t){t(205)(t(1786))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nvar Json = {\n  /**\n   * Encodes the object into a json.\n   * @param {Object} object\n   * @return {String} json\n   */\n  write: function(object) {\n    if (!exists(object)) {\n      return 'null';\n    }\n    switch (typeof object) {\n      case 'boolean':\n      case 'number':\n        return str(object);\n      case 'string':\n        return escapeString(object);\n      case 'object':\n        if (object.Getter) {\n          return Json.write(object.get());\n        }\n        if (object.Dictionary) {\n          object = object.getAll();\n        }\n        if (object.Enumerable) {\n          return '[' + object.each(stacker(Json.write)).join(',') + ']';\n        }\n        if (isArray(object)) {\n          return '[' + iterate(object, stacker(Json.write)).join(',') + ']';\n        }\n        var properties = [];\n        enumerate(object, function(value, key) {\n          if (!isFunction(value)) {\n            properties.push(escapeString(key) + ':' + Json.write(value));\n          }\n        });\n        return '{' + properties.join(',') + '}';\n      default:\n        throw 'Invalid object: ' + str(object);\n    }\n  },\n};\n"},function(n,e,t){t(205)(t(1788))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Returns a JSON-RPC value source.\n * @param {String} url\n * @param {String} method\n * @param {Object} [params]\n * @param {Object} [def]\n * @return {WatchAccessor} value\n */\nfunction jsonRpcValue(url, method, params, def, dontStart, callback) {\n  // not an object for url... curry\n  var self = new Source();\n  var object = mixWatchGetters(self, ['state', 'error']);\n  object.set('data', def);\n  mixinInstance(self, object.accessor('data'), WatchAccessor);\n\n  function process(result, error) {\n    if (exists(error)) {\n      object.update({\n        state: SourceState.Error,\n        error: error,\n      });\n    } else {\n      object.update({\n        state: SourceState.Loaded,\n        data: result,\n        error: null,\n      });\n    }\n\n    if (callback) {\n      callback();\n    }\n  }\n\n  self.set = function(value) {\n    var old = self.get();\n    object.update({\n      state: SourceState.Committing,\n      error: null,\n    });\n    jsonRpcCommit(url, method, params, value, process);\n    return old;\n  };\n  self.refresh = function() {\n    object.update({\n      state: SourceState.Loading,\n      error: null,\n    });\n    return jsonRpc(url, method, params, process);\n  };\n  if (!dontStart) {\n    self.refresh();\n  }\n  return self;\n}\n\n/**\n * Commits the value over JSON-RPC and passes a result to the handler. Returns XMLHttpRequest object.\n * @param {String} url\n * @param {String} method\n * @param {Object} params\n * @param {Object} value\n * @param {Function} handler\n * @return {XMLHttpRequest} request\n */\nfunction jsonRpcCommit(url, method, params, value, handler) {\n  var args;\n  if (!exists(params)) {\n    args = value;\n  } else if (isArray(params)) {\n    args = $A(params);\n    args.push(value);\n  } else if (isObject(params)) {\n    args = clone(params);\n    args.value = value;\n  } else {\n    args = value;\n  }\n  return jsonRpc(url, method, args, handler);\n}\n\n/**\n * Invokes the method with the params over JSON-RPC and passes a result to the handler.\n * @param {String} url\n * @param {String} method\n * @param {Object} params\n * @param {Function} handler\n * @return {XMLHttpRequest} request\n */\nfunction jsonRpc(url, method, params, handler) {\n  url = build_url(url, {_method: method}); // add method to query string to get better logs\n  $.ajax({\n    url: url,\n    method: 'POST',\n    data: Json.write({\n      origin: location.href,\n      method: method,\n      params: params,\n    }),\n    dataType: 'json',\n    contentType: 'application/json',\n    error: function(xhr) {\n      // we don't call handleAjaxError here - the legacy code using\n      // this function is already doing it\n      var error;\n      try {\n        error = JSON.parse(xhr.responseText).error;\n      } catch (e) {\n        error = {\n          title: $T.gettext('Something went wrong'),\n          message: '{0} ({1})'.format(data.statusText.toLowerCase(), data.status),\n        };\n      }\n      handler(null, error);\n    },\n    success: function(data) {\n      handler(data.result, null);\n    },\n  });\n}\n"},function(n,e,t){t(205)(t(1790))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n// acceptable formats:\n//  'h', 'hh', 'hmm', 'hhmm',\n//  'h+', 'hh+', 'h+m', 'h+mm', 'hh+m', 'hh+mm'\n// returns [h, m]\n\n/**\n * Parses time from the text.\n * @param {String} text\n * @return {Array}\n */\nfunction parseTime(text) {\n  text = trim(text);\n  if (text == '') {\n    return null;\n  }\n  var hour = 0;\n  var min = 0;\n  if (/^\\d{1,4}$/.test(text)) {\n    // 'h', 'hh', 'hmm', 'hhmm'\n    switch (text.length) {\n      case 1:\n        hour = parseInt(text, 10);\n        break;\n      case 2:\n        hour = parseInt(text.substr(0, 2), 10);\n        break;\n      case 3:\n        hour = parseInt(text.substr(0, 1), 10);\n        min = parseInt(text.substr(1, 2), 10);\n        break;\n      case 4:\n        hour = parseInt(text.substr(0, 2), 10);\n        min = parseInt(text.substr(2, 2), 10);\n        break;\n    }\n  } else {\n    var match = /^(\\d{1,2})[\\W]+(\\d{1,2})?$/.exec(text);\n    if (!match) {\n      return null;\n    }\n    // 'h+', 'hh+', 'h+M', 'h+mm', 'hh+M', 'hh+mm'\n    hour = parseInt(match[1], 10);\n    var minText = any(match[2], '');\n    if (minText != '') {\n      min = parseInt(minText, 10);\n    }\n  }\n  return [hour, min];\n}\n\n// hh:mm\n/**\n * Formats time.\n * @param {Date} time\n * @return {String}\n */\nfunction formatTime(time) {\n  return time.getHours().toString() + ':' + time.getMinutes().toPaddedString(2);\n}\n\n// tuple is [hour, min, sec, msec]\n/**\n * Sets the time from the tuple.\n * @param {Date} time\n * @param {Array} tuple\n */\nfunction setTime(time, tuple) {\n  time.setHours(any(tuple[0], 0), any(tuple[1], 0), any(tuple[2], 0), any(tuple[3], 0));\n}\n\n// returns [hour, min, sec, msec]\n/**\n * Returns a tuple from the time.\n * @param {Date} time\n * @return {Array}\n */\nfunction getTime(time) {\n  return [time.getHours(), time.getMinutes(), time.getSeconds(), time.getMilliseconds()];\n}\n\n// acceptable formats:\n//  'd', 'dm', 'ddm', 'ddmm',\n//      'ddmmy', 'ddmmYY', 'ddmmyyy', 'ddmmyyyy',\n//      'd+', d+m', 'd+m+', 'd+m+YY', 'd+m+y'\n//  YY - current century\n// returns [d, m, y]\n\n/**\n * Parses date from the text.\n * @param {String} text\n * @return {Array}\n */\nfunction parseDate(text) {\n  text = trim(text);\n  if (text == '') {\n    return null;\n  }\n  var day = null;\n  var month = null;\n  var year = null;\n  if (/^\\d{1,8}$/.test(text)) {\n    // 'd', 'dm', 'ddm', 'ddmm', 'ddmmY', 'ddmmYY', 'ddmmyyy', 'ddmmyyyy'\n    switch (text.length) {\n      case 1:\n        day = parseInt(text.substr(0, 1), 10);\n        break;\n      case 2:\n        day = parseInt(text.substr(0, 1), 10);\n        month = parseInt(text.substr(1, 1), 10);\n        break;\n      case 3:\n        day = parseInt(text.substr(0, 2), 10);\n        month = parseInt(text.substr(2, 1), 10);\n        break;\n      case 4:\n        day = parseInt(text.substr(0, 2), 10);\n        month = parseInt(text.substr(2, 2), 10);\n        break;\n      case 5:\n        day = parseInt(text.substr(0, 2), 10);\n        month = parseInt(text.substr(2, 2), 10);\n        year = [parseInt(text.substr(4, 1), 10)];\n        break;\n      case 6:\n        day = parseInt(text.substr(0, 2), 10);\n        month = parseInt(text.substr(2, 2), 10);\n        year = [parseInt(text.substr(4, 2), 10)];\n        break;\n      case 7:\n        day = parseInt(text.substr(0, 2), 10);\n        month = parseInt(text.substr(2, 2), 10);\n        year = parseInt(text.substr(4, 3), 10);\n        break;\n      case 8:\n        day = parseInt(text.substr(0, 2), 10);\n        month = parseInt(text.substr(2, 2), 10);\n        year = parseInt(text.substr(4, 4), 10);\n        break;\n    }\n  } else {\n    var match = /^(\\d{1,2})[\\W]+((\\d{1,2})([\\W]+(\\d{1,4})?)?)?$/.exec(text);\n    if (!match) {\n      return null;\n    }\n    // 'd+', d+m', 'd+m+', 'd+m+YY', 'd+m+y'\n    day = parseInt(match[1], 10);\n    var monthText = any(match[3], '');\n    if (monthText != '') {\n      month = parseInt(monthText, 10);\n    }\n    var yearText = any(match[5], '');\n    if (exists(yearText)) {\n      year = parseInt(yearText, 10);\n      if (yearText.length < 3) {\n        year = [year];\n      }\n    }\n  }\n  return [day, month, year];\n}\n\n// tuple is [day, month, year]\n/**\n * Sets the date from the tuple.\n * @param {Date} date\n * @param {Array} tuple\n */\nfunction setDate(date, tuple) {\n  var day = tuple[0];\n  var month = tuple[1];\n  var year = tuple[2];\n  if (exists(year)) {\n    if (isArray(year)) {\n      year = Math.floor(date.getFullYear() / 100) * 100 + year[0];\n    }\n    date.setFullYear(year);\n  }\n  if (exists(month)) {\n    date.setMonth(month - 1);\n  }\n  if (exists(day)) {\n    date.setDate(day);\n  }\n}\n\n// returns [day, month, year]\n/**\n * Returns a tuple from the date.\n * @param {Date} date\n * @retrun {Array}\n */\nfunction getDate(date) {\n  return [date.getDate(), date.getMonth() + 1, date.getFullYear()];\n}\n"},function(n,e,t){t(205)(t(1792))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n// \"Element\" is used by Firefox for native DOM elements!\n\n/**\n * Wrapper for a native DOM element. It handles cross-browser compatibility.\n */\ntype(\n  'XElement',\n  ['List'],\n  {\n    /**\n     * Attaches the observer to a click event. Returns a function to detach the observer.\n     * @param {Function} observer\n     * @return {Function} function to remove observer\n     */\n    observeClick: function(observer) {\n      return this.observeEvent('click', observer);\n    },\n\n    /**\n     * Attaches the observer to a change event. Returns a function to detach the observer.\n     * @param {Function} observer\n     * @return {Function} function to remove observer\n     */\n    observeChange: function(observer) {\n      return this.observeEvent('change', observer);\n    },\n\n    observeKeyPress: function(observer) {\n      return this.observeEvent('keypress', function(e) {\n        var key = e.keyCode || e.which;\n        return observer(key);\n      });\n    },\n\n    /**\n     * Attaches the observer to an event with the given name. Returns a function to detach the observer.\n     * @param {String} eventName\n     * @param {Function} observer\n     * @return {Function} function to remove observer\n     */\n    observeEvent: function(eventName, observer) {\n      var self = this;\n      return obtain(obtain(this, 'eventObservers', construct(Object)), eventName, function() {\n        var observers = commands();\n        self.dom['on' + eventName] = function(e) {\n          if (window.event) {\n            e = window.event;\n          }\n          return observers(e);\n        };\n        return observers;\n      }).attach(observer);\n    },\n\n    /**\n     * Triggers an event with the given name. Returns an event object of the event.\n     * @param {String} eventName\n     * @return {Event} event\n     */\n    dispatchEvent: function(eventName) {\n      return Dom.Event.dispatch(this.dom, eventName);\n    },\n\n    getters: {},\n    setters: {},\n    /**\n     * Returns a value of an attribute with the given name.\n     * @param {String} name\n     * @return {Object} value\n     */\n    getAttribute: function(name) {\n      var getter = this.getters[name];\n      return exists(getter) ? getter.call(this) : Dom.get(this.dom, name);\n    },\n\n    /**\n     * Sets the value to an attribute with the given name. Returns the element.\n     * @param {String} name\n     * @param {Object} value\n     * @return {XElement}\n     */\n    setAttribute: function(name, value) {\n      var setter = this.setters[name];\n      if (exists(setter)) {\n        return setter.call(this, value);\n      }\n      Dom.set(this.dom, name, value);\n      return this;\n    },\n\n    /**\n     * Set multiple attributes\n     * @param {Object} values\n     */\n    attribute: function(values) {\n      var self = this;\n      enumerate(values, function(value, name) {\n        if (name.charAt(0) == '$') {\n          var key = name.substr(1);\n          if (isFunction(self[key])) {\n            self[key](value);\n          } else {\n            self[key] = value;\n          }\n        } else {\n          self.setAttribute(name, value);\n        }\n      });\n      return this;\n    },\n\n    styleGetters: {},\n    styleSetters: {},\n    /**\n     * Gets style for the key.\n     * @param {String} key\n     * @return {Object} value\n     */\n    getStyle: function(key) {\n      var getter = this.styleGetters[key];\n      return exists(getter) ? getter(this.dom) : Dom.Style.get(this.dom, name);\n    },\n\n    /**\n     * Sets a style with the key and the value or styles with the values. Returns the element.\n     * @param {String} key\n     * @param {Object} value\n     */\n    setStyle: function(key, value) {\n      var setter = this.styleSetters[key];\n      if (exists(setter)) {\n        var self = this;\n        enumerate(setter(value), function(v, k) {\n          Dom.Style.set(self.dom, k, v);\n        });\n      } else {\n        Dom.Style.set(this.dom, key, value);\n      }\n      return this;\n    },\n\n    /**\n     * Sets style values\n     * @param {Dom} dom\n     * @param {Object} values\n     */\n    style: function(values) {\n      var self = this;\n      enumerate(values, function(value, key) {\n        self.setStyle(key, value);\n      });\n      return this;\n    },\n\n    /**\n     * Returns an accessor for a attribute with the name.\n     * @param {String} name\n     * @return {Accessor} accessor\n     */\n    accessor: function(name) {\n      var self = this;\n      return new Accessor(\n        function() {\n          return self.getAttribute(name);\n        },\n        function(value) {\n          return self.setAttribute(name, value);\n        }\n      );\n    },\n\n    /**\n     * Returns content.\n     * @return {Array}\n     */\n    getContent: function() {\n      return Dom.Content.get(this.dom);\n    },\n\n    /**\n     * Adds the value to content. Returns a number of added nodes.\n     * @param {Object} value\n     * @return {Number} number of nodes\n     */\n    addContent: function(value) {\n      schedule(this.itemsUpdated);\n      return Dom.Content.add(this.dom, value);\n    },\n\n    /**\n     * Returns a name of a tag of the element.\n     * @return {String} tag\n     */\n    getTag: function() {\n      return this.dom.tagName.toLowerCase();\n    },\n\n    getParent: function() {\n      return $E(this.dom.parentNode);\n    },\n\n    detach: function() {\n      var parent = this.getParent();\n      if (exists(parent)) {\n        parent.remove(this);\n      }\n    },\n\n    destroy: function() {\n      delete this.dom.$element;\n      delete this.dom;\n    },\n\n    // Enumerable\n    each: function(iterator) {\n      return Dom.List.each(this.dom, function(item, index) {\n        return iterator($E(item), index);\n      });\n    },\n\n    // List\n    length: function() {\n      return Dom.List.length(this.dom);\n    },\n    item: function(index) {\n      return $E(Dom.List.item(this.dom, index));\n    },\n    append: function(item) {\n      schedule(this.itemsUpdated);\n      return Dom.List.append(this.dom, item);\n    },\n    insert: function(item, index) {\n      schedule(this.itemsUpdated);\n      return Dom.List.insert(this.dom, item, index);\n    },\n    remove: function(item) {\n      schedule(this.itemsUpdated);\n      return Dom.List.remove(this.dom, item);\n    },\n    removeAt: function(index) {\n      schedule(this.itemsUpdated);\n      return Dom.List.removeAt(this.dom, index);\n    },\n    move: function(source, destination) {\n      schedule(this.itemsUpdated);\n      return Dom.List.move(this.dom, source, destination);\n    },\n    clear: function() {\n      schedule(this.itemsUpdated);\n      return Dom.List.clear(this.dom);\n    },\n  },\n  /**\n   * Creates a new element from the tag name or a native DOM element, sets the attributes, and adds the content.\n   * @param {String, Dom} tag name or source\n   * @param {Object} [attributes]\n   * @param {Object} ... content\n   */\n  function(source, attributes) {\n    var self = this;\n\n    self.itemsUpdated = commands();\n    if (isString(source)) {\n      source = document.createElement(source);\n    } else if (isArray(source)) {\n      source = Dom.createElementNS(document, source[0], source[1]);\n    }\n    // <LEAK>\n    self.dom = source;\n    try {\n      source.$element = self;\n    } catch (e) {\n      // ignore (IE expando bug, e.g. DispHTMLDOMTextNode)\n    }\n    XElement.elements.push(self);\n    // </LEAK>\n    self.length = new Getter(curry(XElement.getLength, self)); // closure leak avoidance\n    if (exists(attributes)) {\n      self.attribute(attributes);\n    }\n    iterate(\n      arguments,\n      function(item) {\n        self.addContent(item);\n      },\n      2\n    );\n  }\n);\n\nXElement.prototype.setters.style = XElement.prototype.style;\n\nXElement.getLength = function(element) {\n  return Dom.List.length(element.dom);\n};\n\nXElement.elements = [];\nXElement.cleanNow = function() {\n  var elements = [];\n  var body = document.body;\n  var html = body.parentNode;\n  iterate(XElement.elements, function(item) {\n    if ((item.dom && item.dom.offsetParent) || item === body || item === html) {\n      elements.push(item);\n    } else {\n      item.destroy();\n    }\n  });\n  XElement.elements = elements;\n};\n\nXElement.clean = function() {\n  schedule(XElement.cleanNow);\n};\n\n/**\n * Returns an element by the id or from the native DOM element.\n * @param {String, Dom} source\n * @return {XElement} element\n */\nfunction $E(source) {\n  if (isString(source)) {\n    source = document.getElementById(source);\n  }\n  if (!exists(source)) {\n    return source;\n  }\n  var element = source.$element;\n  if (exists(element)) {\n    return element;\n  }\n  return new Html(source);\n}\n"},function(n,e,t){t(205)(t(1794))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'Html',\n  ['XElement', 'WatchAccessor', 'CanGet'],\n  {\n    isField: function() {\n      return exists(Html.isCheckField(this.dom));\n    },\n\n    isCheckField: function() {\n      return Html.isCheckField(this.dom);\n    },\n\n    // XElement\n    getters: merge(XElement.prototype.getters),\n    setters: merge(XElement.prototype.setters),\n\n    styleGetters: merge(XElement.prototype.styleGetters),\n    styleSetters: merge(XElement.prototype.styleSetters),\n\n    /**\n     * @see XElement.getStyle\n     */\n    getStyleBase: XElement.prototype.getStyle,\n    getStyle: function(key) {\n      var value = this.getStyleBase(key);\n      return value == 'auto' ? null : value;\n    },\n\n    // WatchAccessor\n    get: function() {\n      var checkField = Html.isCheckField(this.dom);\n      if (!exists(checkField)) {\n        return Dom.Content.get(this.dom);\n      } else if (checkField) {\n        return this.dom.checked;\n      } else {\n        return this.dom.value;\n      }\n    },\n    /**\n     * Sets value\n     * @param {Object} value\n     * @param {Object} ... content\n     */\n    set: function(value) {\n      var checkField = Html.isCheckField(this.dom);\n      if (!exists(checkField)) {\n        return Dom.Content.set(this.dom, $A(arguments));\n      } else if (checkField) {\n        var checked = this.dom.checked;\n        if (checked == !value) {\n          this.dom.checked = !checked;\n          if (exists(this.observers)) {\n            this.observers(!checked);\n          }\n        }\n      } else {\n        this.dom.value = str(value);\n      }\n    },\n    observe: function(observer) {\n      var checkField = Html.isCheckField(this.dom);\n      if (!exists(checkField)) {\n        return;\n      } else {\n        var self = this;\n        var notify = function(evt) {\n          observer(self.get());\n        };\n        if (!exists(this.observers)) {\n          this.observers = commands();\n          var notify = function(evt) {\n            self.observers(self.get());\n          };\n          if (checkField) {\n            this.observeClick(notify);\n          } else {\n            this.observeChange(notify);\n          }\n        }\n        return this.observers.attach(observer);\n      }\n    },\n    invokeObserver: function(observer) {\n      return observer(this.get());\n    },\n\n    // CanGet\n    canGet: function() {\n      return this.isField();\n    },\n  },\n  function(source, attributes) {\n    this.XElement(source, attributes, $A(arguments, 2));\n  }\n);\n\nextend(Html, {\n  toDimensions: function(value) {\n    return isNumber(value) ? Math.round(value) + 'px' : value;\n  },\n\n  isCheckField: function(dom) {\n    switch (dom.tagName.toLowerCase()) {\n      case 'input':\n        switch (dom.type.toLowerCase()) {\n          case 'checkbox':\n          case 'radio':\n            return true;\n          default:\n            return false;\n        }\n      case 'select':\n      case 'textarea':\n        return false;\n      default:\n        return null;\n    }\n  },\n\n  /**\n   * Makes attributes from class name or object\n   * @param {String, Object} source\n   * @param {Object} [other]\n   * @return {Object} attributes\n   */\n  makeAttributes: function(source, other) {\n    var attribs;\n    if (exists(source)) {\n      attribs = isString(source)\n        ? {\n            className: source,\n          }\n        : source;\n      if (exists(other)) {\n        extend(attribs, other);\n      }\n    } else {\n      attribs = exists(other) ? other : {};\n    }\n    for (var key in attribs) {\n      if (attribs[key] === undefined) {\n        delete attribs[key];\n      }\n    }\n    return attribs;\n  },\n\n  /**\n   * Builds an H element with the level, the content, and the attributes.\n   * @param {Number} level\n   * @param {Object} content\n   * @param {String, Object} [attributes]\n   * @return {XElement} element\n   */\n  h: function(level, content, attributes) {\n    return new Html('h' + level, Html.makeAttributes(attributes), content);\n  },\n\n  /**\n   * Builds an INPUT element with the type, the attributes, and the value.\n   * @param {String} type\n   * @param {Object} [attributes]\n   * @param {String} [value]\n   * @return {XElement} element\n   */\n  input: function(type, attributes, value) {\n    return new Html(\n      'input',\n      Html.makeAttributes(attributes, {\n        type: type,\n        value: value,\n      })\n    );\n  },\n\n  /**\n   * Builds an INPUT type=text element with the attributes and the value.\n   * @param {Object} [attributes]\n   * @param {Object} [value]\n   * @return {XElement} element\n   */\n  edit: function(attributes, value) {\n    return new Html(\n      'input',\n      Html.makeAttributes(attributes, {\n        type: 'text',\n        value: value,\n      })\n    );\n  },\n\n  /**\n   * Builds an INPUT type=checkbox element with the attributes and the value.\n   * @param {Object} [attributes]\n   * @param {Boolean} [checked]\n   * @return {XElement} element\n   */\n  checkbox: function(attributes, checked) {\n    var elem = new Html(\n      'input',\n      Html.makeAttributes(attributes, {\n        type: 'checkbox',\n      })\n    );\n\n    elem.set(checked);\n    return elem;\n  },\n\n  /**\n   * Builds an INPUT type=radio element with the attributes and the value.\n   * @param {Object} [attributes]\n   * @param {Boolean} [checked]\n   * @return {XElement} element\n   */\n  radio: function(attributes, checked) {\n    return new Html(\n      'input',\n      Html.makeAttributes(attributes, {\n        type: 'radio',\n        checked: checked,\n      })\n    );\n  },\n\n  email: function(attributes) {\n    return new Html(\n      'input',\n      Html.makeAttributes(attributes, {\n        type: 'text',\n        vcard_name: 'vCard.Email',\n      })\n    );\n  },\n\n  password: function(attributes) {\n    return new Html(\n      'input',\n      Html.makeAttributes(attributes, {\n        type: 'password',\n        autocomplete: 'on',\n      })\n    );\n  },\n\n  hidden: function(attributes) {\n    return new Html('div', Html.makeAttributes(attributes)).style({\n      display: 'none',\n    });\n  },\n});\n\niterate(\n  [\n    /* links */ 'a',\n    /* boxes */ 'div',\n    'span',\n    'p',\n    /* lists */ 'ul',\n    'ol',\n    'li',\n    /* tables */ 'table',\n    'caption',\n    'thead',\n    'tfoot',\n    'tbody',\n    'tr',\n    'th',\n    'td',\n    /* styles */ 'strong',\n    'em',\n    'emp',\n    'pre',\n    'small',\n    /* headers */ 'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    /* controls */ 'form',\n    'button',\n    'label',\n    'textarea',\n    'img',\n    'select',\n    'option',\n    'optgroup',\n    /* specials */ 'object',\n    'param',\n    'embed',\n    'iframe',\n    'br',\n  ],\n  function(tag) {\n    Html[tag] = function(attributes) {\n      return new Html(tag, Html.makeAttributes(attributes), $A(arguments, 1));\n    };\n  }\n);\n\nHtml.prototype.getters.enctype = function() {\n  return this.dom.enctype;\n};\nHtml.prototype.setters.enctype = function(value) {\n  this.dom.enctype = value;\n  if ('encoding' in this.dom) {\n    // FIX IE\n    this.dom.encoding = value;\n  }\n  return this.dom;\n};\n\n// due to setAttributeNS for Dom.set()\niterate(['className', 'htmlFor'], function(name) {\n  Html.prototype.getters[name] = function() {\n    return this.dom[name];\n  };\n  Html.prototype.setters[name] = function(value) {\n    this.dom[name] = value;\n  };\n});\n\ndelayedBind(Html.prototype.styleGetters, 'opacity', function(dom) {\n  return Dom.Style.get(dom, 'opacity') === undefined\n    ? function(dom) {\n        var filter = dom.filters['opacity'];\n        return exists(filter) ? filter.opacity / 100 : 1;\n      }\n    : function(dom) {\n        var value = Dom.Style.get(dom, 'opacity');\n        return exists(value) ? parseFloat(value) : 1;\n      };\n});\ndelayedBind(Html.prototype.styleSetters, 'opacity', function() {\n  return function(value) {\n    return objectize('opacity', value == 1 || value === '' ? '' : value < 0.00001 ? 0 : value);\n  };\n});\n\ndelayedBind(Html.prototype.styleGetters, 'cssFloat', function(dom) {\n  return Dom.Style.get(dom, 'cssFloat') === undefined\n    ? function(dom) {\n        return Dom.Style.get(dom, 'styleFloat');\n      }\n    : function(dom) {\n        return Dom.Style.get(dom, 'cssFloat');\n      };\n});\ndelayedBind(Html.prototype.styleSetters, 'cssFloat', function() {\n  return function(value) {\n    return objectize('cssFloat', Html.toDimensions(value));\n  };\n});\n\niterate(\n  [\n    'left',\n    'right',\n    'top',\n    'bottom',\n    'width',\n    'height',\n    'borderWidth',\n    'padding',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n    'margin',\n    'marginTop',\n    'marginRight',\n    'marginBottom',\n    'marginLeft',\n    'border',\n    'borderTop',\n    'borderRight',\n    'borderBottom',\n    'borderLeft',\n    'lineHeight',\n  ],\n  function(key) {\n    Html.prototype.styleSetters[key] = function(value) {\n      return objectize(key, Html.toDimensions(value));\n    };\n  }\n);\n\niterate(['margin', 'padding', 'border'], function(name) {\n  iterate(['Top', 'Right', 'Bottom', 'Left'], function(dir) {\n    var key = name + dir;\n    Html.prototype.styleSetters[key] = function(value) {\n      return objectize(key, Html.toDimensions(value));\n    };\n  });\n\n  Html.prototype.styleSetters[name] = function(value) {\n    if (isObject(value)) {\n      var obj = {};\n      iterate(['Top', 'Right', 'Bottom', 'Left'], function(dir) {\n        var key = dir.toLowerCase();\n        if (key in value) {\n          obj[name + dir] = value[key];\n        }\n      });\n      return obj;\n    } else {\n      return objectize(name, Html.toDimensions(value));\n    }\n  };\n});\n\niterate(['selected', 'disabled'], function(name) {\n  Html.prototype.getters[name] = function() {\n    return exists(Dom.get(this.dom, name));\n  };\n  Html.prototype.setters[name] = function(value) {\n    return Dom.set(this.dom, name, value ? name : null);\n  };\n});\n\n/**\n * Generates a new id for HTML element.\n * @return {String}\n */\nHtml.generateId = function() {\n  return '_GID' + Html.generateId.current++;\n};\nHtml.generateId.current = 1;\n\nHtml.addScript = function(path) {\n  var script = document.createElement('script');\n  script.src = path;\n  script.type = 'text/javascript';\n  document.getElementsByTagName('head')[0].appendChild(script);\n};\n\nHtml.$ = function() {\n  return new XElement($.apply(this, arguments).get(0));\n};\n"},function(n,e,t){t(205)(t(1796))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Returns dom node\n * @param {Object} object\n * @return {Dom} dom\n */\nfunction getDom(object) {\n  if (!exists(object)) {\n    return Html.hidden().dom;\n  }\n  if (isDom(object)) {\n    return object;\n  }\n  if (object.XElement) {\n    return object.dom;\n  }\n  return document.createTextNode(str(object));\n}\n\nvar Dom = {\n  Event: {\n    /**\n     * Fires event\n     * @param {Dom} dom\n     * @param {String} eventName\n     * @return {Event} event\n     */\n    dispatch: function(dom, eventName) {\n      var event;\n      if (document.createEvent) {\n        event = document.createEvent('HTMLEvents');\n        event.initEvent(eventName, true, true);\n        dom.dispatchEvent(event);\n      } else {\n        event = document.createEventObject();\n        dom.fireEvent('on' + eventName, event);\n      }\n      return event;\n    },\n  },\n\n  List: {\n    // Enumerable\n    each: function(dom, iterator) {\n      return iterate(dom.childNodes, iterator);\n    },\n\n    // List\n    length: function(dom) {\n      return dom.childNodes.length;\n    },\n    item: function(dom, index) {\n      return dom.childNodes[index];\n    },\n    append: function(dom, item) {\n      dom.appendChild(getDom(item));\n      return dom.childNodes.length - 1;\n    },\n    insert: function(dom, item, index) {\n      if (!exists(index)) {\n        index = 0;\n      }\n      var items = dom.childNodes;\n      if (index < items.length) {\n        dom.insertBefore(getDom(item), items[index]);\n        return index;\n      }\n      while (index-- > items.length) {\n        Dom.List.append(dom, null);\n      }\n      return Dom.List.append(dom, item);\n    },\n    remove: function(dom, item) {\n      try {\n        dom.removeChild(getDom(item));\n        return Number.MAX_VALUE; // FIXME should return index\n      } catch (e) {\n        return -1;\n      }\n    },\n    removeAt: function(dom, index) {\n      var items = dom.childNodes;\n      if (index >= items.length) {\n        return null;\n      }\n      return dom.removeChild(items[index]);\n    },\n    clear: function(dom) {\n      var items = [];\n      var item;\n      while ((item = dom.firstChild)) {\n        items.push(dom.removeChild(item));\n      }\n      return items;\n    },\n  },\n\n  Content: {\n    get: function(dom) {\n      return any(dom.textContent, dom.innerText);\n    },\n    add: function(dom, value) {\n      if (!exists(value)) {\n        return 0;\n      }\n      if (!isDom(value)) {\n        if (value.XElement) {\n          value = value.dom;\n        } else {\n          if (isArray(value) || value.Enumerable) {\n            var number = 0;\n            each(value, function(item) {\n              number += Dom.Content.add(dom, item);\n            });\n            return number;\n          } else {\n            value = document.createTextNode(str(value));\n          }\n        }\n      }\n      dom.appendChild(value);\n      return 1;\n    },\n    /**\n     * Sets content\n     * @param {Dom} dom\n     * @param {Object} ... content\n     */\n    set: function(dom) {\n      var old = Dom.List.clear(dom);\n      iterate(\n        arguments,\n        function(value) {\n          if (exists(value)) {\n            Dom.Content.add(dom, value);\n          }\n        },\n        1\n      );\n      return old;\n    },\n  },\n\n  Style: {},\n};\n\ndelayedBind(Dom, 'createElementNS', function() {\n  return document.createElementNS\n    ? function(document, uri, name) {\n        return document.createElementNS(uri, name);\n      }\n    : function(document, uri, name) {\n        var namespace = name.split(':', 2)[0];\n        if (\n          !includes(document.namespaces, function(item) {\n            return item.name == namespace && item.urn == uri;\n          })\n        ) {\n          document.namespaces.add(namespace, uri);\n        }\n        return document.createElement(name);\n      };\n});\n\nDom.get = function(dom, name) {\n  return dom[name];\n};\ndelayedBind(Dom, 'set', function(dom) {\n  return dom.setAttributeNS\n    ? function(dom, name, value) {\n        if (exists(value)) {\n          dom.setAttributeNS(null, name, value);\n        } else {\n          dom.removeAttributeNS(null, name);\n        }\n        return dom;\n      }\n    : function(dom, name, value) {\n        dom[name] = value;\n        return dom;\n      };\n});\n\ndelayedBind(Dom.Style, 'get', function(document) {\n  return document.defaultView\n    ? function(dom, key) {\n        var value = dom.style[key];\n        if (!exists(value)) {\n          var css = document.defaultView.getComputedStyle(dom, null);\n          if (exists(css)) {\n            value = css[key];\n          }\n        }\n        return value;\n      }\n    : function(dom, key) {\n        return dom.style[key];\n      };\n});\nDom.Style.set = function(dom, key, value) {\n  if (exists(value)) {\n    dom.style[key] = value;\n  } else {\n    // CHECK THAT\n    dom.style[key] = '';\n  }\n  return dom;\n};\n"},function(n,e,t){t(205)(t(1798))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nextend(Html.prototype, {\n  isBody: function() {\n    return document.body === this.dom;\n  },\n\n  getOffsetParent: function() {\n    return $E(this.getAttribute('offsetParent'));\n  },\n});\n\n// based on mootools\ndelayedBind(Html.prototype, 'getAbsolutePosition', function(dom) {\n  return this.dom.getBoundingClientRect && !Browser.WebKit\n    ? function() {\n        var bound = this.dom.getBoundingClientRect();\n        var html = document.documentElement;\n        return new Point(\n          Math.round(bound.left + html.scrollLeft - html.clientLeft),\n          Math.round(bound.top + html.scrollTop - html.clientTop)\n        );\n      }\n    : function() {\n        var position = new Point();\n        var element = this;\n        while (exists(element) && !element.isBody()) {\n          position.move(\n            new Point(element.getAttribute('offsetLeft'), element.getAttribute('offsetTop'))\n          );\n          element = element.getOffsetParent();\n        }\n        return position;\n      };\n});\n"},function(n,e,t){t(205)(t(1800))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nString.prototype.format = function() {\n  var args = arguments;\n  return this.replace(/{(\\d+)}/g, function(match, number) {\n    return typeof args[number] != 'undefined' ? args[number] : '';\n  });\n};\n"},function(n,e,t){t(205)(t(1802))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Namespace for widgets;\n */\nvar Widget = {};\n\nfunction WidgetContext(value) {\n  return value === window ? new WidgetContext() : value;\n}\n\nWidgetContext.prototype = Widget;\n\nfunction WidgetBuilder(method, attributes) {\n  var builder = function(source, attribs) {\n    var args = $A(arguments);\n    if (args.length >= 2) {\n      args[1] = merge(args[1], attributes);\n    }\n    return method.apply(this, args);\n  };\n  builder.customize = function(attribs) {\n    return WidgetBuilder(method, merge(attributes, attribs));\n  };\n  extend(builder, WidgetBuilder);\n  return builder;\n}\n"},function(n,e,t){t(205)(t(1804))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nWidget.t = function(id) {\n  return id;\n};\n\n/**\n * Option template\n * @param {WatchPair, Object} item\n * @return {XElement} option\n */\nWidget.option = function(item) {\n  var option = Html.option();\n  if (item.WatchPair) {\n    $B(option, item);\n    $B(option.accessor('value'), item.key);\n    $B(option.accessor('selected'), item.selected);\n    $B(option.accessor('disabled'), item.disabled);\n  } else {\n    option.setAttribute('value', item);\n    option.set(item);\n  }\n  return option;\n};\n\n/**\n * Command template\n * @param {Function} command\n * @param {XElement} target\n * @return {String} caption\n */\nWidget.clickable = function(command, target) {\n  invoke(target.stopClickable);\n  target.stopClickable = target.observeClick(function(event) {\n    command(event);\n    return false;\n  });\n  if (target.getTag() == 'a') {\n    target.setAttribute('href', '#');\n  }\n  return command.caption;\n};\n"},function(n,e,t){t(205)(t(1806))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Widget control\n * @param {Function} panelBuilder\n * @param {Function} [itemTemplate]\n * @param {Object} [attributes]\n * @return {Function} control builder\n */\nfunction WidgetControl(panelBuilder, itemTemplate, attributes) {\n  /**\n   * Builds a control\n   * @param {Object} source\n   * @return {Element}\n   */\n  var controlBuilder = function(source) {\n    // bind.element used because it should also bind the items to select field etc.\n    return bind.element(panelBuilder(attributes), source, itemTemplate);\n  };\n\n  /**\n   * @param {Object} attribs\n   * @return {Function} control builder\n   */\n  controlBuilder.customize = function(attribs) {\n    return WidgetControl(panelBuilder, itemTemplate, merge(attributes, attribs));\n  };\n\n  extend(controlBuilder, WidgetBuilder);\n\n  return controlBuilder;\n}\n\nWidget.link = WidgetControl(Html.a, Widget.clickable);\nWidget.text = WidgetControl(Html.span);\nWidget.inline = WidgetControl(Html.span, Widget.text);\nWidget.line = WidgetControl(Html.p);\nWidget.block = WidgetControl(Html.div);\nWidget.lines = WidgetControl(Html.div, Widget.line);\n"},function(n,e,t){t(205)(t(1808))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n// Extensions to Presentation\n// Candidates for integration?\n\nextend(Html.prototype, {\n  ancestorOf: function(child) {\n    if (!child) {\n      return false;\n    } else if (this.dom == child.dom) {\n      return true;\n    } else if (child.getParent() === null) {\n      return false;\n    } else if (child.getParent() == this) {\n      return true;\n    } else if (child.getParent().dom == document.body) {\n      return false;\n    } else {\n      return this.ancestorOf(child.getParent());\n    }\n  },\n  replaceWith: function(element) {\n    this.getParent().dom.replaceChild(element.dom, this.dom);\n  },\n});\n\nextend(WatchObject.prototype, {\n  clone: function() {\n    return $O(this.getAll());\n  },\n});\n\nfunction eventTarget(event) {\n  return any(event.srcElement, event.target);\n}\n\nfunction $N(name) {\n  return translate(document.getElementsByName(name), $E);\n}\n\n// Function that always returns true\nfunction positive() {\n  return true;\n}\n\nfunction createObject(clazz, args) {\n  function Dummy() {}\n\n  Dummy.prototype = clazz.prototype;\n  var x = new Dummy();\n  x.constructor = clazz;\n  clazz.apply(x, args);\n\n  return x;\n}\n\nfunction escapeHTML(html) {\n  // from Prototype\n  return html\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n}\n\nvar SortCriteria = {\n  Default: function(e1, e2) {\n    return e1 == e2 ? 0 : e1 < e2 ? -1 : 1;\n  },\n  Integer: function(e1, e2) {\n    if (isNaN(parseInt(e1, 10)) || isNaN(parseInt(e2, 10))) {\n      return SortCriteria.Default(e1, e2);\n    } else {\n      return parseInt(e1, 10) == parseInt(e2, 10)\n        ? 0\n        : parseInt(e1, 10) < parseInt(e2, 10)\n        ? -1\n        : 1;\n    }\n  },\n};\n\nfunction partition(list, start, end, index, cmp) {\n  var pval = list.item(index);\n  list.swap(index, end);\n  var store = start;\n\n  for (var i = start; i < end; ++i) {\n    if (cmp(list.item(i), pval) < 0) {\n      list.swap(i, store);\n      store++;\n    }\n  }\n\n  list.swap(store, end);\n  return store;\n}\n\nfunction quicksort(list, start, end, cmp) {\n  if (end > start) {\n    var pnew = partition(list, start, end, start, cmp);\n    quicksort(list, start, pnew - 1, cmp);\n    quicksort(list, pnew + 1, end, cmp);\n  }\n}\n\nextend(WatchList.prototype, {\n  swap: function(source, destination) {\n    var itemS = this.item(source);\n    var itemD = this.item(destination);\n    this.replaceAt(source, itemD);\n    this.replaceAt(destination, itemS);\n  },\n\n  sort: function(compare) {\n    compare = compare || SortCriteria.Default;\n    quicksort(this, 0, this.length.get() - 1, compare);\n  },\n});\n\nHtml.unescaped = map({div: null, span: null}, function(value, elemType) {\n  return function() {\n    var res = Html[elemType].apply(this, arguments);\n    res.dom.innerHTML = res.get();\n    return res;\n  };\n});\n\ndeclareMixin = function(targetName, sourceName, mixins) {\n  type(targetName, [sourceName].concat(mixins), {}, function() {\n    this[sourceName].apply(this, arguments);\n  });\n};\n"},function(n,e,t){t(205)(t(1810))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n// Place where to put page-wide Indico-related global variables\nwindow.IndicoGlobalVars = {};\n\nvar Util = {\n  parseId: function(id) {\n    /* Returns the type and the split ids for a provided composite id */\n\n    // [1234.]s0\n    var m = id.match(/^(?:([^\\.]+)\\.)?s(\\d+)$/);\n    if (m) {\n      return concat(['Session'], m.slice(1));\n    }\n\n    // [1234.]s0.0\n    m = id.match(/^(?:([^\\.]+)\\.)s(\\d+)(?:\\.|l)(\\d+)$/);\n    if (m) {\n      return concat(['SessionSlot'], m.slice(1));\n    }\n\n    // [1234.]33\n    m = id.match(/^(?:([^\\.]+)\\.)(\\d+)$/);\n    if (m) {\n      return concat(['Contribution'], m.slice(1));\n    }\n\n    // otherwise, consider it is a conference\n    return concat(['Conference'], [id]);\n  },\n\n  //truncate titles which are too long\n  truncate: function(title, length) {\n    length = length || 25;\n    if (title.length > length) {\n      return title.substring(0, length - 3) + '...';\n    } else {\n      return title;\n    }\n  },\n\n  /* formats a datetime dictionary, Date object\n       or string date (different format) as a string,\n       considering formats (sourceFormat used for strings only) */\n  formatDateTime: function(obj, format, sourceFormat) {\n    // default value\n    format = format || '%d/%m/%Y %H:%M';\n\n    var m1 = null,\n      m2 = null;\n\n    if (obj === null) {\n      return null;\n    }\n    // handle date object\n    else if (obj.constructor == Date) {\n      m1 = [null, obj.getFullYear(), obj.getMonth() + 1, obj.getDate()];\n      m2 = [null, zeropad(obj.getHours()), obj.getMinutes(), obj.getSeconds()];\n    } else if (typeof obj == 'object') {\n      // handle datetime dictionaries\n      // data comes from the server in %Y-%m-%d %H:%M:%S\n      m1 = obj.date.match(/(\\d+)[\\-\\/](\\d+)[\\-\\/](\\d+)/);\n      m2 = obj.time.match(/(\\d+):(\\d+)(?:\\:(\\d+))?/);\n    } else if (sourceFormat) {\n      // handle strings\n\n      // parse first\n      var results = Util.__parseDateTime(obj, sourceFormat);\n\n      // map the results\n      m1 = [null, results['%Y'], results['%m'], results['%d']];\n      //If we do not want to show the hour\n      m2 = [null, any(results['%H'], ''), any(results['%M'], ''), any(results['%S'], '')];\n    } else {\n      throw 'unknown source object';\n    }\n\n    if (!m1 || !m2) {\n      return null;\n    }\n\n    return format\n      .replace('%Y', zeropad(m1[1]))\n      .replace('%m', zeropad(m1[2]))\n      .replace('%d', zeropad(m1[3]))\n      .replace('%H', zeropad(m2[1]))\n      .replace('%M', zeropad(m2[2]))\n      .replace('%S', zeropad(m2[3]));\n  },\n\n  /*\n   * Internal use only!\n   * Does basic date/time parsing\n   */\n  __parseDateTime: function(string, format) {\n    // default value\n    format = format || '%Y/%m/%d %H:%M';\n\n    if (!string) {\n      return null;\n    }\n\n    var tokenOrder = [];\n\n    // build a regular expression from the format spec\n    var reFormat = format\n      .replace(/%\\w/g, function(val) {\n        // add the tokens in order to the list\n        tokenOrder.push(val);\n        return val == '%Y' ? '(\\\\d{0,4})' : '(\\\\d{0,2})';\n      })\n      .replace(' ', '\\\\s+');\n\n    // apply the regexp\n    var m = string.match('^' + reFormat + '$');\n\n    if (!m) {\n      // if there are no matches, stop\n      return null;\n    }\n\n    // set seconds at zero (sometimes they're not specified)\n    var results = {'%Y': 0, '%m': 1, '%d': 1, '%H': 0, '%M': 0, '%S': 0};\n\n    // store the results, relative to the token order\n    for (var i = 1; i < m.length; ++i) {\n      results[tokenOrder[i - 1]] = m[i];\n    }\n\n    return results;\n  },\n\n  /* parses a string into a JavaScript Date object,\n       considering formats */\n  parseJSDateTime: function(string, format) {\n    var results = Util.__parseDateTime(string, format);\n\n    if (!results) {\n      return null;\n    }\n\n    var date = new Date(results['%Y'], results['%m'] - 1, results['%d']);\n\n    if (date.getDate() != results['%d'] || date.getMonth() + 1 != results['%m']) {\n      // stuff such as 31/11\n      return null;\n    }\n\n    setTime(date, [results['%H'], results['%M'], results['%S']]);\n\n    return date;\n  },\n\n  /* parses a string into a datetime dictionary,\n       considering formats */\n  parseDateTime: function(string, format) {\n    var results = Util.__parseDateTime(string, format);\n\n    if (!results) {\n      return null;\n    }\n\n    // build the actual dates in standard format (zeropad too)\n    return {\n      date: zeropad(results['%Y']) + '/' + zeropad(results['%m']) + '/' + zeropad(results['%d']),\n      time: zeropad(results['%H']) + ':' + zeropad(results['%M']) + ':' + zeropad(results['%S']),\n    };\n  },\n\n  dateTimeIndicoToJS: function(obj) {\n    var m1 = obj.date.match(/(\\d+)[\\-\\/](\\d+)[\\-\\/](\\d+)/);\n    var m2 = obj.time.match(/(\\d+):(\\d+)(?::(\\d+))?/);\n\n    var date = new Date(m1[1], m1[2] - 1, m1[3] || 0);\n    setTime(date, [m2[1], m2[2], m2[3]]);\n\n    return date;\n  },\n};\n\nUtil.Validation = {\n  isEmailAddress: function(address) {\n    // Adapted RFC2822 (thanks to Jan Goyvaerts)\n    return exists(\n      address\n        .toLowerCase()\n        .match(\n          /^[a-z0-9!#$%&\\'*+\\/=?\\^_`{|}~\\-]+(?:\\.[a-z0-9!#$%&\\'*+\\/=?\\^_`{|}~\\-]+)*@(?:[a-z0-9](?:[a-z0-9\\-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9\\-]*[a-z0-9])?$/\n        )\n    );\n  },\n\n  isURL: function(address) {\n    // per RFC2396, but forcing xxx: prefix and at least some text after\n    return exists(address.match(/^(([^:\\/?#]+):)((\\/\\/)?([^\\/?#]+))([^?#]*)(\\?([^#]*))?(#(.*))?$/));\n  },\n\n  isHtml: function(text) {\n    return /<.*>[\\s\\S]*<\\/.*>|<br\\s*\\/>/.exec(text);\n  },\n};\n\nvar IndicoDateTimeFormats = {\n  International: '%d/%m/%Y %H:%M',\n  ISO8601: '%Y/%m/%d %H:%M',\n  Ordinal: '%Y%m%d',\n};\n\nIndicoDateTimeFormats.Default = IndicoDateTimeFormats.International;\nIndicoDateTimeFormats.Server = IndicoDateTimeFormats.ISO8601;\n\nIndicoDateTimeFormats.DefaultHourless = IndicoDateTimeFormats.Default.split(' ')[0];\nIndicoDateTimeFormats.ServerHourless = IndicoDateTimeFormats.Server.split(' ')[0];\n"},function(n,e,t){t(205)(t(1812))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nfunction imageFunctionGenerator(url) {\n  return function(imageId, extension) {\n    return url + '/' + imageId + '.' + (extension || 'png');\n  };\n}\n\nvar indicoSource = curry(jsonRpcValue, Indico.Urls.JsonRpcService);\nvar indicoRequest = curry(jsonRpc, Indico.Urls.JsonRpcService);\nvar imageSrc = imageFunctionGenerator(Indico.Urls.ImagesBase);\n\nfunction pixels(val) {\n  return val + 'px';\n}\n\nfunction zeropad(number) {\n  return ('' + number).length == 1 ? '0' + number : number;\n}\n\n/**\n @namespace IndicoUI interface library\n*/\n\nvar IndicoUI = {\n  // The current used layer level\n  __globalLayerLevel: 0,\n\n  // To keep track of all used layer levels.\n  // A used level is set to true and level 0 is always used\n  __globalLayerLevels: [true],\n\n  /**\n   * Set the element's z-index to the top layer\n   */\n  assignLayerLevel: function(element) {\n    if (!exists(element)) return;\n    // Find the highest used layer\n    for (var i = this.__globalLayerLevel; i >= 0; i--) {\n      if (this.__globalLayerLevels[i]) {\n        this.__globalLayerLevel = i;\n        break;\n      }\n    }\n\n    var level = ++this.__globalLayerLevel;\n    this.__globalLayerLevels[level] = true;\n    element.setStyle('zIndex', this.__globalLayerLevel + 3000);\n  },\n  /**\n   * Marks a layer level as unused, call this funtion\n   * when closing an element\n   */\n  unAssignLayerLevel: function(element) {\n    if (!exists(element)) return;\n    var level = element.dom.style.zIndex;\n    if (level == '') {\n      return;\n    }\n    this.__globalLayerLevels[parseInt(level) - 3000] = false;\n  },\n};\n"},function(n,e,t){t(205)(t(1814))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n_.mixin({\n  move: function(array, fromIndex, toIndex) {\n    array.splice(toIndex, 0, array.splice(fromIndex, 1)[0]);\n    return array;\n  },\n});\n\n// from phpjs.org - MIT/GPL licensed\nfunction strcmp(str1, str2) {\n  // http://kevin.vanzonneveld.net\n  // + original by: Waldo Malqui Silva\n  // + input by: Steve Hilder\n  // + improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // + revised by: gorthaur\n  // * example 1: strcmp( 'waldo', 'owald' );\n  // * returns 1: 1\n  // * example 2: strcmp( 'owald', 'waldo' );\n  // * returns 2: -1\n  return str1 == str2 ? 0 : str1 > str2 ? 1 : -1;\n}\n\n// from phpjs.org - MIT/GPL licensed\nfunction strnatcmp(f_string1, f_string2, f_version) {\n  // http://kevin.vanzonneveld.net\n  // +   original by: Martijn Wieringa\n  // + namespaced by: Michael White (http://getsprink.com)\n  // +    tweaked by: Jack\n  // +   bugfixed by: Onno Marsman\n  // -    depends on: strcmp\n  // %          note: Added f_version argument against code guidelines, because it's so neat\n  // *     example 1: strnatcmp('Price 12.9', 'Price 12.15');\n  // *     returns 1: 1\n  // *     example 2: strnatcmp('Price 12.09', 'Price 12.15');\n  // *     returns 2: -1\n  // *     example 3: strnatcmp('Price 12.90', 'Price 12.15');\n  // *     returns 3: 1\n  // *     example 4: strnatcmp('Version 12.9', 'Version 12.15', true);\n  // *     returns 4: -6\n  // *     example 5: strnatcmp('Version 12.15', 'Version 12.9', true);\n  // *     returns 5: 6\n  var i = 0;\n\n  if (f_version == undefined) {\n    f_version = false;\n  }\n\n  var __strnatcmp_split = function(f_string) {\n    var result = [];\n    var buffer = '';\n    var chr = '';\n    var i = 0,\n      f_stringl = 0;\n\n    var text = true;\n\n    f_stringl = f_string.length;\n    for (i = 0; i < f_stringl; i++) {\n      chr = f_string.substring(i, i + 1);\n      if (chr.match(/\\d/)) {\n        if (text) {\n          if (buffer.length > 0) {\n            result[result.length] = buffer;\n            buffer = '';\n          }\n\n          text = false;\n        }\n        buffer += chr;\n      } else if (\n        text == false &&\n        chr == '.' &&\n        i < f_string.length - 1 &&\n        f_string.substring(i + 1, i + 2).match(/\\d/)\n      ) {\n        result[result.length] = buffer;\n        buffer = '';\n      } else {\n        if (text == false) {\n          if (buffer.length > 0) {\n            result[result.length] = parseInt(buffer, 10);\n            buffer = '';\n          }\n          text = true;\n        }\n        buffer += chr;\n      }\n    }\n\n    if (buffer.length > 0) {\n      if (text) {\n        result[result.length] = buffer;\n      } else {\n        result[result.length] = parseInt(buffer, 10);\n      }\n    }\n\n    return result;\n  };\n\n  var array1 = __strnatcmp_split(f_string1 + '');\n  var array2 = __strnatcmp_split(f_string2 + '');\n\n  var len = array1.length;\n  var text = true;\n\n  var result = -1;\n  var r = 0;\n\n  if (len > array2.length) {\n    len = array2.length;\n    result = 1;\n  }\n\n  for (i = 0; i < len; i++) {\n    if (isNaN(array1[i])) {\n      if (isNaN(array2[i])) {\n        text = true;\n\n        if ((r = this.strcmp(array1[i], array2[i])) != 0) {\n          return r;\n        }\n      } else if (text) {\n        return 1;\n      } else {\n        return -1;\n      }\n    } else if (isNaN(array2[i])) {\n      if (text) {\n        return -1;\n      } else {\n        return 1;\n      }\n    } else {\n      if (text || f_version) {\n        if ((r = array1[i] - array2[i]) != 0) {\n          return r;\n        }\n      } else {\n        if ((r = this.strcmp(array1[i].toString(), array2[i].toString())) != 0) {\n          return r;\n        }\n      }\n\n      text = false;\n    }\n  }\n\n  return result;\n}\n"},function(n,e,t){t(205)(t(1816))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nIndicoUI.Effect = {\n  followScroll: function() {\n    $.each($('.follow-scroll'), function() {\n      if (!$(this).data('original-offset')) {\n        $(this).data('original-offset', $(this).offset());\n      }\n\n      var eloffset = $(this).data('original-offset');\n      var windowpos = $(window).scrollTop();\n      if (windowpos > eloffset.top) {\n        if (!$(this).hasClass('sticky-scrolling')) {\n          $(this).data({\n            'original-left': $(this).css('left'),\n            'original-width': $(this).css('width'),\n          });\n          $(this).css('width', $(this).width());\n          $(this).css('left', eloffset.left);\n          $(this).addClass('sticky-scrolling');\n        }\n      } else {\n        if ($(this).hasClass('sticky-scrolling')) {\n          $(this).css('left', $(this).data('original-left'));\n          $(this).css('width', $(this).data('original-width'));\n          $(this).removeClass('sticky-scrolling');\n        }\n      }\n    });\n  },\n};\n"},function(n,e,t){t(205)(t(1818))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nfunction mouseOverSwitch(observable, overAction, outAction) {\n  observable.observeEvent('mouseover', function(event) {\n    overAction(event);\n  });\n\n  observable.observeEvent('mouseout', function(event) {\n    outAction(event);\n  });\n}\n\nfunction highlightWithMouse(observable, target) {\n  /*\n   * observable - trigger element (mouse over, out)\n   * target - target element (will look brighter)\n   */\n\n  if (target.__highlightSet) {\n    return observable;\n  }\n\n  mouseOverSwitch(\n    observable,\n    function() {\n      target.__tmpColor = target.dom.style.backgroundColor;\n      if (target.__tmpColor === '') {\n        return;\n      }\n\n      var bgColor = target.dom.style.backgroundColor;\n      var s = bgColor.match(/rgb\\((\\d+), (\\d+), (\\d+)\\)/);\n      if (!s) {\n        s = bgColor.match(/#(..)(..)(..)/);\n        if (!s) {\n          return;\n        }\n        s[1] = parseInt('0x' + s[1], 16);\n        s[2] = parseInt('0x' + s[2], 16);\n        s[3] = parseInt('0x' + s[3], 16);\n      }\n\n      s[1] = Math.floor(s[1] * 1.05);\n      s[2] = Math.floor(s[2] * 1.05);\n      s[3] = Math.floor(s[3] * 1.05);\n      target.setStyle('backgroundColor', 'rgb(' + s[1] + ',' + s[2] + ',' + s[3] + ')');\n    },\n    function() {\n      target.setStyle('backgroundColor', target.__tmpColor);\n    }\n  );\n\n  target.__highlightSet = true;\n\n  return observable;\n}\n\ntype('Printable', [], {\n  print: function(element, title) {\n    var body = $E(document.body);\n    var bodyCSSClasses = body.dom.className;\n    var elementCSSClasses = element.dom.className;\n\n    // Make sure element is visible when printing\n    element.dom.className = elementCSSClasses + ' print';\n\n    // Make sure body is invisible\n    body.dom.className = bodyCSSClasses += ' noprint';\n\n    window.print();\n\n    // Restore\n    //body.dom.className = bodyCSSClasses;\n    //element.dom.className = elementCSSClasses\n  },\n});\n"},function(n,e,t){t(205)(t(1820))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nvar addedWebkitJqueryFixDiv = false;\n\ntype('IWidget', [], {\n  draw: function(content) {\n    return content;\n  },\n\n  postDraw: function() {},\n\n  _drawHeader: function() {\n    return '';\n  },\n\n  disable: function() {},\n\n  enable: function() {},\n\n  show: function() {},\n\n  hide: function() {},\n});\n\n/**\n * Base class for widgets that store internally a list and want to represent each item with a template;\n * the list will be a <ul> and the items a <li> each, bound to the item data.\n *\n * The <ul> will have a random DOM id and each <li> will also have a DOM id: the <ul>'s id + _ + item_key.\n *\n * Inherits from WatchObject: each item will have a key and a value (the item data).\n * When adding a new item, it will always appear last in the DOM.\n * To add / remove items use the corresponding WatchObject methods: \"set(key, item)\" to add, or \"set(key, null)\" to remove.\n *\n * This class also has a \"setMessage\" method, which will delete all the items in the <ul> and display the message inside.\n *\n * Inheriting classes will have to implement the _drawItem method.\n *\n * @param {String} listCssClass CSS class for the <ul> element.\n * @param {function} mouseoverObserver A function that will be called when the user hovers the mouse over one of the <li>.\n *                                     It will be called with 4 arguments:\n *                                     1. true / false. true for mouseover, false for mouseout.\n *                                     2. a \"pair\" object representing the item corresponding to the <li>.\n *                                     pair.key will be the item's key and pair.get() the item's data.\n *                                     3. the <li> XElement that received the event\n *                                     4. the event object\n *\n */\ntype(\n  'EnumWidget',\n  ['WatchObject', 'IWidget'],\n  {\n    /**\n     * The DOM id of the <ul> element, chosen randomly at construction.\n     */\n    getId: function() {\n      return this.id;\n    },\n\n    /**\n     * We cannot call this function \"clear\" because\n     * WatchObject's \"clear\" is defined in the WatchObject constructor\n     * and would squash our function.\n     */\n    clearList: function() {\n      var self = this;\n      self.message = null;\n      self.clear(); // this gets rid of the <li> representing (key,values)\n      self.domList.clear(); //this gets rid of eventual messages\n    },\n\n    /*\n     * Overloaded\n     */\n    _getHeader: function() {\n      return null;\n    },\n\n    /**\n     * Sets a message inside the list.\n     * This will delete all the internal data.\n     */\n    setMessage: function(message) {\n      this.clearList();\n      this.message = message;\n      this.domList.append(Html.li('listMessage', message));\n    },\n\n    draw: function() {\n      var self = this;\n      var returnedDom = $B(self.domList, self, function(pair) {\n        var listItem = self._iteratingElement(\n          {id: self.id + '_' + pair.key, pair: pair},\n          self._drawItem(pair)\n        );\n        if (exists(self.mouseoverObserver)) {\n          listItem.observeEvent('mouseover', function(event) {\n            self.mouseoverObserver(true, pair, listItem, event);\n          });\n          listItem.observeEvent('mouseout', function(event) {\n            self.mouseoverObserver(false, pair, listItem, event);\n          });\n        }\n\n        self._postDraw(pair);\n        return listItem;\n      });\n\n      // Optional header\n      var header = self._getHeader();\n      if (header) {\n        self.domList.insert(header);\n      }\n\n      if (exists(this.message)) {\n        this.domList.append(self._iteratingElement('listMessage', this.message));\n      }\n      return this.IWidget.prototype.draw.call(this, returnedDom);\n    },\n\n    _postDraw: function(pair) {\n      return '';\n    },\n\n    _drawItem: function(pair) {\n      // Function to be overloaded by inheriting classes\n      // pair is a key, value pair that can be retrieved with pair.key, pair.get()\n      return '';\n    },\n  },\n\n  /**\n   * Constructor\n   */\n  function(listCssClass, mouseoverObserver) {\n    this.WatchObject();\n    this.id = Html.generateId();\n    this.domList = this._containerElement({id: this.id, className: listCssClass});\n    this.listCssClass = listCssClass;\n    this.mouseoverObserver = mouseoverObserver;\n  }\n);\n\ntype('ListWidgetMixin', [], {\n  _iteratingElement: function() {\n    return Html.li.apply(this, arguments);\n  },\n\n  _containerElement: function() {\n    return Html.ul.apply(this, arguments);\n  },\n});\n\ndeclareMixin('ListWidget', 'EnumWidget', ['ListWidgetMixin']);\n\n/**\n * Base class which adds selection capability to ListWidget.\n * See first the documentation of ListWidget.\n *\n * @param {function} selectedObserver Function that will be called when an item is selected / unselected.\n *                                    It will be passed the list of currently selected items, as a WatchObject\n *                                    similar to the internal WatchObject that holds all the items.\n *\n * @param {Boolean} onlyOne false by default. If true, selecting an item will deselect a previously selected item.\n *\n * @param {String} listCssClass see ListWidget doc.\n * @param {String} selectedCssClass CSS class that will be added to the <li> if they are selected.\n * @param {String} unselectedCssClass CSS class that will be added to the <li> if they are unselected.\n *\n * @param {function} mouseoverObserver see ListWidget doc.\n */\ntype(\n  'SelectableListWidget',\n  ['ListWidget'],\n  {\n    getSelectedList: function() {\n      return this.selectedList;\n    },\n\n    clearSelection: function() {\n      var self = this;\n      each(self.domList, function(listItem) {\n        if (listItem.dom.className.search(self.selectedCssClass) >= 0) {\n          listItem.dom.className = listItem.dom.className.replace(\n            self.selectedCssClass,\n            self.unselectedCssClass\n          );\n        }\n      });\n      this.selectedList.clear();\n    },\n\n    selectAll: function() {\n      var self = this;\n      each(self.domList, function(listItem) {\n        listItem.dom.className = self.selectedCssClass;\n      });\n      each(self, function(value, key) {\n        self.selectedList.set(key, value);\n      });\n      if (exists(self.selectedObserver)) {\n        self.selectedObserver(self.selectedList);\n      }\n    },\n\n    /**\n     * We cannot call this function \"clear\" because\n     * WatchObject's \"clear\" is defined in the WatchObject constructor\n     * and would squash our function.\n     */\n    clearList: function() {\n      this.clearSelection();\n      this.ListWidget.prototype.clearList.call(this);\n    },\n\n    /**\n     * Sets a message inside the list.\n     * This will delete all the internal data.\n     */\n    setMessage: function(message) {\n      this.clearSelection();\n      this.ListWidget.prototype.setMessage.call(this, message);\n    },\n\n    selectItem: function(listItem, pair) {\n      var self = this;\n      if (exists(self.selectedList.get(pair.key))) {\n        self.selectedList.set(pair.key, null);\n        listItem.dom.className = self.unselectedCssClass;\n      } else {\n        if (self.onlyOne) {\n          self.clearSelection();\n        }\n        self.selectedList.set(pair.key, pair.get());\n        listItem.dom.className = self.selectedCssClass;\n      }\n\n      if (exists(self.selectedObserver)) {\n        self.selectedObserver(self.selectedList);\n      }\n    },\n\n    getReturnedDOM: function(self) {\n      var dom = $B(\n        self.domList,\n        self,\n\n        function(pair) {\n          var listItem = Html.li({id: self.id + '_' + pair.key}, self._drawItem(pair));\n          if (pair.get().get('unselectable') === true) {\n            listItem.dom.className += ' unselectable';\n          } else {\n            listItem.observeClick(function(event) {\n              self.selectItem(listItem, pair);\n            });\n          }\n          if (exists(self.mouseoverObserver)) {\n            listItem.observeEvent('mouseover', function(event) {\n              self.mouseoverObserver(true, pair, listItem, event);\n            });\n            listItem.observeEvent('mouseout', function(event) {\n              self.mouseoverObserver(false, pair, listItem, event);\n            });\n          }\n          return listItem;\n        }\n      );\n\n      if (exists(this.message)) {\n        this.domList.append(Html.li('listMessage', this.message));\n      }\n\n      return dom;\n    },\n\n    draw: function() {\n      var self = this;\n      var returnedDom = self.getReturnedDOM(self);\n\n      return this.IWidget.prototype.draw.call(this, returnedDom);\n    },\n    _drawItem: function(pair) {\n      // Function to be overloaded by inheriting classes\n      // pair is a key, value pair that can be retrieved with pair.key, pair.get()\n      return '';\n    },\n  },\n  function(\n    selectedObserver,\n    onlyOne,\n    listCssClass,\n    selectedCssClass,\n    unselectedCssClass,\n    mouseoverObserver\n  ) {\n    this.selectedList = $O();\n    this.selectedObserver = selectedObserver;\n    this.onlyOne = any(onlyOne, false);\n    if (exists(selectedCssClass)) {\n      this.selectedCssClass = selectedCssClass;\n    } else {\n      this.selectedCssClass = 'selectedListItem';\n    }\n    if (exists(unselectedCssClass)) {\n      this.unselectedCssClass = unselectedCssClass;\n    } else {\n      this.unselectedCssClass = 'unselectedListItem';\n    }\n    this.ListWidget(listCssClass, mouseoverObserver);\n  }\n);\n\ntype(\n  'JTabWidget',\n  ['IWidget'],\n  {\n    _addTab: function(label, content, data) {\n      var id = _.uniqueId('x-tab-');\n      $(content)\n        .css('display', '')\n        .find('script')\n        .remove();\n      var container = $('<div/>', {id: id})\n        .data(data || {})\n        .html(content);\n      var navLink = $('<a>', {\n        href: '#' + id,\n        text: this._titleTemplate(label),\n      });\n      this.widget.append(container);\n      this.widget.find('.ui-tabs-nav').append($('<li>').append(navLink));\n      this.widget.tabs('refresh');\n      if (this.widget.tabs('option', 'active') === false) {\n        // focus first tab\n        this.widget.tabs('option', 'active', 0);\n      }\n    },\n    _titleTemplate: function(text) {\n      return text;\n    },\n    draw: function() {\n      var self = this;\n      // We are going to be visible right after this function, so let's update the scroll buttons when size information is available\n      _.defer(function() {\n        self._updateScrollButtons();\n        // Also call the on draw functions here\n        $.each(self._onDraw, function(i, func) {\n          func();\n        });\n        self._onDraw = [];\n      });\n      return self.widget[0];\n    },\n    enable: function() {\n      this.widget.tabs('enable');\n      for (var i = 0, num = this.widget.data('ui-tabs').anchors.length; i < num; i++) {\n        this.enableTab(i);\n      }\n      if (this.scrollable) {\n        this._updateScrollButtons();\n      }\n    },\n    disable: function() {\n      this.widget.tabs('disable');\n      for (var i = 0, num = this.widget.data('ui-tabs').anchors.length; i < num; i++) {\n        this.disableTab(i);\n      }\n      if (this.scrollable) {\n        this.scrollButtons.children().addClass('ui-state-disabled');\n      }\n    },\n    enableTab: function(index) {\n      this.widget.tabs('enable', index);\n    },\n    disableTab: function(index) {\n      this.widget.tabs('disable', index);\n    },\n    getLabel: function(index) {\n      return $('.ui-tabs-nav > li', this.widget).eq(index);\n    },\n    getTabIndex: function(label) {\n      var self = this;\n      return $('.ui-tabs-nav > li', self.widget)\n        .filter(function() {\n          return $(this).text() == self._titleTemplate(label);\n        })\n        .eq(0)\n        .index();\n    },\n    getSelectedIndex: function() {\n      return this.widget.tabs('option', 'active');\n    },\n    getSelectedTab: function() {\n      return this.getLabel(this.getSelectedIndex());\n    },\n    setSelectedTab: function(labelOrIndex) {\n      var idx = _.isNumber(labelOrIndex) ? labelOrIndex : this.getTabIndex(labelOrIndex);\n      this.widget.tabs('option', 'active', idx);\n      this.scrollToTab(idx, true);\n    },\n    getSelectedPanel: function() {\n      var index = this.widget.tabs('option', 'active');\n      return $('> div.ui-tabs-panel', this.widget).eq(index);\n    },\n    heightToTallestTab: function() {\n      var maxHeight = 0;\n      var panel = $('> div.ui-tabs-panel', this.widget);\n      panel.each(function() {\n        maxHeight = Math.max(maxHeight, $(this).height());\n      });\n      // Chrome sometimes shows scrollbars until a tab change if we don't wait a moment with applying the height\n      _.defer(function() {\n        panel.height(maxHeight);\n      });\n    },\n    makeScrollable: function() {\n      var self = this;\n      if (self.scrollable) {\n        return;\n      }\n      self.scrollable = true;\n      var nav = $('> .ui-tabs-nav', self.widget); // the ul containing the tabs\n      nav.css('padding', 0);\n      // by wrapping the div and disabling floating for tabs we ensure tabs do not wrap into another line\n      nav.wrap(\n        $('<div/>').css({\n          whiteSpace: 'nowrap',\n          overflow: 'hidden',\n        })\n      );\n      nav.find('> li').css({\n        display: 'block',\n        float: 'left',\n      });\n      // save some space for the scroll buttons\n      nav.css({\n        marginLeft: '17px',\n        marginRight: '15px',\n      });\n\n      var arrowsTopMargin = '4px';\n      var arrowsCommonCss = {\n        cursor: 'pointer',\n        zIndex: 99,\n        position: 'absolute',\n        top: '1px',\n        height: '26px',\n      };\n\n      self.scrollOffset = 0; // how many tabs did the user scroll to the right\n      // Create buttons to scroll left/right\n      self.scrollButtons = $('<div/>')\n        .disableSelection()\n        .css({\n          position: 'relative',\n          zIndex: 100,\n        });\n      $('<span/>')\n        .disableSelection()\n        .attr('title', $T('Previous tab'))\n        .css(arrowsCommonCss)\n        .css('left', 0)\n        .addClass('ui-state-active ui-corner-tl ui-corner-bl tab-scroll-button')\n        .append(\n          $('<span/>')\n            .disableSelection()\n            .addClass('ui-icon ui-icon-caret-1-w')\n            .html($T('Previous tab'))\n            .css('marginTop', arrowsTopMargin)\n        )\n        .click(function() {\n          if ($(this).hasClass('ui-state-disabled')) {\n            return;\n          }\n          self.scrollToTab(Math.max(0, self.scrollOffset - 1));\n        })\n        .appendTo(self.scrollButtons);\n      $('<span/>')\n        .disableSelection()\n        .attr('title', $T('Next tab'))\n        .css(arrowsCommonCss)\n        .css('right', 0)\n        .addClass('ui-state-active ui-corner-tr ui-corner-br tab-scroll-button')\n        .append(\n          $('<span/>')\n            .addClass('ui-icon ui-icon-caret-1-e')\n            .html($T('Next tab'))\n            .css('marginTop', arrowsTopMargin)\n        )\n        .click(function() {\n          if ($(this).hasClass('ui-state-disabled')) {\n            return;\n          }\n          self.scrollToTab(Math.min(nav.find('> li').length - 1, self.scrollOffset + 1));\n        })\n        .appendTo(self.scrollButtons);\n      self.scrollButtons.prependTo(self.widget);\n      // Scroll to the currently selected tab\n      self.scrollToTab(self.getSelectedIndex(), true);\n    },\n    _updateScrollButtons: function() {\n      if (!this.scrollable) {\n        return;\n      }\n      var nav = $('.ui-tabs-nav:first', this.widget);\n      var visibleTabs = 0;\n      var width = 0;\n      var navWidth = nav.width();\n      nav.find('> li:visible').each(function() {\n        width += $(this).outerWidth(true);\n        if (width >= navWidth) {\n          return false;\n        }\n        visibleTabs++;\n      });\n      var lastElementShown = false;\n      if (this.scrollOffset + visibleTabs == nav.find('> li').length) {\n        lastElementShown = true;\n      }\n      // no prev allowed if scrolled to the far left\n      this.scrollButtons\n        .children()\n        .eq(0)\n        .toggleClass('ui-state-disabled', this.scrollOffset == 0);\n      // no next allowed if last element is visible\n      this.scrollButtons\n        .children()\n        .eq(1)\n        .toggleClass('ui-state-disabled', lastElementShown);\n    },\n    scrollToTab: function(idx, fuzzy) {\n      var self = this;\n      if (!self.scrollable) {\n        return;\n      }\n      if (fuzzy && !$('.ui-tabs-nav:first', self.widget).width()) {\n        // If we want a fuzzy selection (show as many tabs as possible) and we do not have size information yet, delay everything\n        self._onDraw.push(function() {\n          self.scrollToTab(idx, fuzzy);\n        });\n        return;\n      } else if (fuzzy && idx > 0) {\n        // Yuck! Since tabs have different sizes (due to content and also selected/unselected) we need to test how far we need to scroll.\n        // Would be much nicer if we could calculate it but the width is not available at all for hidden elements.\n        var nav = $('.ui-tabs-nav:first', self.widget);\n\n        var origIdx = idx;\n        while (idx >= 0) {\n          self.scrollToTab(idx - 1); // try scrolling left 1 tab\n          if (\n            nav\n              .find(' > li')\n              .eq(origIdx)\n              .is(':hidden')\n          ) {\n            // if our tab is now hidden, scroll one tab forward again and stop\n            self.scrollToTab(idx);\n            return;\n          }\n          idx--;\n        }\n        // if we did not break before, something probably went wrong - let's scroll to the tab directly\n        self.scrollToTab(origIdx);\n      }\n\n      // Here we perform the actual \"scrolling\" (which is actually just hiding the \"scrolled out\" tabs)\n      self.scrollOffset = idx;\n      // show all tabs and then hide those before the visible ones\n      $('.ui-tabs-nav:first > li', self.widget)\n        .show()\n        .slice(0, self.scrollOffset)\n        .hide();\n      // hide the tabs after the visible ones (to ensure we don't get a \"half\" tab)\n      var nav = $('.ui-tabs-nav:first', self.widget);\n      var visibleTabs = 0;\n      var width = 0;\n      var updateTabsAfter = function() {\n        var navWidth = nav.width();\n        nav.find('> li:visible').each(function() {\n          width += $(this).outerWidth(true);\n          if (width >= navWidth) {\n            return false;\n          }\n          visibleTabs++;\n        });\n        $('.ui-tabs-nav:first > li', self.widget)\n          .slice(self.scrollOffset + visibleTabs)\n          .hide();\n      };\n      // We only have a width if the tab widget is already visible - otherwise don't do anything\n      if (nav.width()) {\n        updateTabsAfter();\n      } else {\n        self._onDraw.push(updateTabsAfter);\n      }\n      self._updateScrollButtons();\n    },\n    _drawExtraButtons: function() {\n      // Add any extra buttons displayed under the tabs\n      var container = $('<div class=\"tabExtraButtons\"/>');\n      $.each(this.extraButtons, function(i, btnData) {\n        var btn = $('<div class=\"buttonContainer\"/>')\n          .append(btnData.btn.dom || btnData.btn)\n          .click(function() {\n            btnData.onclick(btn);\n          });\n        container.append(btn);\n      });\n      container.children(':first').addClass('buttonContainerLeft');\n      container.children(':last').addClass('buttonContainerRight');\n      this.widget.append(container);\n    },\n    _notifyTabChange: function() {},\n  },\n  function(tabs, width, height, initialSelection, extraButtons, canvas) {\n    var self = this;\n    self.scrollable = false;\n    self._onDraw = [];\n    self.widget = $('<div><ul/></div>');\n    self.extraButtons = extraButtons || [];\n    // create canvas element\n    if (canvas) {\n      self.canvas = $(canvas.dom || canvas);\n    } else {\n      self.canvas = $('<div/>');\n    }\n    self.width = exists(width)\n      ? typeof width == 'string' && width.indexOf('%') >= 0\n        ? width\n        : pixels(width)\n      : width;\n    if (self.width) {\n      self.widget.width(self.width);\n    }\n    if (height) {\n      self.widget.css('minHeight', height);\n    }\n    if (self.extraButtons) {\n      self._drawExtraButtons();\n    }\n    self.widget.tabs({\n      beforeActivate: function(e, ui) {\n        self._notifyTabChange();\n      },\n    });\n    // add initial tabs\n    $.each(tabs, function(i, tab) {\n      var content = tab[1].dom ? tab[1].dom : tab[1];\n      self._addTab(tab[0], content);\n    });\n    if (initialSelection) {\n      self.setSelectedTab(initialSelection);\n    }\n  }\n);\n\ntype(\n  'JLookupTabWidget',\n  ['JTabWidget'],\n  {\n    _addTab: function(label, generator) {\n      var content = '<div/>';\n      this.JTabWidget.prototype._addTab.call(this, label, content, {generator: generator});\n    },\n    _generateContent: function(panel) {\n      var container = $('> div', panel);\n      var generator = $(panel).data('generator');\n      try {\n        var content = generator();\n      } catch (e) {\n        if (e == 'stopDrawing') {\n          return;\n        }\n        throw e;\n      }\n      if (content.dom) {\n        content = content.dom;\n      }\n      this.canvas.empty().append(content);\n      container.empty().append(this.canvas);\n    },\n  },\n  function(tabs, width, height, initialSelection, extraButtons, canvas) {\n    var self = this;\n    self.JTabWidget(tabs, width, height, initialSelection, extraButtons, canvas);\n    self.widget.bind('tabsactivate', function(e, ui) {\n      self._generateContent(ui.newPanel);\n    });\n    self._generateContent(self.getSelectedPanel());\n  }\n);\n\ntype(\n  'TabWidget',\n  ['IWidget'],\n  {\n    _titleTemplate: function(text) {\n      return text;\n    },\n\n    enableTab: function(index) {\n      this.tabs[index].dom.style.display = 'inline';\n    },\n\n    disableTab: function(index) {\n      this.tabs[index].dom.style.display = 'none';\n    },\n\n    enable: function() {\n      this.disableOverlay.dom.style.display = 'none';\n    },\n\n    disable: function() {\n      this.disableOverlay.dom.style.display = 'block';\n    },\n\n    _notifyTabChange: function(from, to) {\n      // to be overloaded\n    },\n\n    _drawContent: function() {\n      var self = this;\n\n      try {\n        each(this.optionDict, function(value, key) {\n          if (key == self.selected.get()) {\n            value.dom.style.display = 'block';\n          } else {\n            value.dom.style.display = 'none';\n          }\n        });\n      } catch (e) {\n        if (e == 'stopDrawing') {\n          // Otherwise stop drawing\n        }\n      }\n    },\n\n    draw: function(dataRetrievalFunc) {\n      var self = this;\n\n      this.tabList = $B(Html.ul('tabList'), this.options, function(value) {\n        var liItem = Html.li(\n          value == self.selected.get() ? 'tabSelected' : 'tabUnselected',\n          Html.span({}, self._titleTemplate(value))\n        );\n        liItem.observeClick(function() {\n          self._notifyTabChange(self.selected.get(), value);\n          self.selected.set(value);\n        });\n        liItem.observeEvent('mouseover', function() {\n          liItem.setStyle('backgroundPosition', '0 0px');\n        });\n        liItem.observeEvent('mouseout', function() {\n          liItem.setStyle('backgroundPosition', '0 -30px');\n        });\n\n        self.selected.observe(function(selValue) {\n          liItem.dom.className = value == selValue ? 'tabSelected' : 'tabUnselected';\n        });\n\n        self.tabs.push(liItem);\n\n        return liItem;\n      });\n      var arrow, bg;\n\n      arrow = Html.div({className: 'tabScrollArrow', style: {backgroundPosition: '0 -30px'}});\n      bg = Html.div({className: 'tabScrollArrowBg'}, arrow);\n      this.scrollArrows.right = [bg, arrow];\n\n      arrow = Html.div({className: 'tabScrollArrow', style: {backgroundPosition: '0 -15px'}});\n      bg = Html.div({className: 'tabScrollArrowBg'}, arrow);\n      this.scrollArrows.left = [bg, arrow];\n\n      this.scrollArrows.left[0].observeClick(function(event) {\n        self.scrollLeft();\n      });\n      this.scrollArrows.right[0].observeClick(function(event) {\n        self.scrollRight();\n      });\n\n      // Mouseover / mouseout event for changing background\n      this.scrollArrows.left[0].observeEvent('mouseover', function() {\n        if (!self.scrollArrowStates.left) {\n          return;\n        }\n        self.scrollArrows.left[0].dom.style.backgroundPosition = '0 -75px';\n      });\n      this.scrollArrows.left[0].observeEvent('mouseout', function() {\n        if (!self.scrollArrowStates.left) {\n          return;\n        }\n        self.scrollArrows.left[0].dom.style.backgroundPosition = '0 -60px';\n      });\n      this.scrollArrows.right[0].observeEvent('mouseover', function() {\n        if (!self.scrollArrowStates.right) {\n          return;\n        }\n        self.scrollArrows.right[0].dom.style.backgroundPosition = '0 -75px';\n      });\n      this.scrollArrows.right[0].observeEvent('mouseout', function() {\n        if (!self.scrollArrowStates.right) {\n          return;\n        }\n        self.scrollArrows.right[0].dom.style.backgroundPosition = '0 -60px';\n      });\n\n      var extraButtons = '';\n      // Add any extra buttons displayed under the tabs\n      if (this.extraButtons.length) {\n        extraButtons = Html.div('tabExtraButtons');\n      }\n      each(this.extraButtons, function(btn, index) {\n        var extraCSSClass = '';\n        if (index === 0) {\n          extraCSSClass = 'buttonContainerLeft';\n        } else if (index == self.extraButtons.length - 1) {\n          extraCSSClass = 'buttonContainerRight';\n        }\n        var btnContainer = Html.div('buttonContainer ' + extraCSSClass, btn.btn);\n        extraButtons.append(btnContainer);\n        btnContainer.observeClick(function() {\n          btn.onclick(btnContainer);\n        });\n      });\n\n      // this piece of code is sensitive to exceptions\n      // coming from the drawing functions (for LookupTabWidget)\n      if (dataRetrievalFunc) {\n        dataRetrievalFunc.call(this);\n      } else {\n        each(this.optionDict, function(value, key) {\n          self.canvas.append(value);\n        });\n      }\n\n      this._drawContent();\n\n      var wrapperStyle = this.width ? {width: this.width} : {};\n\n      this.container = this.IWidget.prototype.draw.call(\n        this,\n        Html.div(\n          {style: wrapperStyle},\n          Html.div(\n            {className: 'tabListContainer', style: {position: 'relative'}},\n            this.scrollArrows.left[0],\n            this.scrollArrows.right[0],\n            this.tabList,\n            Html.div(\n              'tabGradient',\n              extraButtons /*,\n                                       Html.div({className: 'tabBorderGradient', style: {cssFloat: 'left'}}),\n                                       Html.div({className: 'tabBorderGradient', style: {cssFloat: 'right'}})*/\n            )\n          ),\n          Html.div(\n            {\n              style: {\n                marginTop: pixels(10),\n                width: self.width ? self.width : 'auto',\n                minHeight: self.height ? pixels(self.height) : 'auto',\n              },\n            },\n            this.canvas\n          ),\n          this.disableOverlay\n        )\n      );\n\n      return this.container;\n    },\n\n    postDraw: function() {\n      var self = this;\n\n      // If no tabs exist just return\n      if (this.tabs.length === 0 || !this.checkTabOverflow()) {\n        return;\n      }\n\n      this.tabList.dom.style.paddingLeft = '35px';\n      this.tabList.dom.style.paddingRight = '35px';\n\n      // Iterate and hide all tabs that don't fit\n      for (var i = this.tabs.length - 1; i > 0; i--) {\n        if (self.checkTabOverflow()) {\n          this.tabs[i].dom.style.display = 'none';\n        } else {\n          self.rightTabIndex = i;\n          break;\n        }\n      }\n\n      this.scrollArrows.right[0].dom.style.left = pixels(this.container.dom.clientWidth - 17);\n\n      // Initially allow scroll right but not left\n      this.setScrollArrowState('right', true);\n      this.setScrollArrowState('left', false);\n    },\n\n    heightToTallestTab: function() {\n      var currentSelectedTab = this.getSelectedTab();\n      var maxHeight = 0;\n      for (var i = this.tabs.length - 1; i >= 0; i--) {\n        this.setSelectedTab(this.options.item(i));\n        maxHeight = Math.max(maxHeight, this.container.dom.offsetHeight);\n      }\n      this.container.setStyle('height', maxHeight);\n      this.setSelectedTab(currentSelectedTab);\n    },\n\n    checkTabOverflow: function(tab) {\n      // some magic numbers used... it would be great if a better solution\n      // was possible\n      return this.tabList.dom.offsetHeight > 30;\n    },\n\n    scrollRight: function() {\n      if (!this.scrollArrowStates.right) {\n        return;\n      }\n\n      var rightTab = this.tabs[this.rightTabIndex];\n      var nextRightTab = this.tabs[this.rightTabIndex + 1];\n\n      this.rightTabIndex++;\n\n      rightTab.dom.style.marginRight = '';\n      nextRightTab.dom.style.display = 'inline';\n\n      // Hide as many tab as needed to the left to make the new tab to the right fit\n      for (var i = this.leftTabIndex; i < this.tabs.length - 1 && this.checkTabOverflow(); i++) {\n        this.tabs[i].dom.style.display = 'none';\n        this.tabs[i].dom.style.marginLeft = '';\n        this.leftTabIndex++;\n      }\n\n      // Add as many tabs as possible to the right\n      for (i = this.rightTabIndex + 1; i < this.tabs.length; i++) {\n        this.tabs[i].dom.style.display = 'inline';\n        this.tabs[i - 1].dom.style.marginRight = '';\n        // If overflow, revert the changes\n        if (this.checkTabOverflow()) {\n          this.tabs[i].dom.style.display = 'none';\n          this.tabs[i].dom.style.marginRight = '';\n          break;\n        } else {\n          this.rightTabIndex++;\n        }\n      }\n\n      // Acvtivate/inactivate the arrows accordingly\n      this.setScrollArrowState('left', true);\n      if (this.rightTabIndex == this.tabs.length - 1) {\n        this.setScrollArrowState('right', false);\n      }\n    },\n\n    scrollLeft: function() {\n      if (!this.scrollArrowStates.left) {\n        return;\n      }\n\n      var leftTab = this.tabs[this.leftTabIndex];\n      var prevLeftTab = this.tabs[this.leftTabIndex - 1];\n\n      this.leftTabIndex--;\n\n      leftTab.dom.style.marginLeft = '';\n      prevLeftTab.dom.style.display = 'inline';\n\n      // Hide as many tab as needed to the right to make the new tab to the left fit\n      for (var i = this.rightTabIndex; i >= 0 && this.checkTabOverflow(); i--) {\n        this.tabs[i].dom.style.display = 'none';\n        this.tabs[i].dom.style.marginRight = '';\n        this.rightTabIndex--;\n      }\n\n      // Add as many tabs as possible to the left\n      for (i = this.leftTabIndex - 1; i >= 0; i--) {\n        this.tabs[i].dom.style.display = 'inline';\n        this.tabs[i + 1].dom.style.marginLeft = '';\n        // If overflow, revert the changes\n        if (this.checkTabOverflow()) {\n          this.tabs[i].dom.style.display = 'none';\n          this.tabs[i].dom.style.marginLeft = '';\n          break;\n        } else {\n          this.leftTabIndex--;\n        }\n      }\n\n      // Acvtivate/inactivate the arrows accordingly\n      this.setScrollArrowState('right', true);\n      if (this.leftTabIndex < 1) {\n        this.setScrollArrowState('left', false);\n      }\n    },\n\n    setScrollArrowState: function(direction, active) {\n      var bg = this.scrollArrows[direction][0];\n      var arrow = this.scrollArrows[direction][1];\n      this.scrollArrowStates[direction] = active;\n\n      if (active) {\n        arrow.dom.style.backgroundPosition = '0 -' + pixels(direction == 'right' ? 0 : 15);\n        arrow.dom.style.borderColor = '#999999';\n        bg.dom.style.backgroundPosition = '0 -60px';\n        bg.dom.style.cursor = 'pointer';\n      } else {\n        arrow.dom.style.backgroundPosition = '0 -' + pixels(direction == 'right' ? 30 : 45);\n        arrow.dom.style.borderColor = '#D5D5D5';\n        bg.dom.style.backgroundPosition = '0 -90px';\n        bg.dom.style.cursor = '';\n      }\n      // Make sure arrow is visible\n      bg.dom.style.display = 'block';\n    },\n\n    /**\n     * Returns the string with the title of the currently selected tab\n     */\n    getSelectedTab: function() {\n      return this.selected.get();\n    },\n\n    /**\n     * Changed the currently selected tab\n     * @param {string} newSelectedTab The name of the new tab to be selected\n     */\n    setSelectedTab: function(newSelectedTab) {\n      this.selected.set(newSelectedTab);\n    },\n\n    initializeDisableOverlay: function() {\n      this.disableOverlay = Html.div({\n        style: {\n          display: 'none',\n          background: 'white',\n          opacity: '0.7',\n          height: '50px',\n          width: '100%',\n          position: 'absolute',\n          top: '0',\n          left: '0',\n          filter: 'alpha(opacity=70)',\n        },\n      });\n    },\n  },\n\n  function(options, width, height, initialSelection, extraButtons, canvas) {\n    var self = this;\n\n    this.width = exists(width)\n      ? typeof width == 'string' && width.indexOf('%') >= 0\n        ? width\n        : pixels(width)\n      : width;\n\n    this.height = height;\n    this.tabs = [];\n    this.leftTabIndex = 0;\n    this.rightTabIndex = 0;\n    this.scrollArrows = {};\n    this.scrollArrowStates = {};\n    this.extraButtons = any(extraButtons, []);\n    this.canvas = canvas || Html.div('canvas');\n\n    if (!exists(initialSelection)) {\n      initialSelection = options[0][0];\n    }\n\n    this.options = new WatchList();\n\n    //replace with appropriate method, when ready\n\n    $L(options).each(function(pair) {\n      var value = pair[1];\n      var key = pair[0];\n\n      self.options.append(key);\n    });\n\n    this.optionDict = {};\n    each(options, function(item) {\n      self.optionDict[item[0]] = item[1];\n    });\n\n    this.selected = new WatchValue();\n\n    this.selected.set(initialSelection);\n\n    this.selected.observe(function(value) {\n      self._drawContent();\n    });\n\n    this.initializeDisableOverlay();\n  }\n);\n\ntype(\n  'LookupTabWidget',\n  ['TabWidget'],\n  {\n    _drawContent: function() {\n      var self = this;\n\n      try {\n        this.canvas.set(this.optionDict[self.selected.get()]());\n      } catch (e) {\n        if (e == 'stopDrawing') {\n          // Otherwise stop drawing\n        }\n      }\n    },\n\n    draw: function() {\n      return this.TabWidget.prototype.draw.call(this, function() {\n        this.canvas.set(Html.div({}));\n      });\n    },\n  },\n\n  function(options, width, height, initialSelection, extraButtons, canvas) {\n    this.TabWidget(options, width, height, initialSelection, extraButtons, canvas);\n  }\n);\n\nvar progressIndicator = function(small, center) {\n  var htmlTag = small ? Html.span : Html.div;\n  return htmlTag(\n    center ? {style: {textAlign: 'center'}} : {},\n    Html.img({src: imageSrc(small ? 'loading' : 'load_big', 'gif'), alt: 'Loading...'})\n  );\n};\n\ntype(\n  'PopupWidget',\n  [],\n  {\n    draw: function(content, x, y, styles, setWidth) {\n      var self = this;\n\n      this.x = x;\n      this.y = y;\n\n      /*\n       * Create canvas if not already created.\n       * Used to avoid errors for classes that don't\n       * call the constructor.\n       */\n      if (!exists(this.canvas)) {\n        this.canvas = Html.div({});\n      }\n\n      styles = any(styles, {\n        // If the canvas has been set to fixed position don't change it\n        position: 'absolute',\n        left: pixels(x),\n        top: pixels(y),\n      });\n\n      if (setWidth) {\n        var width = $('body').width() - x;\n        styles.width = pixels(width);\n      }\n\n      $(this.canvas.dom)\n        .css(styles)\n        .html(content.dom);\n\n      IndicoUI.assignLayerLevel(this.canvas);\n\n      /* This fixes an issue caused by chrome/jquery (embedded e.g. by Adblock) which\n       * prevents dialogs from showing. Inserting an empty div fixes it (probably whatever\n       * incorrect was still active now affects that diff instead of the dialog)\n       * Related bug report: http://code.google.com/p/chromium/issues/detail?id=72568\n       */\n      if (!addedWebkitJqueryFixDiv && navigator.userAgent.indexOf('WebKit') != -1) {\n        $('body').append('<div/>');\n      }\n      addedWebkitJqueryFixDiv = true; // also set to true if we do not have a webkit browser so we don't check again\n\n      return this.canvas;\n    },\n\n    /**\n     * Opens the PopupWidget\n     * @param {Integer} x The horizontal position of the top left corner.\n     * @param {Integer} y The vertical position of the top left corner.\n     */\n    open: function(x, y) {\n      var stuff = this.draw(x, y).dom;\n      $('body').append(stuff);\n      this.isopen = true;\n      this.postDraw();\n    },\n\n    isOpen: function() {\n      return this.isopen;\n    },\n\n    postDraw: function() {},\n\n    close: function(e) {\n      var self = this;\n\n      IndicoUI.unAssignLayerLevel(this.canvas);\n      $E(document.body).remove(self.canvas);\n\n      this.isopen = false;\n    },\n  },\n  function(styleData) {\n    this.canvas = Html.div({style: styleData} || {});\n  }\n);\n\ntype(\n  'HistoryListener',\n  [],\n  {\n    _addToHistory: function(hash) {\n      // Add hash to history\n      if (this.historyBroker) {\n        this.historyBroker.setUserAction(hash);\n      }\n    },\n\n    registerHistoryBroker: function(broker) {\n      this.historyBroker = broker;\n    },\n\n    notifyHistoryChange: function(hash) {\n      this._retrieveHistoryState(hash);\n    },\n  },\n  function() {}\n);\n\ntype(\n  'ErrorAware',\n  [],\n  {\n    _setElementErrorState: function(element, text) {\n      return IndicoUtil.markInvalidField(element, text);\n    },\n\n    setError: function(text) {\n      if (!text) {\n        // everything back to normal\n        if (this._stopErrorList) {\n          each(this._stopErrorList, function(elem) {\n            elem();\n          });\n\n          this._stopErrorList = [];\n        }\n      } else {\n        this._setErrorState(text);\n      }\n      return this._stopErrorList;\n    },\n  },\n  function() {}\n);\n"},function(n,e,t){t(205)(t(1822))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype('InlineWidget', ['IWidget'], {\n  _error: function(error) {\n    showErrorDialog(error);\n  },\n});\n\n/*\n * This class implements a widget that interacts directly with the\n * remote server. States are handled, through a callback interface.\n */\ntype(\n  'InlineRemoteWidget',\n  ['InlineWidget'],\n\n  {\n    _handleError: function(error) {\n      this._error(error);\n    },\n\n    _handleLoading: function(error) {\n      return Html.span({}, 'loading...');\n    },\n\n    _handleLoaded: function() {\n      // do nothing, overload\n    },\n\n    _handleSuccess: function() {\n      // do nothing, overload\n    },\n\n    _handleBackToEditMode: function() {\n      // do nothing, overload\n    },\n\n    draw: function() {\n      var self = this;\n\n      var content = this._handleContent();\n\n      // if the widget is set to load on startup,\n      // the content will be a 'loading' message\n      this.wcanvas = Html.div({}, this.loadOnStartup ? this._handleLoading() : content);\n\n      // observe state changes and call\n      // the handlers accordingly\n      this.source.state.observe(function(state) {\n        if (state == SourceState.Error) {\n          self._handleError(self.source.error.get());\n          self.wcanvas.set(content);\n          self.setMode('edit');\n          self._handleBackToEditMode();\n        } else if (state == SourceState.Loaded) {\n          self._handleLoaded(self.source.get());\n          self.wcanvas.set(content);\n          self.setMode('display');\n          self._handleSuccess();\n        } else {\n          self.wcanvas.set(self._handleLoading());\n        }\n      });\n\n      return self.wcanvas;\n    },\n  },\n  /*\n   * method - remote method\n   * attributes - attributes that are passed\n   * loadOnStartup - should the widget start loading from the\n   * server automatically?\n   */\n  function(method, attributes, loadOnStartup, callback) {\n    loadOnStartup = exists(loadOnStartup) ? loadOnStartup : true;\n    this.ready = new WatchValue();\n    this.ready.set(false);\n    this.loadOnStartup = loadOnStartup;\n    this.source = indicoSource(method, attributes, null, !loadOnStartup, callback);\n  }\n);\n\ntype(\n  'RealtimeTextBox',\n  ['IWidget', 'WatchAccessor', 'ErrorAware'],\n  {\n    _setErrorState: function(text) {\n      this._stopErrorList = this._setElementErrorState(this.input, text);\n    },\n\n    draw: function() {\n      this.enableEvent();\n      return this.IWidget.prototype.draw.call(this, this.input);\n    },\n    get: function() {\n      if (this.input.dom.disabled) {\n        return null;\n      } else {\n        return this.input.get();\n      }\n    },\n    set: function(value) {\n      return this.input.set(value);\n    },\n    observe: function(observer) {\n      this.observers.push(observer);\n    },\n    observeEvent: function(event, observer) {\n      return this.input.observeEvent(event, observer);\n    },\n    observeOtherKeys: function(observer) {\n      this.otherKeyObservers.push(observer);\n    },\n    unbind: function() {\n      bind.detach(this.input);\n    },\n    disable: function() {\n      this.input.dom.disabled = true;\n    },\n    enable: function() {\n      this.input.dom.disabled = false;\n      this.enableEvent();\n    },\n    setStyle: function(prop, value) {\n      this.input.setStyle(prop, value);\n    },\n    notifyChange: function(keyCode, event) {\n      var value = true;\n      var self = this;\n\n      each(this.observers, function(func) {\n        value = value && func(self.get(), keyCode, event);\n      });\n      return value;\n    },\n    enableEvent: function() {\n      var self = this;\n\n      this.input.observeEvent('keydown', function(event) {\n        var keyCode = event.keyCode;\n        var value = true;\n\n        if (\n          (keyCode < 32 && keyCode != 8) ||\n          (keyCode >= 33 && keyCode < 46) ||\n          (keyCode >= 112 && keyCode <= 123)\n        ) {\n          each(self.otherKeyObservers, function(func) {\n            value = value && func(self.get(), keyCode, event);\n          });\n          return value;\n        }\n        return true;\n      });\n\n      // fire onChange event each time there's a new char\n      this.input.observeEvent('keyup', function(event) {\n        var keyCode = event.keyCode;\n\n        if (\n          !(\n            (keyCode < 32 && keyCode != 8) ||\n            (keyCode >= 33 && keyCode < 46) ||\n            (keyCode >= 112 && keyCode <= 123)\n          )\n        ) {\n          var value = self.notifyChange(keyCode, event);\n          Dom.Event.dispatch(self.input.dom, 'change');\n          return value;\n        }\n        return true;\n      });\n    },\n  },\n  function(args) {\n    this.observers = [];\n    this.otherKeyObservers = [];\n    this.input = Html.input('text', args);\n  }\n);\n\ntype(\n  'RealtimeTextArea',\n  ['RealtimeTextBox'],\n  {\n    onChange: function(callback) {\n      this.input.observeEvent('change', callback);\n    },\n  },\n  function(args) {\n    this.RealtimeTextBox(clone(args));\n    this.input = Html.textarea(args);\n  }\n);\n\n/**\n * Normal text field which is triggering an action when the user actions the ENTER key.\n */\ntype(\n  'EnterObserverTextBox',\n  ['IWidget', 'WatchAccessor'],\n  {\n    draw: function() {\n      return this.IWidget.prototype.draw.call(this, this.input);\n    },\n    get: function() {\n      return this.input.get();\n    },\n    set: function(value) {\n      return this.input.set(value);\n    },\n    observe: function(observer) {\n      this.input.observe(observer);\n    },\n  },\n  function(id, args, keyPressAction) {\n    var self = this;\n    this.input = Html.input(id, args);\n    // fire event when ENTER key is pressed\n    this.input.observeEvent('keypress', function(event) {\n      if (event.keyCode == 13) {\n        Dom.Event.dispatch(self.input.dom, 'change');\n        return keyPressAction();\n      }\n      Dom.Event.dispatch(self.input.dom, 'change');\n    });\n  }\n);\n"},function(n,e,t){t(205)(t(1824))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'ChainedPopupWidget',\n  ['PopupWidget'],\n  {\n    clickTriggersClose: function(target) {\n      var result = true;\n\n      // check chain\n      each(this.chainElements, function(element) {\n        // since usually the first element of the chain is an Html.a...\n        element = element.ChainedPopupWidget ? element.canvas : element;\n        result = result && !element.ancestorOf(target);\n      });\n\n      return result && !this.canvas.ancestorOf(target);\n    },\n\n    open: function(x, y) {\n      var self = this;\n      if (this.active) {\n        // don't let the popup open twice [** Update: It's not working ! **]\n        return;\n      } else {\n        this.active = true;\n      }\n\n      this.PopupWidget.prototype.open.call(this, x, y);\n\n      var handler = function(event) {\n        if (self.clickTriggersClose($E(eventTarget(event)))) {\n          // if the click should be followed by a\n          // closing action (out of the chain)\n          self.close();\n          // call close() over the whole chain\n          each(self.chainElements, function(element) {\n            if (element.ChainedPopupWidget) {\n              element.close();\n            }\n          });\n        }\n      };\n\n      // define a handler for onclick events\n      $('html').on('click.chained_menu', handler);\n      this.handler = handler;\n    },\n\n    postDraw: function() {\n      this.PopupWidget.prototype.postDraw.call(this);\n\n      if (this.alignRight) {\n        // Hide it to avoid flickering\n        this.canvas.dom.style.visibility = 'hidden';\n\n        // Place it to the left in order to measure the width\n        // if placed to the right it might be to wide for the page\n        this.canvas.dom.style.left = 0;\n\n        // Align right side of the canvas to the x position given\n        this.canvas.dom.style.left = pixels(this.x - this.canvas.dom.offsetWidth);\n\n        this.canvas.dom.style.visibility = 'visible';\n      }\n    },\n\n    close: function() {\n      // close() cleans up the onclick handler too\n      this.active = false;\n      $('html').off('click.chained_menu', this.handler);\n      this.PopupWidget.prototype.close.call(this);\n    },\n  },\n  function(chainElements, alignRight) {\n    this.PopupWidget();\n    this.chainElements = chainElements;\n    this.active = false;\n    this.alignRight = any(alignRight, false);\n  }\n);\n\ntype(\n  'PopupMenu',\n  ['ChainedPopupWidget'],\n  {\n    _processItem: function(pair) {\n      var self = this;\n      var value = pair.get();\n      var link = Html.a('fake-link', value.display);\n      link.setAttribute('id', pair.key);\n      link.setAttribute('title', value.description);\n\n      if (typeof value.action == 'string') {\n        link.setAttribute('href', value.action);\n        if (self.linkToExternalWindow) {\n          link.setAttribute('target', '_blank');\n        }\n        if (value.ajaxDialog) {\n          $(link.dom).ajaxDialog({\n            title: value.display,\n          });\n        }\n        if (self.closeOnClick || value.closeOnClick) {\n          link.observeClick(function() {\n            self.close();\n          });\n        }\n      } else {\n        link.observeClick(\n          value.action.PopupWidget || value.action.ExclusivePopup\n            ? function(e) {\n                if (self.selected) {\n                  self.selected.dom.className = null;\n                  self.selected = null;\n                }\n\n                link.dom.className = 'selected';\n                self.selected = link;\n                var pos = listItem.getAbsolutePosition();\n\n                each(self.items, function(item, key) {\n                  if (item.PopupWidget && item.isOpen()) {\n                    item.close();\n                  }\n                });\n\n                var target = pair.get().action;\n                target.open(pos.x + (target.alignRight ? 0 : link.dom.offsetWidth), pos.y - 1);\n\n                return false;\n              }\n            : function() {\n                // assume it's a callback function\n                var ret = pair.get().action(self);\n                if ((self.closeOnClick && ret !== false) || ret === true) {\n                  self.close();\n                }\n              }\n        );\n      }\n\n      var listItem = null;\n      if (pair.key === this.currentItem) {\n        listItem = Html.li('current', link);\n      } else {\n        listItem = Html.li({}, link);\n      }\n\n      return listItem;\n    },\n    close: function() {\n      if (this.closeHandler()) {\n        this.ChainedPopupWidget.prototype.close.call(this);\n      }\n    },\n    draw: function(x, y) {\n      var self = this;\n\n      // create an Html.ul from the items that\n      // were provided through the constructor\n      var content = $B(Html.ul(self.cssClass), this.items, function(pair) {\n        return self._processItem(pair);\n      });\n\n      return this.PopupWidget.prototype.draw.call(this, content, x, y);\n    },\n  },\n  function(\n    items,\n    chainElements,\n    cssClass,\n    closeOnClick,\n    alignRight,\n    closeHandler,\n    currentItem,\n    linkToExternalWindow\n  ) {\n    this.ChainedPopupWidget(chainElements, alignRight);\n    this.items = items;\n    this.currentItem = any(currentItem, []);\n    this.selected = null;\n    this.cssClass = 'popupList ' + any(cssClass, '');\n    this.closeOnClick = any(closeOnClick, false);\n    this.closeHandler = any(closeHandler, function() {\n      return true;\n    });\n    this.linkToExternalWindow = any(linkToExternalWindow, false);\n  }\n);\n\ntype(\n  'SectionPopupMenu',\n  ['PopupMenu'],\n  {\n    draw: function(x, y) {\n      var self = this;\n\n      var sectionContent = Html.ul(self.cssClass);\n\n      each(this.items, function(item, key) {\n        var section = null;\n        if (key !== '') {\n          section = Html.li('section', Html.div('line', Html.div('name', key)));\n          section.setAttribute('title', item['description']);\n        }\n\n        // add the menu items\n        var tmp = $B(Html.ul('subPopupList'), item['content'], _.bind(self._processItem, self));\n        sectionContent.append(Html.li({}, section, tmp));\n      });\n\n      return this.PopupWidget.prototype.draw.call(this, sectionContent, x, y);\n    },\n  },\n  function(items, chainElements, cssClass, closeOnClick, alignRight, closeHandler) {\n    this.ChainedPopupWidget(chainElements, alignRight);\n    this.items = items;\n    this.selected = null;\n    this.cssClass = 'popupList sectionPopupList ' + any(cssClass, '');\n    this.closeOnClick = any(closeOnClick, false);\n    this.closeHandler = any(closeHandler, function() {\n      return true;\n    });\n  }\n);\n\ntype(\n  'CheckPopupWidget',\n  ['ChainedPopupWidget'],\n  {\n    draw: function(x, y, maxHeight, styles) {\n      var self = this;\n      var optionsId = Html.generateId();\n\n      // need to store checkboxes, for IE compatibility\n      // purposes\n      this.checkboxes = {};\n\n      var content = null;\n\n      if (this.options.isEmpty() && this.noOptionsMessage) {\n        content = Html.ul(\n          {\n            className: 'popupList',\n            style: {\n              maxHeight: pixels(maxHeight),\n              fontStyle: 'italic',\n              color: '#444444',\n              padding: pixels(5),\n            },\n          },\n          this.noOptionsMessage\n        );\n        return this.PopupWidget.prototype.draw.call(this, content, x, y, styles);\n      }\n      content = $B(\n        Html.ul({\n          className: 'popupList popupListCheckboxes',\n          style: {\n            maxHeight: pixels(maxHeight),\n            overflowY: 'auto',\n            overflowX: 'hidden',\n            padding: pixels(2),\n          },\n        }),\n        this.options,\n        function(pair) {\n          var optionCheck = Html.checkbox({});\n          optionCheck.dom.name = optionsId;\n\n          optionCheck.observeClick(function(e) {\n            // Make sure the onclick event is not captured by\n            // parent elements as this would undo the click on the\n            // checkbox.\n            if (!e) {\n              e = window.event;\n            }\n            e.cancelBubble = true;\n            if (e.stopPropagation) {\n              e.stopPropagation();\n            }\n          });\n\n          self.checkboxes[pair.key] = optionCheck;\n          $B(optionCheck, self.object.accessor(pair.key));\n\n          var color = self.colors.get(pair.key);\n          if (!color) {\n            color = 'transparent';\n          }\n          var textColor = self.textColors.get(pair.key);\n          if (!textColor) {\n            textColor = 'black';\n          }\n\n          //var span = Html.div({className: 'item', style: {cursor: 'pointer'}}, )\n          var span = Html.span('wrapper', pair.get());\n\n          var li = Html.li(\n            {style: {backgroundColor: color, color: textColor, marginBottom: '2px'}},\n            optionCheck,\n            span\n          );\n\n          li.observeClick(function() {\n            self.object.set(pair.key, !self.object.get(pair.key));\n          });\n          return li;\n        }\n      );\n\n      return this.PopupWidget.prototype.draw.call(this, content, x, y, styles);\n    },\n\n    postDraw: function() {\n      // called after all the rendering is done\n      var self = this;\n\n      each(this.checkboxes, function(check, key) {\n        if (self.object.get(key)) {\n          check.set(true);\n        }\n      });\n    },\n  },\n\n  function(options, object, colors, textColors, chainElements, noOptionsMessage) {\n    this.ChainedPopupWidget(chainElements);\n    this.options = options;\n    this.object = object;\n    this.colors = colors;\n    this.textColors = textColors;\n\n    // A message to be shown if the the dict of options is empty\n    this.noOptionsMessage = any(noOptionsMessage, null);\n  }\n);\n"},function(n,e,t){t(205)(t(1826))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nvar languages = {en_GB: 'en', fr_FR: 'fr'};\nvar userLanguage = 'en_GB';\n\ntype(\n  'RichTextEditor',\n  ['IWidget', 'Accessor'],\n  {\n    draw: function() {\n      var self = this;\n      this.div = Html.div({\n        id: 'text' + this.divId,\n        style: {height: this.height + 75, width: this.width},\n      });\n\n      setTimeout(function() {\n        initializeEditor(\n          self,\n          'text' + self.divId,\n          self.text,\n          self.callbacks,\n          self.width,\n          self.height,\n          self.simple,\n          self.simpleAllowImages\n        );\n      }, 5);\n      return this.div;\n    },\n\n    get: function() {\n      if (this.getEditor() && this.getEditor().getData) {\n        return this.getEditor().getData();\n      } else {\n        return '';\n      }\n    },\n\n    set: function(text) {\n      var self = this;\n\n      if (this.getEditor() && this.getEditor().setData) {\n        this.getEditor().setData(text);\n      } else {\n        this.text = text;\n      }\n    },\n\n    observe: function(callback) {\n      this.callbacks.append(callback);\n    },\n\n    unbind: function() {\n      this.observing = false;\n      this.callbacks.clear();\n    },\n\n    onLoad: function(callback) {\n      this.onLoadList.append(callback);\n    },\n\n    destroy: function() {\n      this.unbind();\n    },\n\n    getEditor: function() {\n      return CKEDITOR.instances['text' + this.divId];\n    },\n\n    onChange: function(callback) {\n      this.getEditor().on('change', callback);\n    },\n\n    afterPaste: function(callback) {\n      this.getEditor().on('afterPaste', callback);\n    },\n  },\n  function(width, height, simple, simpleAllowImages) {\n    this.onLoadList = new WatchList();\n    this.callbacks = new WatchList();\n    this.width = width;\n    this.height = height;\n    this.simple = simple;\n    this.simpleAllowImages = simpleAllowImages;\n\n    this.divId = Html.generateId();\n  }\n);\n\ntype(\n  'RichTextWidget',\n  ['IWidget', 'Accessor'],\n  {\n    draw: function() {\n      this.richDiv.append(this.rich.draw());\n      return Html.div(\n        {},\n        this.plain.draw(),\n        this.richDiv,\n        this.hideSwitchLink ? null : Widget.link(this.switchLink)\n      );\n    },\n\n    observe: function(callback) {\n      var self = this;\n\n      var observeFunc = function(value) {\n        self.plain.unbind();\n        self.rich.unbind();\n\n        if (value == 'rich') {\n          self.rich.observe(function() {\n            callback(self.rich);\n          });\n        } else {\n          self.plain.observe(function() {\n            callback(self.plain);\n          });\n        }\n      };\n\n      this.selected.observe(observeFunc);\n      observeFunc(this.selected.get());\n    },\n\n    get: function() {\n      return this.activeAccessor.get();\n    },\n\n    set: function(value, noDetection) {\n      this.currentText = value;\n\n      if (!any(noDetection, false)) {\n        if ((Util.Validation.isHtml(value) ? 'rich' : 'plain') != this.selected.get()) {\n          this.switchLink.get()(false);\n        }\n      }\n\n      if (value && (this.loaded || this.selected.get() == 'plain')) {\n        this.activeAccessor.set(value);\n      }\n    },\n\n    synchronizePlain: function() {\n      this.currentText = this.rich.get();\n      this.plain.set(this.currentText);\n    },\n\n    synchronizeRich: function() {\n      this.currentText = this.plain.get();\n      this.rich.set(this.currentText);\n    },\n\n    postDraw: function() {\n      this.rich.postDraw();\n    },\n\n    destroy: function() {\n      this.rich.destroy();\n    },\n\n    onChange: function(callback) {\n      this.plain.onChange(callback);\n      if (this.loaded) {\n        this.rich.onChange(callback);\n      }\n    },\n  },\n  function(width, height, initialText, mode, hideSwitchLink) {\n    var textAreaParams = {style: {}};\n    textAreaParams.style.width = pixels(width);\n    textAreaParams.style.height = pixels(height);\n\n    this.plain = new RealtimeTextArea(textAreaParams);\n    this.rich = new RichTextEditor(width, height);\n    this.richDiv = Html.div({});\n    this.currentText = any(initialText, '');\n    this.loaded = false;\n\n    this.selected = new WatchValue();\n\n    this.toPlainFunc = function(sync) {\n      self.plain.setStyle('display', 'block');\n      self.richDiv.setStyle('display', 'none');\n      self.switchLink.set('toRich');\n      self.activeAccessor = self.plain;\n      self.selected.set('plain');\n      if (sync !== false) {\n        self.synchronizePlain();\n      }\n    };\n\n    this.toRichFunc = function(sync) {\n      self.plain.setStyle('display', 'none');\n      self.richDiv.setStyle('display', 'block');\n      self.switchLink.set('toPlain');\n      self.activeAccessor = self.rich;\n      self.selected.set('rich');\n      if (sync !== false) {\n        self.synchronizeRich();\n      }\n    };\n    this.hideSwitchLink = any(hideSwitchLink, false);\n    var self = this;\n    this.switchLink = new Chooser({\n      toPlain: command(self.toPlainFunc, $T('switch to plain text')),\n      toRich: command(self.toRichFunc, $T('switch to rich text')),\n    });\n\n    if (exists(mode) && mode == 'rich') {\n      self.toRichFunc();\n    } else if (exists(mode)) {\n      self.toPlainFunc();\n    } else if (Util.Validation.isHtml(self.currentText)) {\n      self.toRichFunc();\n    } else {\n      self.toPlainFunc();\n    }\n\n    this.rich.onLoad(function() {\n      self.loaded = true;\n      self.set(self.currentText, true);\n    });\n  }\n);\n\nfunction initializeEditor(\n  wrapper,\n  editorId,\n  text,\n  callbacks,\n  width,\n  height,\n  simple,\n  simpleAllowImages\n) {\n  // \"wrapper\" is the actual Indico API object that represents an editor\n\n  try {\n    var config = {\n      customConfig: false,\n      language: userLanguage,\n      entities: false,\n      width: width,\n      height: height - 75,\n      blockedKeystrokes: [9 /* TAB */, CKEDITOR.SHIFT + 9 /* SHIFT + TAB */],\n      keystrokes: [[CKEDITOR.CTRL + 75 /* CTRL + K */, 'link']],\n      removeButtons: '',\n      disableNativeSpellChecker: false,\n      font_names: [\n        'Sans Serif/\"Liberation Sans\", sans-serif',\n        'Serif/\"Liberation Serif\", serif',\n        'Monospace/\"Liberation Mono\", monospace',\n      ].join(';'),\n      contentsCss: _.union(CKEDITOR.getUrl('contents.css'), Indico.Urls.FontSassBundle),\n      toolbarGroups: [\n        {name: 'clipboard', groups: ['clipboard', 'undo']},\n        {name: 'editing', groups: ['find', 'selection', 'spellchecker']},\n        {name: 'links'},\n        {name: 'insert'},\n        {name: 'forms'},\n        {name: 'tools'},\n        {name: 'document', groups: ['mode', 'document', 'doctools']},\n        {name: 'others'},\n        '/',\n        {name: 'basicstyles', groups: ['basicstyles', 'cleanup']},\n        {name: 'paragraph', groups: ['list', 'indent', 'blocks', 'align', 'bidi']},\n        {name: 'styles'},\n        {name: 'colors'},\n        {name: 'about'},\n      ],\n      format_tags: 'p;h1;h2;h3;pre',\n      removeDialogTabs: 'image:advanced;link:advanced',\n      // Note: *(*) => allow additional classes on any allowed element\n      extraAllowedContent: 'dl dt dd div span pre; *(*)',\n    };\n\n    if (simple) {\n      config.toolbar = [\n        {\n          name: 'clipboard',\n          items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo'],\n        },\n        {name: 'editing', items: ['Find', 'Replace']},\n        {name: 'links', items: ['Link', 'Unlink', 'Anchor']},\n        {\n          name: 'insert',\n          items: simpleAllowImages ? ['Image', 'HorizontalRule'] : ['HorizontalRule'],\n        },\n        {name: 'document', items: ['Source']},\n        {\n          name: 'basicstyles',\n          items: ['Bold', 'Italic', 'Underline', 'Strike', '-', 'RemoveFormat'],\n        },\n        {name: 'paragraph', items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent']},\n        {name: 'styles', items: ['Format']},\n        {name: 'colors', items: ['TextColor']},\n        {name: 'tables', items: ['Table']},\n        {name: 'tools', items: ['Maximize']},\n      ];\n    }\n\n    CKEDITOR.replace(editorId, config);\n    var cki = CKEDITOR.instances[editorId];\n\n    cki.setData(text);\n    cki.on('key', function(e) {\n      each(callbacks, function(func) {\n        func();\n      });\n    });\n\n    // process onLoad events for each individual instance (wrapper)\n    cki.on('instanceReady', function(e) {\n      each(wrapper.onLoadList, function(callback) {\n        callback();\n      });\n    });\n  } catch (error) {\n    setTimeout(function() {\n      initializeEditor(wrapper, editorId, text, callbacks, width, height);\n    }, 5);\n  }\n}\n"},function(n,e,t){t(205)(t(1828))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'ExclusivePopup',\n  ['Printable'],\n  {\n    open: function() {\n      this.draw();\n      this.canvas.dialog('open');\n    },\n\n    draw: function(content, customStyle, popupStyle) {\n      customStyle = customStyle || {};\n      if (!content) {\n        content = '';\n      } else if (content.dom) {\n        // support indico XElement objects\n        content = content.dom;\n      }\n\n      if (popupStyle === undefined) {\n        popupStyle = customStyle;\n      }\n      this.contentContainer = $('<div class=\"exclusivePopup\"/>')\n        .css(popupStyle)\n        .append(content);\n\n      this.showCloseButton = !!this.title;\n      this._makeCanvas();\n      this.canvas\n        .empty()\n        .css(customStyle)\n        .append(this.contentContainer);\n      this.dialogElement.css(customStyle);\n    },\n\n    close: function() {\n      if (this.isopen) {\n        this.canvas.dialog('close');\n      }\n    },\n\n    _getDialogOptions: function() {\n      return {};\n    },\n\n    _makeCanvas: function() {\n      if (!this.canvas) {\n        var opts = $.extend(\n          true,\n          {\n            closeText: null,\n            autoOpen: false,\n            draggable: true,\n            modal: true,\n            resizable: false,\n            closeOnEscape: true,\n            title: this.title,\n            minWidth: '250px',\n            minHeight: 0,\n            open: $.proxy(this._onOpen, this),\n            close: $.proxy(this._onClose, this),\n            beforeClose: $.proxy(this._onBeforeClose, this),\n          },\n          this._getDialogOptions()\n        );\n        this.canvas = $('<div/>').dialog(opts);\n      }\n      if (!this.dialogElement) {\n        this.dialogElement = this.canvas.dialog('widget');\n      }\n      this.buttons = this.dialogElement.find('.ui-dialog-buttonset button');\n    },\n\n    _onBeforeClose: function(e) {\n      // Close button clicked\n      if (\n        e.originalEvent &&\n        $(e.originalEvent.currentTarget).hasClass('ui-dialog-titlebar-close')\n      ) {\n        if (isFunction(this.closeHandler) && !this.closeHandler()) {\n          return false;\n        }\n      }\n      // Escape key\n      else if (e.originalEvent && e.originalEvent.keyCode === $.ui.keyCode.ESCAPE) {\n        e.stopPropagation(); // otherwise this triggers twice for some reason\n        if (this.closeHandler === null || !this.showCloseButton) {\n          // Ignore escape if we don't have a close button\n          // But trigger data-button-back in ajaxDialog\n          this.canvas.find('[data-button-back]').trigger('click');\n          return false;\n        }\n        if (isFunction(this.closeHandler) && !this.closeHandler()) {\n          return false;\n        }\n      }\n    },\n\n    _onOpen: function(e) {\n      this.isopen = true;\n      if (this.closeHandler === null || !this.showCloseButton) {\n        this.dialogElement.find('.ui-dialog-titlebar-close').hide();\n        if (!this.title) {\n          this.dialogElement.find('.ui-dialog-titlebar').hide();\n        }\n      }\n\n      if (this.postDraw() === true) {\n        // refresh position\n        var pos = this.canvas.dialog('option', 'position');\n        this.canvas.dialog('option', 'position', pos);\n      }\n    },\n\n    postDraw: function() {},\n\n    _onClose: function(e, ui) {\n      this.isopen = false;\n      this.canvas.dialog('destroy');\n      this.canvas.remove();\n      this.canvas = this.dialogElement = null;\n      this.buttons = [];\n    },\n  },\n  function(title, closeButtonHandler, printable, showPrintButton, noCanvas) {\n    this.title = any(title, null);\n\n    // Called when user clicks the close button, if the function\n    // returns true the dialog will be closed.\n    this.closeHandler = any(closeButtonHandler, positive);\n    // the close button will be enabled in draw() so if that method is overridden it will not be drawn\n    this.showCloseButton = false;\n\n    // The maximum allowed height, used since it doesn't look\n    // very nice it the dialog gets too big.\n    this.maxHeight = 600;\n\n    // Decides whether the popup should be printable. That is, when the user\n    // clicks print only the content of the dialog will be printed not the\n    // whole page. Should be true in general unless the dialog is containing\n    // something users normally don't want to print, i.e. the loading dialog.\n    this.printable = any(printable, true);\n\n    // Whether to show the print button or not in the title\n    // Note: the button will only be shown if the popup dialog has a title.\n    // and is printable.\n    this.showPrintButton = any(showPrintButton && title && printable, false);\n\n    this.buttons = $();\n    if (!noCanvas) {\n      this._makeCanvas();\n    }\n  }\n);\n\n/**\n * Builds an exclusive popup with a button bar\n * Constructor arguments: the same ones as ExclusivePopup\n */\ntype(\n  'ExclusivePopupWithButtons',\n  ['ExclusivePopup'],\n  {\n    _getButtons: function() {\n      return null;\n    },\n    _getDialogOptions: function() {\n      var self = this;\n      var buttons = this._getButtons();\n      var dlgButtons = [];\n      this.defaultButton = null;\n      if (buttons) {\n        $.each(buttons, function(i, button) {\n          dlgButtons.push({\n            text: button[0],\n            click: button[1],\n          });\n          if (button.length > 2 && button[2]) {\n            self.defaultButton = i;\n          }\n        });\n      }\n      return {\n        buttons: dlgButtons,\n      };\n    },\n    _onOpen: function(e) {\n      this.ExclusivePopup.prototype._onOpen.call(this, e);\n      if (this.defaultButton !== null) {\n        this.buttons[this.defaultButton].focus();\n      }\n\n      this.canvas.scrollblocker({\n        overflowType: 'auto',\n      });\n    },\n    _onClose: function(e) {\n      this.ExclusivePopup.prototype._onClose.call(this, e);\n      $('body').off('mousewheel wheel');\n    },\n  },\n  function(title, closeButtonHandler, printable, showPrintButton, noCanvas) {\n    this.ExclusivePopup(title, closeButtonHandler, printable, showPrintButton, noCanvas);\n  }\n);\n\n/**\n * Utility function to display a simple alert popup.\n * You can think of it as an \"alert\" replacement.\n * It will have a title, a close button, and an OK button.\n * @param {Html or String} title The title of the error popup.\n * @param {Element} content Anything you want to put inside.\n */\ntype(\n  'AlertPopup',\n  ['ExclusivePopupWithButtons'],\n  {\n    draw: function() {\n      var content = $('<div/>')\n        .css({\n          maxWidth: '400px',\n          padding: '10px',\n          textAlign: 'center',\n        })\n        .append(\n          $('<div/>')\n            .css('textAlign', 'left')\n            .html(this.content)\n        );\n      return this.ExclusivePopupWithButtons.prototype.draw.call(this, content);\n    },\n\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          $T('OK'),\n          function() {\n            self.close();\n            self.callback();\n          },\n        ],\n      ];\n    },\n  },\n\n  function(title, content, callback) {\n    if (content.dom) {\n      // Indico XElement object\n      content = content.dom;\n    }\n    this.content = content;\n    this.callback = callback || positive;\n    this.ExclusivePopupWithButtons(title, this.callback);\n  }\n);\n\n/**\n * Utility function to display a simple alert popup.\n * You can think of it as an \"confirm\" replacement.\n * It will have a title, a close button, an OK button and a Cancel button.\n * @param {Html or String} title The title of the error popup.\n * @param {Element} content Anything you want to put inside.\n * @param {function} handler A function that will be called with a boolean as argument:\n *                   true if the user pressers \"ok\", or false if the user presses \"cancel\"\n */\ntype(\n  'ConfirmPopup',\n  ['ExclusivePopupWithButtons'],\n  {\n    draw: function() {\n      return this.ExclusivePopup.prototype.draw.call(this, this.content, this.style);\n    },\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          $T(this.buttonTitle),\n          function() {\n            self.close();\n            self.handler(true);\n          },\n        ],\n        [\n          $T(this.cancelButtonTitle),\n          function() {\n            self.close();\n            self.handler(false);\n          },\n        ],\n      ];\n    },\n  },\n\n  function(title, content, handler, buttonTitle, cancelButtonTitle, style) {\n    var self = this;\n\n    this.buttonTitle = buttonTitle || 'OK';\n    this.cancelButtonTitle = cancelButtonTitle || 'Cancel';\n    this.style = style || {};\n    this.content = content;\n    this.handler = handler;\n    this.ExclusivePopupWithButtons(title, function() {\n      self.handler(false);\n      return true;\n    });\n  }\n);\n\n/**\n * Works exactly the same as the ConfirmPopup, but includes a parametermanager to perform checks when pressing OK\n */\ntype(\n  'ConfirmPopupWithPM',\n  ['ConfirmPopup'],\n  {\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          $T(this.buttonTitle),\n          function() {\n            if (self.parameterManager.check()) {\n              self.handler(true);\n            }\n          },\n        ],\n        [\n          $T(this.cancelButtonTitle),\n          function() {\n            self.close();\n            self.handler(false);\n          },\n        ],\n      ];\n    },\n  },\n\n  function(title, content, handler, buttonTitle, cancelButtonTitle) {\n    this.parameterManager = new IndicoUtil.parameterManager();\n    this.ConfirmPopup(title, content, handler, buttonTitle, cancelButtonTitle);\n  }\n);\n\ntype('ConfirmPopupWithReason', ['ConfirmPopupWithPM'], {}, function(\n  title,\n  content,\n  handler,\n  buttonTitle,\n  cancelButtonTitle\n) {\n  this.reason = Html.textarea({style: {width: '100%'}});\n\n  this.ConfirmPopupWithPM(\n    title,\n    Html.div(\n      {},\n      content,\n      Html.div(\n        {style: {marginTop: pixels(10)}},\n        Html.div({style: {fontWeight: 'bold'}}, $T('Reason: ')),\n        this.reason\n      )\n    ),\n    handler,\n    buttonTitle,\n    cancelButtonTitle\n  );\n  this.parameterManager.add(this.reason, 'text', false);\n});\n\n/**\n * Utility function to display a three buttons popup.\n * The difference with ConfirmButton is the existence of a third button.\n * Apart from the title and close button, the three buttons display, two of them configurables and Cancel\n * @param {Html or String} title The title of the error popup.\n * @param {Element} content Anything you want to put inside.\n * @param {function} handler A function that will be called with an Integer as argument:\n *                   1 if the user press button1, 2 for button2, 0 for \"Cancel\"\n */\ntype(\n  'SpecialRemovePopup',\n  ['ExclusivePopupWithButtons'],\n  {\n    draw: function() {\n      return this.ExclusivePopupWithButtons.prototype.draw.call(this, this.content);\n    },\n\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          $T(this.buttonTitle1),\n          function() {\n            self.close();\n            self.handler(1);\n          },\n        ],\n        [\n          $T(this.buttonTitle2),\n          function() {\n            self.close();\n            self.handler(2);\n          },\n        ],\n        [\n          $T('Cancel'),\n          function() {\n            self.close();\n            self.handler(0);\n          },\n        ],\n      ];\n    },\n  },\n\n  function(title, content, handler, buttonTitle1, buttonTitle2) {\n    var self = this;\n\n    this.buttonTitle1 = buttonTitle1;\n    this.buttonTitle2 = buttonTitle2;\n    this.content = content;\n    this.handler = handler;\n    this.ExclusivePopupWithButtons(title, function() {\n      self.handler(0);\n      return true;\n    });\n  }\n);\n\ntype(\n  'WarningPopup',\n  ['AlertPopup'],\n  {\n    _formatLine: function(line) {\n      var result = Html.div({paddingBottom: pixels(2)});\n\n      var linkStart = 0;\n      var linkMiddle;\n      var linkEnd = 0;\n\n      while (linkStart >= 0) {\n        linkStart = line.indexOf('[[', linkEnd);\n\n        if (linkStart >= 0) {\n          result.append(Html.span('', line.substring(linkEnd, linkStart)));\n\n          linkMiddle = line.indexOf(' ', linkStart);\n          linkEnd = line.indexOf(']]', linkStart);\n\n          result.append(\n            Html.a(\n              {href: line.substring(linkStart + 2, linkMiddle)},\n              line.substring(linkMiddle + 1, linkEnd)\n            )\n          );\n          linkEnd += 2;\n        } else {\n          result.append(Html.span('', line.substring(linkEnd, line.length)));\n        }\n      }\n\n      return result;\n    },\n\n    _formatContent: function(content, level) {\n      var self = this;\n\n      if (isString(content)) {\n        return Html.span('', self._formatLine(content));\n      } else if (isArray(content)) {\n        var result = Html.ul(level === 0 ? 'warningLevel0' : 'warningLevel1');\n        each(content, function(line) {\n          if (isString(line)) {\n            result.append(Html.li({}, self._formatLine(line)));\n          } else if (isArray(line)) {\n            result.append(self._formatContent(line, level + 1));\n          } else {\n            result.append(Html.li({}, line));\n          }\n        });\n        return result;\n      }\n    },\n  },\n  function(title, lines) {\n    this.AlertPopup(title, this._formatContent(lines, 0).dom);\n  }\n);\n\n/**\n * Utility function to display a popup with errors.\n * Useful for notifying the user of input mistakes or other errors.\n * @param {Html or String} title The title of the error popup.\n * @param {Array of String} errors An Array of strings with the errors to display.\n * @param {Html or String} afterMessage A message to display after the list of errors.\n */\ntype(\n  'ErrorPopup',\n  ['ExclusivePopup'],\n  {\n    draw: function() {\n      var errorList = null;\n      if (this.errors.length == 1) {\n        errorList = Html.div({className: 'errorList'}, this.errors[0]);\n      } else {\n        errorList = Html.ul('errorList');\n        each(this.errors, function(e) {\n          errorList.append(Html.li('', e));\n        });\n      }\n\n      return this.ExclusivePopup.prototype.draw.call(\n        this,\n        Widget.block([errorList, this.afterMessage]).dom\n      );\n    },\n  },\n\n  function(title, errors, afterMessage) {\n    this.afterMessage = afterMessage;\n    this.errors = errors;\n    this.ExclusivePopup(title, positive);\n  }\n);\n"},function(n,e,t){t(205)(t(1830))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'PreLoadHandler',\n  [],\n  {\n    execute: function() {\n      var self = this;\n\n      if (this.counter === 0) {\n        this.process();\n      } else {\n        $L(this.actionList).each(function(preloadItem) {\n          var hook = new WatchValue();\n          hook.set(false);\n          hook.observe(function(value) {\n            if (value) {\n              bind.detach(hook);\n              self.counter--;\n\n              if (self.counter === 0) {\n                self.process();\n              }\n            }\n          });\n\n          if (preloadItem.PreLoadAction) {\n            preloadItem.run(hook);\n          } else {\n            preloadItem.call(self, hook);\n          }\n        });\n      }\n    },\n  },\n  function(list, process) {\n    this.actionList = list;\n    this.counter = list.length;\n    this.process = process;\n  }\n);\n\ntype(\n  'ProgressDialog',\n  ['ExclusivePopup'],\n  {\n    draw: function() {\n      return this.ExclusivePopup.prototype.draw.call(\n        this,\n        $('<div class=\"loadingPopup\"/>').append($('<div class=\"text\"/>').html(this.text)),\n        {background: '#424242', border: 'none', padding: '20px', overflow: 'visible'},\n        {background: '#424242', border: 'none', padding: '1px', overflow: 'auto', display: 'inline'}\n      );\n    },\n  },\n  function(text) {\n    if (text === undefined) {\n      this.text = $T('Loading...');\n    } else {\n      this.text = text;\n    }\n    this.ExclusivePopup();\n  }\n);\n\nIndicoUI.Dialogs = {};\n"},function(n,e,t){t(205)(t(1832))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n(function() {\n  'use strict';\n\n  IndicoUI.Dialogs.Util = {\n    progress: function(text) {\n      var dialog = new ProgressDialog(text);\n      dialog.open();\n\n      return function() {\n        dialog.close();\n      };\n    },\n  };\n})();\n"},function(n,e,t){t(205)(t(1834))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nfunction userListNothing(data, func) {\n  func(true, data);\n}\n\nfunction singleUserNothing(user, func) {\n  func(true);\n}\n\nfunction create_favorite_button(user_id) {\n  var integerRegex = /^[0-9]+$/;\n  if (!integerRegex.test(user_id)) {\n    // external user\n    return $('<span>');\n  }\n  var active = !!Indico.User.favorite_users[user_id],\n    span = $('<span class=\"favorite-user icon-star\">')\n      .attr({\n        'title': active\n          ? $T('Remove from your list of favorite users')\n          : $T('Add to your list of favorite users'),\n        'data-id': user_id,\n      })\n      .on('click', function(e) {\n        e.stopPropagation();\n        $(document).trigger(\n          'favorites.' + ($(this).hasClass('active') ? 'remove-user' : 'add-user'),\n          user_id\n        );\n      });\n\n  if (active) {\n    span.addClass('active');\n  }\n\n  return span;\n}\n\n$(function() {\n  $(document)\n    .on('favorites.remove-user', function(e, user_id) {\n      $.ajax({\n        url: build_url(Indico.Urls.FavoriteUserRemove, {fav_user_id: user_id}),\n        method: 'DELETE',\n        error: handleAjaxError,\n      }).done(function() {\n        $('.favorite-user[data-id=' + user_id + ']').removeClass('active');\n        delete Indico.User.favorite_users[user_id];\n      });\n    })\n    .on('favorites.add-user', function(e, user_id) {\n      $.ajax({\n        url: Indico.Urls.FavoriteUserAdd,\n        method: 'POST',\n        dataType: 'json',\n        data: {user_id: [user_id]},\n        error: handleAjaxError,\n      }).done(function(result) {\n        $('.favorite-user[data-id=' + user_id + ']').addClass('active');\n        Indico.User.favorite_users[user_id] = result.users[0];\n      });\n    });\n});\n\n/**\n * @param {String} style The class name of the <ul> element inside this FoundPeopleList\n *                       If left to null, it will be \"user-list\"\n *\n * @param {Function} selectionObserver A function that will be called when the selection varies. The function will be called without arguments\n *                                     (it can use public methods of FoundPeopleList to get information).\n *\n * @param {Boolean} onlyOne If true, only 1 item can be selected at a time.\n */\ntype(\n  'FoundPeopleList',\n  ['SelectableListWidget'],\n  {\n    _drawItem: function(pair) {\n      var self = this;\n      var peopleData = pair.get();\n\n      if (peopleData.get('isGroup') || peopleData.get('_type') === 'group') {\n        return Html.div('info', Html.span('name', peopleData.get('name')));\n      } else {\n        var userName = Html.span(\n          'name',\n          peopleData.get('firstName'),\n          ' ',\n          peopleData.get('familyName')\n        );\n        var userEmail = Html.span(\n          {id: self.id + '_' + pair.key + '_email', className: 'email'},\n          Util.truncate(peopleData.get('email'), 40)\n        );\n        var affiliation = Html.$(\n          $('<span class=\"affiliation\">').text(peopleData.get('affiliation'))\n        );\n        var html = Html.div('info', userName, userEmail, affiliation);\n\n        var $actionButtons = $('<div>', {class: 'actions'});\n        if (\n          this.showToggleFavouriteButtons &&\n          IndicoGlobalVars.isUserAuthenticated &&\n          peopleData.get('_type') == 'Avatar'\n        ) {\n          var favouritizeButtonDiv = create_favorite_button(peopleData.get('id')).get(0);\n          $actionButtons.append(favouritizeButtonDiv);\n        }\n        if (peopleData.get('_type') == 'EventPerson') {\n          var userId = peopleData.get('user_id');\n          if (userId) {\n            $actionButtons.append(create_favorite_button(userId));\n          }\n          $('<span>', {\n            class: 'event-person',\n            title: $T('This person exists in the event'),\n          }).appendTo($actionButtons);\n        }\n\n        return [html, new Html.$($actionButtons)];\n      }\n    },\n  },\n\n  /**\n   * Constructor for FoundPeopleList\n   */\n  function(style, onlyOne, selectionObserver, showToggleFavouriteButtons, favouriteButtonObserver) {\n    if (!exists(style)) {\n      style = 'user-list';\n    }\n\n    this.onlyOne = any(onlyOne, false);\n    this.showToggleFavouriteButtons = any(showToggleFavouriteButtons, true);\n    this.favouriteButtonObserver = any(favouriteButtonObserver, null);\n\n    /*this.lastTargetListItem = null;*/\n\n    this.SelectableListWidget(selectionObserver, this.onlyOne, style, 'selected', 'unselected'); //, this.__mouseoverObserver);\n  }\n);\n\n/**\n * Base class for UserSearchPanel and GroupSearchPanel\n * @param {Boolean} onlyOne If true, only 1 item can be selected at a time.\n * @param {function} selectionObserver Function that will be called when the selected users xor groups change.\n *                                     Will be passed to the inner FoundPeopleList.\n */\ntype(\n  'SimpleSearchPanel',\n  ['IWidget'],\n  {\n    /**\n     * Simulates a click in the search button\n     */\n    _searchAction: function() {\n      Dom.Event.dispatch(this.searchButton.dom, 'click');\n    },\n\n    /**\n     * Form to fill in group search data\n     */\n    _createSearchForm: function() {\n      // To be overloaded by implementing classes\n    },\n\n    /**\n     * Function to be executed when the search button is pressed\n     */\n    _search: function() {\n      // To be overloaded by implementing classes\n    },\n\n    /**\n     * Returns the part of the form corresponding to search including external authenticators\n     * Should be called by the implementing classes' _createSearchForm method.\n     */\n    _createAuthenticatorSearch: function() {\n      var self = this;\n      if (empty(Indico.Settings.ExtAuthenticators) || !this.allowExternal) {\n        return null;\n      } else {\n        var searchExternalCB = Html.checkbox({});\n        $B(searchExternalCB, self.criteria.accessor('search-ext'));\n        return [[$T('Users with no Indico account'), searchExternalCB]];\n      }\n    },\n\n    /**\n     * Returns the list of selected users xor groups for this panel\n     */\n    getSelectedList: function() {\n      return this.foundPeopleList.getSelectedList();\n    },\n\n    /**\n     * Clears the selection\n     */\n    clearSelection: function() {\n      this.foundPeopleList.clearSelection();\n    },\n\n    /**\n     * Returns the Panel's DOM\n     */\n    draw: function() {\n      var self = this;\n\n      this.searchForm = this._createSearchForm();\n\n      this.searchButton = Html.input('button', {}, $T('Search'));\n      this.searchButtonDiv = Html.div('searchUsersButtonDiv', this.searchButton);\n      this.searchButton.observeClick(function() {\n        self._search();\n      });\n\n      this.foundPeopleListDiv = Html.div('user-search-results', this.foundPeopleList.draw());\n\n      this.container = Html.div(\n        {},\n        this.searchForm.get(),\n        this.searchButtonDiv,\n        this.foundPeopleListDiv,\n        this.extraDiv\n      );\n\n      if (this.submissionRights) {\n        var checkbox = Html.checkbox({}, true);\n        $B(this.grantRights.accessor('submission'), checkbox);\n        var submissionDiv = Html.div(\n          {style: {marginTop: pixels(5), marginLeft: pixels(-4)}},\n          checkbox,\n          $T('Grant all selected users submission rights')\n        );\n        this.container.append(submissionDiv);\n      }\n\n      return this.IWidget.prototype.draw.call(this, this.container);\n    },\n  },\n\n  /**\n   * Constructor for SimpleSearchPanel\n   */\n  function(\n    onlyOne,\n    selectionObserver,\n    showToggleFavouriteButtons,\n    favouriteButtonObserver,\n    submissionRights,\n    grantRights,\n    extraDiv,\n    allowExternal\n  ) {\n    this.IWidget();\n    this.onlyOne = any(onlyOne, false);\n\n    this.criteria = new WatchObject();\n\n    this.foundPeopleList = new FoundPeopleList(\n      null,\n      this.onlyOne,\n      selectionObserver,\n      showToggleFavouriteButtons,\n      favouriteButtonObserver\n    );\n    this.foundPeopleList.setMessage($T('You can use the form above to search for users...'));\n    this.extraDiv = any(extraDiv, Html.div({}));\n\n    this.searchForm = null;\n    this.searchButton = null;\n    this.searchButtonDiv = null;\n    this.foundPeopleListDiv = null;\n    this.container = null;\n\n    this.submissionRights = submissionRights;\n    this.grantRights = grantRights;\n    this.allowExternal = allowExternal;\n  }\n);\n\n/**\n * Panel to search for users.\n * @param {Boolean} onlyOne If true, only 1 item can be selected at a time.\n * @param {function} selectionObserver Function that will be called when the selected users xor groups change.\n *                                     Will be passed to the inner FoundPeopleList.\n */\ntype(\n  'UserSearchPanel',\n  ['SimpleSearchPanel'],\n  {\n    /**\n     * Form to fill in user search data\n     */\n    _createSearchForm: function() {\n      var self = this,\n        do_search = function() {\n          self._searchAction();\n          return false;\n        };\n\n      this.fields = {\n        surName: new EnterObserverTextBox(\n          'text',\n          {style: {width: '100%'}, id: 'userSearchFocusField'},\n          do_search\n        ),\n        name: new EnterObserverTextBox('text', {style: {width: '100%'}}, do_search),\n        email: new EnterObserverTextBox('text', {style: {width: '100%'}}, do_search),\n        organisation: new EnterObserverTextBox('text', {style: {width: '100%'}}, do_search),\n        exactMatch: Html.checkbox({}),\n      };\n\n      var fieldList = [\n        [$T('Family name'), this.fields.surName.draw()],\n        [$T('First name'), this.fields.name.draw()],\n        [$T('E-mail'), this.fields.email.draw()],\n        [$T('Organisation'), this.fields.organisation.draw()],\n        [$T('Exact Match'), this.fields.exactMatch],\n      ];\n\n      var authenticatorSearch = this._createAuthenticatorSearch();\n      if (exists(authenticatorSearch)) {\n        fieldList = concat(fieldList, authenticatorSearch);\n      }\n\n      return IndicoUtil.createFormFromMap(fieldList, true);\n    },\n\n    /**\n     * Function that is called when the Search button is pressed.\n     */\n    _search: function() {\n      var self = this;\n\n      self.searchButton.dom.disabled = true;\n      this.foundPeopleList.setMessage(\n        Html.div({style: {paddingTop: '20px'}}, progressIndicator(false, true))\n      );\n\n      _.each(this.fields, function(widget, key) {\n        self.criteria.set(key, widget.get());\n      });\n\n      indicoRequest('search.users', self.criteria, function(result, error) {\n        if (!error) {\n          self.foundPeopleList.clearList();\n          if (result.length === 0) {\n            self.foundPeopleList.setMessage($T('No results for this search...'));\n          } else {\n            each(result, function(entry) {\n              if (entry._type === 'Avatar') {\n                self.foundPeopleList.set('existingAv' + entry.id, $O(entry));\n              } else if (entry._type === 'EventPerson') {\n                self.foundPeopleList.set('existingEventPerson' + entry.id, $O(entry));\n              }\n            });\n          }\n          self.searchButton.dom.disabled = false;\n        } else {\n          self.foundPeopleList.clearList();\n          showErrorDialog(error);\n        }\n      });\n    },\n    /**\n     * Returns the panel's DOM\n     */\n    draw: function() {\n      return this.SimpleSearchPanel.prototype.draw.call(this);\n    },\n  },\n\n  /**\n   * Constructor for UserSearchPanel\n   */\n  function(\n    onlyOne,\n    selectionObserver,\n    conferenceId,\n    showToggleFavouriteButtons,\n    favouriteButtonObserver,\n    submissionRights,\n    grantRights,\n    extraDiv,\n    allowExternal\n  ) {\n    this.SimpleSearchPanel(\n      onlyOne,\n      selectionObserver,\n      showToggleFavouriteButtons,\n      favouriteButtonObserver,\n      submissionRights,\n      grantRights,\n      extraDiv,\n      allowExternal\n    );\n    if (exists(conferenceId)) {\n      this.criteria.set('conferenceId', conferenceId);\n    }\n    this.fields = {};\n  }\n);\n\n/**\n * Panel to search for groups.\n * @param {Boolean} onlyOne If true, only 1 item can be selected at a time.\n * @param {function} selectionObserver Function that will be called when the selected users xor groups change.\n *                                     Will be passed to the inner FoundPeopleList.\n */\ntype(\n  'GroupSearchPanel',\n  ['SimpleSearchPanel'],\n  {\n    /**\n     * Form to fill in group search data\n     */\n    _createSearchForm: function() {\n      var self = this;\n\n      var groupName = new EnterObserverTextBox('text', {style: {width: '100%'}}, function() {\n        self._searchAction();\n        return false;\n      });\n      var exactMatch = Html.checkbox({});\n\n      $B(groupName, this.criteria.accessor('group'));\n      $B(exactMatch, this.criteria.accessor('exactMatch'));\n      this.criteria.set('exactMatch', true);\n\n      var fieldList = [[$T('Group name'), groupName.draw()], [$T('Exact Match'), exactMatch]];\n      return IndicoUtil.createFormFromMap(fieldList, true);\n    },\n\n    /**\n     * Function that is called when the Search button is pressed.\n     */\n    _search: function() {\n      var self = this;\n\n      self.searchButton.dom.disabled = true;\n      this.foundPeopleList.setMessage(\n        Html.div({style: {paddingTop: '20px'}}, progressIndicator(false, true))\n      );\n\n      indicoRequest('search.groups', self.criteria, function(result, error) {\n        if (!error) {\n          self.foundPeopleList.clearList();\n          if (result.length === 0) {\n            self.foundPeopleList.setMessage($T('No results for this search...'));\n          } else {\n            each(result, function(group) {\n              self.foundPeopleList.set(group.name, $O(group));\n            });\n          }\n          self.searchButton.dom.disabled = false;\n        } else {\n          self.foundPeopleList.clearList();\n          showErrorDialog(error);\n        }\n      });\n    },\n\n    /**\n     * Returns the panel's DOM\n     */\n    draw: function() {\n      return this.SimpleSearchPanel.prototype.draw.call(this);\n    },\n  },\n\n  /**\n   * Constructor for GroupSearchPanel\n   */\n  function(onlyOne, selectionObserver, conferenceId, showToggleFavouriteButtons) {\n    this.SimpleSearchPanel(onlyOne, selectionObserver, conferenceId, showToggleFavouriteButtons);\n  }\n);\n\n/**\n * Tabbed panel to search either for users or groups\n * @param {Boolean} onlyOne If true, only 1 item can be selected at a time.\n * @param {function} selectionObserver Function that will be called when the selected users xor groups change.\n *                                     Will be passed to the inner FoundPeopleList.\n */\ntype(\n  'UserAndGroupsSearchPanel',\n  ['IWidget'],\n  {\n    /**\n     * Function that will be called when the selection changes in either of the panel\n     * @param {String} panel 'users' or 'groups', to know which panel's selection changed\n     * @param {WatchObject} selectedList a list of selected users.\n     */\n    __selectionObserver: function(panel, selectedList) {\n      if (this.onlyOne) {\n        if (panel === 'users') {\n          this.groupPanel.clearSelection();\n        } else {\n          this.userPanel.clearSelection();\n        }\n        this.parentSelectionObserver(selectedList);\n      } else {\n        var totalSelection = $O();\n        totalSelection.update(this.userPanel.getSelectedList().getAll());\n        totalSelection.update(this.groupPanel.getSelectedList().getAll());\n        this.parentSelectionObserver(totalSelection);\n      }\n    },\n\n    /**\n     * Returns the list of selected users / groups in both panels\n     * @return {WatchObject} The list of selected users. Key = user / group id, value = user data\n     */\n    getSelectedList: function() {\n      var totalSelection = $O();\n\n      totalSelection.update(this.userPanel.getSelectedList().getAll());\n      totalSelection.update(this.groupPanel.getSelectedList().getAll());\n\n      return totalSelection;\n    },\n\n    /**\n     * Clears the selection in both panels\n     */\n    clearSelection: function() {\n      this.userPanel.clearSelection();\n      this.groupPanel.clearSelection();\n    },\n\n    /**\n     * Returns the panel's DOM\n     */\n    draw: function() {\n      this.tabWidget = new JTabWidget([\n        [$T('Users'), this.userPanel.draw()],\n        [$T('Groups'), this.groupPanel.draw()],\n      ]);\n      return this.IWidget.prototype.draw.call(this, this.tabWidget.draw());\n    },\n  },\n\n  /**\n   * Constructor for UserAndGroupsSearchPanel\n   */\n  function(\n    onlyOne,\n    selectionObserver,\n    conferenceId,\n    showToggleFavouriteButtons,\n    favouriteButtonObserver,\n    submissionRights,\n    grantRights,\n    extraDiv,\n    allowExternal\n  ) {\n    this.IWidget();\n    this.onlyOne = any(onlyOne, false);\n    this.parentSelectionObserver = selectionObserver;\n\n    var self = this;\n\n    this.userPanel = new UserSearchPanel(\n      this.onlyOne,\n      function(selectedList) {\n        self.__selectionObserver('users', selectedList);\n      },\n      conferenceId,\n      showToggleFavouriteButtons,\n      favouriteButtonObserver,\n      submissionRights,\n      grantRights,\n      extraDiv,\n      allowExternal\n    );\n    this.groupPanel = new GroupSearchPanel(\n      this.onlyOne,\n      function(selectedList) {\n        self.__selectionObserver('groups', selectedList);\n      },\n      showToggleFavouriteButtons\n    );\n\n    this.tabWidget = null;\n  }\n);\n\n/**\n * Panel with a list of suggested users.\n * @param {Boolean} onlyOne If true, only 1 item can be selected at a time.\n * @param {Boolean} includeFavourites If True, favourites will appear in the list of suggested users of the ChooseUsersPopup.\n * @param {WatchObject} suggestedUsers A list of users that will be used as list of suggested users.\n *                                     This argument has to be an array or WatchList where the keys are the user ids and the values are fossils/dictionaries with the user data.\n *                                     If null, there will be no suggestedUsers panel.\n * @param {function} selectionObserver Function that will be called when the selected users xor groups change.\n *                                     Will be passed to the inner FoundPeopleList.\n */\ntype(\n  'SuggestedUsersPanel',\n  ['IWidget'],\n  {\n    getSelectedList: function() {\n      return this.suggestedUserList.getSelectedList();\n    },\n\n    clearSelection: function() {\n      this.suggestedUserList.clearSelection();\n    },\n\n    draw: function() {\n      var self = this;\n\n      this.titleDiv = Html.div('suggestedUsersTitle', Html.span({}, $T('Suggested users')));\n\n      if (this.suggestedUserList.isEmpty()) {\n        var message = Html.span(\n          {},\n          $T('There are no suggested users for you at the moment. Why not add some '),\n          Html.a({href: Indico.Urls.Favorites}, $T('favourites')),\n          '?'\n        );\n        this.suggestedUserList.setMessage(message);\n      }\n\n      this.suggestedUserListDiv = Html.div('suggested-users', this.suggestedUserList.draw());\n\n      return this.IWidget.prototype.draw.call(\n        this,\n        Widget.block([this.titleDiv, this.suggestedUserListDiv])\n      );\n    },\n  },\n\n  /**\n   * Constructor for SuggestedUsersPanel\n   */\n  function(\n    onlyOne,\n    includeFavourites,\n    suggestedUsers,\n    selectionObserver,\n    showToggleFavouriteButtons\n  ) {\n    this.IWidget();\n\n    this.onlyOne = any(onlyOne, false);\n\n    includeFavourites = any(includeFavourites, true);\n\n    this.suggestedUserList = new FoundPeopleList(\n      null,\n      this.onlyOne,\n      selectionObserver,\n      showToggleFavouriteButtons\n    );\n\n    var self = this;\n\n    if (exists(suggestedUsers)) {\n      each(suggestedUsers, function(user) {\n        if (any(user._type, null) === 'Avatar') {\n          self.suggestedUserList.set('existingAv' + user.id, $O(user));\n        } else {\n          self.suggestedUserList.set(user.id, $O(user));\n        }\n      });\n    }\n\n    if (includeFavourites) {\n      var favorites = _.values(Indico.User.favorite_users).sort(function(a, b) {\n        var name1 = '{0} {1}'.format(a.firstName, a.familyName);\n        var name2 = '{0} {1}'.format(b.firstName, b.familyName);\n        return name1 == name2 ? 0 : name1 < name2 ? -1 : 1;\n      });\n      _.each(favorites, function(user) {\n        if (!self.suggestedUserList.get('existingAv' + user.id)) {\n          self.suggestedUserList.set('existingAv' + user.id, $O(user));\n        }\n      });\n    }\n\n    this.titleDiv = null;\n    this.suggestedUserListDiv = null;\n  }\n);\n\n/**\n * Creates a popup to add users in different ways (search in DB, choose from favourites, add a new one...).\n *\n * @param {String} title The dialog title\n *\n * @param {Boolean} allowSearch If this is true, a search user panel will appear.\n * @param {Integer} conferenceId If allowSearch is true, and if this is different from null, authors from that conference will be included in the search results.\n * @param {Boolean} enableGroups If allowSearch is true, and if this is true, groups will be available for search and add.\n *\n * @param {Boolean} includeFavourites If True, favourites will appear in the list of suggested users of the ChooseUsersPopup.\n * @param {WatchObject} suggestedUsers An array or WatchList of users that will be used as list of suggested users. The users\n *                                     should be fossils / dictionaries with the user data.\n *                                     If null, there will be no suggestedUsers panel.\n *\n * @param {Boolean} onlyOne If true, only 1 user will be able to be chosen in the dialog..\n *\n * @param {Function} process A function that will be called when new users (from new data, or from the search dialog, or from the suggested list) is added to the list.\n *                           The function will be passed a list of WatchObjects representing the users, even when onlyOne is true.\n */\ntype(\n  'ChooseUsersPopup',\n  ['ExclusivePopupWithButtons', 'PreLoadHandler'],\n  {\n    _preload: [],\n\n    __buildSearchPanel: function(container) {\n      var self = this;\n      if (this.enableGroups) {\n        this.searchPanel = new UserAndGroupsSearchPanel(\n          this.onlyOne,\n          function(selectedList) {\n            self.__selectionObserver('searchUsers', selectedList);\n          },\n          this.conferenceId,\n          this.showToggleFavouriteButtons,\n          function(avatar, action) {\n            self.__searchPanelFavouriteButtonObserver(avatar, action);\n          },\n          this.submissionRights,\n          this.grantRights,\n          self.extraDiv,\n          self.allowExternal\n        );\n      } else {\n        this.searchPanel = new UserSearchPanel(\n          this.onlyOne,\n          function(selectedList) {\n            self.__selectionObserver('searchUsers', selectedList);\n          },\n          this.conferenceId,\n          this.showToggleFavouriteButtons,\n          function(avatar, action) {\n            self.__searchPanelFavouriteButtonObserver(avatar, action);\n          },\n          this.submissionRights,\n          this.grantRights,\n          self.extraDiv,\n          self.allowExternal\n        );\n      }\n      var returnedDom = this.searchPanel.draw();\n      container.append(returnedDom);\n    },\n\n    __buildSuggestedUsersPanel: function(container) {\n      var self = this;\n\n      this.suggestedUsersPanel = new SuggestedUsersPanel(\n        this.onlyOne,\n        this.includeFavourites,\n        this.suggestedUsers,\n        function(selectedList) {\n          self.__selectionObserver('suggestedUsers', selectedList);\n        },\n        this.showToggleFavouriteButtons\n      );\n\n      container.append(this.suggestedUsersPanel.draw());\n    },\n\n    __selectionObserver: function(panel, selectedList) {\n      if (this.onlyOne) {\n        if (panel === 'searchUsers') {\n          this.suggestedUsersPanel.clearSelection();\n        } else {\n          this.searchPanel.clearSelection();\n        }\n        if (selectedList.isEmpty()) {\n          this._toggleSaveButton(false);\n        } else {\n          this._toggleSaveButton(true);\n        }\n      } else {\n        if (!selectedList.isEmpty()) {\n          this._toggleSaveButton(true);\n        } else {\n          var twoPanels =\n            this.allowSearch && (this.includeFavourites || exists(this.suggestedUsers));\n          if (twoPanels) {\n            var otherSelectedList =\n              panel === 'searchUsers'\n                ? this.suggestedUsersPanel.getSelectedList()\n                : this.searchPanel.getSelectedList();\n            if (otherSelectedList.isEmpty()) {\n              this._toggleSaveButton(false);\n            } else {\n              this._toggleSaveButton(true);\n            }\n          } else {\n            this._toggleSaveButton(false);\n          }\n        }\n      }\n    },\n\n    __save: function() {\n      var self = this;\n      var totalSelected = $O({});\n      if (this.allowSearch) {\n        totalSelected.update(this.searchPanel.getSelectedList().getAll());\n      }\n      if (this.includeFavourites || exists(this.suggestedUsers)) {\n        totalSelected.update(this.suggestedUsersPanel.getSelectedList().getAll());\n      }\n      var returnedList = new List();\n      each(totalSelected, function(selectedItem) {\n        if (self.submissionRights) {\n          selectedItem.set('isSubmitter', self.grantRights.get('submission'));\n        }\n        returnedList.append(selectedItem.getAll());\n      });\n      this.chooseProcess(returnedList.allItems());\n    },\n\n    __searchPanelFavouriteButtonObserver: function(avatar, addedOrRemoved) {\n      if (addedOrRemoved) {\n        this.suggestedUsersPanel.suggestedUserList.set('existingAv' + avatar.id, $O(avatar));\n      }\n    },\n\n    _toggleSaveButton: function(enabled) {\n      this.saveButton.disabledButtonWithTooltip(enabled ? 'enable' : 'disable');\n    },\n\n    /**\n     * Returns the dialog's DOM\n     */\n    draw: function() {\n      var self = this;\n\n      this.saveButton = self.buttons.eq(0);\n      this.saveButton.disabledButtonWithTooltip({\n        tooltip: $T('Please select at least one item'),\n        disabled: true,\n      });\n\n      var mainContent = Html.tr();\n      if (self.allowSearch) {\n        this.cellSearch = Html.td('searchUsersGroupsPanel');\n        self.__buildSearchPanel(this.cellSearch);\n        mainContent.append(this.cellSearch);\n      }\n\n      if (this.includeFavourites || exists(this.suggestedUsers)) {\n        this.cellSuggested = Html.td('suggestedUsersPanel');\n        self.__buildSuggestedUsersPanel(this.cellSuggested);\n        mainContent.append(this.cellSuggested);\n      }\n\n      mainContent = Html.table(\n        {cellpadding: 0, cellPadding: 0, cellspacing: 0, cellSpacing: 0},\n        Html.tbody({}, mainContent)\n      );\n      return this.ExclusivePopupWithButtons.prototype.draw.call(this, mainContent, {\n        padding: '0px',\n      });\n    },\n\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          self.onlyOne ? $T('Choose') : $T('Add'),\n          function() {\n            self.__save();\n            self.close();\n          },\n        ],\n        [\n          $T('Cancel'),\n          function() {\n            self.close();\n          },\n        ],\n      ];\n    },\n\n    postDraw: function() {\n      // We have to do this first and not after the super call or it won't work in IE7\n      if (this.allowSearch && this.enableGroups) {\n        var tabContainer = this.searchPanel.tabWidget.canvas;\n        tabContainer.height(tabContainer.height());\n      }\n      if (this.includeFavourites || exists(this.suggestedUsers)) {\n        this.suggestedUsersPanel.suggestedUserListDiv.setStyle(\n          'height',\n          pixels(\n            this.cellSuggested.dom.offsetHeight -\n              this.suggestedUsersPanel.titleDiv.dom.offsetHeight -\n              10\n          )\n        );\n      }\n      this.ExclusivePopupWithButtons.prototype.postDraw.call(this);\n      if (this.allowSearch) $E('userSearchFocusField').dom.focus();\n    },\n  },\n  /**\n   * Constructor for ChooseUsersPopup\n   */\n  function(\n    title,\n    allowSearch,\n    conferenceId,\n    enableGroups,\n    includeFavourites,\n    suggestedUsers,\n    onlyOne,\n    showToggleFavouriteButtons,\n    submissionRights,\n    chooseProcess,\n    extraDiv,\n    allowExternal\n  ) {\n    var self = this;\n\n    this.allowSearch = allowSearch;\n    this.conferenceId = conferenceId;\n    this.enableGroups = enableGroups;\n\n    this.includeFavourites = any(includeFavourites, true);\n    this.suggestedUsers = suggestedUsers;\n\n    this.onlyOne = any(onlyOne, false);\n    this.showToggleFavouriteButtons = any(showToggleFavouriteButtons, true);\n    this.chooseProcess = chooseProcess;\n    this.extraDiv = extraDiv;\n\n    // Other attributes that will be set in other methods, listed here for reference\n    this.saveButton = null;\n    this.suggestedUsersPanel = null;\n    this.searchPanel = null;\n    this.buttonDiv = null;\n    this.cellSearch = null;\n    this.cellSuggested = null;\n\n    this.submissionRights = submissionRights;\n    this.grantRights = new WatchObject();\n\n    // We build the dialog.\n    this.PreLoadHandler(self._preload, function() {\n      self.open();\n    });\n    this.ExclusivePopupWithButtons(title, positive);\n    this.allowExternal = _.isBoolean(allowExternal) ? allowExternal : true;\n  }\n);\n\n/**\n * Creates a data creation / edit pop-up dialog.\n * @param {String} title The title of the popup.\n * @param {Object} userData A WatchObject that has to have the following keys/attributes:\n *                          id, title, familyName, firstName, affiliation, email, address, telephone, submission.\n *                          Its information will be displayed as initial values in the dialog.\n * @param {Function} action A callback function that will be called if the user presses ok. The function will be passed\n *                          a WatchObject with the new values.\n */\ntype(\n  'UserDataPopup',\n  ['ExclusivePopupWithButtons'],\n  {\n    draw: function() {\n      var userData = this.userData;\n      var self = this;\n      self.parameterManager = new IndicoUtil.parameterManager();\n\n      var grantSubmission = [];\n      var grantManagement = [];\n      var grantCoordination = [];\n      var warning = [];\n      if (this.grantSubmission) {\n        grantSubmission = [\n          $T('Grant submission rights'),\n          $B(Html.checkbox({id: 'submissionCheckbox'}), userData.accessor('submission')),\n        ];\n        warning = [\n          Html.span(\n            {},\n            Html.span({style: {fontWeight: 'bold'}}, $T('Note:')),\n            $T(' If this person does not already have an Indico account, '),\n            Html.br(),\n            $T('he or she will be sent an email asking to register as a user.'),\n            Html.br(),\n            $T(' After the registration the user will automatically be given'),\n            Html.br(),\n            $T(' submission rights.')\n          ),\n        ];\n      }\n      if (this.grantManagement) {\n        grantManagement = [\n          $T('Give management rights'),\n          $B(Html.checkbox({}), userData.accessor('manager')),\n        ];\n        warning = [\n          Html.span(\n            {},\n            Html.span({style: {fontWeight: 'bold'}}, $T('Note:')),\n            $T(' If this person does not already have an Indico account, '),\n            Html.br(),\n            $T('he or she will be sent an email asking to create an account.'),\n            Html.br(),\n            $T(' After the account creation the user will automatically be'),\n            Html.br(),\n            $T(' given management rights.')\n          ),\n        ];\n      }\n\n      if (this.grantCoordination) {\n        grantCoordination = [\n          $T('Give coordination rights'),\n          $B(Html.checkbox({}), userData.accessor('coordinator')),\n        ];\n        warning = [\n          Html.span(\n            {},\n            Html.span({style: {fontWeight: 'bold'}}, $T('Note:')),\n            $T(' If this person does not already have an Indico account, '),\n            Html.br(),\n            $T('he or she will be sent an email asking to create an account.'),\n            Html.br(),\n            $T(' After the account creation the user will automatically be'),\n            Html.br(),\n            $T(' given coordination rights.')\n          ),\n        ];\n      }\n      if (this.grantManagement && this.grantCoordination) {\n        warning = [\n          Html.span(\n            {},\n            Html.span({style: {fontWeight: 'bold'}}, $T('Note:')),\n            $T(' If this person does not already have an Indico account, '),\n            Html.br(),\n            $T('he or she will be sent an email asking to create an account.'),\n            Html.br(),\n            $T(' After the account creation the user will automatically be'),\n            Html.br(),\n            $T(' given the rights.')\n          ),\n        ];\n      }\n\n      var form = IndicoUtil.createFormFromMap([\n        [\n          $T('Title'),\n          $B(\n            Html.select(\n              {},\n              Html.option({}, ''),\n              Html.option({value: 'Mr'}, $T('Mr')),\n              Html.option({value: 'Mrs'}, $T('Mrs')),\n              Html.option({value: 'Ms'}, $T('Ms')),\n              Html.option({value: 'Dr'}, $T('Dr')),\n              Html.option({value: 'Prof.'}, $T('Prof.'))\n            ),\n            userData.accessor('title')\n          ),\n        ],\n        [\n          $T('Family Name'),\n          $B(\n            self.parameterManager.add(Html.edit({style: {width: '300px'}}), 'text', false),\n            userData.accessor('familyName')\n          ),\n        ],\n        [\n          $T('First Name'),\n          $B(Html.edit({style: {width: '300px'}}), userData.accessor('firstName')),\n        ],\n        [\n          $T('Affiliation'),\n          $B(Html.edit({style: {width: '300px'}}), userData.accessor('affiliation')),\n        ],\n        [\n          $T('Email'),\n          $B(\n            self.parameterManager.add(\n              Html.edit({id: 'email', style: {width: '300px'}}),\n              'email',\n              this.allowEmptyEmail\n            ),\n            userData.accessor('email')\n          ),\n        ],\n        [$T('Address'), $B(Html.textarea({style: {width: '300px'}}), userData.accessor('address'))],\n        [$T('Telephone'), $B(Html.edit({style: {width: '300px'}}), userData.accessor('phone'))],\n        grantSubmission,\n        grantManagement,\n        grantCoordination,\n        warning,\n      ]);\n\n      return this.ExclusivePopupWithButtons.prototype.draw.call(this, form);\n    },\n\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          $T('Save'),\n          function() {\n            if ($('#submissionCheckbox').is(':checked') && $('#email').val() == 0) {\n              var popup = new WarningPopup(\n                $T('Warning'),\n                $T(\n                  'It is not possible to grant submission rights to a participant without an email address. Please set an email address.'\n                )\n              );\n              popup.open();\n              return;\n            }\n            self.userData.set(\n              'name',\n              '{0} {1}'.format(self.userData.get('firstName'), self.userData.get('familyName'))\n            );\n            if (self.parameterManager.check() && self.checkPerson(self.userData)) {\n              self.action(self.userData);\n              if (self.autoClose) {\n                self.close();\n              }\n            }\n          },\n        ],\n        [\n          $T('Cancel'),\n          function() {\n            self.close();\n          },\n        ],\n      ];\n    },\n  },\n  function(\n    title,\n    userData,\n    action,\n    grantSubmission,\n    grantManagement,\n    grantCoordination,\n    allowEmptyEmail,\n    autoClose,\n    checkPerson\n  ) {\n    this.userData = userData;\n    this.action = action;\n    this.grantSubmission = exists(grantSubmission) ? grantSubmission : false;\n    this.grantManagement = exists(grantManagement) ? grantManagement : false;\n    this.grantCoordination = exists(grantCoordination) ? grantCoordination : false;\n    this.allowEmptyEmail = exists(allowEmptyEmail) ? allowEmptyEmail : true;\n    this.ExclusivePopup(title, function() {\n      return true;\n    });\n    this.autoClose = exists(autoClose) ? autoClose : true;\n    this.checkPerson =\n      checkPerson ||\n      function() {\n        return true;\n      };\n  }\n);\n\n$(function() {\n  // This widget creates a clickable icon-shield that opens a qtip with the different rights that\n  // can be granted to a user.\n  $.widget('users.shield', {\n    options: {\n      userData: null,\n\n      // rights\n      submission: true,\n    },\n\n    _qtip: function(rights) {\n      // qtip content\n\n      var rightsTooltipText = $('<div></div>')\n        .append(\n          $('<span></span>')\n            .text($T('User privileges'))\n            .css('fontSize', '13px')\n        )\n        .append($('<div></div>').css('marginTop', '8px'));\n      $.each(rights, function(index, value) {\n        rightsTooltipText.append(value.checkbox).append(\n          $('<span></span>')\n            .text(value.text)\n            .css('verticalAlign', 'middle')\n        );\n      });\n\n      this.element.qtip({\n        style: {\n          classes: 'qtip-rounded qtip-shadow qtip-popup',\n          tip: {\n            corner: true,\n            width: 15,\n            height: 10,\n          },\n        },\n        position: {\n          my: 'top middle',\n          at: 'bottom middle',\n        },\n        content: {\n          text: rightsTooltipText,\n        },\n        show: {\n          event: 'click',\n          solo: true,\n        },\n        hide: {\n          event: 'unfocus',\n        },\n      });\n    },\n\n    _create: function() {\n      var self = this;\n\n      this.element\n        // add class and attrs\n        .addClass('icon-shield user_list_icon_shield')\n        .attr('ariaHidden', true)\n        .attr('alt', $T('User rights'))\n        .attr('title', $T('User rights'))\n        .attr('data-id', 'author_' + this.options.userData.get('email'))\n        //css\n        .css('color', this.options.userData.get('isSubmitter') ? '#cc4646' : '#aaa');\n\n      // Create privelege checkboxes and events\n      var privelegeCheckboxes = [];\n\n      if (this.options.submission) {\n        var submissionCheckbox = $(\"<input type='checkbox'>\")\n          .prop('checked', !!this.options.userData.get('isSubmitter'))\n          .css('marginRight', '8px')\n          .css('verticalAlign', 'middle');\n\n        submissionCheckbox.click(function() {\n          $('.icon-shield[data-id=\"author_' + self.options.userData.get('email') + '\"]').trigger(\n            'participantProtChange',\n            [{isSubmitter: submissionCheckbox.is(':checked')}]\n          );\n        });\n\n        privelegeCheckboxes.push({checkbox: submissionCheckbox, text: $T('Submission rights')});\n      }\n\n      // Listen to protection changes\n      this.element.on('participantProtChange', function(event, args) {\n        if (self.options.submission && 'isSubmitter' in args) {\n          self.element.css('color', args.isSubmitter ? '#cc4646' : '#aaa');\n          self.options.userData.set('isSubmitter', args.isSubmitter);\n          submissionCheckbox.prop('checked', args.isSubmitter);\n        }\n      });\n\n      this._qtip(privelegeCheckboxes);\n    },\n  });\n});\n\n/**\n * Creates a list of users. Each user can be edited or removed.\n * It inherits from ListWidget who in turn inherits from WatchObject, so the usual WatchObject methods (get, set)\n * can be used on it. For example 'set' can be used to initialize the list.\n * This means that the users are stored with their id's as keys.\n * @param {String} style The class of the ul that will contain the users.\n * @param {Boolean} allowSetRights. If true, each user will have an edit button to change their rights.\n * @param {Boolean} allowEdit. If true, each user will have an edit button to change their data.\n * @param {Function} editProcess. A function that will be called when a user is edited. The function will\n *                                be passed the new data as a WatchObject.\n * @param {Boolean} showToggleFavouriteButtons. false by default. If true, favouritize buttons will not be shown.\n */\ntype(\n  'UserListWidget',\n  ['ListWidget'],\n  {\n    _iteratingElement: function(attrs, item) {\n      var className;\n      var pairProperties = attrs.pair.get();\n      if (pairProperties.get('isGroup')) {\n        className = 'item-group';\n      } else if (pairProperties.get('_type') === 'IPNetworkGroup') {\n        className = 'icon-lan';\n      } else if (pairProperties.get('_type') === 'Email') {\n        className = 'icon-mail';\n      } else {\n        className = 'icon-user';\n      }\n      attrs['className'] = className;\n      delete attrs['pair'];\n      return this.ListWidget.prototype._iteratingElement.call(this, attrs, item);\n    },\n    _drawItem: function(user) {\n      var self = this;\n      var userData = user.get();\n\n      var edit_button = $('<i class=\"edit-user icon-edit\">').click(function() {\n        var editPopup = new UserDataPopup('Change user data', userData.clone(), function(newData) {\n          //  editProcess will be passed a WatchObject representing the user.\n          self.editProcess(userData, function(result) {\n            if (result) {\n              userData.update(newData.getAll());\n              if (!startsWith('' + userData.get('id'), 'newUser')) {\n                userData.set('id', 'edited' + userData.get('id'));\n              }\n              self.userListField.inform();\n            }\n          });\n        });\n        editPopup.open();\n      });\n\n      var remove_button = $('<i class=\"remove-user icon-close hide-if-locked\">').click(function() {\n        var currentUserId = $('body').data('user-id');\n        var userId = userData.get('id');\n        var confirmed;\n\n        function setResult(result) {\n          if (result) {\n            self.set(user.key, null);\n            self.userListField.inform();\n          }\n        }\n\n        if (currentUserId === userId) {\n          confirmed = confirmPrompt(\n            $T.gettext('Are you sure you want to remove yourself from the list?'),\n            $T.gettext('Confirm action')\n          );\n        } else {\n          confirmed = $.Deferred().resolve();\n        }\n\n        confirmed.then(function() {\n          self.removeProcess(userData, setResult);\n        });\n      });\n\n      var buttonDiv = Html.div('actions', new Html(remove_button.get(0)));\n\n      if (userData.get('isGroup') || userData.get('_fossil') === 'group') {\n        var groupName = $B(Html.span('name'), userData.accessor('name'));\n        return [Html.span('info', groupName), buttonDiv];\n      } else {\n        if (\n          IndicoGlobalVars.isUserAuthenticated & this.showToggleFavouriteButtons &&\n          userData.get('_type') === 'Avatar'\n        ) {\n          buttonDiv.append(new Html(create_favorite_button(userData.get('id')).get(0)));\n        }\n        if (this.allowSetRights) {\n          buttonDiv.append(\n            $('<span></span>')\n              .shield({userData: userData})\n              .get(0)\n          );\n        }\n        if (this.allowEdit) {\n          buttonDiv.append(new Html(edit_button.get(0)));\n        }\n        buttonDiv.append(new Html(remove_button.get(0)));\n\n        var userName;\n        if (userData.get('_type') == 'Email') {\n          userName = Html.span('info', $B(Html.span('name'), userData.accessor('email')));\n        } else {\n          userName = Html.span('info', $B(Html.span('name'), userData.accessor('name')));\n        }\n\n        if (userData.get('_type') !== 'Email') {\n          userName.append(Html.span('email', userData.get('email')));\n          userName.append(Html.span('affiliation', userData.get('affiliation')));\n        }\n        return [userName, buttonDiv];\n      }\n    },\n  },\n\n  function(\n    style,\n    allowSetRights,\n    allowEdit,\n    editProcess,\n    removeProcess,\n    showToggleFavouriteButtons,\n    userListField\n  ) {\n    this.style = any(style, 'user-list');\n    this.allowSetRights = allowSetRights;\n    this.allowEdit = allowEdit;\n    this.editProcess = any(editProcess, singleUserNothing);\n    this.removeProcess = any(removeProcess, singleUserNothing);\n    this.showToggleFavouriteButtons = any(showToggleFavouriteButtons, true);\n    this.userListField = userListField;\n    this.ListWidget(style);\n  }\n);\n\n/**\n * Creates a form field with a list of users.\n * Users can be added from an initial list of users, from a 'new user' dialog, or from a \"choose user\"\n * dialog which will enable both to search users/groups and propose a list of suggested users (favourites and others).\n * The 'id' attribute of the users in the list will depend from their origin.\n * - If it was added from the search dialog, the id will be 'existingAvXX' (where XX corresponds to the avatar id).\n * - It it was added from the 'new user' dialog, the id will be 'newUserXX', where XX is auto-increment starting from 0.\n * - If it was added from the list of suggested users, it will retain the id of the user that was put in the list.\n * - It the user was edited, and the edited user corresponded to an Avatar, the id will be 'editedXX' where XX is the id of the Avatar used initially.\n *\n */\ntype(\n  'UserListField',\n  ['IWidget'],\n  {\n    clear: function() {\n      this.userList.clearList();\n    },\n\n    privilegesOn: function() {\n      return (\n        $('#grant-manager').prop('checked') || $('#presenter-grant-submission').prop('checked')\n      );\n    },\n\n    setUpParameters: function() {\n      /* set up basic components : div containers for message , a checkbox list ,\n           a list of messages and a warning counter.*/\n\n      this.warning_no_indico = $T(\n        'Please note that you have added a user that does not exist in Indico.\\\n                                    Non existing users will be asked via email to create an account so\\\n                                    that they will be able to use the privileges below.'\n      );\n      this.warning_no_email = $T(\n        'Please note that you have added a user without an email address. Users without \\\n                                    email will not be able to use the privileges below.'\n      );\n      this.messageDiv = $('<div/>', {\n        css: {\n          height: '58px',\n          maxWidth: '420px',\n          textAlign: 'left',\n          width: 'auto',\n          overflow: 'auto',\n          marginLeft: '5px',\n        },\n      }).addClass('warningMessage');\n      this.messageContainer = $('<div/>', {css: {display: 'inline-block', position: 'absolute'}});\n      this.containerDiv = $('<div/>');\n      this.warning_flag = false;\n    },\n\n    appendMessage: function(message) {\n      this.messageDiv.html(message);\n      this.messageContainer.append(this.messageDiv);\n      this.containerDiv.append(this.messageContainer);\n      this.warning_flag = true;\n    },\n\n    clearMessages: function() {\n      this.messageContainer.html('');\n      this.containerDiv.append(this.messageContainer);\n      this.warning_flag = false;\n    },\n\n    checkList: function(list) {\n      var self = this;\n      self.clearMessages();\n      each(list, function(val, key) {\n        self.check(self.userList.get(key));\n      });\n    },\n\n    check: function(user) {\n      var self = this;\n\n      if (keys(this.privileges).length > 0) {\n        if (this.privilegesOn()) {\n          if (!user.get('email')) {\n            this.appendMessage(this.warning_no_email);\n          } else {\n            indicoRequest('search.users', {email: user.get('email')}, function(result, error) {\n              if (!error) {\n                if (result.length == 0) {\n                  self.appendMessage(self.warning_no_indico);\n                }\n              }\n            });\n          }\n        }\n      }\n    },\n\n    inform: function() {\n      if (keys(this.privileges).length > 0) {\n        if (!this.userList.isEmpty()) {\n          this.checkList(this.userList.getAll());\n        } else {\n          this.clearMessages();\n        }\n      }\n    },\n\n    draw: function() {\n      var self = this;\n      var buttonDiv = Html.div({style: {marginTop: pixels(10)}});\n\n      if (this.allowSearch || this.includeFavourites || exists(this.suggestedUsers)) {\n        var chooseUserButton = Html.input(\n          'button',\n          {style: {marginRight: pixels(5)}, className: 'i-button hide-if-locked', type: 'button'},\n          this.enableGroups ? $T('Add User / Group') : $T('Add user')\n        );\n        var chooseIpNetwork = Html.a(\n          {\n            'href': '#',\n            'style': {marginRight: pixels(5)},\n            'className': 'i-button arrow js-dropdown',\n            'data-toggle': 'dropdown',\n          },\n          $T('Add IP Network')\n        );\n        var ipNetworksContainer = Html.span({className: 'group'});\n        var ipNetworksList = Html.ul({className: 'i-dropdown'});\n\n        _.each(this.ipNetworks, function(network) {\n          var li = Html.li();\n          li.append(Html.a({href: '#'}, network.name));\n          li.observeClick(function() {\n            self.newProcess([network], function(result) {\n              if (result && !self.userList.get(network.identifier)) {\n                var entries = self.userList.getAll();\n                entries[network.identifier] = $O(network);\n                updatePrincipalsList(entries);\n              }\n            });\n          });\n          ipNetworksList.append(li);\n        });\n\n        ipNetworksContainer.append(chooseIpNetwork);\n        ipNetworksContainer.append(ipNetworksList);\n        var title;\n        if (this.includeFavourites || exists(this.suggestedUsers)) {\n          title = this.enableGroups ? $T('Add Users and Groups') : $T('Add Users');\n        } else {\n          title = this.enableGroups ? $T('Search Users and Groups') : $T('Search Users');\n        }\n\n        function updatePrincipalsList(entries) {\n          var sortedKeys = _.sortBy(_.keys(entries), function(key) {\n            var principal = entries[key].getAll();\n            var weight =\n              principal._type == 'Avatar'\n                ? 0\n                : principal._type == 'Email'\n                ? 1\n                : principal.isGroup\n                ? 2\n                : 3;\n            var name = principal._type !== 'Email' ? principal.name : principal.email;\n            return [weight, name.toLowerCase()];\n          });\n\n          self.userList.clearList();\n          _.each(sortedKeys, function(key) {\n            self.userList.set(key, $O(entries[key].getAll()));\n          });\n        }\n\n        var peopleAddedHandler = function(peopleList) {\n          // newProcess will be passed a list of WatchObjects representing the users.\n          self.newProcess(peopleList, function(value, results) {\n            if (value) {\n              each(results, function(person) {\n                var key;\n                if (\n                  person.isGroup ||\n                  person._fossil === 'group' ||\n                  person._type == 'IPNetworkGroup'\n                ) {\n                  key = person.identifier;\n                } else if (person._type === 'Avatar') {\n                  key = 'existingAv' + person.id;\n                } else if (person._type === 'EventPerson') {\n                  key = 'existingEventPerson' + person.id;\n                } else {\n                  key = person.id;\n                }\n                if (!self.userList.get(key)) {\n                  var entries = self.userList.getAll();\n                  entries[key] = $O(person);\n                  updatePrincipalsList(entries);\n                  $('.icon-shield[data-id=\"author_' + person.email + '\"]').trigger(\n                    'participantProtChange',\n                    [{isSubmitter: person.isSubmitter}]\n                  );\n                }\n              });\n            }\n          });\n        };\n\n        chooseUserButton.observeClick(function() {\n          var chooseUsersPopup = new ChooseUsersPopup(\n            title,\n            self.allowSearch,\n            self.conferenceId,\n            self.enableGroups,\n            self.includeFavourites,\n            self.suggestedUsers,\n            false,\n            self.showToggleFavouriteButtons,\n            self.allowSetRights,\n            peopleAddedHandler,\n            null,\n            self.allowExternal\n          );\n          chooseUsersPopup.execute();\n        });\n\n        buttonDiv.append(chooseUserButton);\n        if (this.enableIpNetworks) {\n          buttonDiv.append(ipNetworksContainer);\n        }\n      }\n\n      if (this.allowNew) {\n        var addNewUserButton = Html.input(\n          'button',\n          {className: 'i-button', style: {marginRight: pixels(5)}},\n          $T('Add New')\n        );\n        addNewUserButton.observeClick(function() {\n          var newUserId = 'newUser' + self.newUserCounter++;\n          var newUser = $O({id: newUserId});\n          var newUserPopup = new UserDataPopup(\n            $T('New user'),\n            newUser,\n            function(newData) {\n              newUser.set('isSubmitter', newUser.get('submission'));\n              self.newProcess([newUser], function(result) {\n                if (result) {\n                  self.userList.set(newUserId, newUser);\n                  self.check(newUser);\n                  $('.icon-shield[data-id=\"author_' + newUser.get('email') + '\"]').trigger(\n                    'participantProtChange',\n                    [{isSubmitter: newUser.get('isSubmitter') || false}]\n                  );\n                }\n              });\n            },\n            self.allowSetRights\n          );\n          newUserPopup.open();\n        });\n        buttonDiv.append(addNewUserButton);\n      }\n\n      // User privileges (submission privilege, etc.)\n      var privilegesDiv = $('<span/>').css('marginTop', '10px');\n      var keysList = keys(this.privileges);\n      if (keysList.length > 0) {\n        privilegesDiv.append($('<span/>').html($T('Grant all these users with privileges: ')));\n      }\n      var comma = ', ';\n      for (var i = 0; i < keysList.length; i++) {\n        if (i + 1 == keysList.length) {\n          comma = '';\n        }\n        var key = keysList[i];\n        var value = this.privileges[key];\n        var checkbox = $('<input>', {type: 'checkbox', id: key, name: key}).change(function() {\n          if (!self.privilegesOn()) {\n            self.clearMessages();\n            return;\n          } else {\n            if (!self.warning_flag) {\n              self.inform();\n            }\n          }\n        });\n        $B(this.selectedPrivileges.accessor(key), checkbox);\n        privilegesDiv.append(\n          $('<span/>')\n            .append(checkbox)\n            .append(value[0] + comma)\n        );\n      }\n\n      var containsUserListDiv = $('<div/>').css('display', 'inline-block');\n      containsUserListDiv.append(\n        $('<div/>')\n          .addClass(this.userDivStyle)\n          .html(this.userList.draw().dom)\n      );\n      this.containerDiv.append(containsUserListDiv);\n      return Widget.block([this.containerDiv.get(0), privilegesDiv.get(0), buttonDiv]);\n    },\n  },\n  /*\n   * @param {String} userDivStyle A CSS class for the div that will sourround the user list.\n   * @param {String} userListStyle A CSS class for the user list. It will be passed to the inner UserListWidget.\n   *\n   * @param {list} initialUsers A list of (fossilized) avatars that will appear initially.\n   * @param {Boolean} includeFavourites If True, favourites will appear in the list of suggested users of the ChooseUsersPopup.\n   * @param {list} suggestedUsers A list of users that will be offered as options to be added.\n   * @param {Boolean} allowSearch If True, the \"Choose user\" dialog will propose to search.\n   * @param {Boolean} enableGroups If True, the \"Choose user\" dialog will propose to search groups.\n   * @param {string} conferenceId for author list search\n   * @param {list} privileges dictionary with the privileges that we can set for the users. There is a key and a tuple as vale: (label, default value for checked). E.g. {\"grant-manager\": [\"event modification\", false]}\n   * @param {Boolean} allowNew If True, a 'New User' button will be present.\n   * @param {Boolean} allowSetRights. If True, rights for each user will be able to be edited.\n   * @param {Boolean} allowEdit If True, users in the list will be able to be edited.\n   * @param {Boolean} showToggleFavouriteButtons. false by default. If true, favouritize buttons will not be shown.\n   * @param {Function} newProcess A function that will be called when new users (from new data, or from the search dialog, or from the suggested list) is added to the list.\n   * @param {Function} editProcess A function that will be called when a user is edited.\n   * @param {Function} removeProcess A function that will be called when a user is removed.\n   */\n  function(\n    userDivStyle,\n    userListStyle,\n    initialUsers,\n    includeFavourites,\n    suggestedUsers,\n    allowSearch,\n    enableGroups,\n    conferenceId,\n    privileges,\n    allowNew,\n    allowSetRights,\n    allowEdit,\n    showToggleFavouriteButtons,\n    newProcess,\n    editProcess,\n    removeProcess,\n    allowExternal,\n    enableIpNetworks,\n    ipNetworks\n  ) {\n    var self = this;\n    this.userList = new UserListWidget(\n      userListStyle,\n      allowSetRights,\n      allowEdit,\n      editProcess,\n      removeProcess,\n      showToggleFavouriteButtons,\n      this\n    );\n    self.newUserCounter = 0;\n    this.userDivStyle = any(userDivStyle, 'user-list');\n    this.setUpParameters();\n\n    if (exists(initialUsers)) {\n      each(initialUsers, function(user) {\n        if (any(user._type, null) === 'Avatar') {\n          self.userList.set('existingAv' + user.id, $O(user));\n        } else if (user._type === 'EventPerson') {\n          self.userList.set('existingEventPerson' + user.id, $O(user));\n        } else if (\n          ~[\n            'LDAPGroupWrapper',\n            'LocalGroupWrapper',\n            'MultipassGroup',\n            'LocalGroup',\n            'IPNetworkGroup',\n          ].indexOf(user._type)\n        ) {\n          self.userList.set(user.identifier, $O(user));\n        } else {\n          self.userList.set(user.id, $O(user));\n        }\n      });\n    }\n\n    this.includeFavourites = any(includeFavourites, true);\n    if (exists(suggestedUsers)) {\n      if (suggestedUsers.WatchList) {\n        this.suggestedUsers = suggestedUsers;\n      } else {\n        this.suggestedUsers = new WatchList();\n        each(suggestedUsers, function(user) {\n          self.suggestedUsers.append(user);\n        });\n      }\n    } else {\n      this.suggestedUsers = null;\n    }\n\n    this.allowSearch = any(allowSearch, true);\n    this.enableGroups = any(enableGroups, false);\n    this.enableIpNetworks = any(enableIpNetworks, false);\n    this.ipNetworks = any(ipNetworks, []);\n    this.conferenceId = any(conferenceId, null);\n    this.privileges = any(privileges, {});\n    this.selectedPrivileges = new WatchObject();\n    this.allowSetRights = allowSetRights;\n\n    this.allowNew = any(allowNew, true);\n    this.showToggleFavouriteButtons = any(showToggleFavouriteButtons, true);\n    this.newProcess = any(newProcess, userListNothing);\n    this.allowExternal = _.isBoolean(allowExternal) ? allowExternal : true;\n  }\n);\n"},function(n,e,t){t(205)(t(1836))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'BrowserHistoryBroker',\n  [],\n  // handle the interaction with browser history and hashes\n  {\n    addListener: function(listener) {\n      /* add a listener that will be notified each time\n                the hash changes */\n\n      this.listeners.push(listener);\n\n      // the listener needs to know the broker,\n      // so that it can register deliberate actions\n      // (which are not back nor forward)\n      listener.registerHistoryBroker(this);\n    },\n\n    setUserAction: function(hash) {\n      /* set an action that was performed by the user:\n                that means an anchor update */\n\n      window.location.hash = hash;\n      this.currentHash = '#' + hash;\n    },\n  },\n  function() {\n    this.listeners = [];\n\n    // keep the hash that is in use\n    this.currentHash = window.location.hash;\n\n    var self = this;\n\n    // function that gets executed each time the hash changes\n    var checkHashChanged = function() {\n      if (self.currentHash != window.location.hash) {\n        each(self.listeners, function(listener) {\n          listener.notifyHistoryChange(window.location.hash);\n        });\n        self.currentHash = window.location.hash;\n      }\n    };\n\n    // onhashchange is nice (IE8, Chrome, FF 3.6, HTML5?)\n    if (document.body.onhashchange !== undefined) {\n      $E(document.body).observeEvent('hashchange', checkHashChanged);\n    } else {\n      // for older browsers, use setInterval()\n      setInterval(checkHashChanged, 500);\n    }\n\n    // btw, IE7 not supported\n  }\n);\n"},function(n,e,t){t(205)(t(1838))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n * Truncates a category path if it is too long.\n */\nUtil.truncateCategPath = function(list) {\n  var first = list.slice(0, 1);\n  var last = list.length > 1 ? list.slice(-1) : [];\n  list = list.slice(1, -1);\n\n  var truncated = false;\n\n  var chars = list.join('');\n  while (chars.length > 10) {\n    truncated = true;\n    list = list.slice(1);\n    chars = list.join('');\n  }\n\n  if (truncated) {\n    list = concat(['...'], list);\n  }\n\n  return translate(concat(first, list, last), function(val) {\n    return escapeHTML(val);\n  });\n};\n"},function(n,e,t){t(205)(t(1840))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nIndicoUI.Widgets = {\n  /**\n        @namespace Generic, resusable, components\n        */\n  Generic: {\n    /**\n     * (DEPRECATED)\n     * Creates a tooltip above the given element.\n     * Example of usage:\n     *\n     * var homeButtonPopup = function(event) {\n     *     IndicoUI.Widgets.Generic.tooltip(this, event, \"<span style='padding:3px'>Go to Indico Home Page</span>\");\n     * }\n     * $E('homeButton').dom.onmouseover = homeButtonPopup;\n     *\n     * @param {Object} in_this (view example)\n     * @param {Object} event (view example)\n     * @param {String} content Whatever content is desired.\n     */\n    tooltip: function(in_this, event, content) {\n      var $this = $(in_this);\n      if ($this.data('hasTooltip')) {\n        return;\n      }\n      $this.data('hasTooltip', true).qtip({\n        content: {\n          text: content,\n        },\n        show: {\n          ready: true,\n        },\n      });\n\n      // Return the onmouseout handler in case\n      // it needs to be called from outside\n      return function() {\n        $this.qtip('hide');\n      };\n    },\n  },\n};\n"},function(n,e,t){t(205)(t(1842))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/**\n @namespace Utility functions for IndicoUI\n*/\n\nvar IndicoUtil = {\n  /**\n   * Creates a new DOM-based HTML form from a map specification.\n   * @param {List} map A map, conforming to the described format\n   * @return An element (DIV) containing the form\n   */\n  createFormFromMap: function(map, expand) {\n    expand = any(expand, false);\n    var labelStyle = \"style='text-align: right; vertical-align: top;'\";\n    var fieldStyle = \"style='vertical-align: top;'\";\n    if (expand) {\n      labelStyle = \"style='white-space:nowrap;'\";\n      fieldStyle = \"style='width:100%;'\";\n    }\n    var table = $('<table></table>');\n    $(map).each(function(key, item) {\n      // if the key is an int, do not print the label\n      if (item.length == 2) {\n        // TO REMOVE: when completed migration to jquery\n        if (!item[1].jquery && item[1].dom) item[1] = $(item[1].dom);\n\n        var row = $(\"<tr style='margin-top:10px;'></tr>\");\n        row.append(\n          $('<td ' + labelStyle + \"><label class='popUpLabel'>\" + item[0] + '</label></td>')\n        );\n        row.append(\n          $('<td ' + fieldStyle + '></td>').append(\n            $(\"<div class='popUpTdContent'></div>\").append(item[1])\n          )\n        );\n        table.append(row);\n      } else {\n        // TO REMOVE: when completed migration to jquery\n        if (item[0] !== undefined && !item[0].jquery && item[0].dom) item[0] = $(item[0].dom);\n\n        table.append(\n          $(\"<tr style='margin-top:10px;'><td></td></tr>\").append(\n            $('<td ' + fieldStyle + '></td>').append(item[0])\n          )\n        );\n      }\n    });\n    return table;\n  },\n\n  /**\n   * Formats a JS Date, returning a string (DD/MM/YY HH:MM)\n   * @param {Date} date A JS Date\n   * @param {Integer} weekDayOption If different from 0, will add the weekday in different ways.\n   * @return A string representation of the Date object\n   */\n  formatDateTime: function(date, weekDayOption) {\n    if (!exists(weekDayOption)) {\n      weekDayOption = 0;\n    }\n\n    var dateText =\n      zeropad(date.getDate()) +\n      '/' +\n      zeropad(date.getMonth() + 1) +\n      '/' +\n      date.getFullYear() +\n      ' ' +\n      zeropad(date.getHours()) +\n      ':' +\n      zeropad(date.getMinutes());\n\n    switch (weekDayOption) {\n      case 1:\n        return Indico.Data.WeekDays[date.getDay()] + ' ' + dateText;\n      case 2:\n        return Indico.Data.WeekDays[date.getDay()].substring(0, 3) + ' ' + dateText;\n      case 3:\n        return dateText + ' (' + Indico.Data.WeekDays[date.getDay()] + ')';\n      case 4:\n        return dateText + ' (' + Indico.Data.WeekDays[date.getDay()].substring(0, 3) + ')';\n      default:\n        return dateText;\n    }\n  },\n\n  /**\n   * Formats a JS Date, returning a string (YYYYMMDD)\n   * @param {Date} date A JS Date\n   * @return A string representation of the Date object\n   */\n  formatDate2: function(date) {\n    return '' + date.getFullYear() + zeropad(date.getMonth() + 1) + zeropad(date.getDate());\n  },\n\n  /**\n   * Parses a string (DD/MM/YY HH:MM) into a JS Date, returning a string\n   * @param {String} strDateTime A string representation of the date/time\n   * @return A JS Date with the parsed date/time\n   */\n  parseDateTime: function(strDateTime) {\n    strDateTime = strDateTime.split(' ');\n    if (strDateTime.length != 2) {\n      return null;\n    }\n\n    var sdate = parseDate(strDateTime[0]);\n    var stime = parseTime(strDateTime[1]);\n\n    if (!sdate || !stime) {\n      return null;\n    }\n\n    var sdatetime = new Date(sdate[2], sdate[1] - 1, sdate[0]);\n    setTime(sdatetime, stime);\n\n    return sdatetime;\n  },\n\n  parseDate: function(strDate) {\n    var sdate = parseDate(strDate);\n\n    if (!sdate) {\n      return null;\n    }\n\n    var sdatetime = new Date(sdate[2], sdate[1] - 1, sdate[0]);\n    setTime(sdatetime, [0, 0, 0, 0]);\n\n    return sdatetime;\n  },\n\n  /**\n   * Parses a json date object into a JS Date\n   * @param {Dictionary} A dictionary with date and time keys set\n   * @return A JS Date with the parsed date/time\n   */\n  parseJsonDate: function(date) {\n    var year = parseInt(date.date.substr(0, 4), 10);\n    var month = parseInt(date.date.substr(5, 2), 10);\n    var day = parseInt(date.date.substr(8, 2), 10);\n\n    var hour = parseInt(date.time.substr(0, 2), 10);\n    var min = parseInt(date.time.substr(3, 2), 10);\n\n    return new Date(year, month - 1, day, hour, min);\n  },\n\n  /**\n   *\n   */\n  isInteger: function(s) {\n    var isEmpty = function(s) {\n      return !exists(s) || s.length === 0;\n    };\n\n    var isDigit = function(c) {\n      return c >= '0' && c <= '9';\n    };\n\n    var i;\n\n    if (isEmpty(s)) {\n      return false;\n    }\n\n    for (i = 0; i < s.length; i++) {\n      var c = s.charAt(i);\n      if (!isDigit(c)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  /**\n   * Determines if a string is in a valid time format (hh:mm)\n   * @param {String} s The input string\n   * @return {Booleab} true if the string is a valid time string, false otherwise\n   */\n  isTime: function(s) {\n    var regExp = new RegExp('(^([0-9]|[0-1][0-9]|[2][0-3]):([0-5][0-9])$)');\n    return regExp.test(s);\n  },\n\n  /**\n   * Marks an input field (text, checkbox or select) as invalid.\n   * It will change its CSS class so that it appears red, and place an error tooltip over it on mouseover.\n   * If the value of the field changes / the user types in the field, the red color and the tooltip will disappear\n   * @param {XElement} component: the field to mark as invalid\n   * @param {XElement} error: the string or Html object that will be displayed in the error popup.\n   * @return {[XElement, Array of functions]} returns an array with 2 elements:\n   *                                          -An Html.div() XElement with the tooltip that was created.\n   *                                          -An array of functions that should be called to cancel all the event observations.\n   */\n  markInvalidField: function(component, error, passive) {\n    // passive - don't check actively for changes / keypresses\n    if (component.dom.type) {\n      if (startsWith(component.dom.type, 'select')) {\n        if (component.dom.className.slice(-13) != 'hasError') {\n          component.dom.className += ' hasError';\n        }\n      } else {\n        if (component.dom.className.slice(-7) != 'hasError') {\n          component.dom.className += ' hasError';\n        }\n      }\n    } else {\n      if (component.dom.className.slice(-7) != 'hasError') {\n        component.dom.className += ' hasError';\n      }\n    }\n\n    var oList = []; //list of functions that we will call to stop observing events\n\n    var stopObserving = function() {\n      each(oList, function(value) {\n        value();\n      });\n    };\n\n    // we'll add a function that removes the coloring first of all\n    oList.push(function() {\n      $(component.dom)\n        .removeClass('hasError')\n        .qtip('destroy');\n    });\n\n    $(component.dom).qtip({\n      content: {\n        text: error.dom ? $(error.dom) : error,\n      },\n    });\n\n    if (!passive) {\n      $(component.dom).on('keypress change select click', stopObserving);\n    }\n\n    return oList;\n  },\n\n  /**\n   * Parameter manager.\n   * Checks if all the parameters in a form are correct.\n   * If not, it sets the input background-color to red and adds a tooltip explaining the error.\n   * How to use:\n   * 1. make one: pm = parameterManager()\n   * 2. add stuff to it: pm.add(Html.edit({style: {width: '300px'}}), 'text', false)\n   * 3. make checks: pm.check()\n   */\n  parameterManager: function() {\n    var entryList = new WatchList(); //elements to check\n    var classList = {}; //original class (style) value for each element to check\n    var eventList = {}; //all the 'error' events for each element to check\n\n    //var radioButtonChecks = {}; //\n    var radioButtonLabelStopObserving = {};\n\n    this.clear = function() {\n      entryList = new WatchList();\n      classList = {};\n      eventList = {};\n    };\n\n    /**\n     * Check entries for errors\n     */\n    this.check = function() {\n      var self = this;\n      var hasErrors = false;\n\n      entryList.each(function(value) {\n        var component = value[0];\n        var dataType = value[1];\n        var allowEmpty = value[2];\n        var extraCheckFunction = value[3];\n        var error = null;\n\n        // ErrorAware classes don't want to do this\n        if (component.ErrorAware) {\n          component.setError(false);\n        } else {\n          //--- Restore original values (if it is the second time, there must\n          //    be components with error styles)  ---\n\n          component.dom.className = classList[component.dom.id];\n\n          if (exists(eventList[component.dom.id])) {\n            // --- Remove all the ERROR observers\n            $L(eventList[component.dom.id]).each(function(value) {\n              value();\n            });\n\n            delete eventList[component.dom.id];\n          }\n          //---------------------------------\n        }\n\n        //--- Check if there are errors ---\n        if (dataType == 'checkBoxList' && !exists(extraCheckFunction)) {\n          if (!allowEmpty && !self.checkCheckBoxes(component)) {\n            // component must be the parent element of all the checkboxes\n            error = Html.span({}, $T('At least one must be selected'));\n          }\n        } else if (dataType == 'checkBox' && !exists(extraCheckFunction)) {\n          if (!allowEmpty && !component.dom.checked) {\n            error = Html.span({}, $T('Please enable the checkbox'));\n          }\n        } else if (dataType == 'radio' && !exists(extraCheckFunction)) {\n          if (!allowEmpty && !self.checkRadioButton(component)) {\n            error = Html.span({}, $T('Please choose an option'));\n          }\n        } else if (dataType == 'select' && !exists(extraCheckFunction)) {\n          if (!allowEmpty && !self.checkSelect(component)) {\n            error = Html.span({}, $T('Please choose an option'));\n          }\n        } else if (\n          dataType == 'int' &&\n          !(allowEmpty && trim(component.get()) === '') &&\n          !IndicoUtil.isInteger(component.get())\n        ) {\n          error = Html.span({}, $T('Field must be a number'));\n        } else if (\n          dataType == 'unsigned_int' &&\n          !(allowEmpty && trim(component.get()) === '') &&\n          (!IndicoUtil.isInteger(component.get()) || component.get() <= 0)\n        ) {\n          error = Html.span({}, 'Field must be a positive number');\n        } else if (\n          dataType == 'non_negative_int' &&\n          !(allowEmpty && trim(component.get()) === '') &&\n          (!IndicoUtil.isInteger(component.get()) || component.get() < 0)\n        ) {\n          error = Html.span({}, $T('Field must be a positive number'));\n        } else if (\n          dataType == 'datetime' &&\n          !(allowEmpty && trim(component.get()) === '') &&\n          !IndicoUtil.parseDateTime(component.get())\n        ) {\n          error = Html.span({}, $T('Date format is not valid. It should be dd/mm/yyyy hh:mm'));\n        } else if (\n          dataType == 'email' &&\n          !(allowEmpty && trim(component.get()) === '') &&\n          !Util.Validation.isEmailAddress(component.get())\n        ) {\n          error = Html.span({}, $T('Invalid e-mail address'));\n        } else if (\n          dataType == 'url' &&\n          !(allowEmpty && trim(component.get()) === '') &&\n          !Util.Validation.isURL(component.get())\n        ) {\n          error = Html.span({}, $T('Invalid URL'));\n        } else if (dataType == 'time' && !IndicoUtil.isTime(trim(component.get()))) {\n          error = Html.span({}, $T('Time format is not valid. It should be hh:mm'));\n        } else if (\n          !allowEmpty &&\n          component.get() != null &&\n          (!isString(component.get()) || trim(component.get()) === '')\n        ) {\n          error = Html.span({}, $T('Field is mandatory'));\n        }\n        if (exists(extraCheckFunction)) {\n          error = error || extraCheckFunction(component.get());\n        }\n        //--------------------------------\n\n        //---- Display error -------\n        if (exists(error)) {\n          hasErrors = true;\n\n          var oList;\n\n          if (component.ErrorAware) {\n            oList = component.setError(error);\n          } else if (dataType == 'checkBoxList' || dataType == 'radio' || dataType == 'select') {\n            oList = IndicoUtil.markInvalidField(component, error);\n          } else if (component.dom.type != 'radio') {\n            oList = IndicoUtil.markInvalidField(component, error);\n          } else {\n            // XXX: Is this code still used anywhere?!\n            // If yes, please add a comment where, if not let's remove it!\n            // The jQuery/qtip things here are untested btw.. if you find out where this is used, please test it. :)\n            var $label = $('#' + component.dom.id + 'Label');\n            var $component = $(component.dom);\n            $label.addClass('invalidLabel');\n            $component.addClass('invalid');\n            $component.add($label).qtip({\n              content: {\n                text: error.dom ? $(error.dom) : error,\n              },\n            });\n\n            var stopObserving = function() {\n              $component.qtip('destroy');\n              $label.qtip('destroy');\n            };\n            oList = [stopObserving]; //list of functions that we will call to stop observing events\n\n            if (!exists(radioButtonLabelStopObserving[component.dom.name])) {\n              radioButtonLabelStopObserving[component.dom.name] = [];\n            }\n            radioButtonLabelStopObserving[component.dom.name].push(stopObserving);\n\n            each($N(component.dom.name), function(component) {\n              component.observeEvent('click', function(event) {\n                each($N(component.dom.name), function(subcomponent) {\n                  $(subcomponent.dom).removeClass('invalid');\n                  $('#' + subcomponent.dom.id + 'Label').removeClass('invalidLabel');\n                });\n                if (exists(radioButtonLabelStopObserving[component.dom.name])) {\n                  each(radioButtonLabelStopObserving[component.dom.name], function(stopObserver) {\n                    stopObserver();\n                  });\n                }\n              });\n            });\n          }\n\n          if (!component.ErrorAware) {\n            eventList[component.dom.id] = oList;\n          }\n        }\n        //----------------------------\n      });\n      return !hasErrors;\n    };\n\n    this.checkRadioButton = function(component) {\n      var name = component.dom.name;\n      /*if (!exists(radioButtonChecks[name])) {\n                radioButtonChecks[name] = false;\n                var radioButtons = $N(name);\n                each (radioButtons, function(rb) {\n                    if (rb.dom.checked) {\n                        radioButtonChecks[name] = true;\n                    }\n                });\n            }\n            return radioButtonChecks[name];*/\n      var radioButtonChecks = false;\n      var radioButtons = $N(name);\n      each(radioButtons, function(rb) {\n        if (rb.dom.checked) {\n          radioButtonChecks = true;\n        }\n      });\n      return radioButtonChecks;\n    };\n\n    this.checkSelect = function(component) {\n      return component.dom.value != '';\n    };\n\n    // component must be the parent element of all the checkboxes\n    this.checkCheckBoxes = function(component) {\n      for (var i = 0; i < component.dom.childNodes.length; i++) {\n        var node = component.dom.childNodes[i];\n        if (node.type == 'checkbox' && node.checked) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Adds a form input to the list of paramters to check.\n     *  @param {Html component} component The input component\n     *  @param {String} dataType Type of the data: text, int, date, etc\n     *  @param {Boolean} allowEmpty True if the component is mandatory\n     *\n     */\n    this.add = function(component, dataType, allowEmpty, extraCheckFunction) {\n      if (component instanceof jQuery) {\n        component = $E(component[0]);\n      }\n\n      // Add new entry\n      entryList.append([component, dataType, allowEmpty, extraCheckFunction]);\n\n      // only for DOM elements\n      if (!component.ErrorAware) {\n        // Assign an auto ID, if the object has no ID (if it's a DOM element)\n        if (!component.dom.id) {\n          component.dom.id = Html.generateId();\n        }\n\n        classList[component.dom.id] = component.dom.className;\n      }\n      return component;\n    };\n\n    this.remove = function(component) {\n      if (component instanceof jQuery) {\n        component = $E(component[0]);\n      }\n\n      var removeEntry = null;\n      each(entryList, function(entry) {\n        if (entry[0] == component) {\n          removeEntry = entry;\n        }\n      });\n\n      if (removeEntry) {\n        entryList.remove(removeEntry);\n      }\n    };\n  },\n\n  /**\n   * Simple function used in sorting\n   */\n  compare: function(elem1, elem2) {\n    if (elem1 > elem2) return 1;\n    if (elem1 < elem2) return -1;\n    if (elem1 == elem2) return 0;\n  },\n};\n"},function(n,e,t){t(205)(t(1844))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'ExportIcalInterface',\n  [],\n  {\n    _getExportURLs: function(progressTarget) {\n      var self = this;\n      $.ajax({\n        url: self.getURLsMethod,\n        type: 'POST',\n        data: JSON.stringify(self.getURLsParams),\n        dataType: 'json',\n        contentType: 'application/json',\n        error: handleAjaxError,\n        complete: IndicoUI.Dialogs.Util.progress(),\n        success: function(data) {\n          self.setURLsFunction(data.urls);\n          switch (self.apiMode) {\n            case 0:\n              if (self.apiActive) {\n                self._postAcceptAgreements('#agreementApiKey' + self.id);\n              }\n              break;\n            case 1:\n              if (self.apiActive) {\n                $('#publicLinkWrapper' + self.id)\n                  .append($('#publicLink' + self.id))\n                  .show();\n                self._postAcceptAgreements('#agreementApiKey' + self.id);\n              }\n              break;\n            case 2:\n              if (self.apiActive) {\n                $('#agreementApiKey' + self.id).hide();\n                if (self.persistentUserEnabled && self.persistentAllowed) {\n                  self._postAcceptAgreements('#agreementPersistentSignatures' + self.id);\n                }\n              }\n              break;\n            case 3:\n              if (self.apiActive) {\n                $('#publicLinkWrapper' + self.id)\n                  .append($('#publicLink' + self.id))\n                  .show();\n                if (self.persistentUserEnabled && self.persistentAllowed) {\n                  self._postAcceptAgreements('#agreementPersistentSignatures' + self.id);\n                } else {\n                  $('#extraInformation' + self.id).insertAfter('#publicLinkWrapper' + self.id);\n                }\n                $('#agreementApiKey' + self.id).hide();\n              }\n              break;\n            case 4:\n              if (self.apiActive) {\n                $('#agreementApiKey' + self.id).hide();\n                if (self.persistentUserEnabled && self.persistentAllowed) {\n                  $('#publicLinkWrapper' + self.id)\n                    .append($('#publicLink' + self.id))\n                    .show();\n                  self._postAcceptAgreements('#agreementPersistentSignatures' + self.id);\n                }\n              }\n              break;\n          }\n        },\n      });\n    },\n\n    _showPrivatePanel: function(question) {\n      var self = this;\n      if (self.persistentAllowed) {\n        if (self.persistentUserEnabled) {\n          self._showAuthLink();\n        } else {\n          question =\n            question || $T('Would you like to export private information to your calendar?');\n          var privateInfo = $(\"<span class='fake-link'>\" + question + '</span>');\n\n          $('#authLinkWrapper' + self.id)\n            .append(privateInfo)\n            .show();\n\n          privateInfo.click(function() {\n            privateInfo.hide();\n            $('#exportIcalHeader' + self.id).show();\n            $('#authLinkWrapper' + self.id)\n              .append($('#agreementPersistentSignatures' + self.id))\n              .show();\n          });\n        }\n        $('#iCalSeparator' + self.id).show();\n      }\n    },\n\n    _postAcceptAgreements: function(targetAgreement) {\n      $('#authLinkWrapper' + this.id)\n        .append($('#authLink' + this.id))\n        .show();\n      $('#extraInformation' + this.id).insertAfter('#authLinkWrapper' + this.id);\n      $(targetAgreement).hide();\n    },\n\n    _showAuthLink: function() {\n      $('#exportIcalHeader' + this.id).show();\n      $('#authLinkWrapper' + this.id)\n        .append($('#authLink' + this.id))\n        .show();\n      $('#extraInformation' + this.id).insertAfter('#authLinkWrapper' + this.id);\n    },\n\n    _showAgreement: function(agreementTarget) {\n      $('#extraInformation').insertAfter('#publicLinkWrapper' + this.id);\n      $('#authLinkWrapper' + this.id)\n        .append($(agreementTarget))\n        .show();\n    },\n\n    getRequestURLs: function() {\n      return this.requestURLs;\n    },\n\n    createKey: function(enablePersistent, progressTarget) {\n      var self = this;\n      $(progressTarget).html($(progressIndicator(true, false).dom));\n      $.ajax({\n        url: Indico.Urls.APIKeyCreate,\n        method: 'POST',\n        dataType: 'json',\n        data: {\n          quiet: '1',\n          persistent: enablePersistent ? '1' : '0',\n        },\n        error: function(xhr) {\n          handleAjaxError(xhr);\n          $(progressTarget).html('');\n        },\n        success: function(data) {\n          self.apiActive = true;\n          self.persistentUserEnabled = data.is_persistent_allowed;\n          self._getExportURLs(progressTarget);\n        },\n      });\n    },\n\n    enablePersistentSignatures: function() {\n      var self = this;\n      if (self.apiActive) {\n        $.ajax({\n          url: Indico.Urls.APIKeyTogglePersistent,\n          method: 'POST',\n          dataType: 'json',\n          data: {\n            enabled: '1',\n            quiet: '1',\n          },\n          error: function(xhr) {\n            handleAjaxError(xhr);\n            $('#progressPersistentSignatures').html('');\n          },\n          success: function(data) {\n            self.persistentUserEnabled = data.enabled;\n            self._getExportURLs('progressPersistentSignatures');\n          },\n        });\n      } else {\n        self.createKey(true, '#progressPersistentSignatures');\n      }\n    },\n\n    showContent: function() {\n      var self = this;\n      self.setURLsFunction(self.requestURLs);\n      switch (self.apiMode) {\n        case 0: //Public:nothing; Private:API_KEY\n          $('#publicLinkWrapper' + self.id)\n            .append($('#publicLink' + self.id))\n            .show();\n          if (self.userLogged) {\n            if (self.apiActive) {\n              self._showAuthLink();\n            } else {\n              $('#exportIcalHeader' + self.id).show();\n              self._showAgreement('#agreementApiKey' + self.id);\n            }\n            $('#iCalSeparator' + self.id).show();\n          }\n          break;\n        case 1: //Public:API_KEY; Private:API_KEY\n          if (self.userLogged) {\n            if (self.apiActive) {\n              $('#publicLinkWrapper' + self.id)\n                .append($('#publicLink' + self.id))\n                .show();\n              self._showAuthLink();\n            } else {\n              $('#exportIcalHeader' + self.id).show();\n              $('#authLinkWrapper' + self.id)\n                .append($('#agreementApiKey' + self.id))\n                .show();\n            }\n            $('#iCalSeparator' + self.id).show();\n          }\n          break;\n        case 2: //Public:nothing; Private:SIGNED\n          $('#publicLinkWrapper' + self.id)\n            .append($('#publicLink' + self.id))\n            .show();\n          if (self.userLogged) {\n            self._showPrivatePanel();\n          } else {\n            $('#extraInformation' + self.id).insertAfter('#publicLinkWrapper' + self.id);\n          }\n          $('#iCalSeparator' + self.id).show();\n          break;\n        case 3: //Public:API_KEY; Private:SIGNED\n          if (self.userLogged) {\n            if (self.apiActive) {\n              $('#publicLinkWrapper' + self.id)\n                .append($('#publicLink' + self.id))\n                .show();\n            } else {\n              $('#publicLinkWrapper' + self.id)\n                .append($('#agreementApiKey' + self.id))\n                .show();\n            }\n            self._showPrivatePanel();\n            $('#iCalSeparator' + self.id).show();\n          }\n          break;\n        case 4: //ALL_SIGNED\n          if (self.userLogged) {\n            if (self.persistentAllowed) {\n              if (self.persistentUserEnabled) {\n                $('#publicLinkWrapper' + self.id)\n                  .append($('#publicLink' + self.id))\n                  .show();\n              }\n              self._showPrivatePanel(\n                $T(\n                  'Would you like to create a persistent URL for use with your calendaring application?'\n                )\n              );\n            }\n          }\n          break;\n      }\n    },\n  },\n  function(\n    apiMode,\n    persistentUserEnabled,\n    persistentAllowed,\n    apiActive,\n    userLogged,\n    setURLsFunction,\n    getURLsMethod,\n    getURLsParams,\n    requestURLs,\n    id,\n    userId\n  ) {\n    this.apiMode = any(apiMode, 0);\n    this.persistentUserEnabled = any(persistentUserEnabled, false);\n    this.persistentAllowed = any(persistentAllowed, false);\n    this.apiActive = any(apiActive, false);\n    this.userLogged = any(userLogged, false);\n    this.setURLsFunction = setURLsFunction;\n    this.getURLsMethod = any(getURLsMethod, '');\n    this.getURLsParams = any(getURLsParams, {});\n    this.requestURLs = any(requestURLs, {});\n    this.id = any(id, '');\n    this.userId = any(userId, '');\n\n    this.showContent();\n  }\n);\n\nvar exportPopups = {};\n\n$(document).ready(function() {\n  $('.js-export-ical').on('menu_select', function() {\n    var $button = $(this);\n\n    if ($button.hasClass('open')) {\n      return;\n    } else {\n      $button.addClass('open');\n\n      $('<a>').qtip({\n        style: {\n          width: '350px',\n          classes: 'qtip-rounded qtip-shadow qtip-popup',\n          tip: {\n            corner: true,\n            width: 20,\n            height: 15,\n          },\n        },\n        position: {\n          my: 'top center',\n          at: 'bottom center',\n          target: $button,\n        },\n        content: function(api) {\n          return $('#icalExportPopup' + $button.data('id'));\n        },\n        show: {\n          ready: true,\n          effect: function() {\n            $(this).fadeIn(300);\n          },\n        },\n        events: {\n          hide: function() {\n            $(this).fadeOut(300);\n            $button.removeClass('open');\n          },\n        },\n        hide: {\n          event: 'unfocus',\n          fixed: true,\n          target: $button,\n        },\n      });\n    }\n\n    return true;\n  });\n\n  $('body')\n    .delegate('.apiURL', 'click', function(e) {\n      $(this).select();\n    })\n    .delegate('.agreementButtonPersistent', 'click', function(e) {\n      var id = $(this).data('id');\n      $('#progressPersistentSignatures' + id).html($(progressIndicator(true, false).dom));\n      exportPopups[id].enablePersistentSignatures();\n    })\n    .delegate('.agreementButtonKey', 'click', function(e) {\n      var id = $(this).data('id');\n      exportPopups[id].createKey(false, '#progressPersistentKey' + id);\n    })\n    .delegate('.agreeCheckBoxKey', 'click', function(e) {\n      var id = $(this).data('id');\n      $('#agreementButtonKey' + id).prop('disabled', !this.checked);\n    })\n    .delegate('.agreeCheckBoxPersistent', 'click', function(e) {\n      var id = $(this).data('id');\n      $('#agreementButtonPersistent' + id).prop('disabled', !this.checked);\n      $('#agreeCheckBoxKey' + id)\n        .prop('checked', this.checked)\n        .prop('disabled', this.checked);\n      if (this.checked) {\n        $('#agreementButtonKey' + id).prop('disabled', true);\n      }\n    });\n});\n"},function(n,e,t){t(205)(t(1846))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'UnscheduledContributionList',\n  ['SelectableListWidget'],\n  {\n    draw: function() {\n      var self = this;\n      var lastSort = 'friendly_id';\n      var selectAll = Html.span('fake-link', $T('All'));\n      var selectNone = Html.span('fake-link', $T('None'));\n      var sortById = Html.span(\n        {className: 'fake-link', id: 'sortById', style: {fontWeight: 'bold'}},\n        $T('ID')\n      );\n      var sortByTitle = Html.span({className: 'fake-link', id: 'sortByTitle'}, $T('Title'));\n      var toolbar = Html.div(\n        {className: 'toolbar', style: {margin: pixels(3)}},\n        $T('Sort by: '),\n        sortById,\n        ', ',\n        sortByTitle,\n        ' ',\n        $T('Select: '),\n        selectAll,\n        ', ',\n        selectNone\n      );\n\n      sortById.observeClick(function() {\n        self._sortList('friendly_id', lastSort == 'friendly_id');\n        lastSort = 'friendly_id';\n      });\n\n      sortByTitle.observeClick(function() {\n        self._sortList('title', lastSort == 'title');\n        lastSort = 'title';\n      });\n\n      selectAll.observeClick(function() {\n        self.selectAll();\n      });\n\n      selectNone.observeClick(function() {\n        self._clearSelection();\n      });\n\n      return [toolbar, this.SelectableListWidget.prototype.draw.call(this)];\n    },\n\n    _drawItem: function(pair) {\n      var self = this;\n      var elem = pair.get(); // elem is a WatchObject\n\n      var speakers = translate(elem.get('speakerList'), function(speaker) {\n        return speaker.familyName;\n      }).join(', ');\n      var selected = false;\n\n      var id = Html.em(\n        {'data-id': elem.get('friendly_id'), 'style': {paddingLeft: '5px', fontSize: '0.9em'}},\n        elem.get('friendly_id')\n      );\n      return Html.div({}, id, ' - ', elem.get('title') + (speakers ? ' (' + speakers + ')' : ''));\n    },\n\n    _sortList: function(type, second_click) {\n      var self = this;\n      var selected = _(this.getSelectedList().getAll()).map(function(item) {\n        return item.get('id');\n      });\n      var initial = _(self.getAll());\n\n      $('#sortById').css('font-weight', type == 'friendly_id' ? 'bold' : '');\n      $('#sortByTitle').css('font-weight', type == 'title' ? 'bold' : '');\n\n      var sorted = initial\n        .chain()\n        .map(function(value, key) {\n          return {\n            key: key,\n            value: value.get(type),\n          };\n        })\n        .sortBy(function(item) {\n          return item.value;\n        });\n\n      // reverse order only if second click, else reset order\n      this.reverseState = second_click ? !this.reverseState : false;\n\n      if (this.reverseState) {\n        sorted = sorted.reverse();\n      }\n\n      // Clear selection and elements\n      self._clearSelection();\n      self.clear();\n\n      // Add sorted items\n      var counter = 0;\n      sorted.each(function(item) {\n        self.set(counter + '', initial.value()[item.key]);\n        counter++;\n      });\n\n      // Reselect items\n      each(self.domList, function(listItem) {\n        if (\n          selected.indexOf(\n            $(listItem.dom)\n              .find('em')\n              .data('id') + ''\n          ) > -1\n        ) {\n          listItem.eventObservers.click();\n        }\n      });\n    },\n\n    getList: function() {\n      return this.getSelectedList();\n    },\n\n    _clearSelection: function() {\n      var self = this;\n      self.clearSelection();\n      if (exists(self.selectedObserver)) {\n        self.selectedObserver(self.selectedList);\n      }\n    },\n  },\n  function(existing, observer) {\n    var self = this;\n\n    this.selected = new WatchList();\n    this.reverseState = false;\n    this.SelectableListWidget(observer, false, 'UnscheduledContribList');\n\n    // Sort by title and add to the list\n    each(existing, function(item, index) {\n      self.set(index, $O(item));\n    });\n    this._sortList('friendly_id');\n  }\n);\n\ntype(\n  'AddContributionDialog',\n  ['ExclusivePopupWithButtons', 'PreLoadHandler'],\n  {\n    _preload: [\n      function(hook) {\n        var self = this;\n        var args = {confId: self.args.get('conference')};\n        if (self.timetable.contextInfo.sessionSlotId) {\n          args.session_block_id = self.timetable.contextInfo.sessionSlotId;\n        }\n        if (self.timetable.isSessionTimetable) {\n          args.session_id = self.timetable.contextInfo.sessionId;\n        }\n        $.ajax({\n          url: build_url(Indico.Urls.Timetable.contributions.notScheduled, args),\n          cache: false,\n          complete: IndicoUI.Dialogs.Util.progress(),\n          error: handleAjaxError,\n          success: function(data) {\n            self.existing = $L(data.contributions);\n            self._processDialogState();\n            hook.set(true);\n          },\n        });\n      },\n    ],\n\n    _processDialogState: function() {\n      var self = this;\n      if (this.existing.length.get() === 0 && self.canCreateNew) {\n        var dialog = createObject(AddNewContributionDialog, self.newArgs);\n        dialog.draw();\n        this.open = function() {};\n      } else {\n        this.ExclusivePopupWithButtons($T('Add Contribution'), function() {\n          self.close();\n        });\n      }\n    },\n\n    addExisting: function(contributionIds, date) {\n      var self = this;\n      var urlArgs = {confId: self.args.get('conference')};\n      if (self.args.get('slot')) {\n        urlArgs.block_id = self.args.get('slot');\n      }\n      if (self.timetable.isSessionTimetable) {\n        urlArgs.session_id = self.args.get('session');\n      }\n      $.ajax({\n        url: build_url(Indico.Urls.Timetable.contributions.schedule, urlArgs),\n        data: JSON.stringify({\n          contribution_ids: contributionIds,\n          day: date,\n        }),\n        method: 'POST',\n        contentType: 'application/json',\n        complete: IndicoUI.Dialogs.Util.progress(),\n        error: handleAjaxError,\n        success: function(data) {\n          self.close();\n          if (data) {\n            handleNotifications(data);\n            self.timetable._updateDay(data.update);\n          }\n        },\n      });\n    },\n\n    existingSelectionObserver: function(selectedList) {\n      if (typeof this.saveButton == 'undefined') {\n        return;\n      }\n      if (selectedList.isEmpty()) {\n        this.saveButton.disabledButtonWithTooltip('disable');\n      } else {\n        this.saveButton.disabledButtonWithTooltip('enable');\n      }\n    },\n\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          $T('Add selected'),\n          function() {\n            var ids = translate(self.unscheduledList.getList(), function(contrib) {\n              return contrib.get('id');\n            });\n            self.addExisting(ids, self.selectedDay);\n          },\n        ],\n        [\n          $T('Close'),\n          function() {\n            self.close();\n          },\n        ],\n      ];\n    },\n\n    draw: function() {\n      var self = this;\n\n      self.unscheduledList = new UnscheduledContributionList(self.existing, function(selectedList) {\n        self.existingSelectionObserver(selectedList);\n      });\n\n      var createNewLink;\n      if (self.canCreateNew) {\n        createNewLink = Html.li(\n          {\n            style: {marginBottom: '10px'},\n          },\n          Widget.link(\n            command(function() {\n              var dialog = createObject(AddNewContributionDialog, self.newArgs);\n              self.close();\n              dialog.draw();\n            }, $T('Create a new one'))\n          )\n        );\n      }\n\n      var content = Html.div(\n        {},\n        $T('You may choose to:'),\n        Html.ul(\n          {},\n          createNewLink,\n          Html.li(\n            {},\n            $T('Choose one (or more) unscheduled'),\n            Html.div('UnscheduledContribListDiv', self.unscheduledList.draw())\n          )\n        )\n      );\n\n      this.saveButton = this.buttons.eq(0);\n      this.saveButton.disabledButtonWithTooltip({\n        tooltip: $T('To add an unscheduled contribution, please select at least one'),\n        disabled: true,\n      });\n\n      return this.ExclusivePopupWithButtons.prototype.draw.call(this, content);\n    },\n  },\n  function(args, timetable, callback, canCreateNew) {\n    var self = this;\n    this.newArgs = Array.prototype.slice.call(arguments, 0);\n    this.args = args;\n    this.selectedDay = args.get('selectedDay');\n    this.callback = callback;\n    this.timetable = timetable;\n    this.canCreateNew = canCreateNew || false;\n\n    this.PreLoadHandler(self._preload, function() {\n      self.open();\n    });\n  }\n);\n\ntype(\n  'AddNewContributionDialog',\n  [],\n  {\n    draw: function() {\n      var self = this;\n      var urlArgs = {\n        confId: self.args.get('conference'),\n        day: self.args.get('selectedDay'),\n      };\n      if (self.args.get('slot')) {\n        urlArgs.session_block_id = self.args.get('slot');\n      }\n      if (self.timetable.isSessionTimetable) {\n        urlArgs.session_id = self.args.get('session');\n      }\n      ajaxDialog({\n        url: build_url(Indico.Urls.Timetable.contributions.add, urlArgs),\n        title: $T.gettext('Add contribution'),\n        onClose: function(data) {\n          if (data) {\n            self.callback(data);\n          }\n        },\n      });\n    },\n  },\n\n  function(args, timetable, callback) {\n    var self = this;\n    this.args = clone(args);\n    this.timetable = timetable;\n    this.callback = callback;\n  }\n);\n\n/**\n * Dialog to reschedule a timetable day or an interval\n * @param {Timetable} parentTimetable The timetable object from which this dialog is launched.\n */\ntype(\n  'RescheduleDialog',\n  ['ExclusivePopupWithButtons'],\n  {\n    /**\n     * For top level timetable, returns the current day formatted as Fri 26/07\n     */\n    __getCurrentDayText: function() {\n      return this.tt._titleTemplate(this.tt.currentDay);\n    },\n\n    /**\n     * For an interval timetable, returns the title of the interval\n     */\n    __getIntervalTitle: function() {\n      if (this.tt.contextInfo.slotTitle) {\n        return '\"{0}: {1}\"'.format(this.tt.contextInfo.title, this.tt.contextInfo.slotTitle);\n      } else {\n        return '\"{0}\"'.format(this.tt.contextInfo.title);\n      }\n    },\n\n    /**\n     * Draws the step 1: choose \"starting time\" or \"duration\" as action\n     */\n    __drawChooseAction: function() {\n      var self = this;\n\n      // Step 1: choose action\n      var actionChooseTitle = Html.div(\n        'rescheduleTitle',\n        $T('Step 1: Choose type of rescheduling')\n      );\n\n      var startTimeRescheduleRB = Html.radio({\n        name: 'rescheduleAction',\n        id: 'startTimeRescheduleRB',\n        style: {verticalAlign: 'middle'},\n      });\n      var startTimeRescheduleExample = Html.a(\n        {href: Indico.Urls.ImagesBase + '/resched_ex_1.png', title: 'Starting Time Example'},\n        $T('See an example')\n      );\n      $(startTimeRescheduleExample.dom).colorbox();\n      var startTimeRescheduleLabel = Html.label(\n        {style: {fontWeight: 'normal'}},\n        Html.div('rescheduleLabelTitle', $T('Adjust starting time of all entries')),\n        Html.div(\n          'rescheduleLabelDetails',\n          this.isTopLevelTimetable\n            ? $T('Move the entries of ') + this.__getCurrentDayText() + $T(' by changing their')\n            : $T('Move the entries of the interval ') +\n                this.__getIntervalTitle() +\n                $T(' by changing their'),\n          Html.strong({}, $T(' starting times. ')),\n          this.isTopLevelTimetable\n            ? $T('The first entry will start when the event starts (') +\n                this.tt.eventInfo.startDate.time.slice(0, 5) +\n                '), '\n            : $T('The first entry will start when the interval starts (') +\n                this.tt.contextInfo.startDate.time.slice(0, 5) +\n                '), ',\n          $T(\n            'and the other entries will follow consecutively after it. The durations of the entries will not change. '\n          ),\n          startTimeRescheduleExample\n        )\n      );\n\n      startTimeRescheduleLabel.dom.htmlFor = 'startTimeRescheduleRB';\n\n      var durationRescheduleRB = Html.radio({\n        name: 'rescheduleAction',\n        id: 'durationRescheduleRB',\n        style: {verticalAlign: 'middle'},\n      });\n      var durationRescheduleExample = Html.a(\n        {href: Indico.Urls.ImagesBase + '/resched_ex_2.png', title: 'Duration Example'},\n        $T('See an example')\n      );\n      $(durationRescheduleExample.dom).colorbox();\n      var durationRescheduleLabel = Html.label(\n        {style: {fontWeight: 'normal'}},\n        Html.div('rescheduleLabelTitle', $T('Adjust duration of all entries')),\n        Html.div(\n          'rescheduleLabelDetails',\n          $T('Adjust the '),\n          Html.strong({}, $T(' duration ')),\n          $T('of the entries of '),\n          this.isTopLevelTimetable\n            ? this.__getCurrentDayText() + ','\n            : $T('the interval ') + this.__getIntervalTitle(),\n          $T(\n            \" to fill the gaps between them, so that their starting time don't change. \" +\n              'If a time gap is specified, the duration will be extended up to the value of ' +\n              'this time gap before the starting time of the next entry. '\n          ),\n          durationRescheduleExample\n        )\n      );\n\n      durationRescheduleLabel.dom.htmlFor = 'durationRescheduleRB';\n\n      var actionChoose = Html.table({\n        cellpadding: 0,\n        cellPadding: 0,\n        cellspacing: 0,\n        cellSpacing: 0,\n      });\n      var actionChooseTbody = Html.tbody();\n\n      var startTimeRescheduleTr = Html.tr();\n      startTimeRescheduleTr.append(Html.td('rescheduleAction', startTimeRescheduleRB));\n      startTimeRescheduleTr.append(\n        Html.td(\n          {className: 'rescheduleAction', style: {paddingRight: pixels(5)}},\n          startTimeRescheduleLabel\n        )\n      );\n      actionChooseTbody.append(startTimeRescheduleTr);\n\n      var durationRescheduleTr = Html.tr();\n      durationRescheduleTr.append(Html.td('rescheduleAction', durationRescheduleRB));\n      durationRescheduleTr.append(\n        Html.td(\n          {className: 'rescheduleAction', style: {paddingRight: pixels(5)}},\n          durationRescheduleLabel\n        )\n      );\n      actionChooseTbody.append(durationRescheduleTr);\n\n      actionChoose.append(actionChooseTbody);\n\n      startTimeRescheduleRB.observeClick(function() {\n        if (self.rescheduleAction == 'time') {\n          if (self.fitInnerAction == 'noFit') {\n            self.rescheduleButton.disabledButtonWithTooltip('disable');\n          }\n          self.rescheduleAction = 'none';\n          startTimeRescheduleTr.dom.className = '';\n          startTimeRescheduleRB.dom.checked = false;\n        } else {\n          self.rescheduleButton.disabledButtonWithTooltip('enable');\n          self.rescheduleAction = 'time';\n          startTimeRescheduleTr.dom.className = 'selectedAction';\n          durationRescheduleTr.dom.className = '';\n        }\n      });\n      durationRescheduleRB.observeClick(function() {\n        if (self.rescheduleAction == 'duration') {\n          if (self.fitInnerAction == 'noFit') {\n            self.rescheduleButton.disabledButtonWithTooltip('disable');\n          }\n          self.rescheduleAction = 'none';\n          durationRescheduleTr.dom.className = '';\n          durationRescheduleRB.dom.checked = false;\n        } else {\n          self.rescheduleButton.disabledButtonWithTooltip('enable');\n          self.rescheduleAction = 'duration';\n          durationRescheduleTr.dom.className = 'selectedAction';\n          startTimeRescheduleTr.dom.className = '';\n        }\n      });\n\n      return Html.div('rescheduleSection', actionChooseTitle, actionChoose);\n    },\n\n    /**\n     * Draws the step 2: choose gap between entries\n     */\n    __drawChooseInterval: function() {\n      var self = this;\n      // Step 2: choose interval between entries\n      var intervalTitle = Html.div(\n        'rescheduleTitle',\n        $T('Step 2: Choose time gap between entries')\n      );\n\n      this.minuteInput = Html.input(\n        'text',\n        {style: {width: '3em', textAlign: 'right', marginTop: pixels(5), marginBottom: pixels(5)}},\n        '0'\n      );\n      var timeInputLabel = Html.span({style: {marginLeft: pixels(5)}}, '(minutes)');\n      var intervalInputDiv = Html.div(\n        {style: {textAlign: 'center'}},\n        this.minuteInput,\n        timeInputLabel\n      );\n\n      this.intervalExplanationDiv = Html.div();\n\n      this.minuteInput.observeEvent('change', function(event) {\n        self.__intervalObserver();\n      });\n\n      return Html.div(\n        'rescheduleSection',\n        intervalTitle,\n        intervalInputDiv,\n        this.intervalExplanationDiv\n      );\n    },\n\n    /**\n     * Draws the step 3: choose whether to fit the inner entries or not\n     */\n    __drawFitInner: function() {\n      var self = this;\n      // Step 3: choose to fit or not the inner entries\n      var fitInnerTitle = Html.div(\n        'rescheduleTitle',\n        $T('Step 3: Choose to fit sessions to their content')\n      );\n\n      this.fitInnerCheckBox = Html.checkbox({}, false);\n      this.fitInnerCheckBox.dom.name = 'fitInnerCheckBox';\n\n      var fitInnerLabel = Html.label(\n        {htmlFor: 'fitInnerCheckBox', className: 'rescheduleLabelTitle'},\n        'Fit all the sessions contained on ' + this.__getCurrentDayText() + ' to their content.'\n      );\n      var fitInnerDiv = Html.div(\n        {style: {textAlign: 'center'}},\n        this.fitInnerCheckBox,\n        fitInnerLabel\n      );\n\n      this.fitInnerExplanationDiv = Html.div({\n        className: 'rescheduleLabelDetails',\n        style: {paddingLeft: pixels(30), paddingTop: pixels(8)},\n      });\n      this.fitInnerExplanationDiv.set(\n        $T(\n          'This changes the start and end times of the session blocks occuring on ' +\n            this.__getCurrentDayText() +\n            ' in order to fit their respective content '\n        ),\n        Html.strong({}, $T('before')),\n        $T(' performing the rescheduling.')\n      );\n\n      this.fitInnerCheckBox.observeEvent('change', function(event) {\n        self.__fitInnerObserver();\n      });\n\n      return Html.div('fitInnerSection', fitInnerTitle, fitInnerDiv, this.fitInnerExplanationDiv);\n    },\n\n    /**\n     * Function that will be called when the gap between entries changes\n     */\n    __intervalObserver: function() {\n      var minutes = this.minuteInput.get();\n\n      var errors = false;\n      if (!IndicoUtil.isInteger(minutes) || minutes < 0) {\n        return;\n      }\n\n      minutes = parseInt(minutes, 10);\n\n      if (minutes === 0) {\n        this.intervalExplanationDiv.set($T('There will be no gaps between consecutive entries.'));\n      } else {\n        var h = Math.floor(minutes / 60);\n        var m = minutes % 60;\n\n        var intervalExplanationText = $T('Entries will be separated by gaps of ');\n        if (h === 1) {\n          intervalExplanationText += $T('1 hour ');\n        } else if (h > 0) {\n          intervalExplanationText += h + $T(' hours ');\n        }\n\n        if (h !== 0 && m !== 0) {\n          intervalExplanationText += $T('and ');\n        }\n\n        if (m === 1) {\n          intervalExplanationText += $T('1 minute.');\n        } else if (m > 0) {\n          intervalExplanationText += m + $T(' minutes.');\n        }\n\n        this.intervalExplanationDiv.set(intervalExplanationText);\n      }\n    },\n\n    /**\n     * Function that will be called when the 'Fit checkbox' gets checked/unchecked\n     */\n    __fitInnerObserver: function() {\n      var checked = this.fitInnerCheckBox.get();\n\n      if (checked) {\n        this.rescheduleButton.disabledButtonWithTooltip('enable');\n        this.fitInnerAction = 'doFit';\n      } else {\n        if (this.rescheduleAction == 'none') {\n          this.rescheduleButton.disabledButtonWithTooltip('disable');\n        }\n        this.fitInnerAction = 'noFit';\n      }\n    },\n\n    _getButtons: function() {\n      var self = this;\n      return [\n        [\n          $T('Reschedule'),\n          function() {\n            self.__reschedule();\n          },\n        ],\n        [\n          $T('Cancel'),\n          function() {\n            self.close();\n          },\n        ],\n      ];\n    },\n\n    /**\n     * Builds the parameter manager that checks validity of fields\n     */\n    __buildParameterManager: function() {\n      this.parameterManager = new IndicoUtil.parameterManager();\n      this.parameterManager.add(this.minuteInput, 'non_negative_int', false);\n    },\n\n    /**\n     * Function called when the user presses the reschedule button\n     */\n    __reschedule: function() {\n      var self = this;\n\n      if (this.parameterManager.check()) {\n        var confirmHandler = function(confirm) {\n          if (!confirm) {\n            return;\n          }\n          var urlArgs = {confId: self.tt.eventInfo.id};\n          var data = {\n            mode: self.rescheduleAction,\n            gap: +self.minuteInput.get(),\n            day: self.tt.currentDay,\n            fit_blocks: self.fitInnerAction == 'doFit',\n          };\n          if (self.isIntervalTimetable) {\n            data.session_block_id = self.tt.contextInfo.sessionSlotId;\n          } else if (self.isTopLevelTimetable && exists(self.tt.contextInfo.timetableSession)) {\n            data.session_id = self.tt.contextInfo.timetableSession.id;\n          }\n          if (self.tt.isSessionTimetable) {\n            urlArgs.session_id = self.tt.contextInfo.sessionId.toString();\n          }\n          $.ajax({\n            url: build_url(Indico.Urls.Timetable.reschedule, urlArgs),\n            method: 'POST',\n            data: JSON.stringify(data),\n            contentType: 'application/json',\n            complete: IndicoUI.Dialogs.Util.progress($T.gettext('Rescheduling...')),\n            error: handleAjaxError,\n            success: function() {\n              location.reload();\n            },\n          });\n        };\n\n        var confirmText = Html.div(\n          {},\n          Html.div(\n            {},\n            $T(\n              'Are you sure you want to reschedule entries ' +\n                (this.isTopLevelTimetable\n                  ? 'on ' + this.__getCurrentDayText()\n                  : 'of the interval ' + this.__getIntervalTitle()) +\n                '?'\n            )\n          ),\n          Html.div(\n            {},\n            this.fitInnerAction === 'doFit'\n              ? $T('The entries that are part of a session will')\n              : '',\n            this.fitInnerAction === 'doFit'\n              ? this.rescheduleAction === 'none'\n                ? ''\n                : $T(' first')\n              : '',\n            this.fitInnerAction === 'doFit' ? $T(' be fitted to their content.') : ''\n          ),\n          this.rescheduleAction === 'none'\n            ? Html.div({}, '')\n            : Html.div(\n                {},\n                this.fitInnerAction === 'doFit' ? $T('Then, all entries ') : $T('All entries '),\n                $T(' will have their '),\n                this.rescheduleAction === 'time' ? $T('starting times') : $T('duration'),\n                $T(' changed.')\n              ),\n          Html.br(),\n          Html.div('rescheduleWarning', 'This change cannot be undone.')\n        );\n\n        var confirmPopup = new ConfirmPopup(\n          $T('Please review your choice'),\n          confirmText,\n          confirmHandler\n        );\n        confirmPopup.open();\n      }\n    },\n\n    /**\n     * Draw the dialog\n     */\n    draw: function() {\n      var self = this;\n\n      this.rescheduleButton = this.buttons.eq(0);\n      this.rescheduleButton.disabledButtonWithTooltip({\n        tooltip: $T('Please select the rescheduling type'),\n        disabled: true,\n      });\n      var actionChooseDiv = this.__drawChooseAction();\n      var intervalDiv = this.__drawChooseInterval();\n      var actionFitDiv = '';\n      if (this.isTopLevelTimetable) {\n        actionFitDiv = this.__drawFitInner();\n      }\n\n      this.mainContent = Html.div(\n        {style: {width: pixels(450)}},\n        actionChooseDiv,\n        intervalDiv,\n        actionFitDiv\n      );\n\n      this.__intervalObserver();\n      if (this.isTopLevelTimetable) {\n        this.__fitInnerObserver();\n      }\n      this.__buildParameterManager();\n\n      return this.ExclusivePopupWithButtons.prototype.draw.call(this, this.mainContent);\n    },\n  },\n  /**\n   * Constructor\n   */\n  function(parentTimetable) {\n    this.ExclusivePopupWithButtons($T('Reschedule Entries'));\n    this.tt = parentTimetable;\n\n    this.isTopLevelTimetable = exists(this.tt.TopLevelManagementTimeTable);\n    this.isIntervalTimetable = exists(this.tt.IntervalManagementTimeTable);\n\n    this.rescheduleAction = 'none';\n    this.timeInput = null;\n    this.fitInnerAction = 'noFit';\n    this.rescheduleButton = null;\n  }\n);\n\n/**\n * Dialog to fit a session\n * @param {Timetable} parentTimetable The timetable object from which this dialog is launched.\n */\ntype(\n  'FitInnerTimetableDialog',\n  ['ConfirmPopup'],\n  {\n    /**\n     * Returns the title of the session block\n     */\n    __generateSessionBlockTitle: function() {\n      if (this.tt.contextInfo.slotTitle) {\n        return '\"{0}: {1}\"'.format(this.tt.contextInfo.title, this.tt.contextInfo.slotTitle);\n      } else {\n        return '\"{0}\"'.format(this.tt.contextInfo.title);\n      }\n    },\n\n    /**\n     * Builds the content for the ConfirmPopup\n     */\n    __getContent: function() {\n      var msg = $T.gettext(\n        'This will change the starting and ending times of the session block {0} so that it encompasses all entries defined in its timetable.'\n      );\n      return Html.div(\n        'fitInnerTimetableDialog',\n        msg.format(this.__generateSessionBlockTitle()),\n        Html.br(),\n        $T.gettext('Are you sure you want to proceed?')\n      );\n    },\n\n    /**\n     * Handler when the user closes or presses OK / Cancel\n     */\n    __handler: function(confirm) {\n      var self = this;\n      if (!confirm || !this.tt.IntervalManagementTimeTable) {\n        return;\n      }\n      var urlArgs = {\n        confId: self.tt.contextInfo.conferenceId,\n        block_id: self.tt.contextInfo.sessionSlotId,\n      };\n      if (self.tt.isSessionTimetable) {\n        urlArgs.session_id = self.tt.contextInfo.sessionId;\n      }\n      $.ajax({\n        url: build_url(Indico.Urls.Timetable.sessionBlocks.fit, urlArgs),\n        method: 'POST',\n        complete: IndicoUI.Dialogs.Util.progress($T.gettext('Fitting...')),\n        error: handleAjaxError,\n        success: function() {\n          location.reload();\n        },\n      });\n    },\n  },\n\n  /**\n   * Constructor\n   */\n  function(parentTimetable) {\n    this.tt = parentTimetable;\n    this.ConfirmPopup($T('Fit timetable to content'), this.__getContent(), this.__handler);\n  }\n);\n\ntype(\n  'SessionSectionPopupMenu',\n  ['SectionPopupMenu'],\n  {\n    _processItem: function(pair) {\n      var self = this;\n      var value = pair.get();\n      var color = null;\n      var title = null;\n\n      if (exists(value.title)) {\n        title = value.title;\n      } else {\n        title = pair.key;\n      }\n\n      if (exists(value.color)) {\n        color = value.color;\n        value = value.func;\n      }\n\n      var colorSquare = null;\n      if (color !== null) {\n        colorSquare = Html.div({\n          style: {\n            backgroundColor: color,\n            color: color,\n            cssFloat: 'right',\n            width: '15px',\n            height: '15px',\n          },\n        });\n      }\n\n      var link = Html.a(\n        {\n          className: 'fake-link',\n          style: {display: 'inline', padding: 0, paddingLeft: '4px', paddingRight: '4px'},\n        },\n        Util.truncate(title)\n      );\n      var divInput = Html.div({style: {height: '20px', overflow: 'auto'}}, colorSquare, link);\n\n      if (typeof value == 'string') {\n        link.setAttribute('href', value);\n        if (self.closeOnClick) {\n          link.observeClick(function() {\n            self.close();\n          });\n        }\n      } else {\n        link.observeClick(\n          value.PopupWidget\n            ? function(e) {\n                if (self.selected) {\n                  self.selected.dom.className = null;\n                  self.selected = null;\n                }\n\n                link.dom.className = 'selected';\n                self.selected = link;\n\n                var pos = listItem.getAbsolutePosition();\n\n                each(self.items, function(item, key) {\n                  if (item.PopupWidget && item.isOpen()) {\n                    item.close();\n                  }\n                });\n\n                value.open(pos.x + (value.alignRight ? 0 : link.dom.offsetWidth), pos.y - 1);\n\n                return false;\n              }\n            : function() {\n                // assume it's a callback function\n                value(self);\n                if (self.closeOnClick) {\n                  self.close();\n                }\n              }\n        );\n      }\n\n      var listItem = Html.li({}, divInput);\n      return listItem;\n    },\n  },\n\n  function(items, chainElements, cssClass, closeOnClick, alignRight, closeHandler) {\n    this.SectionPopupMenu(items, chainElements, cssClass, closeOnClick, alignRight, closeHandler);\n  }\n);\n"},function(n,e,t){t(205)(t(1848))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n// Filters - User Interface\n\ntype(\n  'TimetableFilterList',\n  ['CheckPopupWidget'],\n  {\n    draw: function(x, y) {\n      return this.CheckPopupWidget.prototype.draw.call(this, x, y, 300, {\n        position: 'fixed',\n        left: pixels(x),\n        bottom: pixels(y),\n      });\n    },\n  },\n  function(filterName, timetableDrawer, chainElements, noOptionsMessage) {\n    var filterObject = TimetableDefaults.filters[filterName].filter;\n    var optionStates = filterObject.getOptionStates();\n    var optionNames = filterObject.getOptionNames();\n    var optionColors = filterObject.getOptionColors();\n    var optionTextColors = filterObject.getOptionTextColors();\n\n    optionStates.observe(function() {\n      if (!timetableDrawer.preventRedraw) timetableDrawer.setLoading(true, timetableDrawer.redraw);\n    });\n\n    this.CheckPopupWidget(\n      optionNames,\n      optionStates,\n      optionColors,\n      optionTextColors,\n      chainElements,\n      noOptionsMessage\n    );\n  }\n);\n\ntype(\n  'TimetableFilterMenu',\n  ['PopupMenu'],\n  {},\n\n  function(triggerElement, timetableDrawer) {\n    var menu = {};\n    var self = this;\n\n    // build a dictionary that represents the menu\n    each(TimetableDefaults.filters, function(value, key) {\n      // each entry will present a list of filters\n      menu[value.name] = new TimetableFilterList(\n        key,\n        timetableDrawer,\n        [triggerElement, self],\n        'No ' + key + 's found'\n      );\n    });\n\n    this.PopupMenu(menu, [triggerElement]);\n    this.timetableDrawer = timetableDrawer;\n  }\n);\n\n// Filter definitions - Core\n\ntype(\n  'Filter',\n  [],\n  {\n    getOptionNames: function() {\n      return this.options;\n    },\n\n    getOptionStates: function() {\n      return this.optionStates;\n    },\n\n    getOptionColors: function() {\n      return this.optionColors;\n    },\n\n    getOptionTextColors: function() {\n      return this.optionTextColors;\n    },\n\n    setData: function(data, day) {\n      this.data = data;\n      this.day = day;\n      this.computeOptions();\n    },\n\n    computeOptions: function() {\n      var self = this;\n\n      this.options.clear();\n      this.optionStates.clear();\n\n      var dayData = this.data[this.day];\n      if (this.day == 'all') {\n        each(this.data, function(dayData, day) {\n          each(dayData, function(entryData, entry) {\n            self.processEvent(entryData, entry);\n          });\n        });\n      } else {\n        each(dayData, function(entryData, entry) {\n          self.processEvent(entryData, entry);\n        });\n      }\n    },\n    reset: function() {\n      var self = this;\n      each(this.options, function(value, id) {\n        self.resetEvent(id);\n      });\n    },\n  },\n  function() {\n    this.options = new WatchObject();\n    this.optionStates = new WatchObject();\n    this.optionColors = new WatchObject();\n    this.optionTextColors = new WatchObject();\n  }\n);\n\ntype(\n  'SessionFilter',\n  ['Filter'],\n  {\n    apply: function(event) {\n      var show = true;\n      this.optionStates.each(function(value, key) {\n        if (event.entryType == 'Session' && key == event.sessionId) {\n          if (!value) {\n            show = false;\n          }\n        }\n      });\n      return show;\n    },\n\n    processEvent: function(entryData, entry) {\n      var self = this;\n      if (entryData.entryType == 'Session') {\n        self.options.set(entryData.sessionId, entryData.title);\n        self.optionStates.set(entryData.sessionId, true);\n        self.optionColors.set(entryData.sessionId, entryData.color);\n        self.optionTextColors.set(entryData.sessionId, entryData.textColor);\n      }\n    },\n\n    resetEvent: function(entry) {\n      this.optionStates.set(entry, true);\n    },\n  },\n  function() {\n    this.Filter();\n  }\n);\n\ntype(\n  'RoomFilter',\n  ['Filter'],\n  {\n    apply: function(event) {\n      var show = true;\n      this.optionStates.each(function(value, key) {\n        if (event.room == key) {\n          if (!value) {\n            show = false;\n          }\n        }\n      });\n      return show;\n    },\n\n    processEvent: function(entryData, entry) {\n      var self = this;\n      if (exists(entryData.room) && trim(entryData.room) !== '') {\n        self.options.set(entryData.room, entryData.room);\n        self.optionStates.set(entryData.room, true);\n      }\n    },\n\n    resetEvent: function(entry) {\n      this.optionStates.set(entry, true);\n    },\n  },\n  function() {\n    this.Filter();\n  }\n);\n\ntype(\n  'TimeTableFilter',\n  ['IWidget'],\n  {\n    draw: function() {\n      var self = this;\n\n      var content = Html.div('content clearfix');\n\n      var closeButton = Html.div('closeButton');\n      closeButton.observeClick(function(e) {\n        if (self.closeHandler()) self.show(false);\n      });\n      content.append(closeButton);\n\n      this.tableRow = Html.tr();\n      content.append(\n        Html.table({cellPadding: 0, cellSpacing: 1, border: 0}, Html.tbody({}, this.tableRow))\n      );\n\n      var sessionsLink = Html.span('i-button borderless dropup-menu', $T('Sessions'));\n      var sessionsMenu = new TimetableFilterList(\n        'session',\n        self.timetableDrawer,\n        [sessionsLink],\n        $T('No sessions in the timetable')\n      );\n      this.setUpFilterMenu(sessionsLink, sessionsMenu);\n\n      var roomsLink = Html.span('i-button borderless dropup-menu', $T('Rooms'));\n      var roomsMenu = new TimetableFilterList(\n        'room',\n        self.timetableDrawer,\n        [roomsLink],\n        $T('No rooms found in the timetable')\n      );\n      this.setUpFilterMenu(roomsLink, roomsMenu);\n\n      this.tableRow.insert(\n        Html.td({style: {width: '90px', color: '#777', fontWeight: 'bold'}}, $T('Filter options'))\n      );\n\n      var resetButton = Html.input(\n        'button',\n        {style: {cssFloat: 'right', marginRight: '50px'}},\n        $T('Reset filter')\n      );\n      resetButton.observeClick(function() {\n        each(TimetableDefaults.filters, function(TTfilter) {\n          TTfilter.filter.reset();\n        });\n      });\n\n      this.tableRow.append(Html.td({style: {width: 'auto'}}, resetButton));\n\n      this.div.append(content);\n\n      this.height = $(self.div.dom).height();\n\n      // Hide it by default\n      this.div.dom.style.display = 'none';\n    },\n    setUpFilterMenu: function(link, menu) {\n      var self = this;\n\n      this.tableRow.append(Html.td({}, link));\n\n      link.observeClick(function() {\n        if (menu.active) {\n          menu.close();\n          return;\n        }\n        var pos = link.getAbsolutePosition();\n        menu.open(pos.x - 30, self.height);\n      });\n    },\n    show: function(show) {\n      this.state.set(!this.state.get());\n      if (show) $(this.div.dom).slideDown(200);\n      else $(this.div.dom).slideUp(200);\n    },\n    toggle: function() {\n      this.show(!this.state.get());\n    },\n  },\n  function(timetableDrawer, closeHandler) {\n    var self = this;\n\n    this.timetableDrawer = timetableDrawer;\n    this.closeHandler = closeHandler;\n\n    this.state = new WatchValue(false);\n\n    this.div = Html.div({className: 'timetableFilter', style: {display: 'none'}});\n    $E(document.body).append(this.div);\n  }\n);\n"},function(n,e,t){t(205)(t(1850))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype('TimetableLayoutManager', [], {\n  _buildCheckpointTable: function(data) {\n    /* Checkpoints are time points where events either start or end */\n    var checkpoints = {};\n    var addCheckpoint = function(key, time, type, sessionId, sessionSlotId) {\n      if (!checkpoints[time]) {\n        checkpoints[time] = [];\n      }\n      checkpoints[time].push([key, type, sessionId, sessionSlotId]);\n    };\n\n    // Enforce key ordering\n    // In case we are dealing with structures that are inside a session,\n    // and have a non-null sessionCode, use it for ordering\n    var orderedKeys = keys(data);\n\n    orderedKeys.sort(function(e1, e2) {\n      // if there's a session code\n      if (exists(data[e1].sessionCode) && exists(data[e2].sessionCode)) {\n        var byCode = SortCriteria.Integer(data[e1].sessionCode, data[e2].sessionCode);\n        if (byCode != 0) {\n          return byCode;\n        }\n      }\n\n      // default behavior\n      return SortCriteria.Integer(e1, e2);\n    });\n\n    each(orderedKeys, function(key) {\n      var value = data[key];\n      var sTime = value.startDate.time.replace(/:/g, '');\n      var eTime = value.endDate.time.replace(/:/g, '');\n\n      // If a poster session with a duration of > 7h then don't place\n      // it in the grid but rather on the top as a whole day event\n      if (value.isPoster && value.duration > TimetableDefaults.wholeDay * 60) {\n        addCheckpoint(key, sTime, 'wholeday', value.sessionId, value.sessionSlotId);\n      } else {\n        addCheckpoint(key, sTime, 'start', value.sessionId, value.sessionSlotId);\n\n        if (eTime >= sTime) {\n          addCheckpoint(key, eTime, 'end');\n        } else if (eTime == '000000') {\n          addCheckpoint(key, '240000', 'end');\n        } else {\n          addCheckpoint(key, 'nextday', 'end');\n        }\n      }\n    });\n    this.checkpoints = checkpoints;\n    return checkpoints;\n  },\n\n  pointsBetween: function(hStart, hEnd) {\n    var result = [];\n\n    each(this.checkpoints, function(points, time) {\n      if (\n        (hStart == 'nextday' && time == 'nextday') ||\n        (hStart != 'nextday' && time > hStart && time < hEnd)\n      ) {\n        result = concat(result, points);\n      }\n    });\n\n    return result;\n  },\n\n  assign: function(assigned, block) {\n    var ks = keys(assigned);\n    ks.sort();\n\n    for (var key in ks) {\n      if (!assigned[key]) {\n        block.assigned = parseInt(key, 10);\n        assigned[key] = block;\n        return;\n      }\n    }\n\n    // nothing assigned in cycle\n    // add a new key\n    var newElem = ks.length;\n    block.assigned = parseInt(newElem, 10);\n    assigned[newElem] = block;\n  },\n\n  reorderAssigned: function(assigned, lastAssigned, currentGroup, currentPos) {\n    var getLastAssignedId = function(block) {\n      return '{0}l{1}'.format(block.sessionId, block.sessionSlotId);\n    };\n\n    var correctlyAssigned = function(block) {\n      return (\n        lastAssigned[getLastAssignedId(block)] &&\n        lastAssigned[getLastAssignedId(block)].col === block.assigned\n      );\n    };\n\n    // Returns number of previously processed session slots\n    var numAssignedBlocks = function(sessionId) {\n      return keys(lastAssigned[sessionId].blocks).length;\n    };\n\n    // Adds/updates a block in the lastAssigned dictionary\n    var lastAssign = function(block, col) {\n      if (!lastAssigned[getLastAssignedId(block)]) {\n        lastAssigned[getLastAssignedId(block)] = {blocks: {}};\n      }\n      var lastAssignedCol = lastAssigned[getLastAssignedId(block)].col || -1;\n      if (!isNaN(parseInt(col, 10)) && col > lastAssignedCol) {\n        lastAssigned[getLastAssignedId(block)].col = col;\n      }\n      lastAssigned[getLastAssignedId(block)].blocks[block.id] = true;\n    };\n\n    // Changes the column of a block\n    var reassign = function(block, col) {\n      assigned[block.assigned] = null;\n      block.assigned = parseInt(col, 10);\n      assigned[parseInt(col, 10)] = block;\n      lastAssign(block, parseInt(col, 10));\n    };\n\n    var swap_columns = function(block1, block2) {\n      var block1_old_col = block1.assigned;\n      reassign(block1, block2.assigned);\n      reassign(block2, block1_old_col);\n      assigned[block1.assigned] = block1;\n    };\n\n    for (var key in currentGroup) {\n      var block = currentGroup[key];\n\n      // If this is not a session slot (that is a block\n      // that has sessionId set) then we don't care about in\n      // which column it is placed\n      if (!exists(block.sessionId)) {\n        continue;\n      }\n\n      if (exists(lastAssigned[getLastAssignedId(block)])) {\n        lastAssign(block);\n      } else {\n        // This block has never been assigned before. Just update the lastAssigned.\n        lastAssign(block, block.assigned);\n        continue;\n      }\n\n      if (correctlyAssigned(block)) {\n        // The block has already got its prefered position\n        continue;\n      }\n\n      var preferedCol = lastAssigned[getLastAssignedId(block)].col;\n      var existingBlock = assigned[preferedCol];\n\n      // If there's no block on the prefered column\n      if (!existingBlock) {\n        // if the block starts at the current position, it is safe to move it to a free place\n        // otherwise we can overlap an exisiting one\n        if (block.start == currentPos && preferedCol < _(assigned).size()) {\n          reassign(block, preferedCol);\n        }\n      } else if (\n        !exists(existingBlock.sessionId) ||\n        !exists(lastAssigned[existingBlock.sessionId]) ||\n        numAssignedBlocks(block.sessionId) > numAssignedBlocks(existingBlock.sessionId)\n      ) {\n        // The block currently placed in the prefered column has either no prefered column\n        // or has a preferred column but has fewer previous placed session slots (this\n        // gives lower priority).\n\n        // Only do the swap if the existing block starts at the same time\n        // otherwise there might be overlapping blocks. Is there a better way\n        // to handle this so that this check is not needed?\n        if (existingBlock.start == block.start) {\n          swap_columns(existingBlock, block);\n        }\n      }\n    }\n  },\n\n  getBlock: function(blocks, key) {\n    var block;\n    if (blocks[key]) {\n      block = blocks[key];\n    } else {\n      block = blocks[key] = {id: key, collapsed: false};\n    }\n\n    return block;\n  },\n\n  addWholeDayBlock: function(blocks, key) {\n    blocks[key] = {id: key};\n  },\n\n  getNumColumnsForGroup: function(group) {\n    return group[1];\n  },\n\n  getHeader: function() {\n    return null;\n  },\n\n  shouldShowRoom: function() {\n    return true;\n  },\n  reorderColumns: function(group) {},\n});\n\ntype('IncrementalLayoutManager', ['TimetableLayoutManager'], {\n  name: 'incremental',\n  drawDay: function(data, detailLevel, startTime, endTime, managementMode) {\n    var self = this;\n\n    this.eventData = data;\n\n    this.detailLevel = any(detailLevel, 'session');\n\n    var checkpoints = this._buildCheckpointTable(data);\n\n    var ks = keys(checkpoints);\n    ks.sort();\n    managementMode = any(managementMode, true);\n    var startingHour, endingHour;\n    if (ks.length > 1) {\n      startingHour = parseInt(ks[0].substring(0, 2), 10);\n\n      var last = ks.length - 1;\n\n      // account for 'nextday' entries\n      while (!endingHour && last >= 0) {\n        endingHour = parseInt(ks[last].substring(0, 2), 10);\n        last--;\n      }\n    } else {\n      startingHour = parseInt(any(startTime, '8:00').split(':')[0], 10);\n      endingHour = parseInt(any(endTime, '17:00').split(':')[0], 10);\n    }\n\n    var endMin;\n\n    var algData = {\n      grid: [], // Positions of all the time lines\n      assigned: {}, // colums bound to blocks\n      blocks: {}, // Dict of blocks\n      active: 0, // number of of active time blocks\n      currentGroup: [], // current processed group\n      topPx: 0, // counter when iterating from top to bottom of timetable\n      groups: [], // Isolated group of timetable blocks (all blocks in parallel)\n      extraPx: {}, // Used for increasing the pixels for time blocks. Used when a time\n      // time table block needs extra space.\n      lastAssigned: {}, // Remembers to what column a session has been assigned before\n      // makes it possible align sessions under each other\n      wholeDayBlocks: {}, // All the block that should be shown as spanning the whole day,\n      // i.e. a poster session.\n    };\n\n    var hEnd;\n\n    if (managementMode) {\n      //add hour before start if we are in management mode\n      if (startingHour > 0) {\n        for (var min = 0; min < 60; min += TimetableDefaults.resolution) {\n          self.processTimeBlock(\n            startingHour - 1,\n            startingHour,\n            (startingHour - 1) * 60,\n            min,\n            algData\n          );\n        }\n      }\n    }\n\n    for (\n      var minutes = 0;\n      minutes < (endingHour + 1 - startingHour) * 60;\n      minutes += TimetableDefaults.resolution\n    ) {\n      // current block is [minutes, minutes + 5]\n      var startMin = startingHour * 60 + minutes;\n      endMin = startingHour * 60 + minutes + TimetableDefaults.resolution;\n      var hStart = zeropad(parseInt(startMin / 60, 10)) + '' + zeropad(startMin % 60);\n      hEnd = zeropad(parseInt(endMin / 60, 10)) + '' + zeropad(endMin % 60);\n\n      self.processTimeBlock(hStart, hEnd, startMin, minutes, algData);\n    }\n\n    if ($L(ks).indexOf('nextday') !== null) {\n      self.processTimeBlock('nextday', 'nextday', startingHour * 60 + minutes, minutes, algData);\n    } else if (endMin / 60 < 25 && managementMode) {\n      // add last hour + 1 to the grid\n      // (only if the next hour is not after midnight)\n      algData.grid.push([(endMin / 60) % 24, algData.topPx]);\n    }\n\n    var counter = 0;\n    each(algData.groups, function(group) {\n      self.reorderColumns(group[0]);\n      each(group[0], function(block) {\n        block.group = counter;\n      });\n      counter++;\n    });\n\n    return [algData.topPx, algData.grid, algData.blocks, algData.groups, algData.wholeDayBlocks];\n  },\n});\n\ntype('CompactLayoutManager', ['IncrementalLayoutManager'], {\n  name: 'compact',\n  processTimeBlock: function(hStart, hEnd, startMin, minutes, algData) {\n    var self = this;\n\n    // get all the checkpoints in [hStart, hEnd]\n    var points = self.pointsBetween(hStart, hEnd);\n    var incrementPx = 0;\n\n    var block;\n    var smallBlockList = [];\n\n    var pxStep = Math.floor(\n      (TimetableDefaults.layouts.compact.values.pxPerHour * TimetableDefaults.resolution) / 60\n    );\n\n    var endPoints = [];\n\n    each(points, function(point) {\n      if (point[1] == 'end') {\n        block = self.getBlock(algData.blocks, point[0]);\n\n        block.end = algData.topPx;\n        if (algData.assigned[block.assigned]) {\n          algData.active--;\n          // this means it has been started in a previous timeslot\n          algData.assigned[block.assigned] = null;\n\n          // diff: how much does it take for the block to reach\n          // the minimum size?\n          var diff =\n            TimetableDefaults.layouts.compact.values.minPxPerBlock - (block.end - block.start);\n\n          if (diff > 0) {\n            // increase it by diff\n            block.end += diff;\n            incrementPx = diff > incrementPx ? diff : incrementPx;\n            algData.topPx += incrementPx;\n          }\n\n          // check if block goes beyond the timetable limits\n          // (ends after midnight)\n          if (hStart == 'nextday') {\n            // mark it as 'unfinished' and add an extra space\n            block.end += hStart == 'nextday' ? 20 : 0;\n            block.unfinished = true;\n          }\n\n          // save reference for all blocks that end here, will use it below\n          endPoints.push(block);\n        } else {\n          // otherwise, it is ending just before it starts:\n          // this means that the duration is less than our \"resolution\"\n          // so, let's add it to smallBlockList\n          smallBlockList.push(block);\n        }\n      }\n    });\n\n    if (endPoints.length) {\n      // now every block that ends at this point must have the same 'end\"\n      // since some of them may have been expanded ('diff' above), we need to set them all\n      // to the max value\n      var maxPx = _(endPoints).max(function(block) {\n        return block.end;\n      }).end;\n      _(endPoints).each(function(block) {\n        block.end = maxPx;\n      });\n    }\n\n    if (minutes % 60 === 0) {\n      algData.grid.push([(startMin / 60) % 24, algData.topPx]);\n    }\n\n    if (!algData.active) {\n      if (algData.currentGroup.length > 0) {\n        algData.groups.push([algData.currentGroup, keys(algData.assigned).length]);\n        algData.currentGroup = [];\n        algData.assigned = {};\n      }\n    }\n\n    var blockAdded = false;\n\n    each(points, function(point) {\n      if (point[1] == 'start') {\n        blockAdded = true;\n\n        block = self.getBlock(algData.blocks, point[0]);\n        block.sessionId = point[2];\n        block.sessionSlotId = point[3];\n        block.start = algData.topPx;\n\n        algData.active++;\n        self.assign(algData.assigned, block);\n        algData.currentGroup.push(block);\n      } else if (point[1] == 'wholeday') {\n        self.addWholeDayBlock(algData.wholeDayBlocks, point[0]);\n      }\n    });\n\n    // Try to reaorder the assigned blocks based on their session siblings' position\n    if (blockAdded) {\n      self.reorderAssigned(\n        algData.assigned,\n        algData.lastAssigned,\n        algData.currentGroup,\n        algData.topPx\n      );\n    }\n\n    if (algData.active > 0) {\n      var extraPx = 0;\n      each(algData.extraPx, function(value, key) {\n        if (value > extraPx) {\n          extraPx = value;\n        }\n      });\n      algData.topPx += pxStep + extraPx;\n    } else {\n      algData.topPx += TimetableDefaults.layouts.compact.values.pxPerSpace;\n    }\n\n    each(smallBlockList, function(block) {\n      block.end = block.start + TimetableDefaults.layouts.compact.values.minPxPerBlock;\n      algData.topPx += TimetableDefaults.layouts.compact.values.minPxPerBlock;\n      algData.assigned[block.assigned] = null;\n      algData.active--;\n    });\n  },\n});\n\ntype('ProportionalLayoutManager', ['IncrementalLayoutManager'], {\n  name: 'proportional',\n  processTimeBlock: function(hStart, hEnd, startMin, minutes, algData) {\n    var self = this;\n\n    // get all the checkpoints in [hStart, hEnd]\n    var points = self.pointsBetween(hStart, hEnd);\n    var incrementPx = 0;\n\n    var block;\n\n    var pxStep = Math.floor(\n      (TimetableDefaults.layouts.proportional.values.pxPerHour * TimetableDefaults.resolution) / 60\n    );\n    var smallBlocks = [];\n\n    each(points, function(point) {\n      if (point[1] == 'end') {\n        block = self.getBlock(algData.blocks, point[0]);\n\n        block.end = algData.topPx;\n\n        if (algData.assigned[block.assigned]) {\n          algData.active--;\n          algData.assigned[block.assigned] = null;\n\n          var diff =\n            TimetableDefaults.layouts.proportional.values.minPxPerBlock - (block.end - block.start);\n          if (diff > 0) {\n            block.end += diff;\n            block.collapsed = true;\n            algData.topPx += diff;\n          }\n\n          // check if block goes beyond the timetable limits\n          // (ends after midnight)\n          if (hStart == 'nextday') {\n            // mark it as 'unfinished' and add an extra space\n            block.end += hStart == 'nextday' ? 20 : 0;\n            block.unfinished = true;\n          }\n        } else {\n          smallBlocks.push(block);\n        }\n      }\n    });\n\n    var hour = startMin / 60;\n    if (minutes % 60 === 0 && hour <= 24) {\n      algData.grid.push([hour % 24, algData.topPx]);\n    }\n\n    if (!algData.active) {\n      if (algData.currentGroup.length > 0) {\n        algData.groups.push([algData.currentGroup, keys(algData.assigned).length]);\n        algData.currentGroup = [];\n        algData.assigned = {};\n      }\n    }\n\n    each(points, function(point) {\n      if (point[1] == 'start') {\n        block = self.getBlock(algData.blocks, point[0]);\n        block.start = algData.topPx;\n        algData.active++;\n        self.assign(algData.assigned, block);\n        algData.currentGroup.push(block);\n      }\n    });\n\n    each(smallBlocks, function(block) {\n      algData.active--;\n      algData.assigned[block.assigned] = null;\n      block.collapsed = true;\n      block.end = algData.topPx + TimetableDefaults.layouts.proportional.values.minPxPerBlock;\n    });\n\n    if (smallBlocks.length > 0) {\n      algData.topPx += TimetableDefaults.layouts.proportional.values.minPxPerBlock;\n    }\n\n    algData.topPx += pxStep;\n  },\n});\n\ntype(\n  'RoomLayoutManager',\n  ['CompactLayoutManager'],\n  {\n    drawDay: function(data, detailLevel, startTime, endTime) {\n      this.roomsCols = {};\n      return this.CompactLayoutManager.prototype.drawDay.call(\n        this,\n        data,\n        detailLevel,\n        startTime,\n        endTime\n      );\n    },\n\n    assign: function(assigned, block) {\n      var roomName = this.eventData[block.id].room;\n      var col = 0;\n      if (!exists(this.roomsCols[roomName])) {\n        // If there is no room name, the block will be in the column 0 (and take all the available width)\n        if (trim(roomName) !== '') {\n          col = this.roomsCols[roomName] = keys(this.roomsCols).length;\n        }\n      } else {\n        col = this.roomsCols[roomName];\n      }\n\n      block.assigned = parseInt(col, 10);\n      assigned[col] = block;\n    },\n\n    reorderColumns: function(currentGroup) {\n      var self = this;\n      var roomNames = keys(this.roomsCols);\n      roomNames.sort();\n\n      this.roomsCols = {};\n      var counter = 0;\n      each(roomNames, function(name) {\n        self.roomsCols[name] = counter;\n        counter++;\n      });\n\n      for (var key in currentGroup) {\n        var block = currentGroup[key];\n        var roomName = this.eventData[block.id].room;\n        // If there is no room name, the block will be in the column 0 (and take all the available width)\n        var col = 0;\n        if (trim(roomName) !== '') {\n          col = this.roomsCols[roomName];\n        }\n        block.assigned = col;\n      }\n    },\n\n    getNumColumnsForGroup: function(group) {\n      if (group[0].length == 1 && this.eventData[group[0][0].id].room === '') {\n        return 1;\n      } else {\n        return keys(this.roomsCols).length;\n      }\n    },\n\n    getHeader: function(width) {\n      var roomNames = keys(this.roomsCols);\n      var cols = roomNames.length;\n      var borderPixels = 1; // this is because of the separators between the room names\n      return Html.div(\n        {\n          style: {\n            marginLeft: pixels(TimetableDefaults.leftMargin),\n            paddingBottom: pixels(10),\n            paddingTop: pixels(20),\n          },\n        },\n        translate(roomNames, function(key) {\n          return Html.div(\n            {\n              className: 'headerRoomLayoutTimeTable',\n              style: {\n                width: pixels(\n                  Math.floor((width - TimetableDefaults.leftMargin) / cols) - borderPixels\n                ),\n              },\n            },\n            key\n          );\n        })\n      );\n    },\n\n    shouldShowRoom: function() {\n      return false;\n    },\n  },\n\n  function() {\n    this.roomsCols = {};\n  }\n);\n\ntype('PosterLayoutManager', ['TimetableLayoutManager'], {\n  drawDay: function(data, detailLevel) {\n    return data;\n  },\n});\n"},function(n,e,t){t(205)(t(1852))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype('UndoMixin', [], {\n  updateUndoDiv: function(tt_status_info) {\n    /* A \"button\" that appears after an action is performed */\n    // TODO: remove the class 'hidden' once Undo is working fine again\n    var undo_contents = $('<a href=\"#\" class=\"i-button icon-undo warning hidden\"/>')\n      .text($T('Undo last operation'))\n      .click(function() {\n        // \"Undo\" should be executed over the _current_ timetable, not the original source of\n        // the event. Being so, we call a global event that will then invoke the correct TT\n        // management actions object\n\n        $('body').trigger('timetable_undo');\n        return false;\n      });\n    var elem = tt_status_info || $('#tt_status_info');\n    if ($(window).data('undo')) {\n      elem.show().html($('<div class=\"group right\"/>').append(undo_contents));\n    } else {\n      elem.hide();\n    }\n  },\n\n  enableUndo: function(undoLabel, savedData) {\n    $(window).data('undo', {\n      // identifier for the operation\n      label: undoLabel,\n      // store current event data\n      data: $.extend(true, {}, savedData),\n    });\n    this.updateUndoDiv();\n  },\n});\n\nfunction highlight_undo(elemId) {\n  var elem = activeTT.get_elem(elemId);\n\n  if (\n    elem.offset().top > $(window).scrollTop() + $(window).height() ||\n    elem.offset().top + elem.height() < $(window).scrollTop()\n  ) {\n    $('html, body').animate(\n      {\n        scrollTop: elem.offset().top - 150,\n      },\n      500\n    );\n  }\n  elem.effect('pulsate', {times: 3}, 500);\n}\n\nfunction undo_action() {\n  var undo_info = $(window).data('undo');\n  var data = undo_info.data;\n  var management = activeTT.managementActions;\n  var ordinalStartDate = Util.formatDateTime(\n    data.eventData.startDate,\n    IndicoDateTimeFormats.Ordinal\n  );\n  var dfr;\n\n  if (undo_info.label == 'placementChange' || undo_info.label == 'resize') {\n    dfr = management.editEntryStartEndDate(\n      Util.formatDateTime(data.eventData.startDate, IndicoDateTimeFormats.Server),\n      Util.formatDateTime(data.eventData.endDate, IndicoDateTimeFormats.Server),\n      data.eventData,\n      data.shifted,\n      null\n    );\n  } else if (undo_info.label == 'drop') {\n    // block (session/day) where entry used to be located\n    var oldBlock = data.eventData.sessionId\n      ? data.eventData.sessionId + ':' + data.eventData.sessionSlotId\n      : 'conf:' + ordinalStartDate;\n    var oldStartDate = Util.formatDateTime(data.eventData.startDate, IndicoDateTimeFormats.Server);\n    dfr = management.moveToSession(data.entry, oldBlock, null, oldStartDate);\n  }\n  return dfr.done(function() {\n    highlight_undo(data.eventData.id);\n  });\n}\n\nfunction goto_slot(slotId) {\n  return activeTT.switchToInterval(slotId).then(function() {\n    return undo_action();\n  });\n}\n\nfunction goto_origin(data) {\n  var ordinalStartDate = Util.formatDateTime(\n    data.eventData.startDate,\n    IndicoDateTimeFormats.Ordinal\n  );\n  var parentTT = activeTT.parentTimetable ? activeTT.parentTimetable : activeTT;\n  var inSlot = !!activeTT.parentTimetable;\n  var toSlot = !!data.eventData.sessionId && data.eventData.entryType == 'Contribution';\n\n  var goto_day = function(day) {\n    var next_step = function() {\n      if (toSlot) {\n        var slotId = 's' + data.eventData.sessionId + 'l' + data.eventData.sessionSlotId;\n        return goto_slot(slotId);\n      } else {\n        return undo_action();\n      }\n    };\n\n    if (parentTT.currentDay != day) {\n      // wrong day? change it.\n      return parentTT.setSelectedTab(day).then(next_step);\n    } else {\n      return next_step();\n    }\n  };\n\n  if (inSlot) {\n    if (\n      toSlot &&\n      activeTT.contextInfo.id == 's' + data.eventData.sessionId + 'l' + data.eventData.sessionSlotId\n    ) {\n      // if we are in a slot which happens to be the one we want to go to\n      return undo_action();\n    } else {\n      // otherwise, we are still in a slot but we want to go somewhere else\n      // first step, go up to top level\n      return parentTT.switchToTopLevel().then(function() {\n        // then go to desired day\n        return goto_day(ordinalStartDate);\n      });\n    }\n  } else if (!inSlot) {\n    // ok, we are not in a slot\n    // we have to go to the correct day first (regardless of where we want to go)\n    return goto_day(ordinalStartDate);\n  }\n}\n\n$(function() {\n  if ($('#timetableDiv').data('mode') != 'management') {\n    return;\n  }\n  $('body')\n    .bind('timetable_undo', function() {\n      // global event handler, executes undo on whatever timetable is active at the time\n\n      var undo_info = $(window).data('undo');\n      var data = undo_info.data;\n      var ordinalStartDate = Util.formatDateTime(\n        data.eventData.startDate,\n        IndicoDateTimeFormats.Ordinal\n      );\n\n      goto_origin(data).done(function() {\n        // at the end, just remove the undo info\n        $(window).removeData('undo');\n      });\n    })\n    .bind('timetable_ready', function(event, tt) {\n      // each time the timetable reloads, update the undo\n      tt.updateUndoDiv();\n    });\n});\n"},function(n,e,t){t(205)(t(1854))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nvar TimetableDefaults = {\n  topMargin: 30,\n  bottomMargin: 40,\n  leftMargin: 55,\n  rightMargin: 5,\n  resolution: 1,\n  menuWidth: 150,\n  blockMargin: 4, // Margin used inside timetable blocks\n  wholeday: 7, // # of hours of duration for a timetable event to be seen as be during the whole day.\n  minContribHeight: 20, // Minimum height for a contrib displayed inside a session TODO: remove?\n  layouts: {\n    compact: {\n      name: 'Compact',\n      values: {\n        pxPerHour: 150,\n        pxPerSpace: 2,\n        minPxPerBlock: 50,\n      },\n      manager: new CompactLayoutManager(),\n    },\n\n    proportional: {\n      name: 'Proportional',\n      values: {\n        pxPerHour: 120, //50 when not proportional\n        minPxPerBlock: 25,\n      },\n      manager: new ProportionalLayoutManager(),\n    },\n\n    poster: {name: 'Poster', manager: new PosterLayoutManager()},\n\n    room: {name: 'Room', manager: new RoomLayoutManager()},\n  },\n  filters: {\n    session: {name: $T('Session'), filter: new SessionFilter()},\n    room: {name: $T('Room'), filter: new RoomFilter()},\n  },\n};\n\ntype(\n  'TimeTable',\n  ['HistoryListener'],\n  {\n    /*\n     * Translates the keys used in the data dictionary into titles\n     * displayed in the tab control\n     */\n\n    _draw: function(timetableDiv) {\n      return $('<div/>')\n        .css({width: this.width})\n        .append(\n          $('<div/>').css('display', 'block'),\n          this.legend,\n          this.header,\n          timetableDiv.dom,\n          this.loadingIndicator.dom\n        )\n        .get();\n    },\n\n    _getMenu: function() {\n      return Html.div();\n    },\n\n    postDraw: function() {\n      this.timetableDrawer.postDraw();\n      //this.LookupTabWidget.prototype.postDraw.call(this);\n    },\n\n    getData: function() {\n      return this.data;\n    },\n\n    get_elem: function(blkId) {\n      return $(this.getTimetableDrawer()._blockMap[blkId]);\n    },\n\n    getById: function(id) {\n      var info = Util.parseId(id);\n      var type = info[0];\n      var compositeId = '';\n      info = info.slice(2);\n\n      if (type == 'Conference') {\n        return this.eventInfo;\n      } else if (type == 'Contribution') {\n        throw 'not implemented!';\n      } else if (type == 'Session') {\n        return this.eventInfo.sessions[info[0]];\n      } else if (type == 'SessionSlot') {\n        compositeId = 's' + info[0] + 'l' + info[1];\n      } else {\n        throw 'unrecognized id!';\n      }\n\n      for (var day in this.data) {\n        if (this.data[day][compositeId]) {\n          return this.data[day][compositeId];\n        }\n      }\n    },\n\n    setSelectedTab: function(val) {\n      // same as inherited, but return deferred\n      var dfr = $.Deferred();\n      $('body').one('timetable_ready', function() {\n        dfr.resolve();\n      });\n      this.JLookupTabWidget.prototype.setSelectedTab.call(this, val);\n      return dfr.promise();\n    },\n\n    getTimetableDrawer: function() {\n      return this.timetableDrawer;\n    },\n\n    setData: function(data, intervalData, startTime, endTime) {\n      this.timetableDrawer.setData(data, startTime, endTime);\n    },\n\n    _createLoadingIndicator: function() {\n      return Html.div('timetableLoading', $T('Updating the timetable...'));\n    },\n    /*\n     * To be overloaded. Header content displayed above the timetable.\n     */\n    _getHeader: function() {\n      return Html.div({});\n    },\n\n    /*\n     * To be overloaded. Returns the small \"Session legend\" displayed in\n     * detailed mode (only).\n     */\n    _getLegend: function() {\n      return Html.div({});\n    },\n    /*\n     * To be overloaded. Returns buttons to be displayed below the tabs in\n     * the tab widget.\n     */\n    _functionButtons: function() {\n      return [];\n    },\n\n    //To be overloaded\n    redrawLegend: function() {\n      return;\n    },\n  },\n  function(data, width, wrappingElement, detailLevel, managementMode) {\n    var self = this;\n    this.data = data;\n\n    this.enabled = true;\n\n    this.processedWarnings = new WatchList();\n\n    this.width = width;\n    this.loadingIndicator = this._createLoadingIndicator();\n    this.header = this._getHeader();\n    this.legend = $('<div/>');\n  }\n);\n\ntype(\n  'DisplayTimeTable',\n  ['TimeTable'],\n  {\n    filterMenu: function() {\n      var self = this;\n\n      var filterLink = Html.a({href: '#'}, $T('Filter'));\n      this.filterMenu = new TimetableFilterMenu(filterLink, self.timetableDrawer);\n\n      filterLink.observeClick(function(e) {\n        var pos = filterLink.getAbsolutePosition();\n        self.filterMenu.open(pos.x + filterLink.dom.offsetWidth, pos.y);\n        return false;\n      });\n\n      return Html.ul(\n        {className: 'inner', style: {display: 'none'}},\n        Html.li('menuConfMiddleCell', filterLink)\n      );\n    },\n\n    printMenu: function() {\n      var self = this;\n\n      var printLink = Html.a({href: '#'}, $T('Printable version'));\n      printLink.observeClick(function(e) {\n        self.print();\n      });\n      return Html.ul(\n        {className: 'inner', style: {display: 'none'}},\n        Html.li('menuConfMiddleCell', printLink)\n      );\n    },\n    print: function() {\n      var self = this;\n\n      self.timetableDrawer.setPrintableVersion(true);\n      var timetableElements = translate(self.timetableDrawer.canvas.dom.childNodes, function(\n        value\n      ) {\n        return value;\n      });\n\n      var goBackLink = $('<a/>')\n        .prop('href', window.location.hash)\n        .html($T('Go back'))\n        .css('font-size', '17px');\n      var separator = $('<a/>')\n        .html(' | ')\n        .css('fontSize', '17px');\n      var printLink = $('<a/>')\n        .prop('href', window.location.hash)\n        .html($T('Print'))\n        .css('font-size', '17px');\n\n      var links = $('<span/>')\n        .append(goBackLink, separator, printLink)\n        .css('float', 'right');\n\n      var header = $('<div/>')\n        .addClass('timetableHeader clearfix')\n        .append(links)\n        .css({\n          'padding': '0px 5px 5px 5px',\n          'border-bottom': '1px solid black',\n          'text-align': 'center',\n          'width': self.timetableDrawer.width,\n        });\n      header.append(\n        $('<span/>')\n          .append(self._titleTemplate(self.timetableDrawer.day))\n          .css('float', 'left')\n      );\n\n      goBackLink.click(function() {\n        location.reload();\n      });\n\n      printLink.click(function() {\n        window.print();\n      });\n\n      var timetableDiv = $('<div/>')\n        .append(timetableElements)\n        .css({'padding-top': '20px', 'position': 'relative'});\n\n      $('body').html(header.add(timetableDiv));\n      $('body').css('padding', '30px');\n    },\n\n    pdf: function() {\n      if ($('html').data('static-site')) {\n        window.location = build_url(Indico.Urls.Timetable.default_pdf, {confId: this.eventInfo.id});\n      } else {\n        ajaxDialog({\n          url: build_url(Indico.Urls.Timetable.pdf, {confId: this.eventInfo.id}),\n          title: $T.gettext('Export to PDF'),\n        });\n      }\n    },\n\n    fullScreen: function() {\n      var self = this;\n\n      IndicoUI.Dialogs.Util.progress($T('Switching to full screen mode...'));\n      // This timeout is needed in order to give time to the progress indicator to be rendered\n      setTimeout(function() {\n        self.timetableDrawer.width = $(window).width() - 50; // 50 is a width offset.\n\n        var header = $('<div/>')\n          .addClass('timetableFullScreenHeader clearfix')\n          .css('width', self.timetableDrawer.width);\n        header.append(\n          $('<span/>')\n            .append(self._titleTemplate(self.timetableDrawer.day))\n            .css('float', 'left')\n        );\n\n        var timetableCanvas = $('#timetable_canvas');\n        $('#timetable_canvas').width('width', self.timetableDrawer.width);\n        $('body').html(header);\n        $('body').css('padding', '30px');\n        $('.timetableFullScreenHeader').before(self._getExtraButtons());\n        $('.timetableFullScreenHeader').before(self.legend);\n        $('.timetableFullScreenHeader').after(timetableCanvas);\n        self.timetableDrawer.redraw(self.currentDay);\n\n        self._filterSetup();\n        if (self.timetableDrawer.detail.get() == 'contribution') {\n          var newDetailLevel =\n            self.timetableDrawer.detail.get() == 'contribution' ? 'session' : 'contribution';\n          self.timetableDrawer.detail.set(newDetailLevel);\n          self.toggleDetailedView();\n        }\n      }, 50);\n    },\n\n    _getExtraButtons: function() {\n      var self = this;\n      var container = $('<div class=\"tabExtraButtons\"/>');\n      var goBackButton = {\n        btn: Html.div('buttonWhite', $T('Exit Full Screen')),\n        onclick: function(btnContainer) {\n          location.reload();\n        },\n      };\n      var buttons = self._functionButtons();\n      buttons[2] = goBackButton;\n      $.each(buttons, function(i, btnData) {\n        var btn = $('<div class=\"buttonContainer\"/>')\n          .append(btnData.btn.dom || btnData.btn)\n          .click(function() {\n            btnData.onclick(btn);\n          });\n        container.append(btn);\n      });\n      container.children(':first').addClass('buttonContainerLeft');\n      container.children(':last').addClass('buttonContainerRight');\n      goBackButton.btn.getParent().dom.style.background = '#9F883B';\n      return container;\n    },\n\n    _filterSetup: function() {\n      var self = this;\n      this.filter = new TimeTableFilter(this.timetableDrawer, function() {\n        // When closed restore the filter button color\n        self.filterButtonContainer.css('background', '');\n        return true;\n      });\n      this.filter.draw();\n    },\n\n    toggleDetailedView: function() {\n      var self = this;\n      var detailLevel = this.timetableDrawer.detail.get();\n      var newDetailLevel = detailLevel == 'contribution' ? 'session' : 'contribution';\n      this.timetableDrawer.detail.set(newDetailLevel);\n      var state = newDetailLevel == 'contribution';\n      this.inDetailedMode = state;\n      //detailsButton.btn.set(state ? \"Hide details\" : \"Show details\");\n      this.detailsButton.btn.getParent().dom.style.background = state ? '#9F883B' : '';\n      this._addToHistory(this.currentDay + (state ? '.detailed' : ''));\n\n      var legend;\n\n      //If the \"Detailed view\" button is clicked and \"activated\".\n      if (this.inDetailedMode) {\n        /* Draw legend or \"undraw\" legend (getLegend() returns an empty div)\n               when toggling for detailed view. */\n        legend = this._getLegend();\n        this.legend.replaceWith(legend);\n\n        if (this._legendActive) {\n          self._toggleLegend(true);\n        } else {\n          self._legendPostDraw();\n        }\n      } else {\n        if (this._legendActive) {\n          self._toggleLegend(false);\n        }\n        legend = $('<div/>');\n        this.legend.replaceWith(legend);\n      }\n      this.legend = legend;\n    },\n\n    _functionButtons: function() {\n      var self = this;\n\n      this.printButton = {\n        btn: Html.div('printButtonWhite', $T('Print')),\n        onclick: function(btnContainer) {\n          self.print();\n        },\n      };\n\n      this.pdfButton = {\n        btn: Html.div('buttonWhite', $T('PDF')),\n        onclick: function(btnContainer) {\n          self.pdf();\n        },\n      };\n\n      this.fullScreenButton = {\n        btn: Html.div('buttonWhite', $T('Full screen')),\n        onclick: function(btnContainer) {\n          self.fullScreen();\n        },\n      };\n\n      // TODO: Needs to be implemented\n      this.linkButton = Html.div('linkButtonWhite', $T('Link'));\n\n      this.detailsButton = {\n        btn: Html.div(\n          {className: 'buttonWhite', id: 'detailsButton'},\n          Html.span({}, $T('Detailed view'))\n        ),\n        onclick: function() {\n          self.toggleDetailedView();\n        },\n      };\n\n      this.filterButton = {\n        btn: Html.div('buttonWhite', $T('Filter')),\n        onclick: function(btnContainer) {\n          // Save the container so that the filter button background\n          // color can be restored when filter is closed\n          self.filterButtonContainer = btnContainer;\n          self.filter.toggle();\n          var state = self.filter.state.get();\n          self._filterActive = state;\n          btnContainer.css('background', state ? '#9F883B' : '');\n        },\n      };\n\n      return [\n        this.printButton,\n        this.pdfButton,\n        this.fullScreenButton,\n        this.detailsButton,\n        this.filterButton,\n      ];\n    },\n  },\n  function(data, width, wrappingElement, detailLevel) {\n    this.TimeTable(data, width, wrappingElement, detailLevel, false);\n\n    // Set data[all] so that the All days tab is created\n    if (keys(data).length > 1) {\n      this.data.all = data;\n    }\n  }\n);\n\ntype(\n  'TopLevelTimeTableMixin',\n  ['JLookupTabWidget'],\n  {\n    draw: function() {\n      return this.JLookupTabWidget.prototype.draw.call(this);\n    },\n\n    getDays: function() {\n      return this.sortedKeys;\n    },\n\n    disable: function() {\n      this.enabled = false;\n      this.JLookupTabWidget.prototype.disable.call(this);\n    },\n\n    enable: function() {\n      this.enabled = true;\n      this.JLookupTabWidget.prototype.enable.call(this);\n    },\n\n    _titleTemplate: function(text) {\n      if (text == 'all') {\n        return $T('All days');\n      }\n\n      var day = text.substring(6, 8);\n      var month = text.substring(4, 6);\n\n      var strDate = day + '/' + month + '/' + text.substring(0, 4);\n\n      //var nDate = new Date();\n      var delements = parseDate(strDate);\n      var nDate = new Date(delements[2], delements[1] - 1, delements[0]);\n\n      return Indico.Data.WeekDays[nDate.getDay()].substring(0, 3) + ' ' + day + '/' + month;\n    },\n\n    _parseDayInterval: function(hash) {\n      var m = hash.match(/#(\\d{8}|all)(?:\\.((?:s\\d+)|detailed))?/);\n\n      if (m) {\n        return [m[1], m[2]];\n      } else {\n        return [null, null];\n      }\n    },\n\n    switchToInterval: function(intervalId) {\n      var dfr = $.Deferred();\n      this.disable();\n\n      var intervalInfo = this.data[this.currentDay][intervalId];\n      var data = intervalInfo.entries;\n\n      this.intervalTimeTable = new IntervalManagementTimeTable(\n        this,\n        data,\n        intervalInfo,\n        this.eventInfo,\n        this.width.slice(0, -2),\n        this.canvas[0],\n        'contribution',\n        this.isSessionTimetable,\n        this.customLinks,\n        this.canManageSession,\n        this.canManageBlocks,\n        this.canManageContribs\n      );\n\n      this.intervalTimeTable.setData(intervalInfo);\n      var content = this.intervalTimeTable.draw();\n      this.canvas.html(content[0]);\n      this.intervalTimeTable.postDraw();\n\n      $('body').trigger('timetable_switch_interval', this.intervalTimeTable);\n\n      dfr.resolve();\n      return dfr.promise();\n    },\n\n    postDraw: function() {\n      this.TimeTable.prototype.postDraw.call(this);\n    },\n\n    switchToTopLevel: function(day) {\n      day = day || this.currentDay;\n      var dfr = $.Deferred();\n      this.enable();\n      this.setSelectedTab(day || this.currentDay);\n      this._generateContent(this.getSelectedPanel());\n      this.timetableDrawer.redraw();\n\n      // Refresh header (menu, etc...)\n      var header = this._getHeader();\n      this.header.replaceWith(header);\n      this.header = header;\n\n      $('body').trigger('timetable_switch_toplevel', this);\n      window.location = '#' + day;\n\n      dfr.resolve();\n      return dfr.promise();\n    },\n  },\n  function(\n    data,\n    width,\n    wrappingElement,\n    detailLevel,\n    managementActions,\n    historyBroker,\n    timetableLayoutId\n  ) {\n    var self = this;\n\n    this.managementActions = managementActions;\n\n    this.canvas = Html.div({});\n\n    historyBroker.addListener(this);\n\n    this.timetableDrawer = new TimetableDrawer(\n      this,\n      width,\n      wrappingElement,\n      detailLevel,\n      this._functionButtons(),\n      this.loadingIndicator,\n      !!managementActions,\n      managementActions,\n      timetableLayoutId\n    );\n\n    this.sortedKeys = keys(this.data);\n    this.sortedKeys.sort();\n\n    var today = new Date();\n    var todayStr = IndicoUtil.formatDate2(today);\n\n    var originalHash = window.location.hash;\n\n    var dayAndInterval = this._parseDayInterval(originalHash);\n    var initialTab = null;\n\n    if (dayAndInterval[0]) {\n      initialTab = dayAndInterval[0];\n    }\n\n    // if nothing is found\n    if (initialTab === null) {\n      // look for today\n      if (exists(data[todayStr])) {\n        initialTab = todayStr;\n      } else {\n        // look for the first non-empty day\n        for (var day in this.data) {\n          if (Object.getOwnPropertyNames(this.data[day]).length > 0) {\n            initialTab = day;\n            break;\n          }\n        }\n        if (initialTab === null) {\n          // otherwise show the first day\n          initialTab = this.sortedKeys[0];\n        }\n      }\n    }\n\n    this.currentDay = initialTab;\n\n    this.JLookupTabWidget(\n      translate(this.sortedKeys, function(key) {\n        return [\n          key,\n          function() {\n            var detailed = self.inDetailedMode ? '.detailed' : '';\n\n            self.currentDay = key;\n            // each time one tab is clicked,\n            // drawDay is called over a different day\n            if (key == 'all') {\n              self._addToHistory('all' + detailed);\n              return self._draw(self.timetableDrawer.drawAllDays());\n            } else {\n              // Are we switching to interval mode\n              if (!self.enabled) {\n                // stop everything, we don'w want the LookupTabWidget\n                // to replace the contents\n                throw 'stopDrawing';\n              }\n\n              self._addToHistory(key + detailed);\n              return self._draw(self.timetableDrawer.drawDay(key));\n            }\n          },\n        ];\n      }),\n      this.width,\n      100,\n      initialTab,\n      this._functionButtons(),\n      this.canvas\n    );\n    this.makeScrollable();\n\n    if (dayAndInterval[1]) {\n      var subref = dayAndInterval[1];\n      // TODO: replace with appropriate notification system\n      setTimeout(function() {\n        if (subref == 'detailed') {\n          self.toggleDetailedView();\n        } else {\n          self.switchToInterval(subref);\n        }\n      }, 500);\n    }\n  }\n);\n\ntype(\n  'IntervalTimeTableMixin',\n  [],\n  {\n    draw: function() {\n      // Add hash to history\n      this.parentTimetable._addToHistory(this.currentDay + '.' + this.contextInfo.id);\n\n      return this._draw(this.timetableDrawer.drawDay(this.currentDay));\n    },\n\n    _getInfoBoxContent: function() {\n      return Html.div(\n        {},\n        Html.span(\n          {style: {fontStyle: 'italic', fontSize: '0.9em'}},\n          $T('You are viewing the contents of the session block:')\n        ),\n        Html.div(\n          {style: {fontWeight: 'bold', marginTop: '5px', fontSize: '1.3em'}},\n          this._generateSlotTitle(this.contextInfo),\n          Html.span(\n            {style: {fontWeight: 'normal'}},\n            ' (',\n            $B(Html.span({}), this.slotStartTime),\n            ' - ',\n            $B(Html.span({}), this.slotEndTime),\n            ')'\n          )\n        )\n      );\n    },\n\n    postDraw: function() {\n      this.timetableDrawer.postDraw();\n    },\n\n    setData: function(data) {\n      var day = IndicoUtil.formatDate2(IndicoUtil.parseJsonDate(data.startDate));\n      var ttData = {};\n\n      this.data = data.entries;\n\n      // WatchValues, so that interval changes can be handled\n      this.slotStartTime = new WatchValue(data.startDate.time.substring(0, 5));\n      this.slotEndTime = new WatchValue(data.endDate.time.substring(0, 5));\n\n      ttData[day] = data.entries;\n\n      this.currentDay = day;\n      this.timetableDrawer.setData(ttData, day, data.isPoster);\n\n      // The time must be update each time new data is set\n      this.infoBox.set(this._getInfoBoxContent());\n    },\n\n    getDays: function() {\n      return this.parentTimetable.getDays();\n    },\n\n    getById: function(id) {\n      return this.parentTimetable.getById(id);\n    },\n  },\n  function(parent, width, wrappingElement, managementActions, layout) {\n    this.managementActions = managementActions;\n    this.parentTimetable = parent;\n\n    this.timetableDrawer = new IntervalTimetableDrawer(\n      this,\n      width,\n      wrappingElement,\n      this._functionButtons(),\n      this.loadingIndicator,\n      !!managementActions,\n      managementActions,\n      layout || 'compact'\n    );\n  }\n);\n\ntype(\n  'ManagementTimeTable',\n  ['TimeTable', 'UndoMixin'],\n  {\n    _generateSlotTitle: function(slotData) {\n      return slotData.title + (slotData.slotTitle ? ': ' + slotData.slotTitle : '');\n    },\n\n    _createInfoArea: function() {\n      // this is a client-side hack that compensates some algorithm weaknesses\n\n      var closeButton = Html.div({\n        className: 'balloonPopupCloseButton',\n        style: {position: 'absolute', top: '10px', right: '10px', padding: '0px'},\n      });\n\n      var self = this;\n\n      closeButton.observeClick(function() {\n        self._hideWarnings();\n      });\n\n      return Html.div(\n        'timetableManagementInfoArea',\n        Html.div({}, $T('Your changes triggered the automatic modification of some settings:')),\n        $B(Html.ul({}), this.processedWarnings, function(item) {\n          var title = item[4];\n          var atoms = Util.parseId(item[1]);\n\n          var message = {\n            OWNER_START_DATE_EXTENDED: {\n              SessionSlot:\n                $T('The <strong>starting time</strong> of the session interval <strong>') +\n                title +\n                $T('</strong> was moved from '),\n              Session:\n                $T('The <strong>starting time</strong> of the session interval <strong>') +\n                title +\n                $T('</strong> was moved from '),\n              Conference: $T(\n                'The <strong>starting time</strong> of the <strong>Event</strong> was moved from '\n              ),\n            },\n            OWNER_END_DATE_EXTENDED: {\n              SessionSlot:\n                $T('The <strong>ending time</strong> of the session interval <strong>') +\n                title +\n                $T('</strong> was moved from '),\n              Session:\n                $T('The <strong>ending time</strong> of the session interval <strong>') +\n                title +\n                $T('</strong> was moved from '),\n              Conference: $T(\n                'The <strong>ending time</strong> of the <strong>Event</strong> was moved from '\n              ),\n            },\n            ENTRIES_MOVED: {\n              SessionSlot:\n                $T('The contents of the interval <strong>') +\n                title +\n                $T('</strong> were moved from '),\n            },\n          }[item[0]][atoms[0]];\n\n          var span = Html.span({style: {verticalAlign: 'middle', marginLeft: '5px'}});\n          span.dom.innerHTML =\n            message +\n            ' <strong>' +\n            item[3] +\n            '</strong>' +\n            $T(' to ') +\n            '<strong>' +\n            item[2] +\n            '</strong>';\n          return Html.li({}, span);\n        }),\n        closeButton\n      );\n    },\n\n    _updateMovedEntry: function(result, oldEntryId) {\n      return this._updateEntry(result, oldEntryId, function(data) {\n        var oldDate = IndicoUtil.formatDateTime(\n          IndicoUtil.parseJsonDate(result.old.startDate),\n          'd/MM/YYYY hh:mm'\n        );\n        var oldDay = Util.formatDateTime(\n          Util.parseDateTime(oldDate, IndicoDateTimeFormats.Default),\n          IndicoDateTimeFormats.Ordinal\n        );\n        if (result.old.sessionId) {\n          // block was inside session slot\n          delete data[oldDay]['s' + result.old.sessionSlotEntryId].entries[result.old.id];\n        } else {\n          // block was in top level\n          delete data[oldDay][result.old.id];\n        }\n\n        if (result.slotEntry) {\n          // block moves inside session slot\n          data[result.day][result.slotEntry.id].entries[result.id] = result.entry;\n          // updates the time of the session if it has to be extended\n          data[result.day][result.slotEntry.id].startDate.time = result.slotEntry.startDate.time;\n          data[result.day][result.slotEntry.id].endDate.time = result.slotEntry.endDate.time;\n          data[result.day][result.slotEntry.id].duration = result.slotEntry.duration;\n        } else {\n          // block moves to top level\n          data[result.day][result.id] = result.entry;\n        }\n      });\n    },\n\n    /*\n     *\n     * Is called every time a timetable entry has been successfully\n     * added or updated. Updates and redraws the timetable.\n     * @param originalArgs this are the original args. If they are passed, we can remove the entry\n     * from the index before adding it again (just in case the date has changed).\n     *\n     */\n\n    _processAutoOps: function(result) {\n      this._hideWarnings();\n\n      var self = this;\n\n      if (result.autoOps && result.autoOps.length > 0) {\n        each(result.autoOps, function(op) {\n          var warning = self._processWarning(op);\n          if (warning && self.processedWarnings.indexOf(warning) === null) {\n            self.warningArea.dom.style.display = 'block';\n            self.processedWarnings.append(warning);\n          }\n        });\n      }\n    },\n\n    _hideWarnings: function() {\n      this.warningArea.dom.style.display = 'none';\n      this.warnings.clear();\n      this.processedWarnings.clear();\n    },\n\n    _processWarning: function(entry) {\n      /*\n       * entry - the warning 'entry', a list [src, msg, target, newValue]\n       * startTime - the original starting time for the timeblock\n       * endTime - the original ending time for the timeblock\n       * [slotTitle] - title, if the entry is a slot\n       */\n\n      var msg = entry[1];\n      var finalTime = entry[3];\n\n      var type = Util.parseId(entry[2])[0];\n\n      var conference = null;\n      var slot = null;\n      var title = '';\n\n      var startTime = '';\n      var endTime = '';\n\n      if (type == 'Session') {\n        return null;\n      } else if (type == 'Conference') {\n        conference = this.getById(entry[2]);\n        title = conference.title;\n        startTime = conference.startDate.time.slice(0, 5);\n        endTime = conference.endDate.time.slice(0, 5);\n      } else if (type == 'SessionSlot') {\n        slot = this.getById(entry[2]);\n        startTime = slot.startDate.time.slice(0, 5);\n        endTime = slot.endDate.time.slice(0, 5);\n        title = this._generateSlotTitle(slot);\n      }\n\n      if (msg == 'OWNER_END_DATE_EXTENDED') {\n        // Make sure that something changed, otherwise the\n        // warning will be supressed\n        if (endTime != finalTime) {\n          // slice(1) to ignore first value\n          return concat(entry.slice(1), [endTime, title]);\n        }\n      } else if (msg == 'OWNER_START_DATE_EXTENDED') {\n        // Again, make sure that something changed\n\n        if (startTime != finalTime) {\n          // slice(1) to ignore first value\n          return concat(entry.slice(1), [startTime, title]);\n        }\n      } else {\n        return concat(entry.slice(1), [startTime, title]);\n      }\n\n      return null;\n    },\n\n    _allowCreateHere: function(elementType) {\n      switch (elementType) {\n        case 'Session':\n          return this.contextInfo._type == 'Conference';\n        case 'Break':\n          return this.contextInfo._type == 'Conference'\n            ? true\n            : this.contextInfo.isPoster === false;\n        case 'Contribution':\n          return true;\n      }\n    },\n\n    _retrieveSessionColor: function(session) {\n      return this.getById('s' + session.id).color;\n    },\n\n    _openSessionMenu: function(triggerElement, parent) {\n      if (exists(this.addMenu) && this.addMenu.isOpen()) {\n        return;\n      }\n\n      var self = this;\n      var sessions = {};\n      each(this.eventInfo.sessions, function(session, key) {\n        sessions[session.id] = {};\n        sessions[session.id].func = function() {\n          self.managementActions.addSessionSlot(session);\n        };\n        sessions[session.id].color = self._retrieveSessionColor(session);\n        sessions[session.id].title = session.title;\n      });\n\n      var menu = {\n        '': {\n          content: {\n            'Create a new session': function() {\n              self.managementActions.addSession();\n              $('.button-menu').dropdown('close');\n            },\n          },\n          description: '',\n        },\n        'Add another block to:': {content: sessions, description: ''},\n      };\n\n      var te = new Html(triggerElement.find('a').get(0));\n      var sessMenu = new SessionSectionPopupMenu(\n        menu,\n        [te],\n        'timetableSectionPopupList popupListChained',\n        true,\n        true\n      );\n\n      var pos = triggerElement.offset();\n      sessMenu.open(pos.left, pos.top - 1);\n    },\n\n    _createAddMenu: function(elem) {\n      var self = this;\n      var ul = $('<ul class=\"i-dropdown\"/>');\n\n      if (this._allowCreateHere('Session')) {\n        var sessionAdd = $('<a href=\"#\"/>')\n          .text($T('Session block'))\n          .appendTo(ul)\n          .wrap('<li/>');\n        sessionAdd.bind('menu_select', function() {\n          if (keys(self.eventInfo.sessions).length === 0) {\n            $(this)\n              .closest('.group')\n              .dropdown('close');\n            self.managementActions.addSession();\n          } else {\n            self._openSessionMenu($(this).parent(), ul);\n          }\n          return true;\n        });\n      }\n\n      if (this._allowCreateHere('Contribution')) {\n        $('<a href=\"#\"/>')\n          .text($T('Contribution'))\n          .bind('menu_select', function() {\n            self.managementActions.addContribution();\n            // Dirty hack to avoid Chrome glitch\n            $(this)\n              .closest('.group')\n              .dropdown('close');\n            return false;\n          })\n          .appendTo(ul)\n          .wrap('<li/>');\n      }\n      if (this._allowCreateHere('Break')) {\n        $('<a href=\"#\"/>')\n          .text($T('Break'))\n          .bind('menu_select', function() {\n            self.managementActions.addBreak();\n            $(this)\n              .closest('.group')\n              .dropdown('close');\n            return false;\n          })\n          .appendTo(ul)\n          .wrap('<li/>');\n      }\n\n      return ul;\n    },\n\n    _getHeader: function() {\n      var self = this;\n\n      this.infoBox = Html.div({className: 'toolbar f-j-end', style: {margin: '5px'}});\n\n      this.addMenuLink = this.contextInfo.isPoster\n        ? $('<a href=\"#\" data-toggle=\"menu_select\"/>')\n            .text($T('Add poster'))\n            .bind('menu_select', function() {\n              self.managementActions.addContribution();\n            })\n        : $('<a href=\"#\" id=\"add_new\" class=\"arrow hide-if-locked\" data-toggle=\"dropdown\">').text(\n            $T('Add new')\n          );\n\n      this.rescheduleLink = $('<a href=\"#\" class=\"hide-if-locked\" data-toggle=\"menu_select\">').text(\n        $T('Reschedule')\n      );\n      this.rescheduleLink.bind('menu_select', function() {\n        var popup = new RescheduleDialog(self);\n        popup.open();\n        return false;\n      });\n\n      this.fitInnerTimetableLink = $(\n        '<a href=\"#\" class=\"hide-if-locked\" data-toggle=\"menu_select\">'\n      ).text($T('Fit to content'));\n      this.fitInnerTimetableLink.bind('menu_select', function() {\n        var popup = new FitInnerTimetableDialog(self);\n        popup.open();\n        return false;\n      });\n\n      this.addIntervalLink = $(\n        '<a href=\"#\" class=\"hide-if-locked\" data-toggle=\"menu_select\"/>'\n      ).text($T('Add new block'));\n      this.addIntervalLink.bind('menu_select', function() {\n        self.managementActions.addSessionSlot(self.eventInfo.timetableSession);\n        return false;\n      });\n\n      var customLinks = $();\n      for (var linkName in this.customLinks) {\n        var link = $('<a href=\"#\" class=\"hide-if-locked\">')\n          .text(linkName)\n          .addClass('js-{0}'.format(this.customLinks[linkName]))\n          .data('timetable', self);\n        customLinks = customLinks.add(link);\n      }\n\n      this.warningArea = this._createInfoArea();\n      this.warningArea.dom.style.display = 'none';\n\n      this.menu = $('<div class=\"group\"/>');\n\n      if (this.isSessionTimetable && this.isTopLevel) {\n        if (this.canManageBlocks) {\n          this.menu.append(this.addIntervalLink);\n        }\n      } else {\n        this.menu.append(this.addMenuLink);\n      }\n\n      if (!this.contextInfo.isPoster) {\n        if (this.canManageBlocks) {\n          if (this.contextInfo.entryType == 'Session') {\n            this.fitInnerTimetableLink.appendTo(this.menu);\n          }\n          this.rescheduleLink.appendTo(this.menu);\n        }\n      }\n\n      customLinks.appendTo(this.menu);\n\n      var tt_hour_tip = $('<div id=\"tt_hour_tip\"/>')\n        .hide()\n        .append(\n          $('<img/>')\n            .prop('src', imageSrc('tt_time'))\n            .prop('title', $T('Add one hour'))\n        );\n      var tt_status_info = $('<div id=\"tt_status_info\" />');\n\n      this.menu.children('a').addClass('i-button');\n\n      if (!this.contextInfo.isPoster && (!this.isTopLevel || !this.sessionTimetable)) {\n        this.menu.find('#add_new').after(this._createAddMenu(this.addMenuLink.parent()));\n      }\n\n      var ret = $('<div/>').append(\n        this.warningArea.dom,\n        $('<div id=\"headPanel\" class=\"ui-follow-scroll\"></div>').append(\n          $('<div class=\"toolbar f-j-end\" id=\"tt_menu\"/>').append(\n            this.menu.dropdown({effect_on: 'slideDown'}),\n            tt_status_info\n          )\n        ),\n        this.infoBox.dom,\n        tt_hour_tip\n      );\n\n      var extra = this.getTTMenu();\n      if (extra) {\n        ret.find('#tt_menu .group').after(extra);\n      }\n\n      return ret;\n    },\n  },\n  function(\n    data,\n    contextInfo,\n    eventInfo,\n    width,\n    wrappingElement,\n    detailLevel,\n    customLinks,\n    canManageSession,\n    canManageBlocks,\n    canManageContribs,\n    canManageEvent\n  ) {\n    this.customLinks = customLinks;\n    this.eventInfo = eventInfo;\n    this.contextInfo = contextInfo;\n    this.canManageSession = canManageSession || false;\n    this.canManageBlocks = canManageBlocks || false;\n    this.canManageContribs = canManageContribs || false;\n    this.canManageEvent = canManageEvent || false;\n    this.warnings = new WatchList();\n    this.TimeTable(data, width, wrappingElement, detailLevel, true);\n  }\n);\n\ntype(\n  'TopLevelDisplayTimeTable',\n  ['DisplayTimeTable', 'TopLevelTimeTableMixin'],\n  {\n    _retrieveHistoryState: function(hash) {\n      var currentDay = this._parseDayInterval(hash)[0];\n      this.setSelectedTab(currentDay);\n    },\n\n    _getLegend: function() {\n      var self = this;\n      //Initially show N and have the rest hidden (buried under \"...more\")\n      self._maxLegendItemsShownInitially = 4;\n\n      var toggleLegendButton = $('<div id=\"legendMainToggle\">' + $T('Session legend') + '</div>');\n\n      if (this._legendActive) {\n        toggleLegendButton.addClass('active');\n      }\n\n      toggleLegendButton.click(function() {\n        self._legendActive = !self._legendActive;\n        self._toggleLegend(self._legendActive);\n      });\n\n      self._toggleLegendButton = toggleLegendButton;\n\n      this.legendItems = self._legendItemsContainer();\n      // hide it so that we can execute the nice scroll down animation\n      this.legendItems.hide();\n\n      // create 'update' event that will be called when the day changes (redraw)\n      this.legendItems.bind('update', function() {\n        $(this).html(self._legendItemsContainer().children());\n        if (self._legendActive && self.legendSessionInfo[self.currentDay].length) {\n          $(this).slideDown();\n        } else {\n          $(this).slideUp();\n        }\n        self._legendPostDraw();\n      });\n\n      return $('<div id=\"wholeLegend\"/>')\n        .append(toggleLegendButton)\n        .append(this.legendItems);\n    },\n\n    _legendItemsContainer: function() {\n      var self = this;\n      var state = false;\n      var moreText = $T('see more...');\n      var showMoreLink = $('<a id=\"showMoreLink\" class=\"showMoreLink\">' + moreText + '</a>').click(\n        function() {\n          if (!state) {\n            self._fadeShowAllLegendItems();\n            showMoreLink.text($T('less...'));\n          } else {\n            self._fadeHideLegendItems();\n            showMoreLink.text(moreText);\n          }\n          self._legendPostDraw();\n          state = !state;\n        }\n      );\n\n      var closeButton = $('<div class=\"legendCloseButton\"/>').click(function() {\n        self._toggleLegend(false);\n        self._legendActive = false;\n      });\n\n      var sessions = self.legendSessionInfo[this.currentDay];\n      var container = $(\n        '<div id=\"timeTableLegend\" class=\"timeTableLegend ui-follow-scroll\">'\n      ).append(closeButton);\n\n      if (sessions.length) {\n        // Returns a div with each color + session name element\n        var legendElements = self._generateLegendDivItems(sessions);\n        container.append($('<div id=\"legendItemContainer\"/>').append(legendElements));\n        if (sessions.length > self._maxLegendItemsShownInitially) {\n          container.append(showMoreLink);\n        }\n      }\n      return container;\n    },\n\n    // Generates the \"legend items\"\n    // (a small colored rounded square with the sessions title on its right hand side)\n    // Returns a Div with those legend element items.\n    _generateLegendDivItems: function(sessions) {\n      var self = this;\n      var showNumSessionsCounter = 0;\n      var container = $('<div>');\n\n      $.each(sessions, function(idx, l) {\n        var div = $('<div class=\"legendItem\" />').append(\n          $('<div class=\"timeTableItemColour\" />').css('background', l[2]),\n          $('<span/>').text(l[1])\n        );\n\n        container.append(div);\n\n        if (idx >= self._maxLegendItemsShownInitially) {\n          div.hide();\n        }\n      });\n      return container;\n    },\n\n    redrawLegend: function() {\n      if (this.legendItems) {\n        this.legendItems.trigger('update');\n      }\n    },\n\n    // Used by the \"...more\"-button when you want to show more elements\n    _fadeShowAllLegendItems: function() {\n      $('.legendItem').fadeIn();\n    },\n\n    // Used by the \"...less\"-button when you want to hide more elementsmaxLegendItemsShownInitially\n    // Note, it does NOT HIDE ALL: depending on \"maxLegendItemsShownInitially\".\n    _fadeHideLegendItems: function() {\n      $('.legendItem')\n        .slice(this._maxLegendItemsShownInitially)\n        .fadeOut();\n    },\n\n    /* This function is also called in \"this.filterButton\" in order\n       to hide it (the Session Legend) when the Filter is brought up */\n    _toggleLegend: function(state) {\n      var self = this;\n\n      if (state) {\n        $('#legendMainToggle').addClass('active');\n        if (this.legendSessionInfo[this.currentDay].length) {\n          $('#timeTableLegend').slideDown();\n        }\n      } else {\n        $('#timeTableLegend').slideUp();\n        $('#legendMainToggle').removeClass('active');\n      }\n      this._legendPostDraw();\n    },\n\n    _legendPostDraw: function() {\n      if ($('#detailsButton').length) {\n        $('#legendMainToggle').position({\n          my: 'left top',\n          at: 'left bottom',\n          of: $('#detailsButton').parent('.buttonContainer'),\n        });\n        $('#timeTableLegend:visible').width($('#timeTableLegend').get(0).clientWidth - 10);\n      }\n    },\n\n    _extractSessionInfo: function(data) {\n      // get an a dictionary where the keys are days and the values are lists\n      // of [id, title, color] tuples (sessions only)\n      var days = {};\n\n      _(data).each(function(entries, day) {\n        days[day] = _(entries)\n          .chain()\n          .select(function(e) {\n            return e.entryType == 'Session';\n          })\n          .groupBy(function(e) {\n            return e.sessionId;\n          })\n          .reduce(function(l, s) {\n            return l.concat(s[0]);\n          }, [])\n          .map(function(e) {\n            return [e.id, e.title, e.color, e.sessionId];\n          })\n          .sortBy(function(e) {\n            return e[1];\n          })\n          .value();\n      });\n\n      // for \"all days\", put it all together\n      days['all'] = _(days)\n        .chain()\n        .flatten(true)\n        .groupBy(function(e) {\n          return e[3];\n        })\n        .reduce(function(l, s) {\n          return l.concat([s[0]]);\n        }, [])\n        .sortBy(function(e) {\n          return e[1];\n        })\n        .value();\n\n      return days;\n    },\n  },\n  function(\n    data,\n    contextInfo,\n    width,\n    wrappingElement,\n    detailLevel,\n    historyBroker,\n    timetableLayoutId\n  ) {\n    this.postDraw = TopLevelTimeTableMixin.prototype.postDraw;\n    this.legendSessionInfo = this._extractSessionInfo(data);\n    this._legendActive = true;\n\n    this.DisplayTimeTable(data, width, wrappingElement, detailLevel);\n    this.TopLevelTimeTableMixin(\n      data,\n      width,\n      wrappingElement,\n      detailLevel,\n      null,\n      historyBroker,\n      timetableLayoutId\n    );\n\n    this.eventInfo = contextInfo;\n    this._filterSetup();\n  }\n);\n\ntype(\n  'TopLevelManagementTimeTable',\n  ['ManagementTimeTable', 'TopLevelTimeTableMixin'],\n  {\n    _deleteOldEntry: function(data, result, oldEntryId) {\n      /*\n       * Deletes the old version of the entry\n       */\n\n      var oldStartDate;\n      // Check whether we're operating *over* an existing slot or not\n      // it is a slot && slot exists in timetable\n      if (result.entry.entryType == 'Session' && data[this.currentDay][result.id]) {\n        var slot = data[this.currentDay][result.id];\n        oldStartDate = slot.startDate.date.replace(/-/g, '');\n      } else {\n        // Contribution or break - event timetable limits\n        oldStartDate = this.currentDay;\n      }\n\n      delete data[oldStartDate][oldEntryId];\n      return data[oldStartDate][oldEntryId] ? data[oldStartDate][oldEntryId].entries : null;\n    },\n\n    _updateEntry: function(result, oldEntryId, updateCycle) {\n      var self = this;\n      var data = this.getData();\n\n      // AutoOp Warnings (before updates are done)\n      this._processAutoOps(result);\n\n      // Deletes the old version of the entry and temporarily\n      // stores the entry contents to be used later on this function\n      var oldContent = this._deleteOldEntry(data, result, oldEntryId);\n\n      // Here's the update cycle\n      if (updateCycle) {\n        updateCycle(data);\n      } else {\n        // If none is defined in the function args,\n        // execute the default action\n        if (exists(result.slotEntry)) {\n          data[result.day][result.slotEntry.id].entries[result.entry.id] = result.entry;\n        } else {\n          data[result.day][result.id] = result.entry;\n        }\n\n        // A session interval may contain entries, that\n        // should be preserved (e.g. content (contribs, breaks) of\n        // the slot).\n        if (oldContent) {\n          data[result.day][result.id].entries =\n            result.entry.entryType == 'Session' ? result.entry.entries : oldContent;\n        }\n\n        // If a session slot is added, let's update the list of sessions\n        if (result.session) {\n          this.eventInfo.sessions[result.session.id] = result.session;\n        }\n      }\n\n      var dfr = $.Deferred();\n      $('body').one('timetable_redraw', function() {\n        $('body').trigger('timetable_update', self);\n        dfr.resolve();\n      });\n      this.timetableDrawer.redraw();\n      return dfr.promise();\n    },\n\n    /**\n     * updateDay should be used when all the entries for a given day will be changed by the\n     * info received in 'update'.\n     *\n     * update must contain:\n     *     update.day: string with a given day, e.g. \"20100828\"\n     *     update.entries: all entries for a given day\n     *     update.session: info about the session\n     */\n    _updateDay: function(update) {\n      this._processAutoOps(update);\n\n      var data = this.getData();\n      var entries = {};\n\n      entries[update.day] = update.entries;\n      extend(data, entries);\n      this._removeMissingEntries(update.entries, update.day);\n\n      if (exists(update.session)) {\n        this.eventInfo.sessions[update.session.id] = update.session;\n      }\n\n      var self = this;\n      var dfr = $.Deferred();\n      $('body').bind('timetable_redraw', function() {\n        dfr.resolve();\n        $('body').trigger('timetable_update', self);\n      });\n      this.timetableDrawer.redraw();\n      return dfr.promise();\n    },\n\n    _removeMissingEntries: function(entries, day) {\n      var self = this;\n      _.each(self.data[day], function(value, key) {\n        if (!entries[key]) {\n          delete self.data[key];\n        }\n      });\n    },\n\n    _updateSessionData: function(sessionId, fields, newValues) {\n      var data = this.getData();\n\n      for (var day in data) {\n        for (var entry in data[day]) {\n          if (\n            data[day][entry]['entryType'] == 'Session' &&\n            data[day][entry]['sessionId'] == sessionId\n          ) {\n            for (var i = 0; i < fields.length; ++i) {\n              data[day][entry][fields[i]] = newValues[i];\n            }\n          }\n        }\n      }\n\n      this.timetableDrawer.redraw();\n    },\n\n    _getInfoBoxContent: function() {\n      return '';\n    },\n\n    getTTMenu: function() {\n      if (this.isSessionTimetable && this.canManageEvent) {\n        var goBackLink = $('<a>', {\n          class: 'icon-arrow-up i-button',\n          href: build_url(Indico.Urls.Timetable.management, {confId: this.eventInfo.id}),\n        }).text($T.gettext('Go to event timetable'));\n        return $('<div>', {class: 'group right'}).append(goBackLink);\n      } else {\n        return null;\n      }\n    },\n\n    _retrieveHistoryState: function(hash) {\n      var dayInterval = this._parseDayInterval(hash);\n\n      var currentDay = dayInterval[0] || keys(this.data)[0];\n      if (dayInterval[1]) {\n        this.setSelectedTab(dayInterval[0]);\n        this.switchToInterval(dayInterval[1]);\n      } else {\n        this.switchToTopLevel();\n        this.setSelectedTab(dayInterval[0]);\n      }\n    },\n  },\n  function(\n    data,\n    eventInfo,\n    width,\n    wrappingElement,\n    detailLevel,\n    historyBroker,\n    isSessionTimetable,\n    customLinks,\n    canManageSession,\n    canManageBlocks,\n    canManageContribs,\n    canManageEvent\n  ) {\n    this.isSessionTimetable = isSessionTimetable;\n    this.isTopLevel = true;\n\n    this.ManagementTimeTable(\n      data,\n      eventInfo,\n      eventInfo,\n      width,\n      wrappingElement,\n      detailLevel,\n      customLinks,\n      canManageSession,\n      canManageBlocks,\n      canManageContribs,\n      canManageEvent\n    );\n    var managementActions = new TopLevelTimeTableManagementActions(\n      this,\n      eventInfo,\n      eventInfo,\n      isSessionTimetable\n    );\n    this.TopLevelTimeTableMixin(\n      data,\n      width,\n      wrappingElement,\n      detailLevel,\n      managementActions,\n      historyBroker,\n      'proportional'\n    );\n\n    this.postDraw = TopLevelTimeTableMixin.prototype.postDraw;\n  }\n);\n\ntype(\n  'IntervalManagementTimeTable',\n  ['ManagementTimeTable', 'IntervalTimeTableMixin'],\n  {\n    _updateTimes: function(newStartTime, newEndTime) {\n      this.slotStartTime.set(newStartTime.slice(0, 5));\n      this.slotEndTime.set(newEndTime.slice(0, 5));\n    },\n\n    _updateEntry: function(result, oldEntryId, updateCycle) {\n      var self = this;\n      var slot = this.contextInfo;\n\n      // Delete the old entry\n      delete this.parentTimetable.data[this.currentDay][slot.id].entries[oldEntryId];\n\n      this._processAutoOps(result);\n\n      // Here's the update cycle\n      if (updateCycle) {\n        updateCycle(this.parentTimetable.getData());\n      } else {\n        if (result.session) {\n          // Account for \"collateral damage\" on sessions\n          this.parentTimetable.eventInfo.sessions[result.session.id] = result.session;\n        }\n\n        if (exists(result.slotEntry)) {\n          // Save the entries, otherwise they are lost\n          result.slotEntry.entries = slot.entries;\n          this.parentTimetable.data[result.day][result.slotEntry.id] = result.slotEntry;\n          this.contextInfo = result.slotEntry;\n        }\n        this.parentTimetable.data[result.day][slot.id].entries[result.entry.id] = result.entry;\n\n        // Update the times for the slot\n        this._updateTimes(result.slotEntry.startDate.time, result.slotEntry.endDate.time);\n      }\n\n      var dfr = $.Deferred();\n      $('body').one('timetable_redraw', function() {\n        $('body').trigger('timetable_update', self);\n        dfr.resolve();\n      });\n      this.timetableDrawer.redraw();\n      return dfr.promise();\n    },\n\n    /**\n     * updateDay should be used when all the entries for a given slot will be changed by the\n     * info received in 'update'.\n     *\n     * update must contain:\n     *     update.day: string with a given day, e.g. \"20100828\"\n     *     update.entries: all entries for a given slot\n     *     update.slotEntry: info about the slot\n     *     update.session: info about the session\n     */\n    _updateDay: function(update) {\n      this._processAutoOps(update);\n\n      var slot = this.contextInfo;\n      extend(this.data, update.entries);\n      this._removeMissingEntries(update.entries);\n\n      if (exists(update.session)) {\n        this.parentTimetable.eventInfo.sessions[update.session.sessionId] = update.session;\n      }\n\n      if (exists(update.slotEntry)) {\n        // Save the entries, otherwise they are lost\n        update.slotEntry.entries = slot.entries;\n        this.parentTimetable.data[update.day][update.slotEntry.id] = update.slotEntry;\n        this.contextInfo = update.slotEntry;\n\n        // Update the times for the slot\n        this._updateTimes(update.slotEntry.startDate.time, update.slotEntry.endDate.time);\n      }\n\n      var dfr = $.Deferred();\n      $('body').bind('timetable_redraw', function() {\n        dfr.resolve();\n      });\n\n      this.timetableDrawer.redraw();\n      return dfr.promise();\n    },\n\n    _removeMissingEntries: function(entries) {\n      var self = this;\n      _.each(self.data, function(value, key) {\n        if (!entries[key]) {\n          delete self.data[key];\n        }\n      });\n    },\n\n    getTTMenu: function() {\n      var self = this;\n      var goBackLink = $('<a class=\"icon-arrow-up i-button go_back\" href=\"#\"/>')\n        .text($T('Up to timetable'))\n        .click(function() {\n          self.parentTimetable.switchToTopLevel();\n          self._hideWarnings();\n          self.session = null;\n          return false;\n        });\n\n      return $('<div class=\"group right\"/>').append(goBackLink);\n    },\n  },\n  function(\n    parent,\n    data,\n    contextInfo,\n    eventInfo,\n    width,\n    wrappingElement,\n    detailLevel,\n    isSessionTimetable,\n    customLinks,\n    canManageSession,\n    canManageBlocks,\n    canManageContribs\n  ) {\n    this.isSessionTimetable = isSessionTimetable;\n    this.isTopLevel = false;\n    this.ManagementTimeTable(\n      data,\n      contextInfo,\n      eventInfo,\n      width,\n      wrappingElement,\n      detailLevel,\n      customLinks,\n      canManageSession,\n      canManageBlocks,\n      canManageContribs\n    );\n    var managementActions = new IntervalTimeTableManagementActions(\n      this,\n      eventInfo,\n      contextInfo,\n      isSessionTimetable\n    );\n    this.IntervalTimeTableMixin(parent, width, wrappingElement, managementActions, 'proportional');\n\n    this.canvas = Html.div({});\n    this.isPoster = contextInfo.isPoster;\n\n    this.setData = IntervalTimeTableMixin.prototype.setData;\n    this.getById = IntervalTimeTableMixin.prototype.getById;\n    this.postDraw = IntervalTimeTableMixin.prototype.postDraw;\n  }\n);\n\ntype(\n  'SessionDisplayTimeTable',\n  ['TopLevelDisplayTimeTable'],\n  {\n    _functionButtons: function() {\n      var self = this;\n\n      this.TopLevelDisplayTimeTable.prototype._functionButtons.call(this);\n\n      return [this.printButton, this.fullScreenButton, this.filterButton];\n    },\n  },\n  function(data, eventInfo, width, wrappingElement, historyBroker) {\n    this.TopLevelDisplayTimeTable(\n      data,\n      eventInfo,\n      width,\n      wrappingElement,\n      'contribution',\n      historyBroker,\n      null\n    );\n  }\n);\n"},function(n,e,t){t(205)(t(1856))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nfunction _revert_element(ui) {\n  // make element assume previous size\n  if (ui.originalSize) {\n    ui.helper.height(ui.originalSize.height);\n  }\n}\n\ntype(\n  'TimeDisplacementManager',\n  [],\n  {\n    // some caching, in order to speed up computation\n    _cached_attrs: {\n      gridTop: function() {\n        return $('#timetable_grid').offset().top;\n      },\n      heightLimits: function() {\n        return [$('.hourLine:first').offset().top, $('.hourLine:last').offset().top + 1];\n      },\n    },\n\n    _cache_get: function(param) {\n      if (this._cache[param] === undefined) {\n        this._cache[param] = this._cached_attrs[param]();\n      }\n      return this._cache[param];\n    },\n\n    _cache_set: function(param, val) {\n      this._cache[param] = val;\n    },\n\n    // tooltip (shows time while dragging)\n    _initializeTooltip: function() {\n      var tip = $('<div id=\"dragTip\"><span>' + $T('move to resize') + '</span></div>');\n      tip.append($('<div class=\"pointer\"/>'));\n      $('body').append(tip.hide().fadeIn(300));\n    },\n\n    _updateTipPos: function(gridTime, block, type) {\n      var txt = gridTime[0] + ':' + gridTime[1];\n      if (txt != this.txt) {\n        $('#dragTip span').text(txt);\n        this.txt = txt;\n      }\n      $('#dragTip').position({\n        my: 'right center',\n        at: type == 'resize' ? 'left bottom' : 'left top',\n        of: block,\n        offset: '-5 0',\n      });\n    },\n\n    _killTip: function() {\n      $('#dragTip').fadeOut(300, function() {\n        $(this).remove();\n      });\n    },\n\n    _snap: function(block, time) {\n      // snapping blocks to tooltip \"grid\"\n\n      var hourline = $('#hourLine_' + parseFloat(time[0]));\n      var hourHeight = hourline.height();\n\n      var target = Math.floor(hourline.position().top + (time[1] / 60) * hourHeight);\n      // smoothly animate block size\n      block.clearQueue();\n      block.animate(\n        {height: target - block.position().top},\n        {\n          queue: true,\n        }\n      );\n\n      var tip = $('#dragTip');\n      tip.css({top: this._cache_get('gridTop') + target - tip.outerHeight() / 2});\n    },\n\n    release: function(startHour, startMinute, endHour, endMinute, eventData, ui, undo_caption) {\n      var self = this;\n      var startDT = !startHour\n        ? eventData.startDate\n        : {date: eventData.startDate.date, time: startHour + ':' + startMinute};\n      var endDT;\n\n      if (!endHour) {\n        endDT = new Date(Util.dateTimeIndicoToJS(startDT).getTime() + eventData.duration * 60000);\n      } else {\n        endDT = {date: eventData.endDate.date, time: endHour + ':' + endMinute};\n      }\n\n      self.managementActions\n        .editEntryStartEndDate(\n          Util.formatDateTime(startDT, IndicoDateTimeFormats.Server),\n          Util.formatDateTime(endDT, IndicoDateTimeFormats.Server),\n          eventData,\n          $(window).data('shiftIsPressed'),\n          undo_caption\n        )\n        .fail(function() {\n          // if something goes wrong, reset the element\n          _revert_element(ui);\n        });\n\n      self._cache = {};\n    },\n\n    requestNewHourLine: function() {\n      var first = this._grid.first()[0];\n      if (first > 0) {\n        this._addHourLine('up', first - 1);\n        // if we've just added the midnight line, hide the button\n        return first > 1;\n      }\n    },\n\n    _addHourLine: function(direction, hour) {\n      var last = this._grid.last();\n      var first = this._grid.first();\n      var last_hourline = $('#hourLine_' + last[0]);\n      var first_hourline = $('#hourLine_' + first[0]);\n\n      if (direction == 'down') {\n        var height = $('#hourLine_' + ((last[0] == 0 ? 24 : last[0]) - 1)).height();\n        var top = last[1] + height;\n        this._grid.push([hour, top]);\n        var width = last_hourline.width();\n      } else {\n        var top = first[0];\n        var height = $('#hourLine_' + first[0]).height();\n\n        this._grid.each(function(tuple) {\n          tuple[1] += height;\n        });\n        $('.hourLine, .timetableBlock').css('top', function(i, val) {\n          return parseFloat(val) + height;\n        });\n\n        this._grid.unshift([hour, 0]);\n        var width = first_hourline.width();\n      }\n\n      var hourline = $('<div class=\"hourLine\"/>')\n        .attr('id', 'hourLine_' + hour)\n        .css({top: top + 'px', height: height, width: width})\n        .text(zeropad(hour) + ':00');\n\n      if (direction == 'down') {\n        $('#timetable_grid').append(hourline);\n        last_hourline.height(height);\n      } else {\n        $('#timetable_grid').prepend(hourline);\n      }\n\n      $('#timetable_canvas').height($('#timetable_canvas').height() + height);\n      $('#timetable').height($('#timetable_canvas').height() + height);\n\n      var ttdrawer = this._timetable.getTimetableDrawer();\n      ttdrawer.make_droppable(hourline, hour);\n\n      return height;\n    },\n\n    _hourLineNow: function(elem, type) {\n      type = type || 'resize';\n\n      var height = elem.height();\n      var newPos = elem.offset().top + (type == 'drag' ? 0 : height);\n      var otherTip = newPos + (type == 'drag' ? height : height);\n\n      var curBestDiff = Number.MAX_VALUE;\n      var curHour = null;\n      var parentPos = this._cache_get('gridTop');\n      var hl = this._cache_get('heightLimits'); //[minHeight, maxHeight]\n      var last = this._grid.last();\n      var first = this._grid.first();\n\n      if (otherTip > hl[1]) {\n        if (last[0] != 0) {\n          var height = this._addHourLine('down', (last[0] + 1) % 24);\n          // recalculate [minHeight, maxHeight] next time\n          this._cache_set('heightLimits'); // set as dirty\n\n          if (type == 'drag') {\n            elem.data('ui-draggable')._setContainment();\n          } else {\n            elem.data('ui-resizable').resetContainment();\n          }\n        }\n      } else if (newPos > hl[1]) {\n        return last;\n      } else if (newPos <= hl[0]) {\n        return first;\n      }\n\n      // find the hour line that we are currently on\n      // (the one that is before the pointer and closest to it)\n      this._grid.each(function(tuple) {\n        // tuple = [hour, px]\n        // block abs pos - grid abs offs - line rel offs\n        var diff = newPos - parentPos - tuple[1];\n\n        if (diff > 0 && diff < curBestDiff) {\n          curBestDiff = diff;\n          curHour = tuple;\n        }\n      });\n      return curHour;\n    },\n\n    round5: function(hour, minute) {\n      // closest minute\n      var closest = Math.floor((minute + 2.5) / 5) * 5;\n      if (closest > 59) {\n        return [zeropad((hour + 1) % 24), zeropad(0)];\n      } else {\n        return [zeropad(hour), zeropad(closest)];\n      }\n    },\n\n    /* This function determines what hour + minute the time block\n     * should start at for the current dragging pixel position in the timetable.\n     */\n    _updateTime: function(elem, type) {\n      // type = 'resize' | 'drag'\n\n      var hour_line = this._hourLineNow(elem, type);\n\n      if (hour_line == this._grid.last()) {\n        // if we are past the last hour line, just return it\n        var gridTime = [zeropad(this._grid.last()[0]), '00'];\n      } else {\n        var blockPosTop = elem.position().top;\n        var reference = type == 'drag' ? blockPosTop : blockPosTop + elem.height();\n\n        var gridTime = this.round5(\n          hour_line[0],\n          this._calculateRelativeMinuteOffset(reference, hour_line)\n        );\n      }\n\n      this._updateTipPos(gridTime, elem, type);\n      if (type == 'resize') {\n        this._snap(elem, gridTime, type);\n      }\n\n      return gridTime;\n    },\n\n    _calculateRelativeMinuteOffset: function(position, hour_line) {\n      var hour = hour_line[0];\n      var hourTop = hour_line[1];\n      var hourHeight = $('#hourLine_' + hour).height();\n      var offsetHeight = position - hourTop;\n      var minute = Math.floor((offsetHeight / hourHeight) * 59);\n\n      return minute > 60 || minute < 0 ? null : minute;\n    },\n\n    _withNoEvents: function(func) {\n      var ttdrawer = this._timetable.getTimetableDrawer();\n\n      ttdrawer.toggleEvents(false);\n      func();\n\n      _.defer(function() {\n        ttdrawer.toggleEvents(true);\n      });\n    },\n  },\n  function(timetable) {\n    this._timetable = timetable;\n    this._cache = {};\n  }\n);\n\ntype('DraggableBlockMixin', [], {\n  _makeDraggable: function() {\n    var self = this;\n    var originalWidth = this.element.width();\n    var originalHeight = this.element.height();\n\n    /* Resize timeblock if nedeed */\n    var maxCol = self.timetable.getTimetableDrawer().maxCol;\n    var newWidth = Math.round($('#timetable').width() / maxCol);\n\n    var heightThreshold = 450;\n    var heightChange = originalHeight > heightThreshold;\n    var newHeight = heightChange ? heightThreshold : originalHeight;\n\n    var widthChange = !(newWidth == originalWidth);\n    var hourLine_mode = false;\n\n    var draggable = this.element.super_draggable({\n      //Center the mouse in the middle of the block while dragging\n      containment: $('#timetable'),\n      revert: 'invalid',\n      refreshPositions: true,\n      start: function(event, ui) {\n        /* Close and destroy balloon so it will be updated. For an unknown reason, if the\n         * qTip is not disabled first it is re-opened when the drag action ends. */\n        var $qbubble = self.element.find('[data-hasqtip]');\n        if ($qbubble.length) {\n          $qbubble.qbubble('destroy');\n          $qbubble.qbubble('api').disable();\n        }\n\n        /* Resize timeblock if nedeed */\n        maxCol = self.timetable.getTimetableDrawer().maxCol;\n        newWidth = maxCol > 1 ? Math.round($('#timetable').width() / maxCol) : originalWidth;\n\n        ui.helper.animate({width: newWidth});\n        ui.helper.height(newHeight);\n\n        $(this)\n          .data('ui-draggable')\n          ._setContainment(newWidth, newHeight);\n\n        self._initializeTooltip();\n\n        var pos = ui.helper.position();\n        draggable.data('initialPosition', pos);\n      },\n      drag: function(event, ui) {\n        if (hourLine_mode && $(this).position().left > 0) {\n          hourLine_mode = false;\n          $('.ui-droppable').super_droppable('enable');\n        }\n        if ($(this).position().left == 0) {\n          $('.hourLine.ui-droppable').super_droppable('enable');\n          $('.timetableBlock.ui-droppable').super_droppable('disable');\n          hourLine_mode = true;\n        }\n      },\n      stop: function(event, ui) {\n        //reset original width\n        if (widthChange || heightChange) {\n          ui.helper.animate({\n            width: originalWidth,\n            height: originalHeight,\n          });\n        }\n        self._killTip();\n      },\n    });\n\n    draggable.data('eventData', this.eventData);\n  },\n});\n\ntype('ResizableBlockMixin', [], {\n  _makeResizable: function() {\n    var self = this;\n\n    this.resizable = this.element.reset_resizable({\n      // properties\n      ignoreShift: true,\n      containment: $('#timetable_canvas'),\n      maxWidth: this.element.width(),\n      minWidth: this.element.width(),\n\n      // events\n      start: function(event, ui) {\n        // when resizing starts, initialize the tooltip if it still\n        // does not exist\n        if (!$('#dragTip').length) {\n          self._initializeTooltip(ui.helper, function() {\n            self._updateTime(ui.helper, 'resize');\n          });\n        } else {\n          $('#dragTip').fadeIn(300);\n        }\n      },\n      resize: function(event, ui) {\n        // as the cursor is being dragged, update the time in the\n        // tooltip. also store it for later\n\n        var hours = self._updateTime(ui.helper, 'resize');\n        if (hours) {\n          $(ui.helper).data('endHour', hours[0]);\n          $(ui.helper).data('endMinute', hours[1]);\n        }\n      },\n      stop: function(event, ui) {\n        // the mouse was released, ask for the resize to be performed\n        // and kill the tooltip\n        ui.helper.stop(true);\n        var data = $(ui.helper).data();\n\n        self._withNoEvents(function() {\n          self.release(null, null, data.endHour, data.endMinute, self.eventData, ui, 'resize');\n        });\n\n        self._killTip();\n      },\n    });\n  },\n});\n\ntype(\n  'DroppableTimetableMixin',\n  ['TimeDisplacementManager'],\n  {\n    _shiftKeyListener: function() {\n      var indicatorDiv = $('.bottomTip');\n      var self = this;\n\n      //If its not already drawn/appended\n      if (!(indicatorDiv.length > 0)) {\n        indicatorDiv = $('<div class=\"bottomTip\"/>')\n          .html(\n            $T(\n              '<span class=\"key light\">Shift</span> is currently pressed. Changes will be applied to blocks after.'\n            )\n          )\n          .appendTo('body');\n      }\n\n      // Keyboard Key \"Shift\" pressed > listener for shifting while dragging blocks\n      $(document)\n        .keydown(function(e) {\n          // if Shift is currently pressed\n          if (\n            self._timetable.isTopLevel &&\n            self._timetable.isSessionTimetable &&\n            !self._timetable.canManageBlocks\n          ) {\n            return;\n          }\n\n          if (e.keyCode == '16') {\n            $(window).data('shiftIsPressed', true);\n            indicatorDiv.fadeIn('fast');\n          }\n        })\n        .keyup(function(e) {\n          if (e.keyCode == '16') {\n            $(window).data('shiftIsPressed', false);\n            indicatorDiv.fadeOut('fast');\n          }\n        })\n        .blur(function() {\n          $(window).data('shiftIsPressed', false);\n          indicatorDiv.fadeOut('fast');\n        });\n\n      $(window).data('shiftIsPressed', false); //default value is false\n    },\n\n    make_droppable: function(element, hour) {\n      //\"unique\" name for each drag-handler per hourLine\n      var thisDragSpaceName = 'drag.' + hour;\n      var minute = null;\n      var self = this;\n\n      element.droppable({\n        drop: function(event, ui) {\n          // execute making sure click events on blocks are disabled\n          self._withNoEvents(function() {\n            // Prevent firing the same request many times\n            // It may happen for huge blocks that span multiple hourLines\n            if (event.target.id === 'hourLine_' + hour.toString().replace(/^0/, '')) {\n              self.release(\n                hour,\n                minute,\n                null,\n                null,\n                $(ui.draggable).data('eventData'),\n                ui.helper,\n                'placementChange'\n              );\n            }\n          });\n        },\n        tolerance: 'touch',\n        accept: '.ui-draggable.timetableBlock',\n        over: function(event, ui) {\n          $('#timetable').on(thisDragSpaceName, '.ui-draggable.timetableBlock', function(\n            event,\n            ui\n          ) {\n            if (element.droppable('option', 'disabled')) {\n              return;\n            }\n            var gridTime = self._updateTime(ui.helper, 'drag');\n            //null means that the drag is not allowed\n            if (gridTime == null) {\n              return;\n            }\n            hour = gridTime[0];\n            minute = gridTime[1];\n          });\n        },\n        out: function(event, ui) {\n          $('#timetable').off(thisDragSpaceName, '.ui-draggable.timetableBlock');\n        },\n      });\n    },\n  },\n  function(timetable) {\n    this.TimeDisplacementManager(this.timetable);\n    if (this.managementMode) {\n      this._shiftKeyListener.call(this);\n    }\n    this._grid = _(this.grid);\n  }\n);\n\ntype('DroppableBlockMixin', [], {\n  _makeDroppable: function() {\n    if (this.eventData.entryType != 'Session') {\n      return;\n    }\n\n    var self = this;\n\n    function isSession(ui) {\n      return $(ui.draggable).hasClass('timetableSession');\n    }\n\n    function isTouchingWall(ui) {\n      return $(ui.draggable).position().left == 0;\n    }\n\n    function removeBottomMove(ui) {\n      $('#tt_bottom_move').fadeOut(500, function() {\n        $(this).remove();\n      });\n    }\n\n    var inside = false;\n\n    this.element.super_droppable({\n      drop: function(event, ui) {\n        $('#dragTip').remove();\n\n        //If a session is dropped on top do nothing.\n        if (isSession(ui) || isTouchingWall(ui)) {\n          return;\n        }\n\n        var blockEventData = $(ui.draggable).data('eventData');\n        var chosenValue = {parent_id: self.eventData.scheduleEntryId};\n        var initialPosition = $(ui.draggable).data('initialPosition');\n\n        removeBottomMove();\n\n        self._withNoEvents(function() {\n          self.managementActions.moveToSession(blockEventData, chosenValue, 'drop');\n        });\n        return;\n      },\n      greedy: true,\n      tolerance: 'pointer',\n      activeClass: 'ui-droppable-active',\n      over: function(event, ui) {\n        /* If you touch the wall while also\n         * over a session - show that session with the style of\n         * \"not current drop target\"\n         */\n\n        if (isSession(ui) || isTouchingWall(ui)) {\n          return;\n        }\n\n        if (!inside) {\n          var newWidth = $(this).width() * 0.75,\n            newHeight = $(this).height() * 0.75;\n          ui.draggable.data('draggingWidth', ui.draggable.width());\n          ui.draggable.data('draggingHeight', ui.draggable.height());\n\n          ui.draggable.animate({width: newWidth});\n          ui.draggable.height({height: newHeight});\n\n          ui.draggable.data('ui-draggable')._setContainment(newWidth, newHeight);\n\n          $('.timetableBlock.ui-droppable')\n            .not(this)\n            .super_droppable('disable');\n          $('.hourLine.ui-droppable').droppable('disable');\n          $('#dragTip').hide();\n          inside = true;\n\n          if (!$('#tt_bottom_move').length) {\n            $('<div class=\"bottomTip\" id=\"tt_bottom_move\"/>')\n              .html('<div class=\"circle\"></div>' + $T('Drop to move block inside session'))\n              .appendTo('body')\n              .fadeIn();\n          } else {\n            $('#tt_bottom_move')\n              .stop(true)\n              .fadeTo(500, 1);\n          }\n        }\n      },\n      out: function(event, ui) {\n        inside = false;\n        if (isSession(ui)) {\n          return;\n        }\n\n        ui.draggable.width(ui.draggable.data('draggingWidth'));\n        ui.draggable.height(ui.draggable.data('draggingHeight'));\n\n        $('#dragTip').show();\n        $('.timetableBlock.ui-droppable')\n          .not(this)\n          .super_droppable('enable');\n        $('.hourLine.ui-droppable').droppable('enable');\n\n        removeBottomMove();\n      },\n    });\n  },\n});\n\ntype(\n  'DragAndDropBlockMixin',\n  ['DroppableBlockMixin', 'ResizableBlockMixin', 'DraggableBlockMixin', 'TimeDisplacementManager'],\n  {\n    _postDraw: function() {\n      var entryType = this.eventData.entryType;\n      if (\n        !this.timetable.isSessionTimetable ||\n        entryType != 'Session' ||\n        this.timetable.canManageBlocks\n      ) {\n        this._makeResizable();\n        this._makeDraggable();\n        this._makeDroppable();\n      }\n    },\n  },\n\n  function() {\n    this.TimeDisplacementManager(this.timetable);\n    this.element = $(this.block.dom);\n    this._grid = _(this.timetable.getTimetableDrawer().grid);\n  }\n);\n\nvar activeTT;\n\nfunction switchTT(event, tt) {\n  // set the current timetable as active, so that the button only acts on it\n  activeTT = tt;\n  var tdrawer = tt.getTimetableDrawer();\n  if (!tdrawer.isPoster) {\n    if (tdrawer._grid.first()[0] != 0) {\n      // we start at some other hour before midnight, show the button\n      $('#tt_hour_tip').fadeIn();\n    } else {\n      $('#tt_hour_tip').fadeOut();\n    }\n  }\n}\n\n$(function() {\n  // bind several timetable events to the switchTT function (timetable transitions)\n  $('body').bind('timetable_ready', function(event, tt) {\n    $('#tt_menu').css('width', tt.width);\n\n    switchTT(event, tt);\n    $('#tt_hour_tip').unbind();\n    $('#tt_hour_tip').click(function(evt) {\n      if (!activeTT.getTimetableDrawer().requestNewHourLine()) {\n        $(this).fadeOut();\n      }\n    });\n  }); // postDraw\n\n  $('body').one('timetable_ready', function() {\n    var closeMenu = function() {\n      var dropdown = $('#tt_menu .group');\n      if (dropdown) {\n        try {\n          dropdown.dropdown('close');\n        } catch (e) {}\n      }\n    };\n\n    // initialize sticky headers\n    $.ui.sticky({\n      sticky: closeMenu,\n      normal: closeMenu,\n    });\n  });\n\n  $('body').bind('timetable_switch_toplevel', switchTT); // switch to top level\n  $('body').bind('timetable_switch_interval', switchTT); // switch to interval\n  $('body').bind('timetable_update', switchTT); // changes in local timetable\n});\n"},function(n,e,t){t(205)(t(1858))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'TimetableBlockBase',\n  [],\n  {\n    openPopup: function(event) {\n      var self = this;\n      self.popupActive = true;\n      self._drawPopup(event);\n    },\n\n    createMaterialMenu: function(attachments, triggerElement, closeHandler) {\n      var menuItems = {},\n        sections = {'': {content: menuItems, description: ''}};\n\n      $.each(attachments.files, function(i, attachment) {\n        menuItems['material' + attachment.download_url] = {\n          action: attachment.download_url,\n          display: attachment.title,\n          description: attachment.description,\n        };\n      });\n\n      $.each(attachments.folders, function(i, folder) {\n        var sectionItems = {},\n          section = folder.title;\n\n        $.each(folder.attachments, function(i, attachment) {\n          sectionItems['material' + attachment.download_url] = {\n            action: attachment.download_url,\n            display: attachment.title,\n            description: attachment.description,\n          };\n        });\n        sections[section] = {content: sectionItems, description: folder.description};\n      });\n      return new SectionPopupMenu(sections, [triggerElement], null, null, true, closeHandler);\n    },\n\n    getMaterialMenu: function(attachments) {\n      var root = $('<ul class=\"material_list\"/>');\n\n      each(attachments.files, function(attachment) {\n        var resource_html = $('<li/>').append(\n          $('<a/>')\n            .attr('href', attachment.download_url)\n            .text(attachment.title)\n        );\n        root.append(resource_html);\n      });\n\n      each(attachments.folders, function(folder) {\n        var resources = $('<ul class=\"resource_list\"/>');\n        each(folder.attachments, function(attachment) {\n          var resource_html = $('<li/>').append(\n            $('<a/>')\n              .attr('href', attachment.download_url)\n              .text(attachment.title)\n          );\n          resources.append(resource_html);\n        });\n        var material_html = $('<li/>').append($('<h3/>').append(folder.title), resources);\n        root.append(material_html);\n      });\n      return root;\n    },\n\n    createMaterialButton: function(attachments) {\n      var self = this;\n\n      var button = Html.a('i-link entry-attachments');\n      var $button = $(button.dom);\n      $button\n        .qtip({\n          content: {\n            text: self.getMaterialMenu(attachments),\n          },\n          show: {\n            event: false,\n          },\n          hide: {\n            event: 'unfocus',\n          },\n          events: {\n            show: function() {\n              $button.addClass('open').trigger('indico:closeAutoTooltip');\n            },\n            hide: function() {\n              $button.removeClass('open');\n            },\n          },\n          position: {\n            my: 'top right',\n            at: 'bottom left',\n          },\n          style: {\n            classes: 'material_tip',\n          },\n          suppress: false,\n        })\n        .on('click', function(evt) {\n          evt.stopPropagation();\n          $(this).qtip('show');\n        })\n        .attr('title', $T.gettext('Show materials'))\n        .data('qtip-position', 'right');\n\n      return button;\n    },\n\n    _getRightSideDecorators: function() {\n      return Html.span({});\n    },\n\n    _formatConveners: function(conveners) {\n      if (conveners) {\n        return _.map(_.sortBy(conveners, _.property('displayOrderKey')), _.property('name')).join(\n          ', '\n        );\n      } else {\n        return '';\n      }\n    },\n  },\n  function(timetable) {\n    this.timetable = timetable;\n    this.popupActive = false;\n    this.popupAllowClose = true;\n  }\n);\n\ntype(\n  'TimetableBlockNormal',\n  ['TimetableBlockBase'],\n  {\n    _getTitle: function() {\n      var title = this.eventData.title;\n\n      if (this.eventData.slotTitle && this.eventData.slotTitle !== '') {\n        title += ': ' + this.eventData.slotTitle;\n      }\n      return title;\n    },\n\n    _blockDescription: function(block, event) {\n      var self = this;\n\n      this.titleDiv = Html.div(\n        {className: 'timetableBlockTitle', style: {fontWeight: this.eventData.fontWeight}},\n        this._getTitle()\n      );\n\n      this.headerBlock = Html.div({className: 'timetableBlockWrapper'}, this.titleDiv);\n      this.footerBlock = Html.div({className: 'timetableBlockWrapper', style: {marginTop: 'auto'}});\n\n      this.div = Html.div(\n        {className: 'entry-content', style: {width: '100%', height: '100%'}},\n        this.headerBlock\n      );\n\n      if (this.compactMode) {\n        this.timeDiv = Html.div(\n          'timetableBlockTimeDiscreet',\n          this.eventData.startDate.time.substring(0, 5) +\n            ' - ' +\n            this.eventData.endDate.time.substring(0, 5)\n        );\n        this.div.insert(this.timeDiv);\n      } else {\n        if (this.eventData.startDate.time == this.eventData.endDate.time) {\n          this.timeDiv = Html.div(\n            {className: 'timetableBlockTime'},\n            this.eventData.startDate.time.substring(0, 5)\n          );\n        } else {\n          this.timeDiv = Html.div(\n            {className: 'timetableBlockTime'},\n            this.eventData.startDate.time.substring(0, 5) +\n              ' - ' +\n              this.eventData.endDate.time.substring(0, 5)\n          );\n        }\n\n        this.locationDiv = Html.div('timetableBlockLocation');\n        var addComma = false;\n        if (\n          this.eventData.room &&\n          this.timetable\n            .getTimetableDrawer()\n            .layoutChooser.get()\n            .shouldShowRoom()\n        ) {\n          this.locationDiv.append(this.eventData.room);\n          addComma = true;\n        }\n        if (this.eventData.location) {\n          this.locationDiv.append(addComma ? ', ' : '');\n          this.locationDiv.append(this.eventData.location);\n        }\n\n        // If it's a contribution add the speakers information\n        if (self.eventData.presenters && self.eventData.presenters.length > 0) {\n          var firstPresenter = self.eventData.presenters[0];\n          this.presentersDiv = Html.div({className: 'timetableBlockPresenters'});\n          this.presentersDiv.append(firstPresenter.name);\n          if (self.eventData.presenters.length > 1) {\n            this.presentersDiv.append(' ' + $T('et al.'));\n          }\n          this.headerBlock.insert(this.presentersDiv);\n        }\n\n        // Add material menu\n        if (\n          !self.managementActions &&\n          self.eventData.attachments &&\n          self.eventData.attachments.files\n        ) {\n          this.headerBlock.insert(this.createMaterialButton(this.eventData.attachments));\n        }\n\n        //this.titleWrapper.insert(this.createManageButton());\n\n        //Add converner's info\n        this.convenerDiv = Html.div(\n          'timetableBlockConvener',\n          self._formatConveners(this.eventData.conveners)\n        );\n\n        if (this.eventData.conveners) {\n          this.headerBlock.append(this.convenerDiv);\n        }\n        this.footerBlock.append(this.locationDiv);\n        this.footerBlock.append(this.timeDiv);\n        this.div.append(this.footerBlock);\n      }\n\n      return this.div;\n    },\n\n    redraw: function() {\n      this.block.clear();\n      this.block.set(this._blockDescription());\n    },\n\n    draw: function(leftPos, width) {\n      var self = this;\n\n      this.leftPos = leftPos;\n      this.width = width;\n      // the block height minus an extra padding to prevent nodes from being too close\n      this.height = this.blockData.end - this.blockData.start - 2;\n      this.topPos = this.blockData.start;\n\n      //To disable dragging while outside management mode\n      var blockIsDraggable = this.detailLevel != 'session' && this.detailLevel != 'contribution';\n\n      var additionalClasses = 'ui-draggable ui-resizable';\n\n      var contributionClass = blockIsDraggable\n        ? 'timetableContribution ' + additionalClasses\n        : 'timetableContribution';\n      var breakClass = blockIsDraggable ? 'timetableBreak ' + additionalClasses : 'timetableBreak';\n      var sessionClass = blockIsDraggable\n        ? 'timetableSession ' + additionalClasses\n        : 'timetableSession';\n      var classTable = {\n        Session: sessionClass,\n        Contribution: contributionClass,\n        Break: breakClass,\n      };\n\n      $(this.block.dom).css({\n        'position': 'absolute',\n        'top': pixels(this.topPos),\n        'height': pixels(this.height),\n        'background-color': this.eventData.color,\n        'color': this.eventData.textColor,\n        'left': pixels(this.leftPos),\n        'width': pixels(this.width - 3),\n        'border-bottom-style': this.blockData.unfinished ? 'dashed' : '',\n      });\n\n      $(this.block.dom).addClass('timetableBlock ' + classTable[this.eventData.entryType]);\n\n      this.block.set(this._getRightSideDecorators(), this._blockDescription());\n\n      // This is a special case, when users shows contribution details it doesn't\n      // apply to poster sessions. Instead add some grpahical elements to indicate\n      // that this sessions contains several contributions.\n      if (this.detailLevel == 'contribution' && this.eventData.isPoster && this.height > 30) {\n        var pileDiv = this.createPileEffect();\n        pileDiv.dom.onmouseover = function() {};\n        var numContribs = 0;\n        each(this.eventData.entries, function(value, key) {\n          if (value.entryType == 'Contribution') {\n            numContribs++;\n          }\n        });\n        pileDiv.dom.onmouseover = function(event) {\n          if (self.popupActive) {\n            return;\n          }\n          IndicoUI.Widgets.Generic.tooltip(\n            pileDiv.dom,\n            event,\n            \"<div style='padding:3px'>\" +\n              $T('This poster session has ') +\n              numContribs +\n              $T(' contribution(s).') +\n              '<br / >' +\n              $T('Please click for more information.') +\n              '</div>'\n          );\n        };\n      }\n\n      if (!self.printableVersion) {\n        $(this.block.dom).on('click', '.entry-content', function(e) {\n          if (!self.timetable.getTimetableDrawer().eventsDisabled) {\n            $(this).trigger('tt_block.balloon', e);\n          }\n        });\n        highlightWithMouse(this.div, this.block);\n      }\n      return this.block;\n    },\n\n    _postDraw: function() {},\n\n    postDraw: function(hook) {\n      const parentDivHeight = this.div.dom.parentNode.offsetHeight;\n      const contentHeight = () => Array.from(this.div.dom.childNodes).reduce((acc, x) => acc + x.offsetHeight, 0);\n\n      // If nothing has been drawn do nothing\n      if (!parentDivHeight) {\n        return;\n      }\n\n      // If the content (header + footer) is bigger than the block, we'll start by reducing the footer\n      if (contentHeight() > parentDivHeight - 8) {\n        this.footerBlock.dom.style.whiteSpace = 'nowrap';\n      }\n\n      // If the content is bigger than the block, we'll remove line wrappings first\n      // 8 is equivalent to 2x the block padding\n      if (this.headerBlock.dom.offsetHeight > parentDivHeight - 8) {\n        this.headerBlock.dom.style.whiteSpace = 'nowrap';\n      }\n\n      // If the content still doesn't fit, we'll fit everything in one line\n      if (this.headerBlock.dom.offsetHeight > parentDivHeight - 8) {\n        this.headerBlock.dom.style.flexWrap = 'nowrap';\n      }\n\n      this._postDraw();\n      return null;\n    },\n    createPileEffect: function() {\n      var self = this;\n      var pileEffect = Html.div(\n        {style: {position: 'absolute', top: '3px', left: '0', width: pixels(this.width - 3)}},\n        Html.div(\n          {},\n          Html.div('timetableBlock timetableBlockPileEffect'),\n          Html.div('timetableBlock timetableBlockPileEffect'),\n          Html.div('timetableBlock timetableBlockPileEffect')\n        )\n      );\n\n      this.div.insert(pileEffect);\n      this.headerBlock.dom.style.paddingTop = '15px';\n      if (this.compactMode) {\n        this.timeDiv.dom.style.paddingTop = '15px';\n      }\n\n      return pileEffect;\n    },\n    setColors: function(textColor, bgColor) {\n      this.block.dom.style.backgroundColor = bgColor;\n      this.block.dom.style.color = textColor;\n    },\n  },\n  function(timetable, eventData, blockData, compactMode, printableVersion, detailLevel) {\n    this.TimetableBlockBase(timetable);\n    this.compactMode = compactMode;\n    this.eventData = eventData;\n    this.blockData = blockData;\n    this.margin = TimetableDefaults.blockMargin;\n    this.printableVersion = printableVersion;\n    this.detailLevel = detailLevel;\n    this.arrows = Html.span({});\n    this.block = Html.div({});\n\n    var self = this;\n    $(this.block.dom).bind('tt_block.balloon', function(event, originalEvent) {\n      if (!self.popupActive) {\n        self.openPopup(originalEvent);\n      }\n    });\n  }\n);\n\ntype(\n  'TimetableBlockWholeDayBase',\n  ['TimetableBlockBase'],\n  {\n    _blockDescription: function(block, event) {\n      var self = this;\n\n      this.titleDiv = Html.div(\n        {className: 'timetableBlockTitle', style: {fontWeight: this.eventData.fontWeight}},\n        this.eventData.title\n      );\n      this.headerBlock = Html.div({}, this._getRightSideDecorators(), this.titleDiv);\n\n      this.div = Html.div({style: {width: '100%', height: '100%'}}, this.headerBlock);\n\n      this.timeDiv = Html.div(\n        'timetableBlockTimeDiscreet',\n        this.eventData.startDate.time.substring(0, 5) +\n          ' - ' +\n          this.eventData.endDate.time.substring(0, 5)\n      );\n      this.div.insert(this.timeDiv);\n\n      // Add material menu\n      if (self.eventData.attachments && self.eventData.attachments.files) {\n        this.headerBlock.insert(this.createMaterialButton(this.eventData.attachments));\n      }\n\n      return this.div;\n    },\n\n    draw: function() {\n      var self = this;\n\n      var classTable = {\n        Session: 'timetableSession',\n        Contribution: 'timetableContribution ',\n        Break: 'timetableBreak ',\n      };\n\n      var block = Html.div(\n        {\n          style: {\n            backgroundColor: this.eventData.color,\n            color: this.eventData.textColor,\n            maxHeight: '30px',\n            margin: '2px 0',\n            overflow: 'hidden',\n          },\n          className: 'timetableBlock ' + classTable[this.eventData.entryType],\n        },\n        this._blockDescription()\n      );\n\n      if (!self.printableVersion) {\n        block.dom.style.cursor = 'pointer';\n        block.observeClick(function(e) {\n          self.openPopup(e);\n        });\n        highlightWithMouse(this.div, block);\n      }\n\n      return block;\n    },\n    postDraw: function() {},\n  },\n  function(timetable, eventData, blockData) {\n    this.TimetableBlockBase(timetable);\n\n    this.eventData = eventData;\n    this.blockData = blockData;\n    this.margin = TimetableDefaults.blockMargin;\n    this.arrows = Html.span({});\n  }\n);\n\nfunction loadBalloonContent(self, api, editable) {\n  var entryId = self.eventData.scheduleEntryId\n    ? self.eventData.scheduleEntryId\n    : self.eventData.id.substring(1);\n  var url = editable\n    ? Indico.Urls.Timetable.entries.info.manage\n    : Indico.Urls.Timetable.entries.info.display;\n  var urlParams = {\n    confId: self.eventData.conferenceId,\n    entry_id: entryId,\n  };\n  if (self.timetable.isSessionTimetable) {\n    urlParams.session_id = self.eventData.sessionId;\n    urlParams.is_session_timetable = 1;\n  }\n\n  $.ajax({\n    url: build_url(url, urlParams),\n  }).then(\n    function(content) {\n      // Set the tooltip content upon successful retrieval\n      api.set('content.text', content.html);\n      var $content = api.elements.content;\n\n      if (editable) {\n        var qtipId = $content.closest('.qtip').data('qtip-id');\n        var $balloonQtip = $('[data-hasqtip=' + qtipId + ']');\n        var closeBalloon = false;\n        $content.find('.js-edit-time').ajaxqbubble({\n          url: build_url(Indico.Urls.Timetable.entries.editTime, urlParams),\n          qBubbleOptions: {\n            style: {\n              classes: 'balloon-time-qtip',\n            },\n            position: {\n              at: 'top center',\n              my: 'bottom center',\n            },\n            events: {\n              hidden: function() {\n                if (closeBalloon) {\n                  $balloonQtip.qbubble('hide');\n                }\n              },\n            },\n          },\n          qtipConstructor: function(element, qtipOptions) {\n            $balloonQtip.qbubble('createNested', element, qtipOptions);\n          },\n          onClose: function(data) {\n            handleNotifications(data);\n            if (data) {\n              self.timetable._updateDay(data.update);\n              /* Since the entry update creates a new div we can't\n               * easily reposition the balloon on the timetable entry. */\n              closeBalloon = true;\n            }\n          },\n        });\n\n        $content\n          .on('indico:confirmed', '.js-delete', function(evt) {\n            evt.preventDefault();\n            self.managementActions.deleteEntry(self.eventData);\n          })\n          .on('click', '.js-clone', function(evt) {\n            evt.preventDefault();\n            hideBalloon();\n          })\n          .on('indico:confirmed', '.js-clone', function(evt) {\n            evt.preventDefault();\n\n            var cloneUrlParams = $.extend({}, urlParams, {\n              contrib_id: self.eventData.contributionId,\n            });\n\n            $.ajax({\n              url: build_url(Indico.Urls.Timetable.contributions.clone, cloneUrlParams),\n              method: 'POST',\n              dataType: 'json',\n              contentType: 'application/json',\n              complete: IndicoUI.Dialogs.Util.progress(),\n              error: handleAjaxError,\n              success: function(data) {\n                if (data) {\n                  self.timetable._updateDay(data.update);\n                }\n              },\n            });\n          })\n          .on('ajaxDialog:closed', '.js-manage-attachments, .js-manage-subcontribs', function(e) {\n            api.set('content.text', function(evt, api) {\n              loadBalloonContent(self, api, editable);\n            });\n          })\n          .on('ajaxDialog:loadError', '.js-move, .js-edit', function(evt, xhr) {\n            if (xhr.status == 404) {\n              evt.preventDefault();\n              handleErrorResponse(xhr);\n            }\n          });\n\n        $content.find('.js-switch-to-interval').on('click', function() {\n          self.managementActions.switchToIntervalTimetable(self.eventData.id);\n        });\n\n        $content.find('.js-edit').on('click', function() {\n          var extraParams = $(this).data('extra-params');\n          ajaxDialog({\n            trigger: this,\n            url: build_url(\n              Indico.Urls.Timetable.entries.edit,\n              $.extend({}, urlParams, extraParams)\n            ),\n            title: $(this).data('title'),\n            onClose: function(data) {\n              if (data) {\n                handleNotifications(data);\n                self.timetable._updateDay(data.update);\n              }\n            },\n          });\n        });\n\n        $content.find('.js-move').on('click', function() {\n          var urlArgs = {\n            confId: self.eventData.conferenceId,\n            entry_id: self.eventData.scheduleEntryId,\n          };\n          if (self.timetable.isSessionTimetable) {\n            urlArgs.session_id = self.timetable.contextInfo.sessionId;\n          }\n          ajaxDialog({\n            url: build_url(Indico.Urls.Timetable.entries.move, urlArgs),\n            data: {day: self.timetable.currentDay},\n            title: $T.gettext('Move entry'),\n            subtitle: $(this).data('subtitle'),\n            trigger: this,\n            onClose: function(data) {\n              if (data) {\n                self.managementActions.moveToSession(self.eventData, data, true, null);\n              }\n            },\n          });\n        });\n\n        var $picker = $content.find('.palette-picker');\n        $picker.palettepicker({\n          availableColors: $picker.data('palette'),\n          selectedColor: $picker.data('initial-color'),\n          onSelect: function(background, text) {\n            $.ajax({\n              url: $picker.data('href'),\n              method: $picker.data('method'),\n              data: JSON.stringify({colors: {text: text, background: background}}),\n              dataType: 'json',\n              contentType: 'application/json',\n              complete: IndicoUI.Dialogs.Util.progress(),\n              error: handleAjaxError,\n              success: function(data) {\n                self.managementActions._addEntries(data.entries);\n              },\n            });\n          },\n          qtipConstructor: function(element, qtipOptions) {\n            var qtipId = $picker.closest('.qtip').data('qtip-id');\n            $('[data-hasqtip=' + qtipId + ']').qbubble('createNested', element, qtipOptions);\n          },\n        });\n      }\n      $content.find('.js-hide-balloon').on('click', api.hide.bind(api));\n      // Change the target of the qTip position in order to open it at the mouse position\n      $content.closest('.qtip').trigger('qbubble:ajaxload');\n    },\n    function(xhr, status, error) {\n      if (xhr.status === 404 || xhr.status === 403) {\n        handleErrorResponse(xhr);\n        api.set(\n          'content.text',\n          $T.gettext('This timetable entry does not exist anymore. Please refresh the page.')\n        );\n      }\n    }\n  );\n\n  return $T.gettext('Loading...');\n}\n\nfunction handleErrorResponse(xhr) {\n  cornerMessage({\n    message: $T.gettext('This timetable entry does not exist anymore. Please refresh the page.'),\n    actionLabel: $T.gettext('Refresh'),\n    actionCallback: function() {\n      location.reload();\n    },\n    duration: 10000,\n    class: 'error',\n  });\n}\n\nfunction drawBalloon(self, evt, editable) {\n  var timetableBlock = $(self.div.dom);\n  var entryId = self.eventData.scheduleEntryId\n    ? self.eventData.scheduleEntryId\n    : self.eventData.id.substring(1);\n\n  if ($('html').data('static-site')) {\n    var url;\n    if (self.eventData.entryType == 'Session') {\n      url = build_url(Indico.Urls.Sessions.display_session, {\n        confId: self.eventData.conferenceId,\n        session_id: self.eventData.sessionId,\n      });\n    } else if (self.eventData.entryType == 'Contribution') {\n      url = build_url(Indico.Urls.Contributions.display_contribution, {\n        confId: self.eventData.conferenceId,\n        contrib_id: self.eventData.contributionId,\n      });\n    } else {\n      return;\n    }\n    location.href = url;\n  } else {\n    var isBreak = self.eventData.entryType == 'Break';\n\n    timetableBlock.qbubble({\n      id: entryId.toString(),\n      content: {\n        text: function(evt, api) {\n          return loadBalloonContent(self, api, editable);\n        },\n      },\n      show: {\n        ready: true,\n      },\n      hide: {\n        event: 'unfocus',\n        fixed: true,\n      },\n      events: {\n        hide: function(evt, api) {\n          if (evt.originalEvent && evt.originalEvent.type === 'mouseleave') {\n            evt.preventDefault();\n          }\n        },\n        render: function(e, api) {\n          api.elements.target.on('click', function() {\n            api.hide();\n          });\n        },\n      },\n      position: {\n        at: 'top center',\n        my: 'bottom center',\n        target: [evt.pageX, evt.pageY],\n        adjust: {\n          mouse: false,\n        },\n        effect: false,\n      },\n      style: {\n        classes:\n          'balloon-qtip ' +\n          (editable ? 'edit-mode' : 'display-mode') +\n          (isBreak ? ' no-details' : ''),\n      },\n    });\n  }\n}\n\ntype('TimetableBlockDisplayMixin', [], {\n  _drawPopup: function(evt) {\n    drawBalloon(this, evt, false);\n  },\n});\n\ntype(\n  'TimetableBlockManagementMixin',\n  ['DragAndDropBlockMixin'],\n  {\n    _drawPopup: function(evt) {\n      drawBalloon(this, evt, true);\n    },\n\n    _getRightSideDecorators: function() {\n      return this.arrows;\n    },\n\n    _drawArrows: function() {\n      var self = this;\n      var arrowUp = $('<a>', {class: 'i-link icon-collapse'});\n      var arrowDown = $('<a>', {class: 'i-link icon-expand'});\n\n      if (self.eventData.canSwapUp) {\n        arrowUp.attr('title', $T.gettext('Move up'));\n        arrowUp.on('click', function() {\n          self.managementActions.swapEntry(self.eventData, 'up');\n        });\n      } else {\n        arrowUp.addClass('disabled');\n      }\n\n      if (self.eventData.canSwapDown) {\n        arrowDown.attr('title', $T.gettext('Move down'));\n        arrowDown.on('click', function() {\n          self.managementActions.swapEntry(self.eventData, 'down');\n        });\n      } else {\n        arrowDown.addClass('disabled');\n      }\n\n      if (self.eventData.canSwapDown || self.eventData.canSwapUp) {\n        this.arrows = Html.div({className: 'entry-arrows'}, arrowUp.get(0), arrowDown.get(0));\n      }\n    },\n  },\n  function() {\n    var isParallel = this.timetable.isSessionTimetable\n      ? this.eventData.isParallelInSession\n      : this.eventData.isParallel;\n\n    if (!isParallel && (!this.timetable.isTopLevel || this.timetable.canManageBlocks)) {\n      this._drawArrows();\n    }\n    this.DragAndDropBlockMixin();\n  }\n);\n\ntype(\n  'TimetableBlockWholeDayDisplay',\n  ['TimetableBlockWholeDayBase', 'TimetableBlockDisplayMixin'],\n  {},\n  function(timetable, eventData, blockData) {\n    this.TimetableBlockWholeDayBase(timetable, eventData, blockData);\n  }\n);\n\ntype(\n  'TimetableBlockWholeDayManagement',\n  ['TimetableBlockWholeDayBase', 'TimetableBlockManagementMixin'],\n  {},\n  function(timetable, eventData, blockData, managementActions) {\n    this.TimetableBlockWholeDayBase(timetable, eventData, blockData);\n    this.managementActions = managementActions;\n    this.TimetableBlockManagementMixin();\n\n    this._getRightSideDecorators = TimetableBlockManagementMixin.prototype._getRightSideDecorators;\n    this._postDraw = TimetableBlockManagementMixin.prototype._postDraw;\n  }\n);\n\ntype(\n  'TimetableBlockNormalDisplay',\n  ['TimetableBlockNormal', 'TimetableBlockDisplayMixin'],\n  {},\n  function(timetable, eventData, blockData, compactMode, printableVersion, detailLevel) {\n    this.TimetableBlockNormal(\n      timetable,\n      eventData,\n      blockData,\n      compactMode,\n      printableVersion,\n      detailLevel\n    );\n  }\n);\n\ntype(\n  'TimetableBlockNormalManagement',\n  ['TimetableBlockNormal', 'TimetableBlockManagementMixin'],\n  {\n    _getTitle: function() {\n      var title = this.TimetableBlockNormal.prototype._getTitle.call(this);\n      return this.eventData.friendlyId >= 0 ? this.eventData.friendlyId + ' - ' + title : title;\n    },\n  },\n  function(\n    timetable,\n    eventData,\n    blockData,\n    compactMode,\n    printableVersion,\n    detailLevel,\n    managementActions\n  ) {\n    this.TimetableBlockNormal(\n      timetable,\n      eventData,\n      blockData,\n      compactMode,\n      printableVersion,\n      detailLevel\n    );\n    this.managementActions = managementActions;\n    this.TimetableBlockManagementMixin();\n\n    this._getRightSideDecorators = TimetableBlockManagementMixin.prototype._getRightSideDecorators;\n    this._postDraw = TimetableBlockManagementMixin.prototype._postDraw;\n  }\n);\n\n/*\n * An exclusive popup for showing the timetable of a session.\n * Is functional but needs more work in order to be useful.\n */\ntype(\n  'TimetablePopup',\n  ['ExclusivePopup'],\n  {\n    draw: function() {\n      var self = this;\n\n      var div = Html.div({style: {padding: pixels(30)}});\n\n      var timetable = new TimeTable(\n        {'20090617': {s420: this.eventData}},\n        710,\n        div,\n        'contribution',\n        false\n      );\n      div.set(timetable.draw());\n      timetable.postDraw();\n\n      return this.ExclusivePopup.prototype.draw.call(\n        this,\n        Html.div({style: {marginBottom: pixels(10)}}, div)\n      );\n    },\n  },\n  function(eventData, contributions, closeHandler) {\n    this.contributions = contributions;\n    this.eventData = eventData;\n    this.width = 500;\n\n    this.ExclusivePopup('Session timetable', closeHandler);\n  }\n);\n\ntype(\n  'TimetableDrawer',\n  ['IWidget', 'DroppableTimetableMixin'],\n  {\n    _minuteDifference: function(time1, time2) {\n      var t1 = parseInt(time1.substring(0, 2), 10) * 60 + parseInt(time1.substring(3, 6), 10);\n      var t2 = parseInt(time2.substring(0, 2), 10) * 60 + parseInt(time2.substring(3, 6), 10);\n\n      return t2 - t1;\n    },\n\n    _drawGrid: function(scale) {\n      var scaleDiv = Html.div({\n        id: 'timetable_grid',\n        style: {\n          position: 'relative',\n          top: pixels(TimetableDefaults.topMargin),\n        },\n      });\n\n      var last = scale[scale.length - 1][0];\n\n      for (var n = 0; n < scale.length; ++n) {\n        var hour = scale[n][0];\n        var px = scale[n][1];\n\n        if (scale[n].length > 2) {\n          scaleDiv.append(\n            Html.div({\n              style: {\n                position: 'absolute',\n                top: pixels(px),\n                width: pixels(this.width),\n                height: hour == last ? '0px' : scale[n + 1][1] - px,\n                borderTop: '1px dotted red',\n                fontSize: '11px',\n              },\n            })\n          );\n          continue;\n        }\n\n        var hourLineDiv = Html.div(\n          {\n            id: 'hourLine_' + parseInt(hour),\n            className: 'hourLine',\n            style: {\n              top: pixels(px),\n              width: pixels(this.width),\n              height: hour == last ? '20px' : scale[n + 1][1] - px,\n            },\n          },\n          zeropad(hour) + ':00'\n        );\n\n        this.make_droppable($(hourLineDiv.dom), parseInt(hour));\n\n        scaleDiv.append(hourLineDiv);\n      }\n      return Html.div({}, this.layoutChooser.get().getHeader(this.width), scaleDiv);\n    },\n\n    _drawWholeDayBlocks: function(data, blocks) {\n      var self = this;\n\n      var wholeDayBlockDiv = Html.div({\n        style: {\n          position: 'relative',\n          marginTop: pixels(TimetableDefaults.topMargin),\n          top: pixels(10),\n          marginLeft: pixels(TimetableDefaults.leftMargin),\n          marginRight: pixels(TimetableDefaults.rightMargin),\n        },\n      });\n\n      self.wholeDayBlocks = [];\n\n      var blockAdded = false;\n      each(blocks, function(blockData) {\n        var eventData = data[blockData.id];\n\n        var block;\n        if (self.managementMode) {\n          block = new TimetableBlockWholeDayManagement(\n            self.timetable,\n            eventData,\n            blockData,\n            self.managementActions\n          );\n        } else {\n          block = new TimetableBlockWholeDayDisplay(self.timetable, eventData, blockData);\n        }\n        wholeDayBlockDiv.append(block.draw(0, 100));\n        blockAdded = true;\n      });\n\n      return blockAdded ? wholeDayBlockDiv : Html.div({});\n    },\n\n    _drawBlocks: function(data, blocks, groups) {\n      var self = this;\n      var colN = 0;\n\n      var blockDiv = Html.div({\n        style: {\n          position: 'relative',\n          top: pixels(TimetableDefaults.topMargin),\n        },\n      });\n      this.blocks = [];\n      this._blockMap = {};\n\n      each(blocks, function(blockData) {\n        var nCol = self.layoutChooser.get().getNumColumnsForGroup(groups[blockData.group]);\n        self.maxCol = self.maxCol == null || self.maxCol < nCol ? nCol : self.maxCol;\n\n        var colWidth = Math.floor((self.width - TimetableDefaults.leftMargin) / nCol);\n\n        var leftPos = TimetableDefaults.leftMargin + colWidth * blockData.assigned;\n\n        var width;\n        if (parseInt(blockData.assigned, 10) == nCol - 1) {\n          // If last colument make sure the blocks spans all the way to the end\n          // of the timetable. Makes sure that the right margin is always aligned.\n          width = self.width - leftPos - TimetableDefaults.rightMargin;\n        } else {\n          width = colWidth;\n        }\n\n        var eventData = data[blockData.id];\n        var block;\n        var compactMode = false;\n        // For now don't use the compact mode. Activating it makes short entries displaying less\n        // information in the block (only time and title).\n        //if (blockData.collapsed || (blockData.end - blockData.start < TimetableDefaults.layouts.proportional.values.pxPerHour))\n        //    compactMode = true;\n\n        if (self.managementMode) {\n          block = new TimetableBlockNormalManagement(\n            self.timetable,\n            eventData,\n            blockData,\n            compactMode,\n            self.printableVersion,\n            self.detail.get(),\n            self.managementActions\n          );\n        } else {\n          block = new TimetableBlockNormalDisplay(\n            self.timetable,\n            eventData,\n            blockData,\n            compactMode,\n            self.printableVersion,\n            self.detail.get()\n          );\n        }\n        blockDiv.append(block.draw(leftPos, width));\n        self._blockMap[blockData.id] = block.block.dom;\n        self.blocks.push(block);\n      });\n\n      return blockDiv;\n    },\n\n    setLayout: function(layout) {\n      this.layout.set(layout);\n      this.layoutChooser.set(layout);\n    },\n\n    redraw: function(day) {\n      if (this.preventRedraw) {\n        return;\n      }\n\n      this.timetable.redrawLegend();\n\n      day = any(day, this.day);\n      if (day == 'all') {\n        this.redrawAllDays();\n        return;\n      }\n\n      var dayFiltered = this.applyFilters(this.data[day]);\n\n      if (this.detail.get() == 'contribution') {\n        dayFiltered = this.flatten(dayFiltered);\n      }\n\n      var dayData = this.layoutChooser\n        .get()\n        .drawDay(dayFiltered, 'session', this.startTime, this.endTime, this.managementMode);\n      var height = dayData[0] + TimetableDefaults.topMargin + TimetableDefaults.bottomMargin;\n      this.wrappingElement.setStyle('height', pixels(height + (this.printableVersion ? 0 : 100))); // +100 to have margin for the tabs\n\n      this.grid.length = 0;\n      $.merge(this.grid, dayData[1]);\n\n      var gridElems = this._drawGrid(this.grid);\n      var blocks = this._drawBlocks(dayFiltered, dayData[2], dayData[3]);\n      var wholeDayBlocks = this._drawWholeDayBlocks(dayFiltered, dayData[4]);\n\n      // Only do if not all days are drawn\n      this.canvas.set([\n        wholeDayBlocks,\n        Html.div({style: {position: 'relative'}}, gridElems, blocks),\n      ]);\n      var totalHeight = height + wholeDayBlocks.dom.offsetHeight;\n\n      this.canvas.dom.style.height = pixels(totalHeight);\n\n      this.postDraw();\n\n      $('body').trigger('timetable_redraw', this);\n\n      return totalHeight;\n    },\n\n    setPrintableVersion: function(printableVersion) {\n      this.printableVersion = printableVersion;\n      this.redraw();\n    },\n\n    postDraw: function() {\n      each(this.blocks, function(block) {\n        if (exists(block.postDraw)) {\n          block.postDraw();\n        }\n      });\n    },\n\n    flatten: function(data) {\n      var result = {};\n      each(data, function(entry, key) {\n        // sessions that are not poster sessions will be\n        // 'converted' to contributions\n        if (entry.entryType == 'Session' && !entry.isPoster && keys(entry.entries).length > 0) {\n          each(entry.entries, function(subentry, subkey) {\n            result[subkey] = clone(subentry);\n            result[subkey].color = subentry.entryType == 'Break' ? subentry.color : entry.color;\n            result[subkey].textColor =\n              subentry.entryType == 'Break' ? subentry.textColor : entry.textColor;\n          });\n        } else {\n          result[key] = entry;\n        }\n      });\n\n      return result;\n    },\n\n    drawDay: function(day) {\n      this.day = day;\n\n      this.preventRedraw = true;\n      this.updateFilters(day);\n      this.preventRedraw = false;\n\n      this.setLoading(true, this.redraw, day);\n\n      return this.canvas;\n    },\n\n    drawAllDays: function() {\n      this.day = 'all';\n\n      this.preventRedraw = true;\n      this.updateFilters('all');\n      this.preventRedraw = false;\n\n      this.setLoading(true, this.redrawAllDays);\n\n      return this.canvas;\n    },\n\n    redrawAllDays: function() {\n      var self = this;\n\n      var days = [];\n      // Add the elements to an array and sort it based on date\n      each(this.data.all, function(value, key) {\n        if (key != 'all') {\n          value.date = key;\n          days.push(value);\n        }\n      });\n      days.sort(function(a, b) {\n        if (a.date > b.date) {\n          return 1;\n        }\n        return -1;\n      });\n\n      var div = Html.div({});\n      var height = 0;\n      var headerHeight = 0;\n\n      // Retrieve the header height by adding it to the dom tree and then\n      // removing it... is there a better way?\n      var header = Html.div({className: 'timetableHeader', style: {visibility: 'hidden'}}, 'Test');\n      self.wrappingElement.append(header);\n      headerHeight = header.dom.offsetHeight + 20; // 20 is the top margin\n      self.wrappingElement.remove(header);\n\n      var firstDay = true;\n      each(days, function(value) {\n        var day = value.date;\n        delete value.date;\n        var h = self.redraw(day);\n\n        // Copy all the elements in canvas\n        var elements = translate(self.canvas.dom.childNodes, function(value) {\n          return $E(value);\n        });\n        var dayCanvas = Html.div({style: {position: 'relative', height: pixels(h)}}, elements);\n\n        // Add a div containing the date\n        var headerStyle = {width: pixels(self.width - 10)}; // substract the padding\n        if (self.printableVersion) {\n          headerStyle.textAlign = 'center';\n          headerStyle.borderBottom = '0';\n        } else if (firstDay) {\n          headerStyle.marginTop = '0';\n        }\n\n        var nDate = Util.parseJSDateTime(day, IndicoDateTimeFormats.Ordinal);\n        var dayStr =\n          Indico.Data.WeekDays[nDate.getDay()].substring(0, 3) +\n          ' ' +\n          nDate.getDate() +\n          '/' +\n          (nDate.getMonth() + 1);\n\n        header = Html.div({className: 'timetableHeader', style: headerStyle}, dayStr);\n        div.append(header);\n        // Add the timetable canvas\n        div.append(dayCanvas);\n\n        // Increase total height with this day's height + height of div containing the date\n        height += h + headerHeight;\n\n        firstDay = false;\n      });\n      // The extra margin added to the height, if not printable version\n      // then the height of the tabs needs to be added\n      var margin = 30 + (self.printableVersion ? 0 : 100);\n      self.wrappingElement.setStyle('height', pixels(height + margin));\n\n      this.canvas.set(div);\n\n      return this.canvas;\n    },\n\n    setWidth: function(width) {\n      this.width = width;\n    },\n\n    applyFilters: function(data) {\n      var result = {};\n      var self = this;\n\n      each(data, function(event, key) {\n        var show = true;\n        self.filterState.each(function(value, filterName) {\n          if (value) {\n            var filter = TimetableDefaults.filters[filterName].filter;\n            if (!filter.apply(event)) {\n              show = false;\n            }\n          }\n        });\n        if (show) {\n          result[key] = event;\n        }\n      });\n\n      return result;\n    },\n    updateFilters: function() {\n      var self = this;\n\n      self.filterState.each(function(value, filterName) {\n        if (value) {\n          TimetableDefaults.filters[filterName].filter.setData(self.data, self.day);\n        }\n      });\n    },\n    /*\n     * Since the loading indicator needs to be shown before the rest of the code\n     * is executed a small timeout is added before calling the funcToCall.\n     */\n    setLoading: function(loading, funcToCall, arg) {\n      var self = this;\n      funcToCall = any(funcToCall, function() {});\n      this.loading += loading ? 1 : -1;\n\n      if (this.loading > 0) {\n        this.loadingIndicator.dom.style.visibility = 'visible';\n        setTimeout(function() {\n          // call redraw function\n          funcToCall.call(self, arg);\n          $('body').trigger('timetable_ready', self.timetable);\n          self.setLoading(false);\n        }, 100);\n      } else {\n        this.loadingIndicator.dom.style.visibility = 'hidden';\n        this.loading = 0;\n      }\n    },\n    setData: function(data, startTime, endTime) {\n      this.startTime = startTime;\n      this.endTime = endTime;\n      this.data = data;\n      this.redraw();\n    },\n    toggleEvents: function(value) {\n      if (value === undefined) {\n        this.eventsDisabled = !this.eventsDisabled;\n      } else {\n        this.eventsDisabled = !value;\n      }\n    },\n  },\n  function(\n    timetable,\n    width,\n    wrappingElement,\n    detailLevel,\n    extraButtons,\n    loadingIndicator,\n    managementMode,\n    managementActions,\n    defaultLayout\n  ) {\n    var self = this;\n\n    this.grid = [];\n    this.wrappingElement = wrappingElement;\n    this.canvas = Html.div({id: 'timetable_canvas'});\n    this.filterList = new WatchList();\n    this.data = timetable.data;\n    this.timetable = timetable;\n    this.blocks = [];\n    this.width = width;\n    // Prevents redraw when set to true\n    this.preventRedraw = false;\n    // Used to switch between normal and printable version\n    this.printableVersion = false;\n\n    // layoutKey -> layoutManager map\n    this.layoutChooser = new Chooser(\n      map(TimetableDefaults.layouts, function(value, key) {\n        return value.manager;\n      })\n    );\n\n    this.detail = new WatchValue();\n    this.layout = new WatchValue();\n    // if greater > 0 the timetable is loading\n    this.loading = 0;\n    this.loadingIndicator = loadingIndicator;\n\n    this.managementMode = managementMode;\n    this.managementActions = managementActions;\n\n    // default layout is 'compact'\n    this.layout.set(any(defaultLayout, 'compact'));\n    this.layoutChooser.set(any(defaultLayout, 'compact'));\n    // default detail level is 'session'\n    this.detail.set(any(detailLevel, 'session'));\n    this.eventsDisabled = false;\n\n    var filterState = map(TimetableDefaults.filters, function(value, key) {\n      // simultaneously, set the data for the filters\n      //value.filter.setData(data);\n      return true;\n    });\n\n    // create a filterName -> filterObject list\n    this.filterState = $O(filterState);\n\n    this.detail.observe(function(value) {\n      if (!self.preventRedraw) {\n        self.setLoading(true, self.redraw);\n      }\n    });\n\n    this.layout.observe(function(value) {\n      self.layoutChooser.set(value);\n      if (!self.preventRedraw) {\n        self.setLoading(true, self.redraw);\n      }\n    });\n\n    this.DroppableTimetableMixin();\n  }\n);\n\ntype(\n  'IntervalTimetableDrawer',\n  ['TimetableDrawer'],\n  {\n    posterRedraw: function() {\n      // TO USE: in a future interval timetable for display mode.\n      //var dayFiltered = this.applyFilters(this.data[this.day]);\n      //var dayData = this.layoutChooser.get().drawDay(dayFiltered);\n      var dayData = this.layoutChooser.get().drawDay(this.data[this.day]);\n      var blocks = this._posterBlocks(dayData);\n      this.canvas.set(Html.div({style: {position: 'relative'}}, blocks));\n\n      var height =\n        this.canvas.dom.clientHeight +\n        50 +\n        TimetableDefaults.topMargin +\n        TimetableDefaults.bottomMargin;\n\n      this.wrappingElement.setStyle('height', pixels(height + (this.printableVersion ? 0 : 100))); // +100 to have margin for the tabs\n\n      this.postDraw();\n\n      return height;\n    },\n\n    redraw: function() {\n      if (this.isPoster) {\n        return this.posterRedraw();\n      } else {\n        return this.TimetableDrawer.prototype.redraw.call(this);\n      }\n    },\n\n    _posterBlocks: function(data) {\n      data = _.sortBy(data, function(d) {\n        return [d.startDate.date, d.startDate.time, d.title];\n      });\n      var self = this;\n\n      var blockDiv = Html.div({\n        style: {\n          position: 'relative',\n          top: pixels(TimetableDefaults.topMargin),\n        },\n      });\n\n      self.blocks = [];\n      var topPx = 0;\n      each(data, function(blockData, id) {\n        function createEditLink(blockData) {\n          var link = $('<a>', {\n            class: 'i-link icon-edit',\n            title: $T.gettext('Edit'),\n            data: {\n              title: $T.gettext('Edit poster'),\n              confId: blockData.conferenceId,\n              timetableEntryId: blockData.scheduleEntryId,\n            },\n          }).on('click', function(evt, params) {\n            var $this = $(this);\n            var urlArgs = {\n              confId: $this.data('confId'),\n              entry_id: $this.data('timetableEntryId'),\n            };\n            if (self.timetable.isSessionTimetable) {\n              urlArgs.session_id = self.timetable.contextInfo.sessionId;\n            }\n            ajaxDialog({\n              trigger: this,\n              url: build_url(Indico.Urls.Timetable.entries.edit, urlArgs),\n              title: $this.data('title'),\n              onClose: function(data) {\n                if (data) {\n                  handleNotifications(data);\n                  self.timetable._updateDay(data.update);\n                }\n              },\n            });\n          });\n\n          return Html.$(link);\n        }\n\n        function createProtectionLink(blockData) {\n          var link = $('<a>', {\n            class: 'i-link icon-shield',\n            title: $T.gettext('Manage protection'),\n            data: {\n              title: $T.gettext('Manage poster protection'),\n              confId: blockData.conferenceId,\n              contribId: blockData.contributionId,\n            },\n          }).on('click', function(evt) {\n            var $this = $(this);\n            var urlArgs = {\n              confId: $this.data('confId'),\n              contrib_id: $this.data('contribId'),\n            };\n            ajaxDialog({\n              trigger: this,\n              url: build_url(Indico.Urls.Timetable.contributions.protection, urlArgs),\n              title: $this.data('title'),\n              onClose: function(data) {\n                if (data && data.entries) {\n                  self.managementActions._addEntries(data.entries);\n                }\n              },\n            });\n          });\n\n          return Html.$(link);\n        }\n\n        function createDeleteLink(blockData) {\n          var tooltipText, dialogTitle, dialogText;\n          if (self.timetable.eventInfo.isConference) {\n            tooltipText = $T.gettext('Unschedule');\n            dialogTitle = $T.gettext('Unschedule poster');\n            dialogText = $T.gettext('Are you sure you want to unschedule the poster?');\n          } else {\n            tooltipText = $T.gettext('Delete');\n            dialogTitle = $T.gettext('Delete poster');\n            dialogText = $T.gettext('Are you sure you want to delete the poster?');\n          }\n          var link = $('<a>', {\n            class: 'i-link icon-remove',\n            title: tooltipText,\n            data: {\n              title: dialogTitle,\n              confirm: dialogText,\n            },\n          }).on('click', function(evt) {\n            confirmPrompt($(this).data('confirm'), $(this).data('title')).then(function() {\n              self.managementActions.deleteEntry(blockData);\n            });\n          });\n\n          return Html.$(link);\n        }\n\n        var entryTools = Html.div({className: 'group right'});\n        if (!self.timetable.isSessionTimetable || self.timetable.canManageContribs) {\n          entryTools.append(createEditLink(blockData));\n          entryTools.append(createProtectionLink(blockData));\n        }\n        if (self.timetable.eventInfo.isConference || self.timetable.canManageContribs) {\n          entryTools.append(createDeleteLink(blockData));\n        }\n        var entryInfo = Html.div({}, blockData.friendlyId + ' - ' + blockData.title);\n        var block = Html.div({className: 'posterEntry'}, entryTools, entryInfo, Html.div({}));\n        blockDiv.append(block);\n        self.blocks.push(block);\n      });\n\n      return blockDiv;\n    },\n\n    setData: function(data, day, isPoster) {\n      this.isPoster = isPoster;\n      this.day = day;\n      if (this.isPoster) {\n        this.setLayout('poster');\n      } else {\n        this.setLayout(this.layout.get());\n      }\n      this.TimetableDrawer.prototype.setData.call(this, data);\n    },\n  },\n  function(\n    data,\n    width,\n    wrappingElement,\n    extraButtons,\n    loadingIndicator,\n    managementMode,\n    managementActions,\n    layout\n  ) {\n    this.TimetableDrawer(\n      data,\n      width,\n      wrappingElement,\n      'session',\n      extraButtons,\n      loadingIndicator,\n      managementMode,\n      managementActions,\n      data.isPoster ? 'poster' : 'proportional'\n    );\n    this.wrappingElement = data.parentTimetable.timetableDrawer.wrappingElement;\n  }\n);\n\n(function() {\n  'use strict';\n\n  $(document).on('qbubble:ajaxload', '.balloon-qtip.display-mode:not(.no-details)', function() {\n    var $description = $(this).find('.description');\n    $description.on('click', function(e) {\n      var newTab = e.which == 2; // Middle click\n      var url = $(this).data('displayHref');\n      if (newTab) {\n        window.open(url, '_blank');\n      } else {\n        window.location.href = url;\n      }\n    });\n  });\n})();\n"},function(n,e,t){t(205)(t(1860))},function(n,e){n.exports="// This file is part of Indico.\n// Copyright (C) 2002 - 2021 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\ntype(\n  'TimetableManagementActions',\n  [],\n  {\n    deleteEntry: function(eventData) {\n      var self = this;\n      var info = new WatchObject();\n\n      info.set('scheduleEntry', eventData.scheduleEntryId);\n      info.set('conference', eventData.conferenceId);\n      info.set('sessionTimetable', self.isSessionTimetable);\n\n      var urlArgs = {\n        confId: eventData.conferenceId,\n        entry_id: eventData.scheduleEntryId,\n      };\n      if (self.timetable.isSessionTimetable) {\n        urlArgs.session_id =\n          self.timetable.contextInfo.sessionId || self.timetable.contextInfo.timetableSession.id;\n      }\n      $.ajax({\n        url: build_url(Indico.Urls.Timetable.entries.delete, urlArgs),\n        method: 'POST',\n        complete: IndicoUI.Dialogs.Util.progress(),\n        error: function(xhr) {\n          if (xhr.status == 404) {\n            handleErrorResponse(xhr);\n          } else {\n            handleAjaxError(xhr);\n          }\n        },\n        success: function(data) {\n          if (data) {\n            self.timetable._updateDay(data.update);\n          }\n        },\n      });\n    },\n\n    /*\n     * Edit start and end date. date format has to be dd/mm/yy mm:hh\n     */\n    editEntryStartEndDate: function(startDate, endDate, eventData, shift, undo) {\n      var self = this;\n      var urlArgs = {\n        confId: eventData.conferenceId,\n        entry_id: eventData.scheduleEntryId,\n      };\n\n      if (self.isSessionTimetable) {\n        urlArgs.session_id =\n          self.timetable.contextInfo.sessionId || self.timetable.contextInfo.timetableSession.id;\n      }\n\n      return $.ajax({\n        url: build_url(Indico.Urls.Timetable.entries[shift ? 'shift' : 'editDatetime'], urlArgs),\n        method: 'POST',\n        data: {startDate: startDate, endDate: endDate},\n        error: function(xhr) {\n          handleAjaxError(xhr);\n          self.timetable.timetableDrawer.redraw();\n        },\n        complete: IndicoUI.Dialogs.Util.progress(),\n        success: function(data) {\n          if (undo) {\n            self.timetable.enableUndo(undo, {eventData: eventData, shifted: shift});\n          }\n          if (data) {\n            handleNotifications(data);\n            self.timetable._updateDay(data.update);\n          }\n        },\n      });\n    },\n\n    /* Takes care of moving a contribution/timeblock to another session/timetable.\n     * This goes for both \"drag and drop\" as well as the regular \"MoveEntry Dialog clicking\"*/\n    moveToSession: function(eventData, data, undo, newTime) {\n      var self = this;\n\n      // if nothing has been selected yet\n      if (!data) {\n        return false;\n      }\n\n      var urlArgs = {\n        confId: eventData.conferenceId,\n        entry_id: eventData.scheduleEntryId,\n      };\n      if (self.isSessionTimetable) {\n        urlArgs.session_id = self.timetable.contextInfo.sessionId;\n      }\n\n      return $.ajax({\n        url: build_url(Indico.Urls.Timetable.entries.move, urlArgs),\n        method: 'POST',\n        data: JSON.stringify(data),\n        dataType: 'json',\n        contentType: 'application/json',\n        error: function(xhr) {\n          handleAjaxError(xhr);\n          self.timetable.timetableDrawer.redraw();\n        },\n        complete: IndicoUI.Dialogs.Util.progress(),\n        success: function(data) {\n          if (undo) {\n            self.timetable.enableUndo(undo, {eventData: eventData, entry: data.entry}, null);\n          }\n\n          self.timetable._updateMovedEntry(data.entry, data.entry.old.id);\n          handleNotifications(data);\n        },\n      });\n    },\n\n    switchToIntervalTimetable: function(intervalId) {\n      this.timetable.switchToInterval(intervalId);\n    },\n\n    /*\n     * Translate the date string with format yyyymmdd into a javascript\n     * Date object.\n     */\n    _dateStr2Date: function(dateStr) {\n      var year = parseInt(dateStr.substr(0, 4), 10);\n      var month = parseInt(dateStr.substr(4, 2), 10);\n      var day = parseInt(dateStr.substr(6, 2), 10);\n\n      return new Date(year, month - 1, day);\n    },\n\n    _addParams: function(type) {\n      return {\n        startDate: Util.formatDateTime(this.eventInfo.startDate, IndicoDateTimeFormats.Server),\n        selectedDay: Util.formatDateTime(\n          this._dateStr2Date(this.timetable.currentDay),\n          IndicoDateTimeFormats.Server.slice(0, 8)\n        ),\n        roomInfo: {\n          location: this.eventInfo.location,\n          room: this.eventInfo.room,\n          address: this.eventInfo.address,\n        },\n        conference: this.eventInfo.id,\n        sessionTimetable: any(this.isSessionTimetable, false),\n        type: type,\n        parentType: 'Event',\n      };\n    },\n    _addToSessionParams: function(session, type) {\n      var params = this._addParams(type);\n\n      if (type != 'SessionSlot') {\n        // If it's not for a session slot, we take the location from the session\n        params.roomInfo = {\n          location: session.location,\n          room: session.room,\n          address: session.address,\n        };\n      }\n\n      params.sessionConveners = session.sessionConveners;\n\n      // If sessionId exists then use that value, otherwise just use the id\n      // This is needed since the session can either be an entry in the timetable\n      // or an entry in this.eventInfo.session.\n      params.session = exists(session.sessionId) ? session.sessionId : session.id;\n      if (type != 'SessionSlot') {\n        params.slot = session.sessionSlotId;\n        params.type = 'Session' + params.type;\n      }\n\n      params.parentType = type == 'SessionSlot' ? 'Session' : 'SessionSlot';\n\n      return params;\n    },\n\n    addContribution: function() {\n      var self = this;\n      var params;\n\n      if (this.session !== null) {\n        params = this._addToSessionParams(this.session, 'Contribution');\n      } else {\n        params = this._addParams('Contribution');\n      }\n\n      var canCreateNew = !self.isSessionTimetable || self.timetable.canManageSession;\n      var dialog = new AddContributionDialog(\n        $O(params),\n        this.timetable,\n        function(result) {\n          handleNotifications(result);\n          self._addEntries(result.entries);\n        },\n        canCreateNew\n      );\n\n      dialog.execute();\n    },\n\n    addBreak: function() {\n      var self = this;\n      var params = self._addParams();\n      var urlArgs = {\n        confId: self.eventInfo.id,\n        day: params.selectedDay,\n      };\n      if (self.session !== null) {\n        urlArgs.session_block_id = self.session.sessionSlotId;\n      }\n      if (self.isSessionTimetable) {\n        urlArgs.session_id = self.timetable.contextInfo.sessionId;\n      }\n      ajaxDialog({\n        trigger: self,\n        url: build_url(Indico.Urls.Timetable.breaks.add, urlArgs),\n        title: $T.gettext('Add break'),\n        onClose: function(data) {\n          if (data) {\n            handleNotifications(data);\n            self.timetable._updateDay(data.update);\n          }\n        },\n      });\n    },\n\n    addSession: function() {\n      var self = this;\n      var params = this._addParams('Session');\n      ajaxDialog({\n        trigger: this,\n        url: build_url(Indico.Urls.Timetable.sessions.add, {confId: params.conference}),\n        title: $T.gettext('Add session'),\n        onClose: function(data) {\n          if (data) {\n            handleNotifications(data);\n            self.timetable.eventInfo.sessions[data.session.id] = data.session;\n\n            if (data.success) {\n              self.addSessionSlot(data.session);\n            }\n          }\n        },\n      });\n    },\n\n    addSessionSlot: function(session) {\n      var self = this;\n      var params = this._addToSessionParams(session, 'SessionSlot');\n      var urlArgs = {\n        confId: params.conference,\n        day: params.selectedDay,\n        parent_session_id: params.session,\n      };\n      if (self.isSessionTimetable) {\n        urlArgs.session_id = self.timetable.contextInfo.timetableSession.id;\n      }\n      ajaxDialog({\n        trigger: this,\n        url: build_url(Indico.Urls.Timetable.sessionBlocks.add, urlArgs),\n        title: $T.gettext('Add session block'),\n        onLoadError: function(xhr) {\n          if (xhr.status == 404) {\n            handleErrorResponse(xhr);\n          } else {\n            handleAjaxError(xhr);\n          }\n\n          return false;\n        },\n        onError: function(xhr) {\n          if (xhr.status == 404) {\n            handleErrorResponse(xhr);\n            $(this).trigger('ajaxDialog:close');\n          } else {\n            handleAjaxError(xhr);\n          }\n        },\n        onClose: function(data) {\n          if (data) {\n            handleNotifications(data);\n            self.timetable._updateDay(data.update);\n          }\n        },\n      });\n    },\n\n    swapEntry: function(eventData, direction) {\n      var self = this;\n      var info = this._getLocatorParams(eventData);\n\n      info.set('direction', direction);\n\n      if (exists(eventData.sessionId)) {\n        info.set('session', eventData.sessionId);\n        info.set('slot', eventData.sessionSlotId);\n      }\n\n      var urlArgs = {\n        confId: eventData.conferenceId,\n        entry_id: eventData.scheduleEntryId,\n      };\n\n      if (self.timetable.isSessionTimetable) {\n        urlArgs.session_id =\n          self.timetable.contextInfo.sessionId || self.timetable.contextInfo.timetableSession.id;\n      }\n\n      $.ajax({\n        url: build_url(Indico.Urls.Timetable.entries.swap, urlArgs),\n        method: 'POST',\n        data: info.getAll(),\n        error: handleAjaxError,\n        complete: IndicoUI.Dialogs.Util.progress(),\n        success: function(data) {\n          if (data) {\n            self.timetable._updateDay(data.update);\n          }\n        },\n      });\n    },\n\n    /*\n     * Iterates through entries and adds all of them\n     */\n    _addEntries: function(entries) {\n      var self = this;\n      each(entries, function(update) {\n        self.timetable._updateDay(update);\n      });\n    },\n  },\n  function(timetable, eventInfo, isSessionTimetable) {\n    this.timetable = timetable;\n    this.eventInfo = eventInfo;\n    this.isSessionTimetable = isSessionTimetable;\n  }\n);\n\ntype(\n  'TopLevelTimeTableManagementActions',\n  ['TimetableManagementActions'],\n  {\n    _getLocatorParams: function(eventData) {\n      var info = new WatchObject();\n      info.set('scheduleEntryId', eventData.scheduleEntryId);\n      info.set('conference', eventData.conferenceId);\n\n      if (this.isSessionTimetable) {\n        info.set('sessionTimetable', this.isSessionTimetable);\n        info.set('sessionId', eventData.sessionId);\n      }\n\n      return info;\n    },\n  },\n  function(timetable, eventInfo, contextInfo, isSessionTimetable) {\n    this.TimetableManagementActions(timetable, eventInfo, isSessionTimetable);\n    this.session = null;\n  }\n);\n\ntype(\n  'IntervalTimeTableManagementActions',\n  ['TimetableManagementActions'],\n  {\n    _getLocatorParams: function(eventData) {\n      var info = new WatchObject();\n      info.set('scheduleEntryId', eventData.scheduleEntryId);\n      info.set('conference', eventData.conferenceId);\n      info.set('sessionId', eventData.sessionId);\n      info.set('sessionSlotId', eventData.sessionSlotId);\n\n      return info;\n    },\n  },\n  function(timetable, eventInfo, intervalInfo, isSessionTimetable) {\n    this.TimetableManagementActions(timetable, eventInfo, isSessionTimetable);\n    this.session = intervalInfo;\n  }\n);\n"},function(n,e,t){},function(n,e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(n,e,t){"use strict";t.r(e);t(1335),t(1757),t(1759),t(1761),t(1763),t(1765),t(1767),t(1769),t(1771),t(1773),t(1775),t(1777),t(1779),t(1781),t(1783),t(1785),t(1787),t(1789),t(1791),t(1793),t(1795),t(1797),t(1799),t(1801),t(1803),t(1805),t(1807),t(1809),t(1811),t(1813),t(1815),t(1817),t(1819),t(1821),t(1823),t(1825),t(1827),t(1829),t(1831),t(1833),t(1835),t(1837),t(1839),t(1841),t(1843),t(1845),t(1847),t(1849),t(1851),t(1853),t(1855),t(1857),t(1859),t(1861),t(1503),t(1862),t(307);var r=t(212);window.showErrorDialog=function(n){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(r.a)(n,e)}}]);
//# sourceMappingURL=main.861b13fa.bundle.js.map